"use strict";(self.webpackChunkawesome_notes=self.webpackChunkawesome_notes||[]).push([[1996],{9987:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Web/JavaScript/JavaScriptAPINotes","title":"JavaScript API Notes","description":"BOM","source":"@site/notes/Web/JavaScript/JavaScriptAPINotes.md","sourceDirName":"Web/JavaScript","slug":"/Web/JavaScript/JavaScriptAPINotes","permalink":"/awesome-notes/Web/JavaScript/JavaScriptAPINotes","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/awesome-notes/edit/main/notes/Web/JavaScript/JavaScriptAPINotes.md","tags":[{"inline":true,"label":"Web","permalink":"/awesome-notes/tags/web"},{"inline":true,"label":"JavaScript","permalink":"/awesome-notes/tags/java-script"},{"inline":true,"label":"ECMAScript","permalink":"/awesome-notes/tags/ecma-script"},{"inline":true,"label":"BOM","permalink":"/awesome-notes/tags/bom"},{"inline":true,"label":"DOM","permalink":"/awesome-notes/tags/dom"}],"version":"current","lastUpdatedBy":"renovate[bot]","lastUpdatedAt":1732127335000,"frontMatter":{"author":"Sabertazimi","authorTitle":"Web Developer","authorURL":"https://github.com/sabertazimi","authorImageURL":"https://github.com/sabertazimi.png","tags":["Web","JavaScript","ECMAScript","BOM","DOM"]},"sidebar":"tutorialSidebar","previous":{"title":"HTML Basic Notes","permalink":"/awesome-notes/Web/HTML/HTMLBasicNotes"},"next":{"title":"JavaScript Advanced Notes","permalink":"/awesome-notes/Web/JavaScript/JavaScriptAdvancedNotes"}}');var r=t(5105),l=t(842);const i={author:"Sabertazimi",authorTitle:"Web Developer",authorURL:"https://github.com/sabertazimi",authorImageURL:"https://github.com/sabertazimi.png",tags:["Web","JavaScript","ECMAScript","BOM","DOM"]},o="JavaScript API Notes",c={},d=[{value:"BOM",id:"bom",level:2},{value:"Window",id:"window",level:3},{value:"Location",id:"location",level:3},{value:"Navigator",id:"navigator",level:3},{value:"Web Online API",id:"web-online-api",level:4},{value:"Web Connection API",id:"web-connection-api",level:4},{value:"Web Protocol Handler API",id:"web-protocol-handler-api",level:4},{value:"Web Battery Status API",id:"web-battery-status-api",level:4},{value:"Web Storage Estimate API",id:"web-storage-estimate-api",level:4},{value:"Web Geolocation API",id:"web-geolocation-api",level:4},{value:"Navigator User Agent",id:"navigator-user-agent",level:4},{value:"Screen",id:"screen",level:3},{value:"History",id:"history",level:3},{value:"History Navigation",id:"history-navigation",level:4},{value:"History State Management",id:"history-state-management",level:4},{value:"Browser Compatibility",id:"browser-compatibility",level:3},{value:"User Agent Detection",id:"user-agent-detection",level:4},{value:"Browser Feature Detection",id:"browser-feature-detection",level:4},{value:"DOM",id:"dom",level:2},{value:"DOM Core",id:"dom-core",level:3},{value:"DOM Node Type",id:"dom-node-type",level:4},{value:"DOM Attribute Node",id:"dom-attribute-node",level:4},{value:"DOM Text Node",id:"dom-text-node",level:4},{value:"DOM Document Node",id:"dom-document-node",level:4},{value:"DOM Document Type Node",id:"dom-document-type-node",level:4},{value:"DOM Document Fragment Node",id:"dom-document-fragment-node",level:4},{value:"DOM Programming",id:"dom-programming",level:3},{value:"Append DOM Node",id:"append-dom-node",level:4},{value:"Insert DOM Node",id:"insert-dom-node",level:4},{value:"Replace DOM Node",id:"replace-dom-node",level:4},{value:"Remove DOM Node",id:"remove-dom-node",level:4},{value:"Traverse DOM Node",id:"traverse-dom-node",level:4},{value:"Attributes DOM Node",id:"attributes-dom-node",level:4},{value:"Select DOM Node",id:"select-dom-node",level:4},{value:"Dynamic Scripts Loading",id:"dynamic-scripts-loading",level:4},{value:"Dynamic Styles Loading",id:"dynamic-styles-loading",level:4},{value:"Table Manipulation",id:"table-manipulation",level:4},{value:"Iframe",id:"iframe",level:4},{value:"CSSOM",id:"cssom",level:3},{value:"Inline Styles",id:"inline-styles",level:4},{value:"Styles Getter and Setter",id:"styles-getter-and-setter",level:4},{value:"Computed Styles",id:"computed-styles",level:4},{value:"CSS Class List",id:"css-class-list",level:4},{value:"DOM StyleSheets API",id:"dom-stylesheets-api",level:4},{value:"CSS Rules Definition",id:"css-rules-definition",level:5},{value:"Media Rules",id:"media-rules",level:5},{value:"Keyframe Rules",id:"keyframe-rules",level:5},{value:"Manipulate CSS Rules",id:"manipulate-css-rules",level:5},{value:"CSS Typed Object Model API",id:"css-typed-object-model-api",level:4},{value:"DOM Events",id:"dom-events",level:3},{value:"Events Object",id:"events-object",level:4},{value:"Events Checking",id:"events-checking",level:4},{value:"Global UI Events",id:"global-ui-events",level:4},{value:"Form Events",id:"form-events",level:4},{value:"Input Events",id:"input-events",level:4},{value:"Input Focus Event",id:"input-focus-event",level:5},{value:"Input Change Event",id:"input-change-event",level:5},{value:"Input Select Event",id:"input-select-event",level:5},{value:"Clipboard Events",id:"clipboard-events",level:4},{value:"Mouse Events",id:"mouse-events",level:4},{value:"Keyboard Events",id:"keyboard-events",level:4},{value:"Device Events",id:"device-events",level:4},{value:"Dispatch Events",id:"dispatch-events",level:4},{value:"Events Util",id:"events-util",level:4},{value:"DOM Rect",id:"dom-rect",level:3},{value:"DOM Width and Height",id:"dom-width-and-height",level:4},{value:"DOM Left and Top",id:"dom-left-and-top",level:4},{value:"DOM Scroll Size",id:"dom-scroll-size",level:4},{value:"DOM Observer",id:"dom-observer",level:3},{value:"Intersection Observer",id:"intersection-observer",level:4},{value:"Mutation Observer",id:"mutation-observer",level:4},{value:"XML Namespace",id:"xml-namespace",level:3},{value:"Network",id:"network",level:2},{value:"JSON",id:"json",level:3},{value:"AJAX",id:"ajax",level:3},{value:"AJAX Data Format",id:"ajax-data-format",level:4},{value:"AJAX Usage",id:"ajax-usage",level:4},{value:"AJAX Cross Origin Request",id:"ajax-cross-origin-request",level:4},{value:"AJAX Alternatives",id:"ajax-alternatives",level:4},{value:"Fetch",id:"fetch",level:3},{value:"Fetch Basis Usage",id:"fetch-basis-usage",level:4},{value:"Fetch Form Data",id:"fetch-form-data",level:4},{value:"Fetch Aborting",id:"fetch-aborting",level:4},{value:"Fetch Objects API",id:"fetch-objects-api",level:4},{value:"Fetch Streaming",id:"fetch-streaming",level:4},{value:"RESTful",id:"restful",level:3},{value:"Server-Sent Events",id:"server-sent-events",level:3},{value:"WebSocket",id:"websocket",level:3},{value:"WebSocket Message Header",id:"websocket-message-header",level:4},{value:"WebSocket Extensions",id:"websocket-extensions",level:4},{value:"WebSocket Basic Usage",id:"websocket-basic-usage",level:4},{value:"WebSocket HeartBeat Mechanism",id:"websocket-heartbeat-mechanism",level:4},{value:"WebSocket Performance",id:"websocket-performance",level:4},{value:"WebSocket Reference",id:"websocket-reference",level:4},{value:"WebRTC",id:"webrtc",level:3},{value:"Web Real-Time Communication",id:"web-real-time-communication",level:4},{value:"WebRTC Layer Protocol",id:"webrtc-layer-protocol",level:4},{value:"WebRTC Basic Usage",id:"webrtc-basic-usage",level:4},{value:"WebRTC Performance",id:"webrtc-performance",level:4},{value:"WebRTC Reference",id:"webrtc-reference",level:4},{value:"Web Animations",id:"web-animations",level:2},{value:"Keyframe Effect API",id:"keyframe-effect-api",level:3},{value:"Animation API",id:"animation-api",level:3},{value:"Animate API",id:"animate-api",level:3},{value:"Web Animations Reference",id:"web-animations-reference",level:3},{value:"Web Canvas",id:"web-canvas",level:2},{value:"Canvas Basic Usage",id:"canvas-basic-usage",level:3},{value:"Canvas Game Loop",id:"canvas-game-loop",level:3},{value:"Canvas Performance",id:"canvas-performance",level:3},{value:"CSS Houdini Painting API",id:"css-houdini-painting-api",level:3},{value:"Canvas Reference",id:"canvas-reference",level:3},{value:"Web Audio",id:"web-audio",level:2},{value:"Oscillator",id:"oscillator",level:3},{value:"Music Data",id:"music-data",level:3},{value:"Audio Bar Chart",id:"audio-bar-chart",level:3},{value:"Media Session",id:"media-session",level:2},{value:"Web Storage",id:"web-storage",level:2},{value:"Cookie",id:"cookie",level:3},{value:"Local Storage",id:"local-storage",level:3},{value:"IndexDB",id:"indexdb",level:3},{value:"File API",id:"file-api",level:3},{value:"Web Payment",id:"web-payment",level:2},{value:"Web Devices",id:"web-devices",level:2},{value:"Web Gamepad",id:"web-gamepad",level:3},{value:"Web Bluetooth",id:"web-bluetooth",level:3},{value:"Web USB",id:"web-usb",level:3},{value:"Web NFC",id:"web-nfc",level:3},{value:"Web Serial",id:"web-serial",level:3},{value:"Web HID",id:"web-hid",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"javascript-api-notes",children:"JavaScript API Notes"})}),"\n",(0,r.jsx)(n.h2,{id:"bom",children:"BOM"}),"\n",(0,r.jsx)(n.h3,{id:"window",children:"Window"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const selfWindow = window.self\nconst topWindow = window.top\nconst parentWindow = window.parent\nconst grandParentWindow = window.parent.parent\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"if (confirm('Are you sure?'))\n  alert('I\\'m so glad you\\'re sure!')\nelse\n  alert('I\\'m sorry to hear you\\'re not sure.')\n\nconst result = prompt('What is your name? ', 'James')\nif (result !== null)\n  alert(`Welcome, ${result}`)\n\n// \u663e\u793a\u6253\u5370\u5bf9\u8bdd\u6846\nwindow.print()\n\n// \u663e\u793a\u67e5\u627e\u5bf9\u8bdd\u6846\nwindow.find()\n\n// \u663e\u5f0f\u6253\u5370\u673a\nwindow.print()\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5f39\u7a97\u6709\u975e\u5e38\u591a\u7684\u5b89\u5168\u9650\u5236:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7981\u6b62\u9690\u85cf\u72b6\u6001\u680f\u4e0e\u5730\u5740\u680f."}),"\n",(0,r.jsx)(n.li,{children:"\u5f39\u7a97\u9ed8\u8ba4\u4e0d\u80fd\u79fb\u52a8\u6216\u7f29\u653e."}),"\n",(0,r.jsx)(n.li,{children:"\u53ea\u5141\u8bb8\u7528\u6237\u64cd\u4f5c\u4e0b (\u9f20\u6807/\u952e\u76d8) \u521b\u5efa\u5f39\u7a97."}),"\n",(0,r.jsx)(n.li,{children:"\u5c4f\u853d\u5f39\u7a97."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const newWin = window.open(\n  'https://www.new.com/',\n  'newWindow',\n  'height=400,width=400,top=10,left=10,resizable=yes'\n)\nnewWin.resizeTo(500, 500)\nnewWin.moveTo(100, 100)\nalert(newWin.opener === window) // true\nnewWin.close()\nalert(newWin.closed) // true\n\nlet blocked = false\ntry {\n  const newWin = window.open('https://www.new.com/', '_blank')\n  if (newWin === null)\n    blocked = true\n} catch (ex) {\n  blocked = true\n}\nif (blocked)\n  alert('The popup was blocked!')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"location",children:"Location"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"\u5c5e\u6027"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"\u63cf\u8ff0"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"hash"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u4ece\u4e95\u53f7 (#) \u5f00\u59cb\u7684 URL (\u951a)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"host"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u4e3b\u673a\u540d\u548c\u5f53\u524d URL \u7684\u7aef\u53e3\u53f7"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"hostname"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u5f53\u524d URL \u7684\u4e3b\u673a\u540d"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"href"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u5b8c\u6574\u7684 URL"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"pathname"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u5f53\u524d URL \u7684\u8def\u5f84\u90e8\u5206"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"port"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u5f53\u524d URL \u7684\u7aef\u53e3\u53f7"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"protocol"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u5f53\u524d URL \u7684\u534f\u8bae"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"search"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u4ece\u95ee\u53f7 (?) \u5f00\u59cb\u7684 URL (\u67e5\u8be2\u90e8\u5206)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"username"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u57df\u540d\u524d\u6307\u5b9a\u7684\u7528\u6237\u540d"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"password"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u6216\u8fd4\u56de\u57df\u540d\u524d\u6307\u5b9a\u7684\u5bc6\u7801"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"origin"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u8fd4\u56de URL \u7684\u6e90\u5730\u5740"})]})]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function getQueryStringArgs(location) {\n  // \u53d6\u5f97\u6ca1\u6709\u5f00\u5934\u95ee\u53f7\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\n  const qs = location.search.length > 0 ? location.search.substring(1) : ''\n  // \u4fdd\u5b58\u6570\u636e\u7684\u5bf9\u8c61\n  const args = {}\n\n  // \u628a\u6bcf\u4e2a\u53c2\u6570\u6dfb\u52a0\u5230 args \u5bf9\u8c61\n  for (const item of qs.split('&').map(kv => kv.split('='))) {\n    const name = decodeURIComponent(item[0])\n    const value = decodeURIComponent(item[1])\n\n    if (name.length)\n      args[name] = value\n  }\n\n  return args\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"window.location.assign('https://www.new.com')\nwindow.location = 'https://www.new.com'\nwindow.location.href = 'https://www.new.com'\nwindow.location.replace('https://www.new.com') // No new history\nwindow.location.reload() // \u91cd\u65b0\u52a0\u8f7d, \u53ef\u80fd\u662f\u4ece\u7f13\u5b58\u52a0\u8f7d\nwindow.location.reload(true) // \u91cd\u65b0\u52a0\u8f7d, \u4ece\u670d\u52a1\u5668\u52a0\u8f7d\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"window.addEventListener(\n  'hashchange',\n  (event) => {\n    // event.oldURL\n    // event.nweURL\n    if (window.location.hash === '#someCoolFeature')\n      someCoolFeature()\n  },\n  false\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"navigator",children:"Navigator"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"navigator"})," \u5bf9\u8c61\u5305\u542b\u4ee5\u4e0b\u63a5\u53e3\u5b9a\u4e49\u7684\u5c5e\u6027\u548c\u65b9\u6cd5:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"NavigatorID."}),"\n",(0,r.jsx)(n.li,{children:"NavigatorLanguage."}),"\n",(0,r.jsx)(n.li,{children:"NavigatorOnLine."}),"\n",(0,r.jsx)(n.li,{children:"NavigatorContentUtils."}),"\n",(0,r.jsx)(n.li,{children:"NavigatorStorage."}),"\n",(0,r.jsx)(n.li,{children:"NavigatorStorageUtils."}),"\n",(0,r.jsx)(n.li,{children:"NavigatorConcurrentHardware."}),"\n",(0,r.jsx)(n.li,{children:"NavigatorPlugins."}),"\n",(0,r.jsx)(n.li,{children:"NavigatorUserMedia."}),"\n"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property/Method"}),(0,r.jsx)(n.th,{})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"battery"}),(0,r.jsx)(n.td,{children:"BatteryManager (Battery Status API)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"clipboard"}),(0,r.jsx)(n.td,{children:"Clipboard API"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"connection"}),(0,r.jsx)(n.td,{children:"NetworkInformation (Network Information API)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"cookieEnabled"}),(0,r.jsx)(n.td,{children:"Boolean, \u662f\u5426\u542f\u7528\u4e86 cookie"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"credentials"}),(0,r.jsx)(n.td,{children:"CredentialsContainer (Credentials Management API)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"deviceMemory"}),(0,r.jsx)(n.td,{children:"\u5355\u4f4d\u4e3a GB \u7684\u8bbe\u5907\u5185\u5b58\u5bb9\u91cf"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"doNotTrack"}),(0,r.jsxs)(n.td,{children:["\u7528\u6237\u7684",(0,r.jsx)(n.code,{children:"\u4e0d\u8ddf\u8e2a"})," (",(0,r.jsx)(n.code,{children:"do-not-track"}),") \u8bbe\u7f6e"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"geolocation"}),(0,r.jsx)(n.td,{children:"Geolocation (Geolocation API)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"hardwareConcurrency"}),(0,r.jsx)(n.td,{children:"\u8bbe\u5907\u7684\u5904\u7406\u5668\u6838\u5fc3\u6570\u91cf"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"language"}),(0,r.jsx)(n.td,{children:"\u6d4f\u89c8\u5668\u7684\u4e3b\u8bed\u8a00"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"languages"}),(0,r.jsx)(n.td,{children:"\u6d4f\u89c8\u5668\u504f\u597d\u7684\u8bed\u8a00\u6570\u7ec4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"locks"}),(0,r.jsx)(n.td,{children:"LockManager (Web Locks API)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"mediaCapabilities"}),(0,r.jsx)(n.td,{children:"MediaCapabilities (Media Capabilities API)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"mediaDevices"}),(0,r.jsx)(n.td,{children:"\u53ef\u7528\u7684\u5a92\u4f53\u8bbe\u5907"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"maxTouchPoints"}),(0,r.jsx)(n.td,{children:"\u8bbe\u5907\u89e6\u6478\u5c4f\u652f\u6301\u7684\u6700\u5927\u89e6\u70b9\u6570"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"onLine"}),(0,r.jsx)(n.td,{children:"Boolean, \u8868\u793a\u6d4f\u89c8\u5668\u662f\u5426\u8054\u7f51"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"pdfViewerEnabled"}),(0,r.jsx)(n.td,{children:"Boolean, \u662f\u5426\u542f\u7528\u4e86 PDF \u529f\u80fd"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"permissions"}),(0,r.jsx)(n.td,{children:"Permissions (Permissions API)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"serviceWorker"}),(0,r.jsx)(n.td,{children:"ServiceWorkerContainer"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"storage"}),(0,r.jsx)(n.td,{children:"StorageManager (Storage API)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"userAgent"}),(0,r.jsxs)(n.td,{children:["\u6d4f\u89c8\u5668\u7684\u7528\u6237\u4ee3\u7406\u5b57\u7b26\u4e32 (",(0,r.jsx)(n.strong,{children:"\u9ed8\u8ba4\u53ea\u8bfb"}),")"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"vendor"}),(0,r.jsx)(n.td,{children:"\u6d4f\u89c8\u5668\u7684\u5382\u5546\u540d\u79f0"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"webdriver"}),(0,r.jsx)(n.td,{children:"\u6d4f\u89c8\u5668\u5f53\u524d\u662f\u5426\u88ab\u81ea\u52a8\u5316\u7a0b\u5e8f\u63a7\u5236"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"xr"}),(0,r.jsx)(n.td,{children:"XRSystem (WebXR Device API)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"registerProtocolHandler()"}),(0,r.jsx)(n.td,{children:"\u5c06\u4e00\u4e2a\u7f51\u7ad9\u6ce8\u518c\u4e3a\u7279\u5b9a\u534f\u8bae\u7684\u5904\u7406\u7a0b\u5e8f"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sendBeacon()"}),(0,r.jsx)(n.td,{children:"\u5f02\u6b65\u4f20\u8f93\u4e00\u4e9b\u5c0f\u6570\u636e"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"share()"}),(0,r.jsx)(n.td,{children:"\u5f53\u524d\u5e73\u53f0\u7684\u539f\u751f\u5171\u4eab\u673a\u5236"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"vibrate()"}),(0,r.jsx)(n.td,{children:"\u89e6\u53d1\u8bbe\u5907\u632f\u52a8"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"web-online-api",children:"Web Online API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const connectionStateChange = () => console.log(navigator.onLine)\nwindow.addEventListener('online', connectionStateChange)\nwindow.addEventListener('offline', connectionStateChange)\n// \u8bbe\u5907\u8054\u7f51\u65f6:\n// true\n// \u8bbe\u5907\u65ad\u7f51\u65f6:\n// false\n"})}),"\n",(0,r.jsx)(n.h4,{id:"web-connection-api",children:"Web Connection API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const downlink = navigator.connection.downlink\nconst downlinkMax = navigator.connection.downlinkMax\nconst rtt = navigator.connection.rtt\nconst type = navigator.connection.type // wifi/bluetooth/cellular/ethernet/mixed/unknown/none.\nconst networkType = navigator.connection.effectiveType // 2G - 5G.\nconst saveData = navigator.connection.saveData // Boolean: Reduced data mode.\n\nnavigator.connection.addEventListener('change', changeHandler)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"web-protocol-handler-api",children:"Web Protocol Handler API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"navigator.registerProtocolHandler(\n  'mailto',\n  'http://www.somemailclient.com?cmd=%s',\n  'Some Mail Client'\n)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"web-battery-status-api",children:"Web Battery Status API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"navigator.getBattery().then((battery) => {\n  // \u6dfb\u52a0\u5145\u7535\u72b6\u6001\u53d8\u5316\u65f6\u7684\u5904\u7406\u7a0b\u5e8f\n  const chargingChangeHandler = () => console.log(battery.charging)\n  battery.addEventListener('chargingchange', chargingChangeHandler)\n  // \u6dfb\u52a0\u5145\u7535\u65f6\u95f4\u53d8\u5316\u65f6\u7684\u5904\u7406\u7a0b\u5e8f\n  const chargingTimeChangeHandler = () => console.log(battery.chargingTime)\n  battery.addEventListener('chargingtimechange', chargingTimeChangeHandler)\n  // \u6dfb\u52a0\u653e\u7535\u65f6\u95f4\u53d8\u5316\u65f6\u7684\u5904\u7406\u7a0b\u5e8f\n  const dischargingTimeChangeHandler = () =>\n    console.log(battery.dischargingTime)\n  battery.addEventListener(\n    'dischargingtimechange',\n    dischargingTimeChangeHandler\n  )\n  // \u6dfb\u52a0\u7535\u91cf\u767e\u5206\u6bd4\u53d8\u5316\u65f6\u7684\u5904\u7406\u7a0b\u5e8f\n  const levelChangeHandler = () => console.log(battery.level * 100)\n  battery.addEventListener('levelchange', levelChangeHandler)\n})\n"})}),"\n",(0,r.jsx)(n.h4,{id:"web-storage-estimate-api",children:"Web Storage Estimate API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"navigator.storage.estimate().then((estimate) => {\n  console.log(((estimate.usage / estimate.quota) * 100).toFixed(2))\n})\n"})}),"\n",(0,r.jsx)(n.h4,{id:"web-geolocation-api",children:"Web Geolocation API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"if (window.navigator.geolocation) {\n  // getCurrentPosition\u7b2c\u4e09\u4e2a\u53c2\u6570\u4e3a\u53ef\u9009\u53c2\u6570\n  navigator.geolocation.getCurrentPosition(locationSuccess, locationError, {\n    // \u6307\u793a\u6d4f\u89c8\u5668\u83b7\u53d6\u9ad8\u7cbe\u5ea6\u7684\u4f4d\u7f6e, \u9ed8\u8ba4\u4e3afalse\n    enableHighAccuracy: true,\n    // \u6307\u5b9a\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4, \u9ed8\u8ba4\u4e0d\u9650\u65f6, \u5355\u4f4d\u4e3a\u6beb\u79d2\n    timeout: 5000,\n    // \u6700\u957f\u6709\u6548\u671f, \u5728\u91cd\u590d\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\u65f6, \u6b64\u53c2\u6570\u6307\u5b9a\u591a\u4e45\u518d\u6b21\u83b7\u53d6\u4f4d\u7f6e.\n    maximumAge: 3000,\n  })\n} else {\n  alert('Your browser does not support Geolocation!')\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"locationError \u4e3a\u83b7\u53d6\u4f4d\u7f6e\u4fe1\u606f\u5931\u8d25\u7684\u56de\u8c03\u51fd\u6570, \u53ef\u4ee5\u6839\u636e\u9519\u8bef\u7c7b\u578b\u63d0\u793a\u4fe1\u606f:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function locationError(error) {\n  switch (error.code) {\n    case error.TIMEOUT:\n      showError('A timeout occurred! Please try again!')\n      break\n    case error.POSITION_UNAVAILABLE:\n      showError('We can\\'t detect your location. Sorry!')\n      break\n    case error.PERMISSION_DENIED:\n      showError('Please allow geolocation access for this to work.')\n      break\n    case error.UNKNOWN_ERROR:\n      showError('An unknown error occurred!')\n      break\n    default:\n      throw new Error('Unsupported error!')\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"locationSuccess \u4e3a\u83b7\u53d6\u4f4d\u7f6e\u4fe1\u606f\u6210\u529f\u7684\u56de\u8c03\u51fd\u6570,\n\u8fd4\u56de\u7684\u6570\u636e\u4e2d\u5305\u542b\u7ecf\u7eac\u5ea6\u7b49\u4fe1\u606f:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"position.timestamp"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"position.coords"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"latitude"}),": \u7ef4\u5ea6."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"longitude"}),": \u7ecf\u5ea6."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"accuracy"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"altitude"}),": \u6d77\u62d4\u9ad8\u5ea6."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"altitudeAccuracy"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u7ed3\u5408 Google Map API \u5373\u53ef\u5728\u5730\u56fe\u4e2d\u663e\u793a\u5f53\u524d\u7528\u6237\u7684\u4f4d\u7f6e\u4fe1\u606f:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function locationSuccess(position) {\n  const coords = position.coords\n  const latlng = new google.maps.LatLng(\n    // \u7ef4\u5ea6\n    coords.latitude,\n    // \u7cbe\u5ea6\n    coords.longitude\n  )\n  const myOptions = {\n    // \u5730\u56fe\u653e\u5927\u500d\u6570\n    zoom: 12,\n    // \u5730\u56fe\u4e2d\u5fc3\u8bbe\u4e3a\u6307\u5b9a\u5750\u6807\u70b9\n    center: latlng,\n    // \u5730\u56fe\u7c7b\u578b\n    mapTypeId: google.maps.MapTypeId.ROADMAP,\n  }\n\n  // \u521b\u5efa\u5730\u56fe\u5e76\u8f93\u51fa\u5230\u9875\u9762\n  const myMap = new google.maps.Map(document.getElementById('map'), myOptions)\n\n  // \u521b\u5efa\u6807\u8bb0\n  const marker = new google.maps.Marker({\n    // \u6807\u6ce8\u6307\u5b9a\u7684\u7ecf\u7eac\u5ea6\u5750\u6807\u70b9\n    position: latlng,\n    // \u6307\u5b9a\u7528\u4e8e\u6807\u6ce8\u7684\u5730\u56fe\n    map: myMap,\n  })\n\n  // \u521b\u5efa\u6807\u6ce8\u7a97\u53e3\n  const infoWindow = new google.maps.InfoWindow({\n    content: `\u60a8\u5728\u8fd9\u91cc<br/>\u7eac\u5ea6: ${coords.latitude}<br/>\u7ecf\u5ea6: ${coords.longitude}`,\n  })\n\n  // \u6253\u5f00\u6807\u6ce8\u7a97\u53e3\n  infoWindow.open(myMap, marker)\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"navigator.geolocation.watchPosition(\n  locationSuccess,\n  locationError,\n  positionOption\n)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"navigator-user-agent",children:"Navigator User Agent"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"navigator.userAgent"})," \u7279\u522b\u590d\u6742:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5386\u53f2\u517c\u5bb9\u95ee\u9898: Netscape -> IE -> Firefox -> Safari -> Chrome -> Edge."}),"\n",(0,r.jsxs)(n.li,{children:["\u6bcf\u4e00\u4e2a\u65b0\u7684\u6d4f\u89c8\u5668\u5382\u5546\u5fc5\u987b\u4fdd\u8bc1\u65e7\u7f51\u7ad9\u7684\u68c0\u6d4b\u811a\u672c\u80fd\u6b63\u5e38\u8bc6\u522b\u81ea\u5bb6\u6d4f\u89c8\u5668,\n\u4ece\u800c\u6b63\u5e38\u6253\u5f00\u7f51\u9875, \u5bfc\u81f4 ",(0,r.jsx)(n.code,{children:"navigator.userAgent"})," \u4e0d\u65ad\u53d8\u957f."]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/faisalman/ua-parser-js",children:"UserAgent Data Parser"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"console.log(navigator.userAgent)\n// 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko)\n// Chrome/101.0.4922.0 Safari/537.36 Edg/101.0.1198.0'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"screen",children:"Screen"}),"\n",(0,r.jsx)(n.p,{children:"\u6d4f\u89c8\u5668\u7a97\u53e3\u5916\u9762\u7684\u5ba2\u6237\u7aef\u663e\u793a\u5668\u7684\u4fe1\u606f:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"availHeight"}),(0,r.jsx)(n.td,{children:"\u5c4f\u5e55\u50cf\u7d20\u9ad8\u5ea6\u51cf\u53bb\u7cfb\u7edf\u7ec4\u4ef6\u9ad8\u5ea6 (\u53ea\u8bfb)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"availWidth"}),(0,r.jsx)(n.td,{children:"\u5c4f\u5e55\u50cf\u7d20\u5bbd\u5ea6\u51cf\u53bb\u7cfb\u7edf\u7ec4\u4ef6\u5bbd\u5ea6 (\u53ea\u8bfb)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"colorDepth"}),(0,r.jsx)(n.td,{children:"\u8868\u793a\u5c4f\u5e55\u989c\u8272\u7684\u4f4d\u6570: \u591a\u6570\u7cfb\u7edf\u662f 32 (\u53ea\u8bfb)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"height"}),(0,r.jsx)(n.td,{children:"\u5c4f\u5e55\u50cf\u7d20\u9ad8\u5ea6"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"width"}),(0,r.jsx)(n.td,{children:"\u5c4f\u5e55\u50cf\u7d20\u5bbd\u5ea6"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"pixelDepth"}),(0,r.jsx)(n.td,{children:"\u5c4f\u5e55\u7684\u4f4d\u6df1 (\u53ea\u8bfb)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"orientation"}),(0,r.jsx)(n.td,{children:"Screen Orientation API \u4e2d\u5c4f\u5e55\u7684\u671d\u5411"})]})]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const screen = window.screen\n\nconsole.log(screen.colorDepth) // 24\nconsole.log(screen.pixelDepth) // 24\n\n// \u5782\u76f4\u770b\nconsole.log(screen.orientation.type) // portrait-primary\nconsole.log(screen.orientation.angle) // 0\n// \u5411\u5de6\u8f6c\nconsole.log(screen.orientation.type) // landscape-primary\nconsole.log(screen.orientation.angle) // 90\n// \u5411\u53f3\u8f6c\nconsole.log(screen.orientation.type) // landscape-secondary\nconsole.log(screen.orientation.angle) // 270\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5168\u5c4f ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Fullscreen_API",children:"API"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function toggleFullscreen() {\n  const elem = document.querySelector('video')\n\n  if (document.fullscreenElement) {\n    document\n      .exitFullscreen()\n      .then(() => console.log('Document Exited from Full screen mode'))\n      .catch(err => console.error(err))\n  } else {\n    elem\n      .requestFullscreen()\n      .then(() => {})\n      .catch((err) => {\n        alert(\n          `Error occurred while switch into fullscreen mode: ${err.message} (${err.name})`\n        )\n      })\n  }\n}\n\ndocument.onclick = function (event) {\n  if (document.fullscreenElement) {\n    document\n      .exitFullscreen()\n      .then(() => console.log('Document Exited from Full screen mode'))\n      .catch(err => console.error(err))\n  } else {\n    document.documentElement\n      .requestFullscreen({ navigationUI: 'show' })\n      .then(() => {})\n      .catch((err) => {\n        alert(\n          `Error occurred while switch into fullscreen mode: ${err.message} (${err.name})`\n        )\n      })\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"history",children:"History"}),"\n",(0,r.jsx)(n.h4,{id:"history-navigation",children:"History Navigation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const history = window.history\n\n// \u540e\u9000\u4e00\u9875\nhistory.go(-1)\n// \u524d\u8fdb\u4e00\u9875\nhistory.go(1)\n// \u524d\u8fdb\u4e24\u9875\nhistory.go(2)\n// \u5bfc\u822a\u5230\u6700\u8fd1\u7684 new.com \u9875\u9762\nhistory.go('new.com')\n// \u5bfc\u822a\u5230\u6700\u8fd1\u7684 example.net \u9875\u9762\nhistory.go('example.net')\n// \u540e\u9000\u4e00\u9875\nhistory.back()\n// \u524d\u8fdb\u4e00\u9875\nhistory.forward()\n\nif (history.length === 1)\n  console.log('\u8fd9\u662f\u7528\u6237\u7a97\u53e3\u4e2d\u7684\u7b2c\u4e00\u4e2a\u9875\u9762')\n\nif (history.scrollRestoration)\n  history.scrollRestoration = 'manual'\n"})}),"\n",(0,r.jsx)(n.h4,{id:"history-state-management",children:"History State Management"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const history = window.history\n\nconst stateObject = { foo: 'bar' }\nhistory.pushState(stateObject, 'My title', 'baz.html')\n\nhistory.replaceState({ newFoo: 'newBar' }, 'New title') // No new history state.\n\nwindow.addEventListener('popstate', (event) => {\n  const state = event.state\n\n  if (state) {\n    // \u7b2c\u4e00\u4e2a\u9875\u9762\u52a0\u8f7d\u65f6\u72b6\u6001\u662f null\n    processState(state)\n  }\n})\n"})}),"\n",(0,r.jsx)(n.h3,{id:"browser-compatibility",children:"Browser Compatibility"}),"\n",(0,r.jsx)(n.h4,{id:"user-agent-detection",children:"User Agent Detection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"class BrowserDetector {\n  constructor() {\n    // \u6d4b\u8bd5\u6761\u4ef6\u7f16\u8bd1\n    // IE6~10 \u652f\u6301\n\n    this.isIE_Gte6Lte10 = /* @cc_on!@ */ false\n    // \u6d4b\u8bd5 documentMode\n    // IE7~11 \u652f\u6301\n    this.isIE_Gte7Lte11 = !!document.documentMode\n    // \u6d4b\u8bd5 StyleMedia \u6784\u9020\u51fd\u6570\n    // Edge 20 \u53ca\u4ee5\u4e0a\u7248\u672c\u652f\u6301\n    this.isEdge_Gte20 = !!window.StyleMedia\n    // \u6d4b\u8bd5 Firefox \u4e13\u6709\u6269\u5c55\u5b89\u88c5 API\n    // \u6240\u6709\u7248\u672c\u7684 Firefox \u90fd\u652f\u6301\n    this.isFirefox_Gte1 = typeof InstallTrigger !== 'undefined'\n    // \u6d4b\u8bd5 chrome \u5bf9\u8c61\u53ca\u5176 webstore \u5c5e\u6027\n    // Opera \u7684\u67d0\u4e9b\u7248\u672c\u6709 window.chrome, \u4f46\u6ca1\u6709 window.chrome.webstore\n    // \u6240\u6709\u7248\u672c\u7684 Chrome \u90fd\u652f\u6301\n    this.isChrome_Gte1 = !!window.chrome && !!window.chrome.webstore\n    // Safari \u65e9\u671f\u7248\u672c\u4f1a\u7ed9\u6784\u9020\u51fd\u6570\u7684\u6807\u7b7e\u7b26\u8ffd\u52a0 \"Constructor\"\u5b57\u6837, \u5982:\n    // window.Element.toString(); // [object ElementConstructor]\n    // Safari 3~9.1 \u652f\u6301\n    this.isSafari_Gte3Lte9_1 = /constructor/i.test(window.Element)\n    // \u63a8\u9001\u901a\u77e5 API \u66b4\u9732\u5728 window \u5bf9\u8c61\u4e0a\n    // \u4f7f\u7528 IIFE \u9ed8\u8ba4\u53c2\u6570\u503c\u4ee5\u907f\u514d\u5bf9 undefined \u8c03\u7528 toString()\n    // Safari 7.1 \u53ca\u4ee5\u4e0a\u7248\u672c\u652f\u6301\n    this.isSafari_Gte7_1 = (({ pushNotification = {} } = {}) =>\n      pushNotification.toString() === '[object SafariRemoteNotification]')(\n      window.safari\n    )\n    // \u6d4b\u8bd5 addons \u5c5e\u6027\n    // Opera 20 \u53ca\u4ee5\u4e0a\u7248\u672c\u652f\u6301\n    this.isOpera_Gte20 = !!window.opr && !!window.opr.addons\n  }\n\n  isIE() {\n    return this.isIE_Gte6Lte10 || this.isIE_Gte7Lte11\n  }\n\n  isEdge() {\n    return this.isEdge_Gte20 && !this.isIE()\n  }\n\n  isFirefox() {\n    return this.isFirefox_Gte1\n  }\n\n  isChrome() {\n    return this.isChrome_Gte1\n  }\n\n  isSafari() {\n    return this.isSafari_Gte3Lte9_1 || this.isSafari_Gte7_1\n  }\n\n  isOpera() {\n    return this.isOpera_Gte20\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"browser-feature-detection",children:"Browser Feature Detection"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u4e0d\u4f7f\u7528\u7279\u6027/\u6d4f\u89c8\u5668\u63a8\u65ad"}),", \u5f80\u5f80\u5bb9\u6613\u63a8\u65ad\u9519\u8bef (\u4e14\u4f1a\u968f\u7740\u6d4f\u89c8\u5668\u66f4\u65b0\u4ea7\u751f\u65b0\u7684\u9519\u8bef)."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// \u68c0\u6d4b\u6d4f\u89c8\u5668\u662f\u5426\u652f\u6301 Netscape \u5f0f\u7684\u63d2\u4ef6\nconst hasNSPlugins = !!(navigator.plugins && navigator.plugins.length)\n// \u68c0\u6d4b\u6d4f\u89c8\u5668\u662f\u5426\u5177\u6709 DOM Level 1 \u80fd\u529b\nconst hasDOM1 = !!(\n  document.getElementById\n  && document.createElement\n  && document.getElementsByTagName\n)\n\n// \u7279\u6027\u68c0\u6d4b\nif (document.getElementById)\n  element = document.getElementById(id)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"dom",children:"DOM"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DOM Level 0."}),"\n",(0,r.jsxs)(n.li,{children:["DOM Level 1:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DOM Core."}),"\n",(0,r.jsx)(n.li,{children:"DOM XML."}),"\n",(0,r.jsx)(n.li,{children:"DOM HTML."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["DOM Level 2:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DOM2 Core."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 XML."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 HTML."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 Views."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 StyleSheets."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 CSS."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 CSS 2."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 Events."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 UIEvents."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 MouseEvents."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 MutationEvents (Deprecated)."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 HTMLEvents."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 Range."}),"\n",(0,r.jsx)(n.li,{children:"DOM2 Traversal."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["DOM Level 3:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DOM3 Core."}),"\n",(0,r.jsx)(n.li,{children:"DOM3 XML."}),"\n",(0,r.jsx)(n.li,{children:"DOM3 Events."}),"\n",(0,r.jsx)(n.li,{children:"DOM3 UIEvents."}),"\n",(0,r.jsx)(n.li,{children:"DOM3 MouseEvents."}),"\n",(0,r.jsx)(n.li,{children:"DOM3 MutationEvents (Deprecated)."}),"\n",(0,r.jsx)(n.li,{children:"DOM3 MutationNameEvents."}),"\n",(0,r.jsx)(n.li,{children:"DOM3 TextEvents."}),"\n",(0,r.jsx)(n.li,{children:"DOM3 Load and Save."}),"\n",(0,r.jsx)(n.li,{children:"DOM3 Load and Save Async."}),"\n",(0,r.jsx)(n.li,{children:"DOM3 Validation."}),"\n",(0,r.jsx)(n.li,{children:"DOM3 XPath."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const hasXmlDom = document.implementation.hasFeature('XML', '1.0')\nconst hasHtmlDom = document.implementation.hasFeature('HTML', '1.0')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"dom-core",children:"DOM Core"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"document.createElement('nodeName')\ndocument.createTextNode('String')\n\ndocument.getElementById(id)\ndocument.getElementsByName(elementName)\ndocument.getElementsByTagName(tagName)\ndocument.getElementsByClassName(className) // HTML5\ndocument.querySelector(cssSelector) // Selectors API\ndocument.querySelectorAll(cssSelector) // Selectors API\n\nelement.getAttribute(attrName) // get default HTML attribute\nelement.setAttribute(attrName, attrValue)\nelement.removeAttribute(attrName)\n\nelement.compareDocumentPosition(element)\nelement.contains(element)\nelement.isSameNode(element) // Same node reference\nelement.isEqualNode(element) // Same nodeName/nodeValue/attributes/childNodes\nelement.matches(cssSelector)\nelement.closest(cssSelector) // Returns closest ancestor matching selector\nelement.cloneNode()\nelement.normalize()\nelement.before(...elements)\nelement.after(...elements)\nelement.replaceWith(...elements)\nelement.remove()\n\nparentElement.hasChildNodes()\nparentElement.appendChild(childElement)\nparentElement.append(childElements)\nparentElement.insertBefore(newChild, targetChild)\nparentElement.replaceChild(newChild, targetChild)\nparentElement.replaceChildren(children)\nparentElement.removeChild(child)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function showAlert(type, message, duration = 3) {\n  const div = document.createElement('div')\n  div.className = type\n  div.appendChild(document.createTextNode(message))\n  container.insertBefore(div, form)\n  setTimeout(() => div.remove(), duration * 1000)\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"dom-node-type",children:"DOM Node Type"}),"\n",(0,r.jsxs)(n.p,{children:["Node \u9664\u5305\u62ec\u5143\u7d20\u7ed3\u70b9 (tag) \u5916,\n\u5305\u62ec\u8bb8\u591a\u5176\u5b83\u7ed3\u70b9 (\u751a\u81f3\u7a7a\u683c\u7b26\u89c6\u4f5c\u4e00\u4e2a\u7ed3\u70b9),\n\u9700\u501f\u52a9 ",(0,r.jsx)(n.code,{children:"nodeType"})," \u627e\u51fa\u76ee\u6807\u7ed3\u70b9."]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Node Type"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Node Representation"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Node Name"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Node Value"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"1"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"ELEMENT_NODE"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Tag Name"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"null"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"2"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"ATTRIBUTE_NODE"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Attr Name"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Attr Value"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"3"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"TEXT_NODE"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"#text"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Text"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"4"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"CDATA_SECTION_NODE"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"#cdata-section"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"CDATA Section"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"5"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"ENTITY_REFERENCE_NODE"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"}}),(0,r.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"6"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"ENTITY_NODE"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"}}),(0,r.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"8"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"COMMENT_NODE"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"#comment"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Comment"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"9"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"DOCUMENT_NODE"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"#document"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"null"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"10"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"DOCUMENT_TYPE_NODE"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,r.jsx)(n.code,{children:"html"}),"/",(0,r.jsx)(n.code,{children:"xml"})]}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"null"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"11"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"DOCUMENT_FRAGMENT_NODE"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"#document-fragment"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"null"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"12"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"NOTATION_NODE"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"}}),(0,r.jsx)(n.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const type = node.nodeType\nconst name = node.nodeName\nconst value = node.nodeValue\n\nif (someNode.nodeType === Node.ELEMENT_NODE)\n  alert('Node is an element.')\n"})}),"\n",(0,r.jsx)(n.h4,{id:"dom-attribute-node",children:"DOM Attribute Node"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const id = element.attributes.getNamedItem('id').nodeValue\nconst id = element.attributes.id.nodeValue\nelement.attributes.id.nodeValue = 'someOtherId'\nconst oldAttr = element.attributes.removeNamedItem('id')\nelement.attributes.setNamedItem(newAttr)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const attr = document.createAttribute('align')\nattr.value = 'left'\nelement.setAttributeNode(attr)\n\nalert(element.attributes.align.value) // \"left\"\nalert(element.getAttributeNode('align').value) // \"left\"\nalert(element.getAttribute('align')) // \"left\"\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Further reading:\n",(0,r.jsx)(n.a,{href:"/awesome-notes/Web/HTML/HTMLBasicNotes#dom-properties-reflection",children:"DOM properties reflection on HTML attributes"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"dom-text-node",children:"DOM Text Node"}),"\n",(0,r.jsx)(n.p,{children:"Text node methods:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"appendData(text): \u5411\u8282\u70b9\u672b\u5c3e\u6dfb\u52a0\u6587\u672c text."}),"\n",(0,r.jsx)(n.li,{children:"deleteData(offset, count): \u4ece\u4f4d\u7f6e offset \u5f00\u59cb\u5220\u9664 count \u4e2a\u5b57\u7b26."}),"\n",(0,r.jsx)(n.li,{children:"insertData(offset, text): \u5728\u4f4d\u7f6e offset \u63d2\u5165 text."}),"\n",(0,r.jsx)(n.li,{children:"replaceData(offset, count, text): \u7528 text \u66ff\u6362\u4ece\u4f4d\u7f6e offset \u5230 offset + count \u7684\u6587\u672c."}),"\n",(0,r.jsx)(n.li,{children:"splitText(offset): \u5728\u4f4d\u7f6e offset \u5c06\u5f53\u524d\u6587\u672c\u8282\u70b9\u62c6\u5206\u4e3a\u4e24\u4e2a\u6587\u672c\u8282\u70b9."}),"\n",(0,r.jsx)(n.li,{children:"substringData(offset, count): \u63d0\u53d6\u4ece\u4f4d\u7f6e offset \u5230 offset + count \u7684\u6587\u672c."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Normalize text nodes:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const element = document.createElement('div')\nelement.className = 'message'\n\nconst textNode = document.createTextNode('Hello world!')\nconst anotherTextNode = document.createTextNode('Yippee!')\n\nelement.appendChild(textNode)\nelement.appendChild(anotherTextNode)\ndocument.body.appendChild(element)\nalert(element.childNodes.length) // 2\n\nelement.normalize()\nalert(element.childNodes.length) // 1\nalert(element.firstChild.nodeValue) // \"Hello world!Yippee!\"\n"})}),"\n",(0,r.jsx)(n.p,{children:"Split text nodes:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const element = document.createElement('div')\nelement.className = 'message'\n\nconst textNode = document.createTextNode('Hello world!')\nelement.appendChild(textNode)\ndocument.body.appendChild(element)\n\nconst newNode = element.firstChild.splitText(5)\nalert(element.firstChild.nodeValue) // \"Hello\"\nalert(newNode.nodeValue) // \" world!\"\nalert(element.childNodes.length) // 2\n"})}),"\n",(0,r.jsxs)(n.admonition,{title:"TextContent vs InnerText vs InnerHTML",type:"tip",children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"textContent"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security"}),": Doesn\u2019t parse HTML."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),": Including ",(0,r.jsx)(n.code,{children:"<script>"})," and ",(0,r.jsx)(n.code,{children:"<style>"})," text content."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"innerText"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Doesn't parse HTML."}),"\n",(0,r.jsxs)(n.li,{children:["Only show ",(0,r.jsx)(n.strong,{children:"human-readable"})," text content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"innerText"})," care CSS styles, read ",(0,r.jsx)(n.code,{children:"innerText"})," value will trigger ",(0,r.jsx)(n.code,{children:"reflow"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"innerHTML"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Do parse HTML."}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const textContent = element.textContent\nconst innerHTML = element.innerHTML\n// eslint-disable-next-line unicorn/prefer-dom-node-text-content\nconst innerText = element.innerText\n"})})]}),"\n",(0,r.jsx)(n.h4,{id:"dom-document-node",children:"DOM Document Node"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"document"})," node (",(0,r.jsx)(n.code,{children:"#document"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'alert(document.nodeType) // 9\nalert(document.nodeName) // "#document"\nalert(document.nodeValue) // null\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const html = document.documentElement\nconst doctype = document.doctype\nconst head = document.head // HTML5 head.\nconst body = document.body\n\nconst title = document.title // \u53ef\u4fee\u6539.\nconst domain = document.domain // \u53ef\u8bbe\u7f6e\u540c\u6e90\u57df\u540d.\nconst url = document.URL\nconst referer = document.referer\nconst charSet = document.characterSet // HTML5 characterSet.\n\nconst anchors = documents.anchors\nconst images = documents.images\nconst links = documents.links\nconst forms = documents.forms\nconst formElements = documents.forms[0].elements // \u7b2c\u4e00\u4e2a\u8868\u5355\u5185\u7684\u6240\u6709\u5b57\u6bb5\n\n// HTML5 compatMode:\nif (document.compatMode === 'CSS1Compat')\n  console.log('Standards mode')\nelse if (document.compatMode === 'BackCompat')\n  console.log('Quirks mode')\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"document.getElementById(id)\n\ndocument.getElementsByName(name)\ndocument.getElementsByTagName(tagName)\ndocument.getElementsByClassName(className) // HTML5\ndocument.querySelector(cssSelector) // Selectors API\ndocument.querySelectorAll(cssSelector) // Selectors API\ndocument.write()\ndocument.writeln()\n"})}),"\n",(0,r.jsx)(n.h4,{id:"dom-document-type-node",children:"DOM Document Type Node"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html PUBLIC "-// W3C// DTD HTML 4.01// EN" "http:// www.w3.org/TR/html4/strict.dtd">\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"console.log(document.doctype.name) // \"html\"\nconsole.log(document.nodeType) // 10\nconsole.log(document.doctype.nodeName) // \"html\"\nconsole.log(document.doctype.nodeValue) // null\nconsole.log(document.doctype.publicId) // \"-// W3C// DTD HTML 4.01// EN\"\nconsole.log(document.doctype.systemId) // \"http://www.w3.org/TR/html4/strict.dtd\"\n\nconst doctype = document.implementation.createDocumentType(\n  'html',\n  '-// W3C// DTD HTML 4.01// EN',\n  'http://www.w3.org/TR/html4/strict.dtd'\n)\nconst doc = document.implementation.createDocument(\n  'http://www.w3.org/1999/xhtml',\n  'html',\n  doctype\n)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"dom-document-fragment-node",children:"DOM Document Fragment Node"}),"\n",(0,r.jsx)(n.p,{children:"\u51cf\u5c11 DOM \u64cd\u4f5c\u6b21\u6570, \u51cf\u5c11\u9875\u9762\u6e32\u67d3\u6b21\u6570:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const frag = document.createDocumentFragment()\n\nlet p\nlet t\n\np = document.createElement('p')\nt = document.createTextNode('first paragraph')\np.appendChild(t)\nfrag.appendChild(p)\n\np = document.createElement('p')\nt = document.createTextNode('second paragraph')\np.appendChild(t)\nfrag.appendChild(p)\n\n// \u53ea\u6e32\u67d3\u4e00\u6b21HTML\u9875\u9762\ndocument.body.appendChild(frag)\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u514b\u9686\u8282\u70b9\u8fdb\u884c\u5904\u7406, \u5904\u7406\u5b8c\u6bd5\u540e\u518d\u66ff\u6362\u539f\u8282\u70b9:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const oldNode = document.getElementById('result')\nconst clone = oldNode.cloneNode(true)\n// work with the clone\n\n// when you're done:\noldNode.parentNode.replaceChild(clone, oldNode)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Parse HTML:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const range = document.createRange()\nconst parse = range.createContextualFragment.bind(range)\n\nparse(`<ol>\n  <li>a</li>\n  <li>b</li>\n</ol>\n<ol>\n  <li>c</li>\n  <li>d</li>\n</ol>`)\n\nfunction parseHTML(string) {\n  const context = document.implementation.createHTMLDocument()\n\n  // Set the base href for the created document so any parsed elements with URLs\n  // are based on the document's URL\n  const base = context.createElement('base')\n  base.href = document.location.href\n  context.head.appendChild(base)\n\n  context.body.innerHTML = string\n  return context.body.children\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"dom-programming",children:"DOM Programming"}),"\n",(0,r.jsx)(n.h4,{id:"append-dom-node",children:"Append DOM Node"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"Node"}),(0,r.jsx)(n.th,{children:"HTML"}),(0,r.jsx)(n.th,{children:"Text"}),(0,r.jsx)(n.th,{children:"IE"}),(0,r.jsx)(n.th,{children:"Event Listeners"}),(0,r.jsx)(n.th,{children:"Secure"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"append"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Preserves"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"appendChild"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Preserves"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"innerHTML"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Loses"}),(0,r.jsx)(n.td,{children:"Careful"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"insertAdjacentHTML"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Preserves"}),(0,r.jsx)(n.td,{children:"Careful"})]})]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const testDiv = document.getElementById('testDiv')\n\nconst para = document.createElement('p')\ntestDiv.appendChild(para)\n\nconst txt = document.createTextNode('Hello World')\npara.appendChild(txt)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"innerHTML"}),": non-concrete, including all types of childNodes:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"div.innerHTML = '<p>Test<em>test</em>Test.</p>'\n// <div>\n//   <p>Test<em>test</em>Test.</p>\n// </div>\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"innerHTML"})," performance:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// BAD\nfor (const value of values)\n  ul.innerHTML += `<li>${value}</li>` // \u522b\u8fd9\u6837\u505a\uff01\n\n// GOOD\nlet itemsHtml = ''\nfor (const value of values)\n  itemsHtml += `<li>${value}</li>`\n\nul.innerHTML = itemsHtml\n\n// BEST\nul.innerHTML = values.map(value => `<li>${value}</li>`).join('')\n"})}),"\n",(0,r.jsx)(n.h4,{id:"insert-dom-node",children:"Insert DOM Node"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Append\nel.appendChild(newEl)\n\n// Prepend\nel.insertBefore(newEl, el.firstChild)\n\n// InsertBefore\nel.parentNode.insertBefore(newEl, el)\n\n// InsertAfter\nfunction insertAfter(newElement, targetElement) {\n  const parent = targetElement.parentNode\n\n  if (parent.lastChild === targetElement)\n    parent.appendChild(newElement)\n  else\n    parent.insertBefore(newElement, targetElement.nextSibling)\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"insertAdjacentHTML"}),"/",(0,r.jsx)(n.code,{children:"insertAdjacentText"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"beforebegin: \u63d2\u5165\u524d\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9."}),"\n",(0,r.jsx)(n.li,{children:"afterbegin: \u63d2\u5165\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9."}),"\n",(0,r.jsx)(n.li,{children:"beforeend: \u63d2\u5165\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9."}),"\n",(0,r.jsx)(n.li,{children:"afterend: \u63d2\u5165\u4e0b\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// 4 positions:\n//\n// \x3c!-- beforebegin --\x3e\n// <p>\n// \x3c!-- afterbegin --\x3e\n// foo\n// \x3c!-- beforeend --\x3e\n// </p>\n// \x3c!-- afterend --\x3e\nconst p = document.querySelector('p')\n\np.insertAdjacentHTML('beforebegin', '<a></a>')\np.insertAdjacentText('afterbegin', 'foo')\n\n// simply be moved element, not copied element\np.insertAdjacentElement('beforebegin', link)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"replace-dom-node",children:"Replace DOM Node"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"node.replaceChild(document.createTextNode(text), node.firstChild)\nnode.replaceChildren(...nodeList)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"remove-dom-node",children:"Remove DOM Node"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// \u5220\u9664\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9\nconst formerFirstChild = someNode.removeChild(someNode.firstChild)\n\n// \u5220\u9664\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9\nconst formerLastChild = someNode.removeChild(someNode.lastChild)\n\nwhile (div.firstChild)\n  div.removeChild(div.firstChild)\n\n// Remove self\nel.parentNode.removeChild(el)\nel.remove()\n"})}),"\n",(0,r.jsx)(n.h4,{id:"traverse-dom-node",children:"Traverse DOM Node"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const parent = node.parentNode\nconst children = node.childNodes\nconst first = node.firstChild\nconst last = node.lastChild\nconst previous = node.previousSibling\nconst next = node.nextSibling\n\nnode.matches(selector)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://www.w3.org/TR/ElementTraversal",children:"Element Traversal API"}),":\nnavigation properties listed above refer to all nodes.\nFor instance,\nin ",(0,r.jsx)(n.code,{children:"childNodes"})," can see both text nodes, element nodes, and even comment nodes."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const count = el.childElementCount\nconst parent = el.parentElement\nconst children = el.children\nconst first = el.firstElementChild\nconst last = el.lastElementChild\nconst previous = el.previousElementSibling\nconst next = el.nextElementSibling\n\nel.matches(selector)\n"})}),"\n",(0,r.jsx)(n.p,{children:"NodeList is iterable:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const elements = document.querySelectorAll('div')\n\nfor (const element of elements)\n  console.log(element)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/NodeIterator",children:"Node Iterator"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const div = document.getElementById('div1')\nconst filter = function (node) {\n  return node.tagName.toLowerCase() === 'li'\n    ? NodeFilter.FILTER_ACCEPT\n    : NodeFilter.FILTER_SKIP\n}\nconst iterator = document.createNodeIterator(\n  div,\n  NodeFilter.SHOW_ELEMENT,\n  filter,\n  false\n)\n\nfor (\n  let node = iterator.nextNode();\n  node !== null;\n  node = iterator.nextNode()\n)\n  console.log(node.tagName) // \u8f93\u51fa\u6807\u7b7e\u540d\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/TreeWalker",children:"Tree Walker"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const div = document.getElementById('div1')\nconst walker = document.createTreeWalker(\n  div,\n  NodeFilter.SHOW_ELEMENT,\n  null,\n  false\n)\n\nwalker.firstChild() // \u524d\u5f80<p>\nwalker.nextSibling() // \u524d\u5f80<ul>\n\nfor (\n  let node = walker.firstChild();\n  node !== null;\n  node = walker.nextSibling()\n)\n  console.log(node.tagName) // \u904d\u5386 <li>\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"NodeIterator vs TreeWalker",type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"NodeFilter.acceptNode()"})," ",(0,r.jsx)(n.code,{children:"FILTER_REJECT"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["For ",(0,r.jsx)(n.code,{children:"NodeIterator"}),", this flag is synonymous with ",(0,r.jsx)(n.code,{children:"FILTER_SKIP"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["For ",(0,r.jsx)(n.code,{children:"TreeWalker"}),", child nodes are also rejected."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TreeWalker"})," has more methods:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"firstChild"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"lastChild"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"previousSibling"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"nextSibling"}),"."]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,r.jsx)(n.h4,{id:"attributes-dom-node",children:"Attributes DOM Node"}),"\n",(0,r.jsx)(n.p,{children:"HTML attributes \u8bbe\u7f6e\u5bf9\u5e94\u7684 DOM properties \u521d\u59cb\u503c:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"alert(div.getAttribute('id')) // \"myDiv\" default div.id\nalert(div.getAttribute('class')) // \"bd\" default div.class\ndiv.setAttribute('id', 'someOtherId')\ndiv.setAttribute('class', 'ft')\ndiv.removeAttribute('id')\ndiv.removeAttribute('class')\n\n// `data-src`\nconsole.log(el.dataset.src)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"select-dom-node",children:"Select DOM Node"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Range",children:"Range API"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"startContainer"}),": \u8303\u56f4\u8d77\u70b9\u6240\u5728\u7684\u8282\u70b9 (\u9009\u533a\u4e2d\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9\u7684\u7236\u8282\u70b9)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"startOffset"}),": \u8303\u56f4\u8d77\u70b9\u5728 startContainer \u4e2d\u7684\u504f\u79fb\u91cf."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"endContainer"}),": \u8303\u56f4\u7ec8\u70b9\u6240\u5728\u7684\u8282\u70b9 (\u9009\u533a\u4e2d\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9\u7684\u7236\u8282\u70b9)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"endOffset"}),": \u8303\u56f4\u8d77\u70b9\u5728 startContainer \u4e2d\u7684\u504f\u79fb\u91cf."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"commonAncestorContainer"}),":\n\u6587\u6863\u4e2d\u4ee5 ",(0,r.jsx)(n.code,{children:"startContainer"})," \u548c ",(0,r.jsx)(n.code,{children:"endContainer"})," \u4e3a\u540e\u4ee3\u7684\u6700\u6df1\u7684\u8282\u70b9."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setStartBefore(refNode)"}),":\n\u628a\u8303\u56f4\u7684\u8d77\u70b9\u8bbe\u7f6e\u5230 refNode \u4e4b\u524d,\n\u4ece\u800c\u8ba9 refNode \u6210\u4e3a\u9009\u533a\u7684\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setStartAfter(refNode)"}),":\n\u628a\u8303\u56f4\u7684\u8d77\u70b9\u8bbe\u7f6e\u5230 refNode \u4e4b\u540e,\n\u4ece\u800c\u5c06 refNode \u6392\u9664\u5728\u9009\u533a\u4e4b\u5916,\n\u8ba9\u5176\u4e0b\u4e00\u4e2a\u540c\u80de\u8282\u70b9\u6210\u4e3a\u9009\u533a\u7684\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setEndBefore(refNode)"}),":\n\u628a\u8303\u56f4\u7684\u7ec8\u70b9\u8bbe\u7f6e\u5230 refNode \u4e4b\u524d,\n\u4ece\u800c\u5c06 refNode \u6392\u9664\u5728\u9009\u533a\u4e4b\u5916,\n\u8ba9\u5176\u4e0a\u4e00\u4e2a\u540c\u80de\u8282\u70b9\u6210\u4e3a\u9009\u533a\u7684\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setEndAfter(refNode)"}),":\n\u628a\u8303\u56f4\u7684\u7ec8\u70b9\u8bbe\u7f6e\u5230 refNode \u4e4b\u540e,\n\u4ece\u800c\u8ba9 refNode \u6210\u4e3a\u9009\u533a\u7684\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setStart(refNode, offset)"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setEnd(refNode, offset)"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"deleteContents()"}),": remove."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extractContents()"}),": remove and return."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cloneContents()"}),": clone."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"insertNode(node)"}),": \u5728\u8303\u56f4\u9009\u533a\u7684\u5f00\u59cb\u4f4d\u7f6e\u63d2\u5165\u4e00\u4e2a\u8282\u70b9."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"surroundContents(node)"}),": \u63d2\u5165\u5305\u542b\u8303\u56f4\u7684\u5185\u5bb9."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"collapse(boolean)"}),": \u8303\u56f4\u6298\u53e0."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"compareBoundaryPoints(Range.HOW, sourceRange)"}),": \u786e\u5b9a\u8303\u56f4\u4e4b\u95f4\u662f\u5426\u5b58\u5728\u516c\u5171\u7684\u8fb9\u754c (\u8d77\u70b9\u6216\u7ec8\u70b9)."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<!doctype html>\n<html>\n  <body>\n    <p id="p1"><b>Hello</b> world!</p>\n  </body>\n</html>\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const p1 = document.getElementById('p1')\nconst helloNode = p1.firstChild.firstChild\nconst worldNode = p1.lastChild\nconst range = document.createRange()\n\nrange.setStart(helloNode, 2)\nrange.setEnd(worldNode, 3)\nconst fragment1 = range.cloneContents() // clone\nconst fragment2 = range.extractContents() // remove and return\n\np1.parentNode.appendChild(fragment1)\np1.parentNode.appendChild(fragment2)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const p1 = document.getElementById('p1')\nconst helloNode = p1.firstChild.firstChild\nconst worldNode = p1.lastChild\nconst range = document.createRange()\n\nconst span = document.createElement('span')\nspan.style.color = 'red'\nspan.appendChild(document.createTextNode('Inserted text'))\n\nrange.setStart(helloNode, 2)\nrange.setEnd(worldNode, 3)\nrange.insertNode(span)\n// <p id=\"p1\"><b>He<span style=\"color: red\">Inserted text</span>llo</b> world</p>\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const p1 = document.getElementById('p1')\nconst helloNode = p1.firstChild.firstChild\nconst worldNode = p1.lastChild\nconst range = document.createRange()\n\nconst span = document.createElement('span')\nspan.style.backgroundColor = 'yellow'\n\nrange.selectNode(helloNode)\nrange.surroundContents(span)\n// <p><b><span style=\"background-color:yellow\">Hello</span></b> world!</p>\n"})}),"\n",(0,r.jsx)(n.h4,{id:"dynamic-scripts-loading",children:"Dynamic Scripts Loading"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function loadScript(url) {\n  const script = document.createElement('script')\n  script.src = url\n  script.async = true\n  document.body.appendChild(script)\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function loadScriptString(code) {\n  const script = document.createElement('script')\n  script.async = true\n  script.type = 'text/javascript'\n\n  try {\n    script.appendChild(document.createTextNode(code))\n  } catch (ex) {\n    script.text = code\n  }\n\n  document.body.appendChild(script)\n}\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"InnerHTML Script",type:"caution",children:(0,r.jsxs)(n.p,{children:["\u6240\u6709\u73b0\u4ee3\u6d4f\u89c8\u5668\u4e2d, \u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"innerHTML"})," \u5c5e\u6027\u521b\u5efa\u7684 ",(0,r.jsx)(n.code,{children:"<script>"})," \u5143\u7d20\u6c38\u8fdc\u4e0d\u4f1a\u6267\u884c."]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Next.js route ",(0,r.jsx)(n.a,{href:"https://github.com/vercel/next.js/blob/canary/packages/next/client/route-loader.ts",children:"loader"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Next.js ",(0,r.jsx)(n.code,{children:"<Script>"})," ",(0,r.jsx)(n.a,{href:"https://github.com/vercel/next.js/blob/canary/packages/next/client/script.tsx",children:"component"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"dynamic-styles-loading",children:"Dynamic Styles Loading"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function loadStyles(url) {\n  const link = document.createElement('link')\n  link.rel = 'stylesheet'\n  link.type = 'text/css'\n  link.href = url\n\n  const head = document.getElementsByTagName('head')[0]\n  head.appendChild(link)\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function loadStyleString(css) {\n  const style = document.createElement('style')\n  style.type = 'text/css'\n\n  try {\n    style.appendChild(document.createTextNode(css))\n  } catch (ex) {\n    style.styleSheet.cssText = css\n  }\n\n  const head = document.getElementsByTagName('head')[0]\n  head.appendChild(style)\n}\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"StyleSheet CSSText",type:"danger",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u82e5\u91cd\u7528\u540c\u4e00\u4e2a ",(0,r.jsx)(n.code,{children:"<style>"})," \u5143\u7d20\u5e76\u8bbe\u7f6e\u8be5\u5c5e\u6027\u8d85\u8fc7\u4e00\u6b21, \u5219\u53ef\u80fd\u5bfc\u81f4\u6d4f\u89c8\u5668\u5d29\u6e83."]}),"\n",(0,r.jsxs)(n.li,{children:["\u5c06 ",(0,r.jsx)(n.code,{children:"cssText"})," \u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\u4e5f\u53ef\u80fd\u5bfc\u81f4\u6d4f\u89c8\u5668\u5d29\u6e83."]}),"\n"]})}),"\n",(0,r.jsx)(n.h4,{id:"table-manipulation",children:"Table Manipulation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"<table>"})," \u5143\u7d20\u6dfb\u52a0\u4e86\u4ee5\u4e0b\u5c5e\u6027\u548c\u65b9\u6cd5:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"caption"}),": \u6307\u5411 ",(0,r.jsx)(n.code,{children:"<caption>"})," \u5143\u7d20\u7684\u6307\u9488 (\u5982\u679c\u5b58\u5728)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tBodies"}),": \u5305\u542b ",(0,r.jsx)(n.code,{children:"<tbody>"})," \u5143\u7d20\u7684 HTMLCollection."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tFoot"}),": \u6307\u5411 ",(0,r.jsx)(n.code,{children:"<tfoot>"})," \u5143\u7d20 (\u5982\u679c\u5b58\u5728)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tHead"}),": \u6307\u5411 ",(0,r.jsx)(n.code,{children:"<thead>"})," \u5143\u7d20 (\u5982\u679c\u5b58\u5728)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rows"}),": \u5305\u542b\u8868\u793a\u6240\u6709\u884c\u7684 HTMLCollection."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"createTHead()"}),": \u521b\u5efa ",(0,r.jsx)(n.code,{children:"<thead>"})," \u5143\u7d20, \u653e\u5230\u8868\u683c\u4e2d, \u8fd4\u56de\u5f15\u7528."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"createTFoot()"}),": \u521b\u5efa ",(0,r.jsx)(n.code,{children:"<tfoot>"})," \u5143\u7d20, \u653e\u5230\u8868\u683c\u4e2d, \u8fd4\u56de\u5f15\u7528."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"createCaption()"}),": \u521b\u5efa ",(0,r.jsx)(n.code,{children:"<caption>"})," \u5143\u7d20, \u653e\u5230\u8868\u683c\u4e2d, \u8fd4\u56de\u5f15\u7528."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"deleteTHead()"}),": \u5220\u9664 ",(0,r.jsx)(n.code,{children:"<thead>"})," \u5143\u7d20."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"deleteTFoot()"}),": \u5220\u9664 ",(0,r.jsx)(n.code,{children:"<tfoot>"})," \u5143\u7d20."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"deleteCaption()"}),": \u5220\u9664 ",(0,r.jsx)(n.code,{children:"<caption>"})," \u5143\u7d20."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"deleteRow(pos)"}),": \u5220\u9664\u7ed9\u5b9a\u4f4d\u7f6e\u7684\u884c."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"insertRow(pos)"}),": \u5728\u884c\u96c6\u5408\u4e2d\u7ed9\u5b9a\u4f4d\u7f6e\u63d2\u5165\u4e00\u884c."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"<tbody>"})," \u5143\u7d20\u6dfb\u52a0\u4e86\u4ee5\u4e0b\u5c5e\u6027\u548c\u65b9\u6cd5:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rows"}),": \u5305\u542b ",(0,r.jsx)(n.code,{children:"<tbody>"})," \u5143\u7d20\u4e2d\u6240\u6709\u884c\u7684 HTMLCollection."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"deleteRow(pos)"}),": \u5220\u9664\u7ed9\u5b9a\u4f4d\u7f6e\u7684\u884c."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"insertRow(pos)"}),": \u5728\u884c\u96c6\u5408\u4e2d\u7ed9\u5b9a\u4f4d\u7f6e\u63d2\u5165\u4e00\u884c, \u8fd4\u56de\u8be5\u884c\u7684\u5f15\u7528."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"<tr>"})," \u5143\u7d20\u6dfb\u52a0\u4e86\u4ee5\u4e0b\u5c5e\u6027\u548c\u65b9\u6cd5:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cells"}),": \u5305\u542b ",(0,r.jsx)(n.code,{children:"<tr>"})," \u5143\u7d20\u6240\u6709\u8868\u5143\u7684 HTMLCollection."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"deleteCell(pos)"}),": \u5220\u9664\u7ed9\u5b9a\u4f4d\u7f6e\u7684\u8868\u5143."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"insertCell(pos)"}),": \u5728\u8868\u5143\u96c6\u5408\u7ed9\u5b9a\u4f4d\u7f6e\u63d2\u5165\u4e00\u4e2a\u8868\u5143, \u8fd4\u56de\u8be5\u8868\u5143\u7684\u5f15\u7528."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// \u521b\u5efa\u8868\u683c\nconst table = document.createElement('table')\ntable.border = 1\ntable.width = '100%'\n\n// \u521b\u5efa\u8868\u4f53\nconst tbody = document.createElement('tbody')\ntable.appendChild(tbody)\n\n// \u521b\u5efa\u7b2c\u4e00\u884c\ntbody.insertRow(0)\ntbody.rows[0].insertCell(0)\ntbody.rows[0].cells[0].appendChild(document.createTextNode('Cell 1, 1'))\ntbody.rows[0].insertCell(1)\ntbody.rows[0].cells[1].appendChild(document.createTextNode('Cell 2, 1'))\n\n// \u521b\u5efa\u7b2c\u4e8c\u884c\ntbody.insertRow(1)\ntbody.rows[1].insertCell(0)\ntbody.rows[1].cells[0].appendChild(document.createTextNode('Cell 1, 2'))\ntbody.rows[1].insertCell(1)\ntbody.rows[1].cells[1].appendChild(document.createTextNode('Cell 2, 2'))\n\n// \u628a\u8868\u683c\u6dfb\u52a0\u5230\u6587\u6863\u4e3b\u4f53\ndocument.body.appendChild(table)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"iframe",children:"Iframe"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Attribute"}),(0,r.jsx)(n.th,{})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'src="https://google.com/"'})}),(0,r.jsx)(n.td,{children:"Sets address of the document to embed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'srcdoc="<p>Some html</p>"'})}),(0,r.jsx)(n.td,{children:"Sets HTML content of the page to show"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'height="100px"'})}),(0,r.jsx)(n.td,{children:"Sets iframe height in pixels"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'width="100px"'})}),(0,r.jsx)(n.td,{children:"Sets iframe width in pixels"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'name="my-iframe"'})}),(0,r.jsx)(n.td,{children:"Sets name of the iframe (used in JavaScript"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'allow="fullscreen"'})}),(0,r.jsx)(n.td,{children:"Sets feature policy for the iframe"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'referrerpolicy="no-referrer"'})}),(0,r.jsx)(n.td,{children:"Sets referrer when fetching iframe content"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'sandbox="allow-same-origin"'})}),(0,r.jsx)(n.td,{children:"Sets restrictions of the iframe"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'loading="lazy"'})}),(0,r.jsx)(n.td,{children:"Lazy loading"})]})]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<iframe src="https://www.google.com/" height="500px" width="500px"></iframe>\n<iframe src="https://platform.twitter.com/widgets/tweet_button.html"></iframe>\n<iframe srcdoc="<html><body>App</body></html>"></iframe>\n<iframe\n  sandbox="allow-same-origin allow-top-navigation allow-forms allow-scripts"\n  src="http://maps.example.com/embedded.html"\n></iframe>\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const iframeDocument = iframe.contentDocument\nconst iframeStyles = iframe.contentDocument.querySelectorAll('.css')\niframe.contentWindow.postMessage('message', '*')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"cssom",children:"CSSOM"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSS_Object_Model",children:"CSS Object Model"}),"\nis a set of APIs allowing the manipulation of CSS from JavaScript.\nIt is much like the DOM, but for the CSS rather than the HTML.\nIt allows users to read and modify CSS style dynamically."]}),"\n",(0,r.jsx)(n.h4,{id:"inline-styles",children:"Inline Styles"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"interface Element {\n  style: CSSStyleDeclaration\n}\n\nconst style = element.style.XX\nconst font = element.style.fontFamily\nconst mt = element.style.marginTopWidth\n"})}),"\n",(0,r.jsx)(n.h4,{id:"styles-getter-and-setter",children:"Styles Getter and Setter"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cssText"}),": \u4e00\u6b21\u751f\u6548."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"length"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getPropertyValue(name)"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getPropertyPriority"}),": return ",(0,r.jsx)(n.code,{children:"''"})," or ",(0,r.jsx)(n.code,{children:"important"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"item(index)"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setProperty(name, value, priority)"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"removeProperty(name)"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const box = document.querySelector('.box')\n\nbox.style.setProperty('color', 'orange')\nbox.style.setProperty('font-family', 'Georgia, serif')\nop.innerHTML = box.style.getPropertyValue('color')\nop2.innerHTML = `${box.style.item(0)}, ${box.style.item(1)}`\n\nbox.style.setProperty('font-size', '1.5em')\nbox.style.item(0) // \"font-size\"\n\ndocument.body.style.removeProperty('font-size')\ndocument.body.style.item(0) // \"\"\n\nmyDiv.style.cssText = 'width: 25px; height: 100px; background-color: green'\n\nfor (let i = 0, len = myDiv.style.length; i < len; i++)\n  console.log(myDiv.style[i]) // \u6216\u8005\u7528 myDiv.style.item(i)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"computed-styles",children:"Computed Styles"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Shorthand style for full property."}),"\n",(0,r.jsx)(n.li,{children:"Longhand style for specific property."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getPropertyValue"})," can get css variables."]}),"\n",(0,r.jsxs)(n.li,{children:["\u5728\u6240\u6709\u6d4f\u89c8\u5668\u4e2d\u8ba1\u7b97\u6837\u5f0f\u90fd\u662f",(0,r.jsx)(n.strong,{children:"\u53ea\u8bfb"}),"\u7684, \u4e0d\u80fd\u4fee\u6539 ",(0,r.jsx)(n.code,{children:"getComputedStyle()"})," \u65b9\u6cd5\u8fd4\u56de\u7684\u5bf9\u8c61."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const background = window.getComputedStyle(document.body).background\n\n// dot notation, same as above\nconst backgroundColor = window.getComputedStyle(el).backgroundColor\n\n// square bracket notation\nconst backgroundColor = window.getComputedStyle(el)['background-color']\n\n// using getPropertyValue()\n// can get css variables property too\nwindow.getComputedStyle(el).getPropertyValue('background-color')\n"})}),"\n",(0,r.jsx)(n.h4,{id:"css-class-list",children:"CSS Class List"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"element.classList.add('class')\nelement.classList.remove('class')\nelement.classList.toggle('class')\nelement.classList.contains('class')\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function addClassPolyfill(element, value) {\n  if (!element.className) {\n    element.className = value\n  } else {\n    newClassName = element.className\n    newClassName += ' '\n    newClassName += value\n    element.className = newClassName\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"dom-stylesheets-api",children:"DOM StyleSheets API"}),"\n",(0,r.jsxs)(n.p,{children:["\u4ee5\u4e0b\u662f ",(0,r.jsx)(n.code,{children:"CSSStyleSheet"})," \u4ece ",(0,r.jsx)(n.code,{children:"StyleSheet"})," \u7ee7\u627f\u7684\u5c5e\u6027:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"disabled: Boolean, \u8868\u793a\u6837\u5f0f\u8868\u662f\u5426\u88ab\u7981\u7528\u4e86 (\u8bbe\u7f6e\u4e3a true \u4f1a\u7981\u7528\u6837\u5f0f\u8868)."}),"\n",(0,r.jsxs)(n.li,{children:["href: ",(0,r.jsx)(n.code,{children:"<link>"})," URL/null."]}),"\n",(0,r.jsx)(n.li,{children:"media: \u6837\u5f0f\u8868\u652f\u6301\u7684\u5a92\u4f53\u7c7b\u578b\u96c6\u5408."}),"\n",(0,r.jsxs)(n.li,{children:["ownerNode: \u6307\u5411\u62e5\u6709\u5f53\u524d\u6837\u5f0f\u8868\u7684\u8282\u70b9 ",(0,r.jsx)(n.code,{children:"<link>"}),"/",(0,r.jsx)(n.code,{children:"<style>"}),"/null (",(0,r.jsx)(n.code,{children:"@import"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"title: ownerNode \u7684 title \u5c5e\u6027."}),"\n",(0,r.jsxs)(n.li,{children:["parentStyleSheet: ",(0,r.jsx)(n.code,{children:"@import"})," parent."]}),"\n",(0,r.jsxs)(n.li,{children:["type: \u6837\u5f0f\u8868\u7684\u7c7b\u578b (",(0,r.jsx)(n.code,{children:"'text/css'"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"cssRules: \u5f53\u524d\u6837\u5f0f\u8868\u5305\u542b\u7684\u6837\u5f0f\u89c4\u5219\u7684\u96c6\u5408."}),"\n",(0,r.jsxs)(n.li,{children:["ownerRule: \u5982\u679c\u6837\u5f0f\u8868\u662f\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"@import"})," \u5bfc\u5165\u7684, \u5219\u6307\u5411\u5bfc\u5165\u89c4\u5219."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"deleteRule(index)"}),": \u5728\u6307\u5b9a\u4f4d\u7f6e\u5220\u9664 cssRules \u4e2d\u7684\u89c4\u5219."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"insertRule(rule, index)"}),": \u5728\u6307\u5b9a\u4f4d\u7f6e\u5411 cssRules \u4e2d\u63d2\u5165\u89c4\u5219."]}),"\n"]}),"\n",(0,r.jsx)(n.h5,{id:"css-rules-definition",children:"CSS Rules Definition"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"CSSRule"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["type of ",(0,r.jsx)(n.code,{children:"CSSRule"}),":\nSTYLE_RULE (1), IMPORT_RULE (3), MEDIA_RULE (4), KEYFRAMES_RULE (7)."]}),"\n",(0,r.jsx)(n.li,{children:"cssText: \u8fd4\u56de\u6574\u6761\u89c4\u5219\u7684\u6587\u672c."}),"\n",(0,r.jsx)(n.li,{children:"selectorText: \u8fd4\u56de\u89c4\u5219\u7684\u9009\u62e9\u7b26\u6587\u672c."}),"\n",(0,r.jsx)(n.li,{children:"style: \u8fd4\u56de CSSStyleDeclaration \u5bf9\u8c61, \u53ef\u4ee5\u8bbe\u7f6e\u548c\u83b7\u53d6\u5f53\u524d\u89c4\u5219\u4e2d\u7684\u6837\u5f0f."}),"\n",(0,r.jsxs)(n.li,{children:["parentRule: \u5982\u679c\u8fd9\u6761\u89c4\u5219\u88ab\u5176\u4ed6\u89c4\u5219 (\u5982 ",(0,r.jsx)(n.code,{children:"@media"}),") \u5305\u542b, \u5219\u6307\u5411\u5305\u542b\u89c4\u5219."]}),"\n",(0,r.jsx)(n.li,{children:"parentStyleSheet: \u5305\u542b\u5f53\u524d\u89c4\u5219\u7684\u6837\u5f0f\u8868."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myRules = document.styleSheets[0].cssRules\nconst p = document.querySelector('p')\n\nfor (i of myRules) {\n  if (i.type === 1)\n    p.innerHTML += `<code>${i.selectorText}</code><br>`\n\n  if (i.selectorText === 'a:hover')\n    i.selectorText = 'a:hover, a:active'\n\n  const myStyle = i.style\n\n  // Set the bg color on the body\n  myStyle.setProperty('background-color', 'peachPuff')\n\n  // Get the font size of the body\n  myStyle.getPropertyValue('font-size')\n\n  // Get the 5th item in the body's style rule\n  myStyle.item(5)\n\n  // Log the current length of the body style rule (8)\n  console.log(myStyle.length)\n\n  // Remove the line height\n  myStyle.removeProperty('line-height')\n\n  // log the length again (7)\n  console.log(myStyle.length)\n\n  // Check priority of font-family (empty string)\n  myStyle.getPropertyPriority('font-family')\n}\n"})}),"\n",(0,r.jsx)(n.h5,{id:"media-rules",children:"Media Rules"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conditionText"})," property of media rule."]}),"\n",(0,r.jsxs)(n.li,{children:["Nested ",(0,r.jsx)(n.code,{children:"cssRules"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myRules = document.styleSheets[0].cssRules\nconst p = document.querySelector('.output')\n\nfor (i of myRules) {\n  if (i.type === 4) {\n    p.innerHTML += `<code>${i.conditionText}</code><br>`\n\n    for (j of i.cssRules)\n      p.innerHTML += `<code>${j.selectorText}</code><br>`\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h5,{id:"keyframe-rules",children:"Keyframe Rules"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," property of keyframe rule"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"keyText"})," property of keyframe rule."]}),"\n",(0,r.jsxs)(n.li,{children:["Nested ",(0,r.jsx)(n.code,{children:"cssRules"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myRules = document.styleSheets[0].cssRules\nconst p = document.querySelector('.output')\n\nfor (i of myRules) {\n  if (i.type === 7) {\n    p.innerHTML += `<code>${i.name}</code><br>`\n\n    for (j of i.cssRules)\n      p.innerHTML += `<code>${j.keyText}</code><br>`\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h5,{id:"manipulate-css-rules",children:"Manipulate CSS Rules"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myStylesheet = document.styleSheets[0]\nconsole.log(myStylesheet.cssRules.length) // 8\n\ndocument.styleSheets[0].insertRule(\n  'article { line-height: 1.5; font-size: 1.5em; }',\n  myStylesheet.cssRules.length\n)\nconsole.log(document.styleSheets[0].cssRules.length) // 9\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myStylesheet = document.styleSheets[0]\nconsole.log(myStylesheet.cssRules.length) // 8\n\nmyStylesheet.deleteRule(3)\nconsole.log(myStylesheet.cssRules.length) // 7\n"})}),"\n",(0,r.jsx)(n.h4,{id:"css-typed-object-model-api",children:"CSS Typed Object Model API"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSS_Typed_OM_API",children:"CSS Typed Object Model API"}),"\nsimplifies CSS property manipulation by exposing CSS values\nas ",(0,r.jsx)(n.strong,{children:"typed JavaScript objects"})," rather than strings."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/StylePropertyMap",children:(0,r.jsx)(n.code,{children:"StylePropertyMap"})}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const styleMap = document.body.computedStyleMap()\nconst cssValue = styleMap.get('line-height')\nconst { value, unit } = cssValue\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSStyleValue",children:(0,r.jsx)(n.code,{children:"CSSStyleValue"})}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSKeywordValue",children:(0,r.jsx)(n.code,{children:"CSSKeywordValue"})}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSImageValue",children:(0,r.jsx)(n.code,{children:"CSSImageValue"})}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSMathValue",children:(0,r.jsx)(n.code,{children:"CSSMathValue"})}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSNumericValue",children:(0,r.jsx)(n.code,{children:"CSSNumericValue"})}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSUnitValue",children:(0,r.jsx)(n.code,{children:"CSSUnitValue"})}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSTransformValue",children:(0,r.jsx)(n.code,{children:"CSSTransformValue"})}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSUnparsedValue",children:(0,r.jsx)(n.code,{children:"CSSUnparsedValue"})}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const styleMap = document.querySelector('#myElement').attributeStyleMap\nstyleMap.set('display', new CSSKeywordValue('initial'))\nconsole.log(myElement.get('display').value) // 'initial'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"dom-events",children:"DOM Events"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event.preventDefault()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event.stopPropagation()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["By default, event handlers are executed in the ",(0,r.jsx)(n.strong,{children:"bubbling"})," phase\n(unless set ",(0,r.jsx)(n.code,{children:"useCapture"})," to ",(0,r.jsx)(n.code,{children:"true"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"element.dispatchEvent(event)"})," to trigger events."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"events-object",children:"Events Object"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property/Method"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"type"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:"\u88ab\u89e6\u53d1\u7684\u4e8b\u4ef6\u7c7b\u578b"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"trusted"}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsx)(n.td,{children:"\u6d4f\u89c8\u5668\u751f\u6210/JavaScript \u521b\u5efa"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"View"}),(0,r.jsx)(n.td,{children:"AbstractView"}),(0,r.jsx)(n.td,{children:"\u4e8b\u4ef6\u6240\u53d1\u751f\u7684 window \u5bf9\u8c61"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"currentTarget"}),(0,r.jsx)(n.td,{children:"Element"}),(0,r.jsx)(n.td,{children:"Event handler binding"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"target"}),(0,r.jsx)(n.td,{children:"Element"}),(0,r.jsx)(n.td,{children:"Event trigger"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"bubbles"}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsx)(n.td,{children:"\u4e8b\u4ef6\u662f\u5426\u5192\u6ce1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"cancelable"}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsx)(n.td,{children:"\u662f\u5426\u53ef\u4ee5\u53d6\u6d88\u4e8b\u4ef6\u7684\u9ed8\u8ba4\u884c\u4e3a"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"eventPhase"}),(0,r.jsx)(n.td,{children:"Number"}),(0,r.jsx)(n.td,{children:"\u6355\u83b7\u9636\u6bb5/\u5230\u8fbe\u76ee\u6807/\u5192\u6ce1\u9636\u6bb5"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"defaultPrevented"}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"preventDefault()"})," called"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"preventDefault()"}),(0,r.jsx)(n.td,{children:"Function"}),(0,r.jsx)(n.td,{children:"\u7528\u4e8e\u53d6\u6d88\u4e8b\u4ef6\u7684\u9ed8\u8ba4\u884c\u4e3a"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"stopPropagation()"}),(0,r.jsx)(n.td,{children:"Function"}),(0,r.jsx)(n.td,{children:"\u7528\u4e8e\u53d6\u6d88\u6240\u6709\u540e\u7eed\u4e8b\u4ef6\u6355\u83b7\u6216\u5192\u6ce1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"stopImmediatePropagation()"}),(0,r.jsx)(n.td,{children:"Function"}),(0,r.jsx)(n.td,{children:"\u7528\u4e8e\u53d6\u6d88\u6240\u6709\u540e\u7eed\u4e8b\u4ef6\u6355\u83b7\u6216\u5192\u6ce1"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"events-checking",children:"Events Checking"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function handleEvent(event) {\n  node.matches(event.target) // return false or true\n  node.contains(event.target) // return false or true\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"global-ui-events",children:"Global UI Events"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"DOMContentLoaded"})," event:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5f53\u6587\u6863\u4e2d\u6ca1\u6709\u811a\u672c\u65f6, \u6d4f\u89c8\u5668\u89e3\u6790\u5b8c ",(0,r.jsx)(n.code,{children:"HTML"})," \u6587\u6863\u4fbf\u80fd\u89e6\u53d1 ",(0,r.jsx)(n.code,{children:"DOMContentLoaded"})," \u4e8b\u4ef6."]}),"\n",(0,r.jsxs)(n.li,{children:["\u5982\u679c\u6587\u6863\u4e2d\u5305\u542b\u811a\u672c, \u5219\u811a\u672c\u4f1a\u963b\u585e\u6587\u6863\u7684\u89e3\u6790,\n\u811a\u672c\u9700\u8981\u7b49 ",(0,r.jsx)(n.code,{children:"CSSOM"})," \u6784\u5efa\u5b8c\u6210\u624d\u80fd\u6267\u884c:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5728 ",(0,r.jsx)(n.code,{children:"DOM"}),"/",(0,r.jsx)(n.code,{children:"CSSOM"})," \u6784\u5efa\u5b8c\u6bd5, ",(0,r.jsx)(n.code,{children:"async"})," \u811a\u672c\u6267\u884c\u5b8c\u6210\u4e4b\u540e, ",(0,r.jsx)(n.code,{children:"DOMContentLoaded"})," \u4e8b\u4ef6\u89e6\u53d1."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"HTML"})," \u6587\u6863\u6784\u5efa\u4e0d\u53d7 ",(0,r.jsx)(n.code,{children:"defer"})," \u811a\u672c\u5f71\u54cd,\n\u4e0d\u9700\u8981\u7b49\u5f85 ",(0,r.jsx)(n.code,{children:"defer"})," \u811a\u672c\u6267\u884c\u4e0e\u6837\u5f0f\u8868\u52a0\u8f7d,\n",(0,r.jsx)(n.code,{children:"HTML"})," \u89e3\u6790\u5b8c\u6bd5\u540e, ",(0,r.jsx)(n.code,{children:"DOMContentLoaded"})," \u7acb\u5373\u89e6\u53d1."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b, ",(0,r.jsx)(n.code,{children:"DOMContentLoaded"})," \u7684\u89e6\u53d1\u4e0d\u9700\u8981\u7b49\u5f85\u56fe\u7247\u7b49\u5176\u4ed6\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210."]}),"\n",(0,r.jsxs)(n.li,{children:["\u5f53 ",(0,r.jsx)(n.code,{children:"HTML"})," \u6587\u6863\u89e3\u6790\u5b8c\u6210\u5c31\u4f1a\u89e6\u53d1 ",(0,r.jsx)(n.code,{children:"DOMContentLoaded"}),",\n",(0,r.jsx)(n.strong,{children:"\u6240\u6709\u8d44\u6e90"}),"\u52a0\u8f7d\u5b8c\u6210\u4e4b\u540e, ",(0,r.jsx)(n.strong,{children:"load"})," \u4e8b\u4ef6\u624d\u4f1a\u88ab\u89e6\u53d1."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function ready(fn) {\n  if (document.readyState !== 'loading')\n    fn()\n  else\n    document.addEventListener('DOMContentLoaded', fn)\n}\n\ndocument.addEventListener('DOMContentLoaded', (event) => {\n  console.log('DOM fully loaded and parsed.')\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"readystatechange"})," event:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"document.addEventListener('readystatechange', (event) => {\n  // HTML5 readyState\n  if (\n    document.readyState === 'interactive'\n    || document.readyState === 'complete'\n  ) {\n    console.log('Content loaded')\n  } else if (document.readyState === 'loading') {\n    console.log('Loading')\n  }\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"load"})," event (\u52a0\u8f7d\u5b8c\u6210):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"window.addEventListener('load', () => {\n  const image = document.createElement('img')\n  image.addEventListener('load', (event) => {\n    console.log(event.target.src)\n  })\n  document.body.appendChild(image)\n  image.src = 'smile.gif'\n\n  const script = document.createElement('script')\n  script.addEventListener('load', (event) => {\n    console.log('Loaded')\n  })\n  script.src = 'example.js'\n  script.async = true\n  document.body.appendChild(script)\n\n  const link = document.createElement('link')\n  link.type = 'text/css'\n  link.rel = 'stylesheet'\n  link.addEventListener('load', (event) => {\n    console.log('css loaded')\n  })\n  link.href = 'example.css'\n  document.getElementsByTagName('head')[0].appendChild(link)\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"visibilitychange"})," event, \u5207\u6362\u6807\u7b7e\u9875\u65f6\u6539\u53d8\u7f51\u9875\u6807\u9898/\u58f0\u97f3/\u89c6\u9891:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"window.addEventListener('visibilitychange', () => {\n  switch (document.visibilityState) {\n    case 'hidden':\n      console.log('Tab\u9690\u85cf')\n      break\n    case 'visible':\n      console.log('Tab\u88ab\u805a\u7126')\n      break\n    default:\n      throw new Error('Unsupported visibility!')\n  }\n})\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const videoElement = document.getElementById('videoElement')\n\n// AutoPlay the video if application is visible\nif (document.visibilityState === 'visible')\n  videoElement.play()\n\n// Handle page visibility change events\nfunction handleVisibilityChange() {\n  if (document.visibilityState === 'hidden')\n    videoElement.pause()\n  else\n    videoElement.play()\n}\n\ndocument.addEventListener('visibilitychange', handleVisibilityChange, false)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"pageshow"})," event (e.g ",(0,r.jsx)(n.a,{href:"https://www.sabatino.dev/bfcache-explained",children:"BFCache compatible"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"window.addEventListener('pageshow', (event) => {\n  if (event.persisted)\n    console.log('Page was loaded from cache.')\n})\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"beforeunload"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"unload"})," event: \u5378\u8f7d\u5b8c\u6210."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"abort"})," event: \u63d0\u524d\u7ec8\u6b62."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," event: \u5728\u6587\u672c\u6846 (",(0,r.jsx)(n.code,{children:"<input>"})," \u6216 ",(0,r.jsx)(n.code,{children:"textarea"}),") \u4e0a\u9009\u62e9\u5b57\u7b26."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"resize"})," event: \u7f29\u653e."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"scroll"})," event: \u6eda\u52a8."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"form-events",children:"Form Events"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"submit"}),"/",(0,r.jsx)(n.code,{children:"reset"})," event."]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/FormData",children:"FromData API"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/HTMLSelectElement/checkValidity",children:"CheckValidity API"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// <form className='validated-form' noValidate onSubmit={onSubmit}>\n\nfunction onSubmit(event) {\n  event.preventDefault()\n\n  const form = event.target\n  const isValid = form.checkValidity() // returns true or false\n  const formData = new FormData(form)\n\n  const validationMessages = Array.from(formData.keys()).reduce((acc, key) => {\n    acc[key] = form.elements[key].validationMessage\n    return acc\n  }, {})\n\n  setErrors(validationMessages)\n\n  console.log({\n    validationMessages,\n    data,\n    isValid,\n  })\n\n  if (isValid) {\n    // here you do what you need to do if is valid\n    const data = Array.from(formData.keys()).reduce((acc, key) => {\n      acc[key] = formData.get(key)\n      return acc\n    }, {})\n  } else {\n    // apply invalid class\n    Array.from(form.elements).forEach((i) => {\n      if (i.checkValidity()) {\n        // field is valid\n        i.parentElement.classList.remove('invalid')\n      } else {\n        // field is invalid\n        i.parentElement.classList.add('invalid')\n        console.log(i.validity)\n      }\n    })\n  }\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"document.querySelector('form').addEventListener('submit', (event) => {\n  const form = event.target\n  const url = new URL(form.action || window.location.href)\n  const formData = new FormData(form)\n  const searchParameters = new URLSearchParams(formData)\n\n  const options = {\n    method: form.method,\n  }\n\n  if (options.method === 'post') {\n    // Modify request body to include form data\n    options.body\n      = form.enctype === 'multipart/form-data' ? formData : searchParameters\n  } else {\n    // Modify URL to include form data\n    url.search = searchParameters\n  }\n\n  fetch(url, options)\n  event.preventDefault()\n})\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useRouter } from 'next/navigation'\n\nexport default function Page() {\n  const router = useRouter()\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n\n    const formData = new FormData(event.target)\n    const data = Object.fromEntries(formData)\n\n    // Do something with data. Most likely, send it to the server using fetch\n\n    // Redirect the user to the new page\n    router.push('/thank-you')\n  }\n\n  return <form onSubmit={handleSubmit}>...</form>\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"input-events",children:"Input Events"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blur"}),"/",(0,r.jsx)(n.code,{children:"focus"}),"/",(0,r.jsx)(n.code,{children:"focusin"}),"/",(0,r.jsx)(n.code,{children:"focusout"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"input"}),"/",(0,r.jsx)(n.code,{children:"change"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," event: \u5728\u6587\u672c\u6846 (",(0,r.jsx)(n.code,{children:"<input>"})," \u6216 ",(0,r.jsx)(n.code,{children:"textarea"}),") \u4e0a\u9009\u62e9\u5b57\u7b26."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CompositionEvent",children:[(0,r.jsx)(n.code,{children:"composition"})," event"]}),":\n\u4e2d\u6587\u8f93\u5165\u4e8b\u4ef6."]}),"\n"]}),"\n",(0,r.jsx)(n.h5,{id:"input-focus-event",children:"Input Focus Event"}),"\n",(0,r.jsx)(n.p,{children:"HTML5 focus management:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5728\u9875\u9762\u5b8c\u5168\u52a0\u8f7d\u4e4b\u524d, ",(0,r.jsx)(n.code,{children:"document.activeElement"})," \u4e3a null."]}),"\n",(0,r.jsxs)(n.li,{children:["\u9ed8\u8ba4\u60c5\u51b5\u4e0b, ",(0,r.jsx)(n.code,{children:"document.activeElement"})," \u5728\u9875\u9762\u521a\u52a0\u8f7d\u5b8c\u4e4b\u540e\u4f1a\u8bbe\u7f6e\u4e3a ",(0,r.jsx)(n.code,{children:"document.body"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"document.getElementById('myButton').focus()\nconsole.log(document.activeElement === button) // true\nconsole.log(document.hasFocus()) // true\n"})}),"\n",(0,r.jsxs)(n.admonition,{title:"Focus Events",type:"tip",children:[(0,r.jsx)(n.p,{children:"\u5f53\u7126\u70b9\u4ece\u9875\u9762\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\u79fb\u5230\u53e6\u4e00\u4e2a\u5143\u7d20\u4e0a\u65f6, \u4f1a\u4f9d\u6b21\u53d1\u751f\u5982\u4e0b\u4e8b\u4ef6:"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"focusout"}),": \u5728\u5931\u53bb\u7126\u70b9\u7684\u5143\u7d20\u4e0a\u89e6\u53d1."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"focusin"}),": \u5728\u83b7\u5f97\u7126\u70b9\u7684\u5143\u7d20\u4e0a\u89e6\u53d1"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blur"}),": \u5728\u5931\u53bb\u7126\u70b9\u7684\u5143\u7d20\u4e0a\u89e6\u53d1"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DOMFocusOut"}),": \u5728\u5931\u53bb\u7126\u70b9\u7684\u5143\u7d20\u4e0a\u89e6\u53d1"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"focus"}),": \u5728\u83b7\u5f97\u7126\u70b9\u7684\u5143\u7d20\u4e0a\u89e6\u53d1"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DOMFocusIn"}),": \u5728\u83b7\u5f97\u7126\u70b9\u7684\u5143\u7d20\u4e0a\u89e6\u53d1."]}),"\n"]})]}),"\n",(0,r.jsx)(n.h5,{id:"input-change-event",children:"Input Change Event"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"input"})," event:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'<input type="text" />'}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'<input type="password"/>'}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<textarea />"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"change"})," event:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'<input type="checkbox" />'}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'<input type="radio" />'}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'<input type="file" />'}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'<input type="file" multiple />'}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<select />"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const input = document.querySelector('input')\n\ninput.addEventListener('change', () => {\n  for (const file of Array.from(input.files)) {\n    const reader = new FileReader()\n    reader.addEventListener('load', () => {\n      console.log('File', file.name, 'starts with', reader.result.slice(0, 20))\n    })\n    reader.readAsText(file)\n  }\n})\n"})}),"\n",(0,r.jsx)(n.h5,{id:"input-select-event",children:"Input Select Event"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const input = document.querySelector('input')\n\ninput.addEventListener('select', (event) => {\n  const log = document.getElementById('log')\n  const selection = event.target.value.substring(\n    event.target.selectionStart,\n    event.target.selectionEnd\n  )\n  log.textContent = `You selected: ${selection}`\n})\n"})}),"\n",(0,r.jsx)(n.h4,{id:"clipboard-events",children:"Clipboard Events"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Clipboard_API",children:"Clipboard API"}),"\n(modern alternative for ",(0,r.jsx)(n.code,{children:"document.execCommand(command)"}),"):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copy"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cut"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paste"})," event."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const source = document.querySelector('div.source')\n\nsource.addEventListener('copy', (event) => {\n  const selection = document.getSelection()\n  event.clipboardData.setData(\n    'text/plain',\n    selection.toString().concat('copyright information')\n  )\n  event.preventDefault()\n})\n"})}),"\n",(0,r.jsx)(n.h4,{id:"mouse-events",children:"Mouse Events"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mousedown"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mouseup"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"click"})," event:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mousedown"})," \u4e0e ",(0,r.jsx)(n.code,{children:"mouseup"})," \u90fd\u89e6\u53d1\u540e, \u89e6\u53d1\u6b64\u4e8b\u4ef6."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event.clientX"}),"/",(0,r.jsx)(n.code,{children:"event.clientY"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event.pageX"}),"/",(0,r.jsx)(n.code,{children:"event.pageY"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event.screenX"}),"/",(0,r.jsx)(n.code,{children:"event.screenY"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event.shiftKey"}),"/",(0,r.jsx)(n.code,{children:"event.ctrlKey"}),"/",(0,r.jsx)(n.code,{children:"event.altKey"}),"/",(0,r.jsx)(n.code,{children:"event.metaKey"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dbclick"})," event: ",(0,r.jsx)(n.code,{children:"click"})," \u4e24\u6b21\u89e6\u53d1\u540e, \u89e6\u53d1\u6b64\u4e8b\u4ef6."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mousemove"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mouseenter"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mouseleave"})," event:\npointer has exited the element and all of its descendants."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mouseout"})," event:\npointer leaves the element or leaves one of the element's descendants."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mouseover"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Element/wheel_event",children:(0,r.jsx)(n.code,{children:"wheel"})}),"\nevent (replace deprecated ",(0,r.jsx)(n.code,{children:"mousewheel"})," event)."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For ",(0,r.jsx)(n.code,{children:"click"})," event, no need for X/Y to judge internal/outside state.\nUse ",(0,r.jsx)(n.code,{children:"element.contains"})," to check is a better way."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"window.addEventListener('click', (event) => {\n  if (document.getElementById('main').contains(event.target))\n    process()\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/DragEvent",children:"Drag Event"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"dragstart: start point."}),"\n",(0,r.jsx)(n.li,{children:"dragend"}),"\n",(0,r.jsxs)(n.li,{children:["dragenter: call ",(0,r.jsx)(n.code,{children:"event.preventDefault()"})," in drop zone."]}),"\n",(0,r.jsxs)(n.li,{children:["dragover: call ",(0,r.jsx)(n.code,{children:"event.preventDefault()"})," in drop zone."]}),"\n",(0,r.jsx)(n.li,{children:"dragleave"}),"\n",(0,r.jsx)(n.li,{children:"drop: end point."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Key point for implementing DnD widget is\n",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/DataTransfer",children:"DataTransfer"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Bindings between Drag Zone and Drop Zone."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DataTransfer.dropEffect"})," and ",(0,r.jsx)(n.code,{children:"DataTransfer.effectAllowed"})," to define DnD UI type."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DataTransfer.getData"})," and ",(0,r.jsx)(n.code,{children:"DataTransfer.setData"})," to transfer data."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DataTransfer.files"})," and ",(0,r.jsx)(n.code,{children:"DataTransfer.items"})," to transfer data."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Element/contextmenu_event",children:"Context Menu Event"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const noContext = document.getElementById('noContextMenu')\n\nnoContext.addEventListener('contextmenu', (e) => {\n  e.preventDefault()\n})\n"})}),"\n",(0,r.jsx)(n.h4,{id:"keyboard-events",children:"Keyboard Events"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"keydown"}),"/",(0,r.jsx)(n.code,{children:"keypress"}),"/",(0,r.jsx)(n.code,{children:"keyup"})," event:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const textbox = document.getElementById('myText')\n\ntextbox.addEventListener('keyup', (event) => {\n  console.log(event.charCode || event.keyCode)\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/KeyboardEvent/key/Key_Values",children:(0,r.jsx)(n.code,{children:"event.key"})}),"\n(replace deprecated ",(0,r.jsx)(n.code,{children:"event.keyCode"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"'Alt'\n'CapsLock'\n'Control'\n'Fn'\n'Numlock'\n'Shift'\n'Enter'\n'Tab'\n' ' // space bar\n\n'ArrowDown'\n'ArrowLeft'\n'ArrowRight'\n'ArrowUp'\n'Home'\n'End'\n'PageDOwn'\n'PageUp'\n\n'Backspace'\n'Delete'\n'Redo'\n'Undo'\n"})}),"\n",(0,r.jsx)(n.h4,{id:"device-events",children:"Device Events"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"deviceorientation"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"devicemotion"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"touchstart"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"touchmove"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"touchend"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"touchcancel"})," event."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Use\n",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Touch_events",children:(0,r.jsx)(n.code,{children:"touch"})}),"\nevents:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Dispatch custom\n",(0,r.jsx)(n.code,{children:"tap"}),"/",(0,r.jsx)(n.code,{children:"press"}),"/",(0,r.jsx)(n.code,{children:"swipe"}),"/",(0,r.jsx)(n.code,{children:"pinch"}),"/",(0,r.jsx)(n.code,{children:"drag"}),"/",(0,r.jsx)(n.code,{children:"drop"}),"/",(0,r.jsx)(n.code,{children:"rotate"})," event."]}),"\n",(0,r.jsxs)(n.li,{children:["Dispatch standard\n",(0,r.jsx)(n.code,{children:"click"}),"/",(0,r.jsx)(n.code,{children:"dbclick"}),"/mousedown",(0,r.jsx)(n.code,{children:"/"}),"mouseup",(0,r.jsx)(n.code,{children:"/"}),"mousemove` event."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"interface Pointer {\n  startTouch: Touch\n  startTime: number\n  status: string\n  element: TouchEventTarget\n  lastTouch?: Touch\n  lastTime?: number\n  deltaX?: number\n  deltaY?: number\n  duration?: number\n  distance?: number\n  isVertical?: boolean\n}\n\ntype TouchEventTarget = HTMLDivElement | EventTarget\ntype TouchEventHandler = (pointer: Pointer, touch: Touch) => void\n\nclass Recognizer {\n  pointers: Map<Touch['identifier'], Pointer>\n\n  constructor() {\n    this.pointers = new Map()\n  }\n\n  start(event: TouchEvent, callback?: TouchEventHandler) {\n    // touches: \u5f53\u524d\u5c4f\u5e55\u4e0a\u6240\u6709\u89e6\u6478\u70b9\u7684\u5217\u8868.\n    // targetTouches: \u5f53\u524d\u5bf9\u8c61\u4e0a\u6240\u6709\u89e6\u6478\u70b9\u7684\u5217\u8868.\n    // changedTouches: \u6d89\u53ca\u5f53\u524d\u4e8b\u4ef6\u7684\u89e6\u6478\u70b9\u7684\u5217\u8868.\n    for (let i = 0; i < event.changedTouches.length; i++) {\n      const touch = event.changedTouches[i]\n      const pointer: Pointer = {\n        startTouch: touch,\n        startTime: Date.now(),\n        status: 'tapping',\n        element: event.target,\n      }\n      this.pointers.set(touch.identifier, pointer)\n      if (callback)\n        callback(pointer, touch)\n    }\n  }\n\n  move(event: TouchEvent, callback?: TouchEventHandler) {\n    for (let i = 0; i < event.changedTouches.length; i++) {\n      const touch = event.changedTouches[i]\n      const pointer = this.pointers.get(touch.identifier)\n\n      if (!pointer)\n        return\n\n      if (!pointer.lastTouch) {\n        pointer.lastTouch = pointer.startTouch\n        pointer.lastTime = pointer.startTime\n        pointer.deltaX = 0\n        pointer.deltaY = 0\n        pointer.duration = 0\n        pointer.distance = 0\n      }\n\n      let time = Date.now() - pointer.lastTime\n\n      if (time > 0) {\n        const RECORD_DURATION = 70\n\n        if (time > RECORD_DURATION)\n          time = RECORD_DURATION\n\n        if (pointer.duration + time > RECORD_DURATION)\n          pointer.duration = RECORD_DURATION - time\n\n        pointer.duration += time\n        pointer.lastTouch = touch\n        pointer.lastTime = Date.now()\n        pointer.deltaX = touch.clientX - pointer.startTouch.clientX\n        pointer.deltaY = touch.clientY - pointer.startTouch.clientY\n        const x = pointer.deltaX * pointer.deltaX\n        const y = pointer.deltaY * pointer.deltaY\n        pointer.distance = Math.sqrt(x + y)\n        pointer.isVertical = x < y\n\n        if (callback)\n          callback(pointer, touch)\n      }\n    }\n  }\n\n  end(event: TouchEvent, callback?: TouchEventHandler) {\n    for (let i = 0; i < event.changedTouches.length; i++) {\n      const touch = event.changedTouches[i]\n      const id = touch.identifier\n      const pointer = this.pointers.get(id)\n\n      if (!pointer)\n        continue\n      if (callback)\n        callback(pointer, touch)\n\n      this.pointers.delete(id)\n    }\n  }\n\n  cancel(event: TouchEvent, callback?: TouchEventHandler) {\n    this.end(event, callback)\n  }\n\n  fire(elem: TouchEventTarget, type: string, props: EventInit) {\n    if (elem) {\n      const event = new Event(type, {\n        bubbles: true,\n        cancelable: true,\n        ...props,\n      })\n      elem.dispatchEvent(event)\n    }\n  }\n\n  static bind(el: TouchEventTarget, recognizer: Recognizer) {\n    function move(event: TouchEvent) {\n      recognizer.move(event)\n    }\n\n    function end(event: TouchEvent) {\n      recognizer.end(event)\n      document.removeEventListener('touchmove', move)\n      document.removeEventListener('touchend', end)\n      document.removeEventListener('touchcancel', cancel)\n    }\n\n    function cancel(event: TouchEvent) {\n      recognizer.cancel(event)\n      document.removeEventListener('touchmove', move)\n      document.removeEventListener('touchend', end)\n      document.removeEventListener('touchcancel', cancel)\n    }\n\n    el.addEventListener('touchstart', (event: TouchEvent) => {\n      recognizer.start(event)\n      document.addEventListener('touchmove', move)\n      document.addEventListener('touchend', end)\n      document.addEventListener('touchcancel', cancel)\n    })\n  }\n}\n\nexport default Recognizer\n"})}),"\n",(0,r.jsx)(n.h4,{id:"dispatch-events",children:"Dispatch Events"}),"\n",(0,r.jsxs)(n.p,{children:["Dispatch ",(0,r.jsx)(n.code,{children:"MouseEvent"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const btn = document.getElementById('myBtn')\n\n// \u521b\u5efa event \u5bf9\u8c61\nconst event = new MouseEvent('click', {\n  bubbles: true,\n  cancelable: true,\n  view: document.defaultView,\n})\n\n// \u89e6\u53d1\u4e8b\u4ef6\nbtn.dispatchEvent(event)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Dispatch ",(0,r.jsx)(n.code,{children:"KeyboardEvent"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const textbox = document.getElementById('myTextbox')\n\n// \u6309\u7167 DOM3 \u7684\u65b9\u5f0f\u521b\u5efa event \u5bf9\u8c61\nif (document.implementation.hasFeature('KeyboardEvents', '3.0')) {\n  // \u521d\u59cb\u5316 event \u5bf9\u8c61\n  const event = new KeyboardEvent('keydown', {\n    bubbles: true,\n    cancelable: true,\n    view: document.defaultView,\n    key: 'a',\n    location: 0,\n    shiftKey: true,\n  })\n\n  // \u89e6\u53d1\u4e8b\u4ef6\n  textbox.dispatchEvent(event)\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Dispatch ",(0,r.jsx)(n.code,{children:"CustomEvent"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const div = document.getElementById('myDiv')\ndiv.addEventListener('myEvent', (event) => {\n  console.log(`DIV: ${event.detail}`)\n})\ndocument.addEventListener('myEvent', (event) => {\n  console.log(`DOCUMENT: ${event.detail}`)\n})\n\nif (document.implementation.hasFeature('CustomEvents', '3.0')) {\n  const event = new CustomEvent('myEvent', {\n    bubbles: true,\n    cancelable: true,\n    detail: 'Hello world!',\n  })\n  div.dispatchEvent(event)\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"events-util",children:"Events Util"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"class EventUtil {\n  static getEvent(event) {\n    return event || window.event\n  }\n\n  static getTarget(event) {\n    return event.target || event.srcElement\n  }\n\n  static getRelatedTarget(event) {\n    // For `mouseover` and `mouseout` event:\n    if (event.relatedTarget)\n      return event.relatedTarget\n    else if (event.toElement)\n      return event.toElement\n    else if (event.fromElement)\n      return event.fromElement\n    else\n      return null\n  }\n\n  static preventDefault(event) {\n    if (event.preventDefault)\n      event.preventDefault()\n    else\n      event.returnValue = false\n  }\n\n  static stopPropagation(event) {\n    if (event.stopPropagation)\n      event.stopPropagation()\n    else\n      event.cancelBubble = true\n  }\n\n  static addHandler(element, type, handler) {\n    if (element.addEventListener)\n      element.addEventListener(type, handler, false)\n    else if (element.attachEvent)\n      element.attachEvent(`on${type}`, handler)\n    else\n      element[`on${type}`] = handler\n  }\n\n  static removeHandler(element, type, handler) {\n    if (element.removeEventListener)\n      element.removeEventListener(type, handler, false)\n    else if (element.detachEvent)\n      element.detachEvent(`on${type}`, handler)\n    else\n      element[`on${type}`] = null\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"dom-rect",children:"DOM Rect"}),"\n",(0,r.jsx)(n.h4,{id:"dom-width-and-height",children:"DOM Width and Height"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"outerHeight: \u6574\u4e2a\u6d4f\u89c8\u5668\u7a97\u53e3\u7684\u5927\u5c0f, \u5305\u62ec\u7a97\u53e3\u6807\u9898/\u5de5\u5177\u680f/\u72b6\u6001\u680f\u7b49."}),"\n",(0,r.jsx)(n.li,{children:"innerHeight: DOM \u89c6\u53e3\u7684\u5927\u5c0f, \u5305\u62ec\u6eda\u52a8\u6761."}),"\n",(0,r.jsx)(n.li,{children:"offsetHeight: \u6574\u4e2a\u53ef\u89c6\u533a\u57df\u5927\u5c0f, \u5305\u62ec border \u548c scrollbar \u5728\u5185 (content + padding + border)."}),"\n",(0,r.jsx)(n.li,{children:"clientHeight: \u5185\u90e8\u53ef\u89c6\u533a\u57df\u5927\u5c0f (content + padding)."}),"\n",(0,r.jsx)(n.li,{children:"scrollHeight: \u5143\u7d20\u5185\u5bb9\u7684\u9ad8\u5ea6, \u5305\u62ec\u6ea2\u51fa\u90e8\u5206."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Client Size",src:t(1919).A+"",title:"Client Size",width:"683",height:"617"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// const supportInnerWidth = window.innerWidth !== undefined;\n// const supportInnerHeight = window.innerHeight !== undefined;\n// const isCSS1Compat = (document.compatMode || '') === 'CSS1Compat';\nconst width\n  = window.innerWidth\n  || document.documentElement.clientWidth\n  || document.body.clientWidth\nconst height\n  = window.innerHeight\n  || document.documentElement.clientHeight\n  || document.body.clientHeight\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// \u7f29\u653e\u5230 100\xd7100\nwindow.resizeTo(100, 100)\n// \u7f29\u653e\u5230 200\xd7150\nwindow.resizeBy(100, 50)\n// \u7f29\u653e\u5230 300\xd7300\nwindow.resizeTo(300, 300)\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"DOM Rect API",type:"tip",children:(0,r.jsx)(n.p,{children:"In case of transforms,\nthe offsetWidth and offsetHeight returns the layout width and height (all the same),\nwhile getBoundingClientRect() returns the rendering width and height."})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"getBoundingClientRect"}),":"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Element/getBoundingClientRect",children:(0,r.jsx)(n.img,{src:"https://developer.mozilla.org/docs/Web/API/Element/getBoundingClientRect/element-box-diagram.png",alt:"Client Rect"})})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function isElementInViewport(el) {\n  const { top, height, left, width } = el.getBoundingClientRect()\n  const w\n    = window.innerWidth\n    || document.documentElement.clientWidth\n    || document.body.clientWidth\n  const h\n    = window.innerHeight\n    || document.documentElement.clientHeight\n    || document.body.clientHeight\n\n  return top <= h && top + height >= 0 && left <= w && left + width >= 0\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"dom-left-and-top",children:"DOM Left and Top"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"offsetLeft/offsetTop:\n\u8868\u793a\u8be5\u5143\u7d20\u7684\u5de6\u4e0a\u89d2 (\u8fb9\u6846\u5916\u8fb9\u7f18) \u4e0e\u5df2\u5b9a\u4f4d\u7684\u7236\u5bb9\u5668 (offsetParent \u5bf9\u8c61) \u5de6\u4e0a\u89d2\u7684\u8ddd\u79bb."}),"\n",(0,r.jsxs)(n.li,{children:["clientLeft/clientTop:\n\u8868\u793a\u8be5\u5143\u7d20 padding \u81f3 margin \u7684\u8ddd\u79bb,\n\u59cb\u7ec8\u7b49\u4e8e ",(0,r.jsx)(n.code,{children:".getComputedStyle()"})," \u8fd4\u56de\u7684 ",(0,r.jsx)(n.code,{children:"border-left-width"}),"/",(0,r.jsx)(n.code,{children:"border-top-width"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"scrollLeft/scrollTop:\n\u5143\u7d20\u6eda\u52a8\u6761\u4f4d\u7f6e, \u88ab\u9690\u85cf\u7684\u5185\u5bb9\u533a\u57df\u5de6\u4fa7/\u4e0a\u65b9\u7684\u50cf\u7d20\u4f4d\u7f6e."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Offset Size",src:t(3787).A+"",title:"Offset Size",width:"965",height:"614"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function getElementLeft(element) {\n  let actualLeft = element.offsetLeft\n  let current = element.offsetParent\n\n  while (current !== null) {\n    actualLeft += current.offsetLeft\n    current = current.offsetParent\n  }\n\n  return actualLeft\n}\n\nfunction getElementTop(element) {\n  let actualTop = element.offsetTop\n  let current = element.offsetParent\n\n  while (current !== null) {\n    actualTop += current.offsetTop\n    current = current.offsetParent\n  }\n\n  return actualTop\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// \u628a\u7a97\u53e3\u79fb\u52a8\u5230\u5de6\u4e0a\u89d2\nwindow.moveTo(0, 0)\n// \u628a\u7a97\u53e3\u5411\u4e0b\u79fb\u52a8 100 \u50cf\u7d20\nwindow.moveBy(0, 100)\n// \u628a\u7a97\u53e3\u79fb\u52a8\u5230\u5750\u6807\u4f4d\u7f6e (200, 300)\nwindow.moveTo(200, 300)\n// \u628a\u7a97\u53e3\u5411\u5de6\u79fb\u52a8 50 \u50cf\u7d20\nwindow.moveBy(-50, 0)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"dom-scroll-size",children:"DOM Scroll Size"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"scrollLeft/scrollX/PageXOffset: \u5143\u7d20\u5185\u5bb9\u5411\u53f3\u6eda\u52a8\u4e86\u591a\u5c11\u50cf\u7d20, \u5982\u679c\u6ca1\u6709\u6eda\u52a8\u5219\u4e3a 0."}),"\n",(0,r.jsx)(n.li,{children:"scrollTop/scrollY/pageYOffset: \u5143\u7d20\u5185\u5bb9\u5411\u4e0a\u6eda\u52a8\u4e86\u591a\u5c11\u50cf\u7d20, \u5982\u679c\u6ca1\u6709\u6eda\u52a8\u5219\u4e3a 0."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Scroll Size",src:t(4225).A+"",title:"Scroll Size",width:"1162",height:"710"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// const supportPageOffset = window.pageXOffset !== undefined;\n// const isCSS1Compat = (document.compatMode || '') === 'CSS1Compat';\nconst x\n  = window.pageXOffset\n  || document.documentElement.scrollLeft\n  || document.body.scrollLeft\nconst y\n  = window.pageYOffset\n  || document.documentElement.scrollTop\n  || document.body.scrollTop\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"if (window.innerHeight + window.pageYOffset === document.body.scrollHeight)\n  console.log('Scrolled to Bottom!')\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// \u76f8\u5bf9\u4e8e\u5f53\u524d\u89c6\u53e3\u5411\u4e0b\u6eda\u52a8 100 \u50cf\u7d20\nwindow.scrollBy(0, 100)\n// \u76f8\u5bf9\u4e8e\u5f53\u524d\u89c6\u53e3\u5411\u53f3\u6eda\u52a8 40 \u50cf\u7d20\nwindow.scrollBy(40, 0)\n\n// \u6eda\u52a8\u5230\u9875\u9762\u5de6\u4e0a\u89d2\nwindow.scrollTo(0, 0)\n// \u6eda\u52a8\u5230\u8ddd\u79bb\u5c4f\u5e55\u5de6\u8fb9\u53ca\u9876\u8fb9\u5404 100 \u50cf\u7d20\u7684\u4f4d\u7f6e\nwindow.scrollTo(100, 100)\n// \u6b63\u5e38\u6eda\u52a8\nwindow.scrollTo({\n  left: 100,\n  top: 100,\n  behavior: 'auto',\n})\n// \u5e73\u6ed1\u6eda\u52a8\nwindow.scrollTo({\n  left: 100,\n  top: 100,\n  behavior: 'smooth',\n})\n\ndocument.forms[0].scrollIntoView() // \u7a97\u53e3\u6eda\u52a8\u540e, \u5143\u7d20\u5e95\u90e8\u4e0e\u89c6\u53e3\u5e95\u90e8\u5bf9\u9f50.\ndocument.forms[0].scrollIntoView(true) // \u7a97\u53e3\u6eda\u52a8\u540e, \u5143\u7d20\u9876\u90e8\u4e0e\u89c6\u53e3\u9876\u90e8\u5bf9\u9f50.\ndocument.forms[0].scrollIntoView({ block: 'start' })\ndocument.forms[0].scrollIntoView({ behavior: 'smooth', block: 'start' })\n"})}),"\n",(0,r.jsx)(n.h3,{id:"dom-observer",children:"DOM Observer"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/IntersectionObserver",children:"Intersection Observer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/MutationObserver",children:"Mutation Observer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/ResizeObserver",children:"Resize Observer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/PerformanceObserver",children:"Performance Observer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/ReportingObserver",children:"Reporting Observer"})}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"intersection-observer",children:"Intersection Observer"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// <img class=\"lzy_img\" src=\"lazy_img.jpg\" data-src=\"real_img.jpg\" />\ndocument.addEventListener('DOMContentLoaded', () => {\n  const imageObserver = new IntersectionObserver((entries, imgObserver) => {\n    entries.forEach((entry) => {\n      if (entry.isIntersecting) {\n        const lazyImage = entry.target\n        console.log('Lazy loading ', lazyImage)\n        lazyImage.src = lazyImage.dataset.src\n\n        // only load image once\n        lazyImage.classList.remove('lzy')\n        imgObserver.unobserve(lazyImage)\n      }\n    })\n  })\n\n  const lazyImages = document.querySelectorAll('img.lzy_img')\n  lazyImages.forEach(lazyImage => imageObserver.observe(lazyImage))\n})\n"})}),"\n",(0,r.jsx)(n.h4,{id:"mutation-observer",children:"Mutation Observer"}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u679c\u6587\u6863\u4e2d\u8fde\u7eed\u63d2\u5165 1000 \u4e2a ",(0,r.jsx)(n.code,{children:"<li>"})," \u5143\u7d20, \u5c31\u4f1a\u8fde\u7eed\u89e6\u53d1 1000 \u4e2a\u63d2\u5165\u4e8b\u4ef6,\n\u6267\u884c\u6bcf\u4e2a\u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570, \u8fd9\u5f88\u53ef\u80fd\u9020\u6210\u6d4f\u89c8\u5668\u7684\u5361\u987f;\nMutation Observer \u53ea\u4f1a\u5728 1000 \u4e2a\u6bb5\u843d\u90fd\u63d2\u5165\u7ed3\u675f\u540e\u624d\u4f1a\u89e6\u53d1, \u4e14\u53ea\u89e6\u53d1\u4e00\u6b21."]}),"\n",(0,r.jsx)(n.p,{children:"Mutation Observer \u6709\u4ee5\u4e0b\u7279\u70b9:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5b83\u7b49\u5f85\u6240\u6709\u811a\u672c\u4efb\u52a1\u5b8c\u6210\u540e, \u624d\u4f1a\u8fd0\u884c, \u5373\u91c7\u7528\u5f02\u6b65\u65b9\u5f0f."}),"\n",(0,r.jsx)(n.li,{children:"\u5b83\u628a DOM \u53d8\u52a8\u8bb0\u5f55\u5c01\u88c5\u6210\u4e00\u4e2a\u6570\u7ec4\u8fdb\u884c\u5904\u7406, \u800c\u4e0d\u662f\u4e00\u6761\u6761\u5730\u4e2a\u522b\u5904\u7406 DOM \u53d8\u52a8."}),"\n",(0,r.jsx)(n.li,{children:"\u8bb0\u5f55\u961f\u5217\u548c\u56de\u8c03\u5904\u7406\u7684\u9ed8\u8ba4\u884c\u4e3a\u662f\u8017\u5c3d\u8fd9\u4e2a\u961f\u5217, \u5904\u7406\u6bcf\u4e2a MutationRecord, \u7136\u540e\u8ba9\u5b83\u4eec\u8d85\u51fa\u4f5c\u7528\u57df\u5e76\u88ab\u5783\u573e\u56de\u6536."}),"\n",(0,r.jsx)(n.li,{children:"MutationObserver \u5b9e\u4f8b\u62e5\u6709\u88ab\u89c2\u5bdf\u76ee\u6807\u8282\u70b9\u7684\u5f31\u5f15\u7528, \u4e0d\u4f1a\u59a8\u788d\u5783\u573e\u56de\u6536\u7a0b\u5e8f\u56de\u6536\u76ee\u6807\u8282\u70b9."}),"\n",(0,r.jsx)(n.li,{children:"\u5b83\u5373\u53ef\u4ee5\u89c2\u5bdf\u53d1\u751f\u5728 DOM \u8282\u70b9\u7684\u6240\u6709\u53d8\u52a8, \u4e5f\u53ef\u4ee5\u89c2\u5bdf\u67d0\u4e00\u7c7b\u53d8\u52a8."}),"\n",(0,r.jsxs)(n.li,{children:["\u88ab\u89c2\u5bdf\u5b50\u6811\u4e2d\u7684\u8282\u70b9 (",(0,r.jsx)(n.code,{children:"{ subtree: true }"}),") \u88ab\u79fb\u51fa\u5b50\u6811\u4e4b\u540e\u4ecd\u7136\u80fd\u591f\u89e6\u53d1\u53d8\u5316\u4e8b\u4ef6."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const mutationObserver = new MutationObserver((mutations) => {\n  mutations.forEach((mutation) => {\n    console.log(mutation)\n  })\n})\n\n// \u5f00\u59cb\u4fa6\u542c\u9875\u9762\u7684\u6839 HTML \u5143\u7d20\u4e2d\u7684\u66f4\u6539.\nmutationObserver.observe(document.documentElement, {\n  attributes: true,\n  characterData: true,\n  childList: true,\n  subtree: true,\n  attributeOldValue: true,\n  characterDataOldValue: true,\n})\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const target = document.querySelector('#container')\nfunction callback(mutations, observer) {\n  mutations.forEach((mutation) => {\n    switch (mutation.type) {\n      case 'attributes':\n        // the name of the changed attribute is in\n        // mutation.attributeName\n        // and its old value is in mutation.oldValue\n        // the current value can be retrieved with\n        // target.getAttribute(mutation.attributeName)\n        break\n      case 'childList':\n        // any added nodes are in mutation.addedNodes\n        // any removed nodes are in mutation.removedNodes\n        break\n      default:\n        throw new Error('Unsupported mutation!')\n    }\n  })\n}\n\nconst observer = new MutationObserver(callback)\nobserver.observe(target, {\n  attributes: true,\n  attributeFilter: ['foo'], // only observe attribute 'foo'\n  attributeOldValue: true,\n  childList: true,\n})\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const observer = new MutationObserver(mutationRecords =>\n  console.log(mutationRecords)\n)\n\n// \u521b\u5efa\u4e24\u4e2a\u521d\u59cb\u5b50\u8282\u70b9\ndocument.body.appendChild(document.createElement('div'))\ndocument.body.appendChild(document.createElement('span'))\n\nobserver.observe(document.body, { childList: true })\n\n// \u4ea4\u6362\u5b50\u8282\u70b9\u987a\u5e8f\ndocument.body.insertBefore(document.body.lastChild, document.body.firstChild)\n// \u53d1\u751f\u4e86\u4e24\u6b21\u53d8\u5316: \u7b2c\u4e00\u6b21\u662f\u8282\u70b9\u88ab\u79fb\u9664, \u7b2c\u4e8c\u6b21\u662f\u8282\u70b9\u88ab\u6dfb\u52a0\n// [\n//   {\n//     addedNodes: NodeList[],\n//     attributeName: null,\n//     attributeNamespace: null,\n//     oldValue: null,\n//     nextSibling: null,\n//     previousSibling: div,\n//     removedNodes: NodeList[span],\n//     target: body,\n//     type: childList,\n//   },\n//   {\n//     addedNodes: NodeList[span],\n//     attributeName: null,\n//     attributeNamespace: null,\n//     oldValue: null,\n//     nextSibling: div,\n//     previousSibling: null,\n//     removedNodes: NodeList[],\n//     target: body,\n//     type: \"childList\",\n//   }\n// ]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"xml-namespace",children:"XML Namespace"}),"\n",(0,r.jsxs)(n.p,{children:["XML \u547d\u540d\u7a7a\u95f4\u53ef\u4ee5\u5b9e\u73b0\u5728\u4e00\u4e2a\u683c\u5f0f\u89c4\u8303\u7684\u6587\u6863\u4e2d\u6df7\u7528\u4e0d\u540c\u7684 XML \u8bed\u8a00,\n\u907f\u514d\u5143\u7d20\u547d\u540d\u51b2\u7a81 (",(0,r.jsx)(n.code,{children:"tagName"}),"/",(0,r.jsx)(n.code,{children:"localName"}),"/",(0,r.jsx)(n.code,{children:"namespaceURI"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<html xmlns="http://www.w3.org/1999/xhtml">\n  <head>\n    <title>Example XHTML page</title>\n  </head>\n  <body>\n    <s:svg xmlns:s="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" style="width: 100%; height: 100%">\n      <s:rect x="0" y="0" width="100" height="100" style="fill: red" />\n    </s:svg>\n  </body>\n</html>\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"console.log(document.body.isDefaultNamespace('http://www.w3.org/1999/xhtml'))\nconsole.log(svg.lookupPrefix('http://www.w3.org/2000/svg')) // \"s\"\nconsole.log(svg.lookupNamespaceURI('s')) // \"http://www.w3.org/2000/svg\"\n\nconst newSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\nconst newAttr = document.createAttributeNS('http://www.somewhere.com', 'random')\nconst elems = document.getElementsByTagNameNS(\n  'http://www.w3.org/1999/xhtml',\n  '*'\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"network",children:"Network"}),"\n",(0,r.jsx)(n.h3,{id:"json",children:"JSON"}),"\n",(0,r.jsx)(n.p,{children:"JSON (JavaScript Object Notation) methods:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const obj = JSON.parse(json)\nconst json = JSON.stringify(obj)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://exploringjs.com/impatient-js/ch_json.html#json-replacers-revivers",children:(0,r.jsx)(n.code,{children:"JSON.stringify(value, filter, space)"})}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Symbol"}),"/",(0,r.jsx)(n.code,{children:"function"}),"/",(0,r.jsx)(n.code,{children:"NaN"}),"/",(0,r.jsx)(n.code,{children:"Infinity"}),"/",(0,r.jsx)(n.code,{children:"undefined"}),": ",(0,r.jsx)(n.code,{children:"null"}),"/ignored."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BitInt"}),": throw ",(0,r.jsx)(n.code,{children:"TypeError"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Circular reference object: throw ",(0,r.jsx)(n.code,{children:"TypeError"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"toJSON"})," method:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const obj = {\n  name: 'zc',\n  toJSON() {\n    return 'return toJSON'\n  },\n}\n\n// return toJSON\nconsole.log(JSON.stringify(obj))\n\n// \"2022-03-06T08:24:56.138Z\"\nJSON.stringify(new Date())\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ajax",children:"AJAX"}),"\n",(0,r.jsx)(n.h4,{id:"ajax-data-format",children:"AJAX Data Format"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Format"}),(0,r.jsx)(n.th,{style:{textAlign:"right"},children:"Size (bytes)"}),(0,r.jsx)(n.th,{style:{textAlign:"right"},children:"Download (ms)"}),(0,r.jsx)(n.th,{style:{textAlign:"right"},children:"Parse (ms)"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Verbose XML"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"582,960"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"999.4"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"343.1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Verbose JSON-P"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"487,913"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"598.2"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"0.0"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Simple XML"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"437,960"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"475.1"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"83.1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Verbose JSON"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"487,895"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"527.7"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"26.7"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Simple JSON"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"392,895"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"498.7"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"29.0"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Simple JSON-P"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"392,913"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"454.0"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"3.1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Array JSON"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"292,895"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"305.4"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"18.6"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Array JSON-P"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"292,912"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"316.0"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"3.4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Custom Format (script insertion)"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"222,912"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"66.3"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"11.7"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Custom Format (XHR)"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"222,892"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"63.1"}),(0,r.jsx)(n.td,{style:{textAlign:"right"},children:"14.5"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"ajax-usage",children:"AJAX Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const XHR = (function () {\n  const standard = {\n    createXHR() {\n      return new XMLHttpRequest()\n    },\n  }\n  const newActionXObject = {\n    createXHR() {\n      return new ActionXObject('Msxml12.XMLHTTP')\n    },\n  }\n  const oldActionXObject = {\n    createXHR() {\n      return new ActionXObject('Microsoft.XMLHTTP')\n    },\n  }\n\n  // \u6839\u636e\u517c\u5bb9\u6027\u8fd4\u56de\u5bf9\u5e94\u7684\u5de5\u5382\u5bf9\u8c61\n  // \u6b64\u7acb\u5373\u51fd\u6570\u8fd0\u884c\u4e00\u6b21\u5373\u53ef\u5b8c\u6210\u517c\u5bb9\u6027\u68c0\u67e5, \u9632\u6b62\u91cd\u590d\u68c0\u67e5\n  if (standard.createXHR()) {\n    return standard\n  } else {\n    try {\n      newActionXObject.createXHR()\n      return newActionXObject\n    } catch (o) {\n      oldActionXObject.createXHR()\n      return oldActionXObject\n    }\n  }\n})()\n\nconst request = XHR.createXHR()\n\n// 3rd argument : async mode\nrequest.open('GET', 'example.txt', true)\n\nrequest.onreadystatechange = function () {\n  // do something\n  /*\n  switch(request.readyState) {\n    case 0: initialize\n    case 1: loading\n    case 2: loaded\n    case 3: transaction\n    case 4: complete\n  }\n  */\n  if (request.readyState === 4) {\n    const para = document.createElement('p')\n    const txt = document.createTextNode(request.responseText)\n    para.appendChild(txt)\n    document.getElementById('new').appendChild(para)\n  }\n}\n\nrequest.send(null)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"ajax({\n  url: './TestXHR.aspx', // \u8bf7\u6c42\u5730\u5740\n  type: 'POST', // \u8bf7\u6c42\u65b9\u5f0f\n  data: { name: 'super', age: 20 }, // \u8bf7\u6c42\u53c2\u6570\n  dataType: 'json',\n  success(response, xml) {\n    // \u6b64\u5904\u653e\u6210\u529f\u540e\u6267\u884c\u7684\u4ee3\u7801\n  },\n  fail(status) {\n    // \u6b64\u5904\u653e\u5931\u8d25\u540e\u6267\u884c\u7684\u4ee3\u7801\n  },\n})\n\nfunction ajax(options) {\n  options = options || {}\n  options.type = (options.type || 'GET').toUpperCase()\n  options.dataType = options.dataType || 'json'\n  const params = formatParams(options.data)\n  let xhr\n\n  // \u521b\u5efa - \u975eIE6 - \u7b2c\u4e00\u6b65\n  if (window.XMLHttpRequest) {\n    xhr = new XMLHttpRequest()\n  } else {\n    // IE6\u53ca\u5176\u4ee5\u4e0b\u7248\u672c\u6d4f\u89c8\u5668\n    xhr = new ActiveXObject('Microsoft.XMLHTTP')\n  }\n\n  // \u63a5\u6536 - \u7b2c\u4e09\u6b65\n  xhr.onreadystatechange = function () {\n    if (xhr.readyState === 4) {\n      const status = xhr.status\n      if (status >= 200 && status < 300)\n        options.success && options.success(xhr.responseText, xhr.responseXML)\n      else\n        options.fail && options.fail(status)\n    }\n  }\n\n  // \u8fde\u63a5 \u548c \u53d1\u9001 - \u7b2c\u4e8c\u6b65\n  if (options.type === 'GET') {\n    xhr.open('GET', `${options.url}?${params}`, true)\n    xhr.send(null)\n  } else if (options.type === 'POST') {\n    xhr.open('POST', options.url, true)\n    // \u8bbe\u7f6e\u8868\u5355\u63d0\u4ea4\u65f6\u7684\u5185\u5bb9\u7c7b\u578b\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\n    xhr.send(params)\n  }\n}\n\n// \u683c\u5f0f\u5316\u53c2\u6570\nfunction formatParams(data) {\n  const arr = []\n\n  for (const name in data)\n    arr.push(`${encodeURIComponent(name)}=${encodeURIComponent(data[name])}`)\n\n  arr.push(`v=${Math.random()}`.replace('.', ''))\n  return arr.join('&')\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function getJSON(url) {\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest()\n\n    request.open('GET', url)\n\n    request.onload = function () {\n      try {\n        if (this.status === 200)\n          resolve(JSON.parse(this.response))\n        else\n          reject(new Error(`${this.status} ${this.statusText}`))\n      } catch (e) {\n        reject(e.message)\n      }\n    }\n\n    request.onerror = function () {\n      reject(new Error(`${this.status} ${this.statusText}`))\n    }\n\n    request.send()\n  })\n}\n\ngetJSON('data/sample.json')\n  .then((ninjas) => {\n    assert(ninjas !== null, 'Get data')\n  })\n  .catch(e => handleError(`Error: ${e}`))\n"})}),"\n",(0,r.jsx)(n.h4,{id:"ajax-cross-origin-request",children:"AJAX Cross Origin Request"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'\x3c!-- HTML --\x3e\n<meta http-equiv="Access-Control-Allow-Origin" content="*" />\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"Response.Headers.Add('Access-Control-Allow-Origin', '*')\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"$.ajax({\n  url: 'http://map.oicqzone.com/gpsApi.php?lat=22.502412986242&lng=113.93832783228',\n  type: 'GET',\n  dataType: 'JSONP', // \u5904\u7406 AJAX \u8de8\u57df\u95ee\u9898.\n  success(data) {\n    $('body').append(`Name: ${data}`)\n  },\n})\n"})}),"\n",(0,r.jsx)(n.h4,{id:"ajax-alternatives",children:"AJAX Alternatives"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"client.request(config)"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"client.get(url[, config])"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"client.delete(url[, config])"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"client.head(url[, config])"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"client.options(url[, config])"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"client.post(url[, data[, config]])"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"client.put(url[, data[, config]])"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"client.patch(url[, data[, config]])"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"client.getUri([config])"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const client = axios.create({\n  baseURL: 'https://some-domain.com/api/',\n  timeout: 1000,\n  headers: { 'X-Custom-Header': 'foobar' },\n})\n\n// Add a request interceptor\nclient.interceptors.request.use(\n  (config) => {\n    // Do something before request is sent.\n    return config\n  },\n  (error) => {\n    // Do something with request error.\n    return Promise.reject(error)\n  }\n)\n\nclient.interceptors.response.use(\n  (response) => {\n    // Any status code that lie within the range of 2xx trigger this function.\n    // Do something with response data.\n    return response\n  },\n  (error) => {\n    // Any status codes that falls outside the range of 2xx trigger this function.\n    // Do something with response error.\n    return Promise.reject(error)\n  }\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"fetch",children:"Fetch"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"GET: read resources."}),"\n",(0,r.jsx)(n.li,{children:"POST: create resources."}),"\n",(0,r.jsx)(n.li,{children:"PUT: fully update resources."}),"\n",(0,r.jsx)(n.li,{children:"PATCH: partially update resources."}),"\n",(0,r.jsx)(n.li,{children:"DELETE: delete resources."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"fetch-basis-usage",children:"Fetch Basis Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const response = await fetch('/api/names', {\n  headers: {\n    Accept: 'application/json',\n  },\n})\n\nconst response = await fetch('/api/names', {\n  method: 'POST',\n  body: JSON.stringify(object),\n  headers: {\n    'Content-Type': 'application/json',\n  },\n})\n"})}),"\n",(0,r.jsx)(n.h4,{id:"fetch-form-data",children:"Fetch Form Data"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const imageFormData = new FormData()\nconst imageInput = document.querySelector('input[type=\"file\"][multiple]')\nconst imageFiles = imageInput.files\n\nfor (const file of imageFiles)\n  imageFormData.append('image', file)\n\nfetch('/img-upload', {\n  method: 'POST',\n  body: imageFormData,\n})\n"})}),"\n",(0,r.jsx)(n.h4,{id:"fetch-aborting",children:"Fetch Aborting"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const abortController = new AbortController()\n\nfetch('wikipedia.zip', { signal: abortController.signal }).catch(() =>\n  console.log('Aborted!')\n)\n\n// 10 \u6beb\u79d2\u540e\u4e2d\u65ad\u8bf7\u6c42\nsetTimeout(() => abortController.abort(), 10)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"fetch-objects-api",children:"Fetch Objects API"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Headers",children:[(0,r.jsx)(n.code,{children:"Headers"})," object"]}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myHeaders = new Headers()\nmyHeaders.append('Content-Type', 'text/xml')\nmyHeaders.get('Content-Type') // should return 'text/xml'\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Request",children:[(0,r.jsx)(n.code,{children:"Request"})," object"]}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const request = new Request('/api/names', {\n  method: 'POST',\n  body: JSON.stringify(object),\n  headers: {\n    'Content-Type': 'application/json',\n  },\n})\n\nconst response = await fetch(request)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Response",children:[(0,r.jsx)(n.code,{children:"Response"})," object"]}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'fetch(\'//foo.com\').then(console.log)\n// Response {\n//   body: (...)\n//   bodyUsed: false\n//   headers: Headers {}\n//   ok: true\n//   redirected: false\n//   status: 200\n//   statusText: "OK"\n//   type: "basic"\n//   url: "https://foo.com/"\n// }\n\nfetch(\'//foo.com/redirect-me\').then(console.log)\n// Response {\n//   body: (...)\n//   bodyUsed: false\n//   headers: Headers {}\n//   ok: true\n//   redirected: true\n//   status: 200\n//   statusText: "OK"\n//   type: "basic"\n//   url: "https://foo.com/redirected-url/"\n// }\n\nfetch(\'//foo.com/does-not-exist\').then(console.log)\n// Response {\n//   body: (...)\n//   bodyUsed: false\n//   headers: Headers {}\n//   ok: false\n//   redirected: true\n//   status: 404\n//   statusText: "Not Found"\n//   type: "basic"\n//   url: "https://foo.com/does-not-exist/"\n// }\n\nfetch(\'//foo.com/throws-error\').then(console.log)\n// Response {\n//   body: (...)\n//   bodyUsed: false\n//   headers: Headers {}\n//   ok: false\n//   redirected: true\n//   status: 500\n//   statusText: "Internal Server Error"\n//   type: "basic"\n//   url: "https://foo.com/throws-error/"\n// }\n'})}),"\n",(0,r.jsx)(n.h4,{id:"fetch-streaming",children:"Fetch Streaming"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Request"}),"/",(0,r.jsx)(n.code,{children:"Response"})," ",(0,r.jsx)(n.code,{children:"body"})," (",(0,r.jsx)(n.code,{children:"ReadableStream"}),") methods:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"json()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"formData()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"arrayBuffer()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blob()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"bodyUsed"}),": \u5e03\u5c14\u503c, \u8868\u793a ",(0,r.jsx)(n.code,{children:"ReadableStream"})," \u662f\u5426\u5df2\u6444\u53d7 (",(0,r.jsx)(n.code,{children:"disturbed"}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"fetch('https://fetch.spec.whatwg.org/')\n  .then(response => response.body)\n  .then((body) => {\n    const reader = body.getReader()\n\n    function processNextChunk({ value, done }) {\n      if (done)\n        return\n\n      console.log(value)\n      return reader.read().then(processNextChunk)\n    }\n\n    return reader.read().then(processNextChunk)\n  })\n// { value: Uint8Array{}, done: false }\n// { value: Uint8Array{}, done: false }\n// { value: Uint8Array{}, done: false }\n// ...\n\nfetch('https://fetch.spec.whatwg.org/')\n  .then(response => response.body)\n  .then(async (body) => {\n    const reader = body.getReader()\n\n    while (true) {\n      const { value, done } = await reader.read()\n\n      if (done)\n        break\n\n      console.log(value)\n    }\n  })\n// { value: Uint8Array{}, done: false }\n// { value: Uint8Array{}, done: false }\n// { value: Uint8Array{}, done: false }\n// ...\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"fetch('https://fetch.spec.whatwg.org/')\n  .then(response => response.body)\n  .then(async (body) => {\n    const reader = body.getReader()\n    const asyncIterable = {\n      [Symbol.asyncIterator]() {\n        return {\n          next() {\n            return reader.read()\n          },\n        }\n      },\n    }\n\n    for await (const chunk of asyncIterable)\n      console.log(chunk)\n  })\n// { value: Uint8Array{}, done: false }\n// { value: Uint8Array{}, done: false }\n// { value: Uint8Array{}, done: false }\n// ...\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'async function* streamGenerator(stream) {\n  const reader = stream.getReader()\n\n  try {\n    while (true) {\n      const { value, done } = await reader.read()\n\n      if (done)\n        break\n\n      yield value\n    }\n  } finally {\n    reader.releaseLock()\n  }\n}\n\nconst decoder = new TextDecoder()\n\nfetch(\'https://fetch.spec.whatwg.org/\')\n  .then(response => response.body)\n  .then(async (body) => {\n    for await (const chunk of streamGenerator(body))\n      console.log(decoder.decode(chunk, { stream: true }))\n  })\n// <!doctype html><html lang="en"> ...\n// whether a <a data-link-type="dfn" href="#concept-header" ...\n// result to <var>rangeValue</var>. ...\n// ...\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'fetch(\'https://fetch.spec.whatwg.org/\')\n  .then(response => response.body)\n  .then((body) => {\n    const reader = body.getReader()\n    // \u521b\u5efa\u7b2c\u4e8c\u4e2a\u6d41\n    return new ReadableStream({\n      async start(controller) {\n        try {\n          while (true) {\n            const { value, done } = await reader.read()\n\n            if (done)\n              break\n\n            // \u5c06\u4e3b\u4f53\u6d41\u7684\u5757\u63a8\u5230\u7b2c\u4e8c\u4e2a\u6d41\n            controller.enqueue(value)\n          }\n        } finally {\n          controller.close()\n          reader.releaseLock()\n        }\n      },\n    })\n  })\n  .then(secondaryStream => new Response(secondaryStream))\n  .then(response => response.text())\n  .then(console.log)\n// <!doctype html><html lang="en"><head><meta charset="utf-8"> ...\n'})}),"\n",(0,r.jsx)(n.h3,{id:"restful",children:"RESTful"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Client/Server architecture."}),"\n",(0,r.jsx)(n.li,{children:"Stateless."}),"\n",(0,r.jsx)(n.li,{children:"Cacheable."}),"\n",(0,r.jsx)(n.li,{children:"Layer system."}),"\n",(0,r.jsx)(n.li,{children:"Code via need."}),"\n",(0,r.jsx)(n.li,{children:"Isomorphic interface."}),"\n",(0,r.jsxs)(n.li,{children:["Design ",(0,r.jsx)(n.a,{href:"https://github.com/aisuhua/restful-api-design-references",children:"reference"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"server-sent-events",children:"Server-Sent Events"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Event source ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/EventSource",children:"API"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Server-sent events ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"API"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const source = new EventSource('/path/to/stream-url')\n\nsource.onopen = function () {}\n\nsource.onerror = function () {}\n\nsource.addEventListener('foo', (event) => {\n  processFoo(event.data)\n})\n\nsource.addEventListener('ping', (event) => {\n  processPing(JSON.parse(event.data).time)\n})\n\nsource.onmessage = function (event) {\n  log(event.id, event.data)\n  if (event.id === 'CLOSE')\n    source.close()\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"websocket",children:"WebSocket"}),"\n",(0,r.jsx)(n.h4,{id:"websocket-message-header",children:"WebSocket Message Header"}),"\n",(0,r.jsx)(n.p,{children:"Request Header:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /chat HTTP/1.1\nHost: example.com\nUpgrade: websocket\nConnection: Upgrade\nSec-WebSocket-Key: 16-byte, base64 encoded\nSec-WebSocket-Version: 13\nSec-Websocket-Protocol: protocol [,protocol]*\nSec-Websocket-Extension: extension [,extension]*\n"})}),"\n",(0,r.jsx)(n.p,{children:"Response Header:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'HTTP/1.1 101 "Switching Protocols" or other description\nUpgrade: websocket\nConnection: Upgrade\nSec-WebSocket-Accept: 20-byte, MD5 hash in base64\nSec-Websocket-Protocol: protocol [,protocol]*\nSec-Websocket-Extension: extension [,extension]*\n'})}),"\n",(0,r.jsx)(n.h4,{id:"websocket-extensions",children:"WebSocket Extensions"}),"\n",(0,r.jsx)(n.p,{children:"WebSocket \u5b58\u5728\u4e0e HTTP/1.1 \u7c7b\u4f3c\u7684\u6027\u80fd\u74f6\u9888: \u961f\u5934\u963b\u585e, \u65e0\u6cd5\u591a\u8def\u590d\u7528."}),"\n",(0,r.jsx)(n.p,{children:"WebSocket \u89c4\u8303\u5141\u8bb8\u5bf9\u534f\u8bae\u8fdb\u884c\u6269\u5c55,\n\u6570\u636e\u683c\u5f0f\u548c WebSocket \u534f\u8bae\u7684\u8bed\u4e49\u53ef\u4ee5\u901a\u8fc7\u65b0\u7684\u64cd\u4f5c\u7801\u548c\u6570\u636e\u5b57\u6bb5\u6269\u5c55:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u591a\u8def\u590d\u7528\u6269\u5c55 (WebSocket Multiplexing Extension):\n\u4f7f\u7528",(0,r.jsx)(n.code,{children:"\u4fe1\u9053 ID"}),"\u6269\u5c55\u6bcf\u4e2a WebSocket \u5e27, \u5b9e\u73b0\u591a\u4e2a\u865a\u62df\u7684 WebSocket \u4fe1\u9053\u5171\u4eab\u4e00\u4e2a TCP \u8fde\u63a5."]}),"\n",(0,r.jsx)(n.li,{children:"\u538b\u7f29\u6269\u5c55 (WebSocket Compression Extension):\n\u7ed9 WebSocket \u534f\u8bae\u589e\u52a0\u4e86\u538b\u7f29\u529f\u80fd."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"websocket-basic-usage",children:"WebSocket Basic Usage"}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u4fe1\u529f\u80fd:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"string"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ArrayBuffer"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Blob"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"readyState"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WebSocket.OPENING"}),": ",(0,r.jsx)(n.code,{children:"0"}),", \u8fde\u63a5\u6b63\u5728\u5efa\u7acb."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WebSocket.OPEN"}),": ",(0,r.jsx)(n.code,{children:"1"}),", \u8fde\u63a5\u5df2\u7ecf\u5efa\u7acb."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WebSocket.CLOSING"}),": ",(0,r.jsx)(n.code,{children:"2"}),", \u8fde\u63a5\u6b63\u5728\u5173\u95ed."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WebSocket.CLOSE"}),": ",(0,r.jsx)(n.code,{children:"3"}),", \u8fde\u63a5\u5df2\u7ecf\u5173\u95ed."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function WebSocketTest() {\n  if ('WebSocket' in window) {\n    alert('WebSocket is supported by your Browser!')\n    // Let us open a web socket\n    const ws = new WebSocket('ws://localhost:9998/echo')\n\n    ws.onopen = function () {\n      // WebSocket is connected, send data using send()\n      ws.send('Message to send')\n      alert('Message is sent...')\n    }\n\n    ws.onmessage = function (event) {\n      const receivedMessage = event.data\n      alert('Message is received...')\n    }\n\n    ws.onclose = function (event) {\n      // websocket is closed.\n      console.log(\n        `As clean? ${event.wasClean} Code=${event.code} Reason=${event.reason}`\n      )\n    }\n\n    ws.onerror = function () {\n      alert('Connection error.')\n    }\n  } else {\n    // The browser doesn't support WebSocket\n    alert('WebSocket NOT supported by your Browser!')\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"websocket-heartbeat-mechanism",children:"WebSocket HeartBeat Mechanism"}),"\n",(0,r.jsx)(n.p,{children:"\u8fde\u63a5\u7ec8\u6b62\u65f6, WebSocket \u4e0d\u4f1a\u81ea\u52a8\u6062\u590d,\n\u9700\u8981\u81ea\u5df1\u5b9e\u73b0, \u901a\u5e38\u4e3a\u4e86\u4fdd\u6301\u8fde\u63a5\u72b6\u6001, \u9700\u8981\u589e\u52a0\u5fc3\u8df3\u673a\u5236."}),"\n",(0,r.jsxs)(n.p,{children:["\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u4f1a\u5411\u670d\u52a1\u5668\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u5305, \u544a\u8bc9\u670d\u52a1\u5668\u81ea\u5df1 Alive,\n\u670d\u52a1\u5668\u7aef\u5982\u679c Alive, \u5c31\u4f1a\u56de\u4f20\u4e00\u4e2a\u6570\u636e\u5305\u7ed9\u5ba2\u6237\u7aef.\n\u4e3b\u8981\u5728\u4e00\u4e9b",(0,r.jsx)(n.strong,{children:"\u957f\u65f6\u95f4\u8fde\u63a5"}),"\u7684\u5e94\u7528\u573a\u666f\u9700\u8981\u8003\u8651\u5fc3\u8df3\u673a\u5236\u53ca\u91cd\u8fde\u673a\u5236,\n\u4ee5\u4fdd\u8bc1\u957f\u65f6\u95f4\u7684\u8fde\u63a5\u53ca\u6570\u636e\u4ea4\u4e92."]}),"\n",(0,r.jsx)(n.h4,{id:"websocket-performance",children:"WebSocket Performance"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528\u5b89\u5168 WebSocket (\u57fa\u4e8e TLS \u7684 WSS) \u5b9e\u73b0\u53ef\u9760\u7684\u90e8\u7f72, \u7ed5\u8fc7\u4e2d\u95f4\u4ee3\u7406."}),"\n",(0,r.jsx)(n.li,{children:"\u5bc6\u5207\u5173\u6ce8\u817b\u5b50\u811a\u672c\u7684\u6027\u80fd."}),"\n",(0,r.jsx)(n.li,{children:"\u5229\u7528\u5b50\u534f\u8bae\u534f\u5546\u786e\u5b9a\u5e94\u7528\u534f\u8bae."}),"\n",(0,r.jsx)(n.li,{children:"\u4f18\u5316\u4e8c\u8fdb\u5236\u51c0\u8377\u4ee5\u6700\u5c0f\u5316\u4f20\u8f93\u6570\u636e."}),"\n",(0,r.jsx)(n.li,{children:"\u8003\u8651\u538b\u7f29 UTF-8 \u5185\u5bb9\u4ee5\u6700\u5c0f\u5316\u4f20\u8f93\u6570\u636e."}),"\n",(0,r.jsx)(n.li,{children:"\u8bbe\u7f6e\u6b63\u786e\u7684\u4e8c\u8fdb\u5236\u7c7b\u578b\u4ee5\u63a5\u6536\u4e8c\u8fdb\u5236\u51c0\u8377."}),"\n",(0,r.jsx)(n.li,{children:"\u76d1\u63a7\u5ba2\u6237\u7aef\u7f13\u51b2\u6570\u636e\u7684\u91cf."}),"\n",(0,r.jsx)(n.li,{children:"\u5207\u5206\u5e94\u7528\u6d88\u606f\u4ee5\u907f\u514d\u961f\u9996\u963b\u585e."}),"\n",(0,r.jsx)(n.li,{children:"\u5408\u7528\u7684\u60c5\u51b5\u4e0b\u5229\u7528\u5176\u4ed6\u4f20\u8f93\u673a\u5236."}),"\n",(0,r.jsx)(n.li,{children:"\u5bf9\u4e8e\u65e0\u7ebf\u8bbe\u5907, \u6ce8\u610f\u8282\u80fd:\n\u6d88\u9664\u5468\u671f\u6027\u65e0\u6548\u6570\u636e, \u51cf\u5c11\u5197\u4f59\u6570\u636e, \u6d88\u9664\u4e0d\u5fc5\u8981\u7684\u957f\u8fde\u63a5."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"websocket-reference",children:"WebSocket Reference"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://hpbn.co/websocket",children:"WebSocket Guide"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://ably.com/blog/websockets-vs-long-polling",children:"WebSocket vs Long Polling"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"webrtc",children:"WebRTC"}),"\n",(0,r.jsx)(n.h4,{id:"web-real-time-communication",children:"Web Real-Time Communication"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/WebRTC_API",children:"Web Real-Time Communication"}),"\n(Web \u5b9e\u65f6\u901a\u4fe1, WebRTC) \u7531\u4e00\u7ec4\u6807\u51c6, \u534f\u8bae\u548c JavaScript API \u7ec4\u6210,\n\u7528\u4e8e\u5b9e\u73b0\u6d4f\u89c8\u5668\u4e4b\u95f4 (\u7aef\u5230\u7aef, P2P) \u7684\u97f3\u9891/\u89c6\u9891/\u6570\u636e\u5171\u4eab:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/MediaStream",children:"MediaStream"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/RTCPeerConnection",children:"RTCPeerConnection"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7ba1\u7406\u7a7f\u900f NAT \u7684\u5b8c\u6574 ICE \u5de5\u4f5c\u6d41."}),"\n",(0,r.jsx)(n.li,{children:"\u53d1\u9001\u81ea\u52a8 (STUN) \u6301\u4e45\u5316\u4fe1\u53f7."}),"\n",(0,r.jsx)(n.li,{children:"\u8ddf\u8e2a\u672c\u5730\u6d41."}),"\n",(0,r.jsx)(n.li,{children:"\u8ddf\u8e2a\u8fdc\u7a0b\u6d41."}),"\n",(0,r.jsx)(n.li,{children:"\u6309\u9700\u89e6\u53d1\u81ea\u52a8\u6d41\u534f\u5546."}),"\n",(0,r.jsx)(n.li,{children:"\u751f\u6210\u8fde\u63a5\u63d0\u8bae, \u63a5\u6536\u5e94\u7b54, \u5141\u8bb8\u67e5\u8be2\u8fde\u63a5\u7684\u5f53\u524d\u72b6\u6001\u7b49."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/RTCDataChannel",children:"RTCDataChannel"}),":\nDataChannel API \u7528\u4e8e\u5b9e\u73b0\u7aef\u5230\u7aef\u4e4b\u95f4\u7684\u4efb\u610f\u5e94\u7528\u6570\u636e\u4ea4\u6362 (\u7aef\u5230\u7aef\u4ea4\u6362\u7248\u672c\u7684 WebSocket)."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"WebRTC Engine",src:t(1480).A+"",title:"WebRTC Engine",width:"1265",height:"933"})}),"\n",(0,r.jsx)(n.h4,{id:"webrtc-layer-protocol",children:"WebRTC Layer Protocol"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"WebRTC Layer Protocol",src:t(4231).A+"",title:"WebRTC Layer Protocol",width:"1837",height:"894"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"WebRTC \u4f7f\u7528 UDP \u4f5c\u4e3a\u4f20\u8f93\u5c42\u534f\u8bae: \u4f4e\u5ef6\u8fdf\u548c\u53ca\u65f6\u6027\u624d\u662f\u5173\u952e."}),"\n",(0,r.jsxs)(n.li,{children:["ICE: Interactive Connectivity Establishment (RFC 5245).","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"STUN: Session Traversal Utilities for NAT (RFC 5389)."}),"\n",(0,r.jsx)(n.li,{children:"TURN: Traversal Using Relays around NAT (RFC 5766)."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"SDP: Session Description Protocol (RFC 4566)."}),"\n",(0,r.jsx)(n.li,{children:"DTLS: Datagram Transport Layer Security (RFC 6347)."}),"\n",(0,r.jsx)(n.li,{children:"SCTP: Stream Control Transport Protocol (RFC 4960)."}),"\n",(0,r.jsx)(n.li,{children:"SRTP: Secure Real-Time Transport Protocol (RFC 3711)."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"webrtc-basic-usage",children:"WebRTC Basic Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const ice = {\n  iceServers: [\n    { url: 'stun:stun.l.google.com:19302' },\n    { url: 'turn:user@turnserver.com', credential: 'pass' },\n  ],\n}\nconst signalingChannel = new SignalingChannel()\nconst pc = new RTCPeerConnection(ice)\n\nnavigator.getUserMedia({ audio: true }, getStream, logError)\n\nfunction getStream(evt) {\n  pc.addstream(evt.stream)\n\n  const localVideo = document.querySelector('#local-video')\n  localVideo.src = window.URL.createObjectURL(evt.stream)\n\n  pc.createOffer((offer) => {\n    pc.setLocalDescription(offer)\n    signalingChannel.send(offer.sdp)\n  })\n}\n\npc.onicecandidate = function (evt) {\n  if (evt.candidate)\n    signalingChannel.send(evt.candidate)\n}\n\npc.oniceconnectionstatechange = function (evt) {\n  logStatus(`ICE connection state change: ${evt.target.iceConnectionState}`)\n}\n\npc.onaddstream = function (evt) {\n  const remoteVideo = document.querySelector('#remote-video')\n  remoteVideo.src = window.URL.createObjectURL(evt.stream)\n}\n\nsignalingChannel.onmessage = function (msg) {\n  if (msg.candidate)\n    pc.addIceCandidate(msg.candidate)\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"webrtc-performance",children:"WebRTC Performance"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u53d1\u4fe1\u670d\u52a1:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528\u4f4e\u5ef6\u8fdf\u4f20\u8f93\u673a\u5236."}),"\n",(0,r.jsx)(n.li,{children:"\u63d0\u4f9b\u8db3\u591f\u7684\u5bb9\u91cf."}),"\n",(0,r.jsx)(n.li,{children:"\u5efa\u7acb\u8fde\u63a5\u540e, \u8003\u8651\u4f7f\u7528 DataChannel \u53d1\u4fe1."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u9632\u706b\u5899\u548c NAT \u7a7f\u900f:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u521d\u59cb\u5316 RTCPeerConnection \u65f6\u63d0\u4f9b STUN \u670d\u52a1\u5668."}),"\n",(0,r.jsx)(n.li,{children:"\u5c3d\u53ef\u80fd\u4f7f\u7528\u589e\u91cf ICE, \u867d\u7136\u53d1\u4fe1\u6b21\u6570\u591a, \u4f46\u5efa\u7acb\u8fde\u63a5\u901f\u5ea6\u5feb."}),"\n",(0,r.jsx)(n.li,{children:"\u63d0\u4f9b STUN \u670d\u52a1\u5668, \u4ee5\u5907\u7aef\u5230\u7aef\u8fde\u63a5\u5931\u8d25\u540e\u8f6c\u53d1\u6570\u636e."}),"\n",(0,r.jsx)(n.li,{children:"\u9884\u8ba1\u5e76\u4fdd\u8bc1 TURN \u8f6c\u53d1\u65f6\u5bb9\u91cf\u8db3\u591f\u7528."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u6570\u636e\u5206\u53d1:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5bf9\u4e8e\u5927\u578b\u591a\u65b9\u901a\u4fe1, \u8003\u8651\u4f7f\u7528\u8d85\u7ea7\u8282\u70b9\u6216\u4e13\u7528\u7684\u4e2d\u95f4\u8bbe\u5907."}),"\n",(0,r.jsx)(n.li,{children:"\u4e2d\u95f4\u8bbe\u5907\u5728\u8f6c\u53d1\u6570\u636e\u524d, \u8003\u8651\u5148\u5bf9\u5176\u8fdb\u884c\u4f18\u5316\u6216\u538b\u7f29."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u6570\u636e\u6548\u7387:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5bf9\u97f3\u9891\u548c\u89c6\u9891\u6d41\u6307\u5b9a\u9002\u5f53\u7684\u5a92\u4f53\u7ea6\u675f."}),"\n",(0,r.jsx)(n.li,{children:"\u4f18\u5316\u901a\u8fc7 DataChannel \u53d1\u9001\u7684\u4e8c\u8fdb\u5236\u51c0\u8377."}),"\n",(0,r.jsx)(n.li,{children:"\u8003\u8651\u538b\u7f29\u901a\u8fc7 DataChannel \u53d1\u9001\u7684 UTF-8 \u6570\u636e."}),"\n",(0,r.jsx)(n.li,{children:"\u76d1\u63a7 DataChannel \u7f13\u51b2\u6570\u636e\u7684\u91cf, \u540c\u65f6\u6ce8\u610f\u9002\u5e94\u7f51\u7edc\u6761\u4ef6\u53d8\u5316."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u4ea4\u4ed8\u53ca\u53ef\u9760\u6027:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528\u4e71\u5e8f\u4ea4\u4ed8\u907f\u514d\u961f\u9996\u963b\u585e."}),"\n",(0,r.jsx)(n.li,{children:"\u5982\u679c\u4f7f\u7528\u6709\u5e8f\u4ea4\u4ed8, \u628a\u6d88\u606f\u5927\u5c0f\u63a7\u5236\u5230\u6700\u5c0f, \u4ee5\u964d\u4f4e\u961f\u9996\u963b\u585e\u7684\u5f71\u54cd."}),"\n",(0,r.jsx)(n.li,{children:"\u53d1\u9001\u5c0f\u6d88\u606f (\u5c0f\u4e8e 1150 \u5b57\u8282), \u4ee5\u4fbf\u5c06\u5206\u6bb5\u5e94\u7528\u6d88\u606f\u9020\u6210\u7684\u4e22\u5305\u635f\u5931\u964d\u81f3\u6700\u4f4e."}),"\n",(0,r.jsxs)(n.li,{children:["\u5bf9\u90e8\u5206\u53ef\u9760\u4ea4\u4ed8:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bbe\u7f6e\u9002\u5f53\u7684\u91cd\u4f20\u6b21\u6570\u548c\u8d85\u65f6\u95f4\u9694."}),"\n",(0,r.jsx)(n.li,{children:"\u6b63\u786e\u7684\u8bbe\u7f6e\u53d6\u51b3\u4e8e\u6d88\u606f\u5927\u5c0f, \u5e94\u7528\u6570\u636e\u7c7b\u578b, \u7aef\u4e0e\u7aef\u4e4b\u95f4\u7684\u5ef6\u8fdf."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"webrtc-reference",children:"WebRTC Reference"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://hpbn.co/webrtc",children:"WebRTC Guide"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://dzone.com/articles/webrtc-security-vulnerabilities-you-should-know-ab",children:"WebRTC Security List"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"web-animations",children:"Web Animations"}),"\n",(0,r.jsx)(n.h3,{id:"keyframe-effect-api",children:"Keyframe Effect API"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"KeyframeEffect"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const rabbitDownKeyframes = new KeyframeEffect(\n  whiteRabbit, // element to animate\n  [\n    { transform: 'translateY(0%)' }, // keyframe\n    { transform: 'translateY(100%)' }, // keyframe\n  ],\n  { duration: 3000, fill: 'forwards' } // keyframe options\n)\n\nconst rabbitDownAnimation = new Animation(\n  rabbitDownKeyFrames,\n  document.timeline\n)\n\nwhiteRabbit.addEventListener('click', downHandler)\n\nfunction downHandler() {\n  rabbitDownAnimation.play()\n  whiteRabbit.removeEventListener('click', downHandler)\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"animation-api",children:"Animation API"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"animation.currentTime"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"animation.playState"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"animation.effect"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"animation.pause()/play()/reverse()/finish()/cancel()"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"animation.currentTime = animation.effect.getComputedTiming().duration / 2\n\nfunction currentTime(time = 0) {\n  animations.forEach((animation) => {\n    if (typeof animation.currentTime === 'function')\n      animation.currentTime(time)\n    else\n      animation.currentTime = time\n  })\n}\n\nfunction createPlayer(animations) {\n  return Object.freeze({\n    play() {\n      animations.forEach(animation => animation.play())\n    },\n    pause() {\n      animations.forEach(animation => animation.pause())\n    },\n    currentTime(time = 0) {\n      animations.forEach(animation => (animation.currentTime = time))\n    },\n  })\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"animate-api",children:"Animate API"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"element.animate"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const animationKeyframes = [\n  {\n    transform: 'rotate(0)',\n    color: '#000',\n  },\n  {\n    color: '#431236',\n    offset: 0.3,\n  },\n  {\n    transform: 'rotate(360deg)',\n    color: '#000',\n  },\n]\n\nconst animationTiming = {\n  duration: 3000,\n  iterations: Number.POSITIVE_INFINITY,\n}\n\nconst animation = document\n  .querySelector('alice')\n  .animate(animationKeyframes, animationTiming)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"web-animations-reference",children:"Web Animations Reference"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Using Web Animations ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API",children:"API"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"web-canvas",children:"Web Canvas"}),"\n",(0,r.jsx)(n.h3,{id:"canvas-basic-usage",children:"Canvas Basic Usage"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Path2D \u5bf9\u8c61."}),"\n",(0,r.jsxs)(n.li,{children:["\u7ed8\u5236\u8def\u5f84: ",(0,r.jsx)(n.code,{children:"beginPath()"})," -> ",(0,r.jsx)(n.code,{children:"draw()"})," -> ",(0,r.jsx)(n.code,{children:"closePath()"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"\u7ed8\u5236\u6837\u5f0f: \u989c\u8272/\u6e10\u53d8/\u53d8\u6362/\u9634\u5f71."}),"\n",(0,r.jsxs)(n.li,{children:["\u7ed8\u5236\u56fe\u5f62: ",(0,r.jsx)(n.code,{children:"fill"}),"/",(0,r.jsx)(n.code,{children:"stroke"}),"/",(0,r.jsx)(n.code,{children:"clip"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["\u7ed8\u5236\u6587\u5b57: ",(0,r.jsx)(n.code,{children:"font"}),"/",(0,r.jsx)(n.code,{children:"fillText()"}),"/",(0,r.jsx)(n.code,{children:"measureText()"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const context = canvas.getContext('2d')\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// \u6839\u636e\u53c2\u6570\u753b\u7ebf\nfunction drawLine(fromX, fromY, toX, toY) {\n  context.moveTo(fromX, fromY)\n  context.lineTo(toX, toY)\n  context.stroke()\n}\n\n// \u6839\u636e\u53c2\u6570\u753b\u5706\nfunction drawCircle(x, y, radius, color) {\n  context.fillStyle = color\n  context.beginPath()\n  context.arc(x, y, radius, 0, Math.PI * 2, true)\n  context.closePath()\n  context.fill()\n  context.stroke()\n}\n\n// \u6539\u53d8 canvas \u4e2d\u56fe\u5f62\u989c\u8272\nfunction changeColor(color) {\n  context.fillStyle = color\n  context.fill()\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://eloquentjavascript.net/17_canvas.html",children:"Recursive tree"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<canvas width=\"600\" height=\"300\"></canvas>\n<script>\n  const cx = document.querySelector('canvas').getContext('2d')\n\n  function branch(length, angle, scale) {\n    cx.fillRect(0, 0, 1, length)\n    if (length < 8) return\n    cx.save()\n    cx.translate(0, length)\n    cx.rotate(-angle)\n    branch(length * scale, angle, scale)\n    cx.rotate(2 * angle)\n    branch(length * scale, angle, scale)\n    cx.restore()\n  }\n\n  cx.translate(300, 0)\n  branch(60, 0.5, 0.8)\n<\/script>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"canvas-game-loop",children:"Canvas Game Loop"}),"\n",(0,r.jsx)(n.p,{children:"For all objects:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["constructor: ",(0,r.jsx)(n.code,{children:"position{x, y}"}),", ",(0,r.jsx)(n.code,{children:"speed{x, y}"}),", ",(0,r.jsx)(n.code,{children:"size{x, y}"})]}),"\n",(0,r.jsx)(n.li,{children:"update(deltaTime): change position or speed"}),"\n",(0,r.jsx)(n.li,{children:"draw(ctx): use canvas api and object properties (position/size) to render objects"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const canvas = document.getElementById('gameScreen')\nconst ctx = canvas.getContext('2d')\n\nconst GAME_WIDTH = 800\nconst GAME_HEIGHT = 600\n\nconst game = new Game(GAME_WIDTH, GAME_HEIGHT)\n\nlet lastTime = 0\n\nfunction gameLoop(timestamp) {\n  const deltaTime = timestamp - lastTime\n  lastTime = timestamp\n\n  ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT)\n\n  game.update(deltaTime)\n  game.draw(ctx)\n\n  requestAnimationFrame(gameLoop)\n}\n\nrequestAnimationFrame(gameLoop)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"canvas-performance",children:"Canvas Performance"}),"\n",(0,r.jsx)(n.p,{children:"Canvas buffer:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"frontCanvasContext.drawImage(bufferCanvas, 0, 0)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"multiple canvas: top layer, background layer, interactive layer"}),"\n",(0,r.jsx)(n.li,{children:"disable alpha path"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const ctx = canvas.getContext('2d', { alpha: false })\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://dbushell.com/2024/04/02/offscreen-canvas-and-web-workers",children:"Offscreen canvas and web workers"}),":"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"transferControlToOffscreen"})," method:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// index.js\nconst offscreenCanvas = document.querySelector('#frame2')\nconst offscreen = offscreenCanvas.transferControlToOffscreen()\nconst worker = new Worker('./worker.js')\nworker.postMessage({ canvas: offscreen }, [offscreen])\n\n// worker.js\nonmessage = function (event) {\n  canvas = event.data.canvas\n  context = canvas.getContext('2d')\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OffscreenCanvas"})," in service workers:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Create reusable canvas\nconst offscreen = new OffscreenCanvas(512, 512)\nconst context = offscreen.getContext('2d')\n\n// eslint-disable-next-line no-restricted-globals -- Service worker.\nself.addEventListener('fetch', (ev) => {\n  // Only handle image requests\n  const url = new URL(ev.request.url)\n\n  if (url.pathname.startsWith('/artwork/'))\n    ev.respondWith(artwork(ev))\n})\n\nasync function artwork(ev) {\n  const cache = await caches.open('artwork')\n\n  // 1. Return from cache\n  let response = await cache.match(ev.request)\n  if (response)\n    return response\n\n  // 2. Or fetch from network\n  response = await fetch(ev.request)\n  if (!response.ok || response.status !== 200)\n    return response\n\n  // 3. Use canvas to resize\n  let blob = await response.blob()\n  context.drawImage(await createImageBitmap(blob), 0, 0, 512, 512)\n  blob = await offscreen.convertToBlob({ type: 'image/png' })\n\n  // 4. Create new headers\n  const headers = new Headers(response.headers)\n  headers.set('content-type', blob.type)\n  headers.set('content-length', blob.size)\n\n  // 5. Create new response\n  const { status, statusText } = response\n  response = new Response(await blob.arrayBuffer(), {\n    status,\n    statusText,\n    headers\n  })\n  await cache.put(ev.request, response.clone())\n  return response\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"css-houdini-painting-api",children:"CSS Houdini Painting API"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/PaintWorklet",children:(0,r.jsx)(n.code,{children:"PaintWorklet"})}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// checkerboard.js:\n// Create a `PaintWorklet`.\nclass CheckerboardPainter {\n  static get contextOptions() {\n    return { alpha: true }\n  }\n\n  /**\n   * @returns {string[]} any custom properties or regular properties\n   */\n  static get inputProperties() {\n    return ['--red', '--green', '--blue', '--width', 'height']\n  }\n\n  paint(context, geometry, props) {\n    const colors = [\n      props.get('--red').toString(),\n      props.get('--green').toString(),\n      props.get('--blue').toString(),\n    ]\n    const size = Number.parseInt(props.get('--width'))\n\n    for (let y = 0; y < geometry.height / size; y++) {\n      for (let x = 0; x < geometry.width / size; x++) {\n        const color = colors[(x + y) % colors.length]\n        context.beginPath()\n        context.fillStyle = color\n        context.rect(x * size, y * size, size, size)\n        context.fill()\n      }\n    }\n  }\n}\n\n// Register our class under a specific name\nregisterPaint('checkerboard', CheckerboardPainter)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"\x3c!-- Load a `PaintWorklet`. --\x3e\n<script>\n  if ('paintWorklet' in CSS) {\n    CSS.paintWorklet.addModule('checkerboard.js')\n  }\n<\/script>\n\n\x3c!-- Use a `PaintWorklet`. --\x3e\n<style>\n  textarea {\n    background-image: paint(checkerboard);\n  }\n</style>\n<textarea></textarea>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"canvas-reference",children:"Canvas Reference"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Canvas_API",children:"Canvas API"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Canvas_API/Tutorial",children:"Canvas Tutorial"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://joshondesign.com/p/books/canvasdeepdive/toc.html",children:"Canvas Deep Dive"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://devhints.io/canvas",children:"Canvas Cheat Sheet"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Canvas_API/Tutorial/Optimizing_canvas",children:"Canvas Performance"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/438142235",children:"Canvas Real World Case"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"web-audio",children:"Web Audio"}),"\n",(0,r.jsx)(n.h3,{id:"oscillator",children:"Oscillator"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"                         -3  -1   1       4   6       9   11\n                       -4  -2   0   2   3   5   7   8   10  12\n  .___________________________________________________________________________.\n  :  | |  |  | | | |  |  | | | | | |  |  | | | |  |  | | | | | |  |  | | | |  :\n  :  | |  |  | | | |  |  | | | | | |  |  | | | |  |  | | | | | |  |  | | | |  :\n  :  | |  |  | | | |  |  | | | | | |  |  | | | |  |  | | | | | |  |  | | | |  :\n<-:  |_|  |  |_| |_|  |  |_| |_| |_|  |  |_| |_|  |  |_| |_| |_|  |  |_| |_|  :->\n  :   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   :\n  : A | B | C | D | E | F | G | A | B | C | D | E | F | G | A | B | C | D | E :\n  :___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|___|___:\n    ^                           ^           ^               ^           ^\n  220 Hz                      440 Hz      523.25 Hz       880 Hz     1174.65 Hz\n(-1 Octave)                 (middle A)                 (+1 Octave)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const audioContext = new AudioContext()\n\nconst baseFrequency = 440\nconst getNoteFreq = (base, pitch) => base * 2 ** (pitch / 12)\n// oscillator.frequency.value = getNoteFreq(440, 7);\n\nconst getNoteDetune = pitch => pitch * 100\n// oscillator.detune.value = getNoteDetune(7);\n\nfunction play(type, delay, pitch, duration) {\n  const oscillator = audioContext.createOscillator()\n  oscillator.connect(audioContext.destination)\n\n  oscillator.type = type\n  oscillator.detune.value = getNoteDetune(pitch)\n\n  const startTime = audioContext.currentTime + delay\n  const stopTime = startTime + duration\n  oscillator.start(startTime)\n  oscillator.stop(stopTime)\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"music-data",children:"Music Data"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const sampleSize = 1024 // number of samples to collect before analyzing data\nconst audioUrl = 'viper.mp3'\n\nlet audioData = null\nlet audioPlaying = false\n\nconst audioContext = new AudioContext()\nconst sourceNode = audioContext.createBufferSource()\nconst analyserNode = audioContext.createAnalyser()\nconst javascriptNode = audioContext.createScriptProcessor(sampleSize, 1, 1)\n\n// Create the array for the data values\nconst amplitudeArray = new Uint8Array(analyserNode.frequencyBinCount)\n\n// Now connect the nodes together\nsourceNode.connect(audioContext.destination)\nsourceNode.connect(analyserNode)\nanalyserNode.connect(javascriptNode)\njavascriptNode.connect(audioContext.destination)\n\n// setup the event handler that is triggered\n// every time enough samples have been collected\n// trigger the audio analysis and draw the results\njavascriptNode.onaudioprocess = function () {\n  // get the Time Domain data for this sample\n  analyserNode.getByteTimeDomainData(amplitudeArray)\n\n  // draw the display if the audio is playing\n  // if (audioPlaying === true) {\n  // requestAnimFrame(drawTimeDomain);\n  // }\n}\n\n// Load the audio from the URL via AJAX and store it in global variable audioData\n// Note that the audio load is asynchronous\nfunction loadSound(url) {\n  fetch(url)\n    .then((response) => {\n      audioContext.decodeAudioData(response, (buffer) => {\n        audioData = buffer\n        playSound(audioData)\n      })\n    })\n    .catch((error) => {\n      console.error(error)\n    })\n}\n\n// Play the audio and loop until stopped\nfunction playSound(buffer) {\n  sourceNode.buffer = buffer\n  sourceNode.start(0) // Play the sound now\n  sourceNode.loop = true\n  audioPlaying = true\n}\n\nfunction stopSound() {\n  sourceNode.stop(0)\n  audioPlaying = false\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"audio-bar-chart",children:"Audio Bar Chart"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/AnalyserNode/getByteFrequencyData",children:"AnalyserNode.getByteFrequencyData API"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/bogdan-cornianu/swave/blob/master/src/visualizer.ts",children:"Github Demo"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const WIDTH = this.canvas.clientWidth\nconst HEIGHT = this.canvas.clientHeight\nthis.analyserNode.fftSize = 256\nconst bufferLengthAlt = this.analyserNode.frequencyBinCount\nconst dataArrayAlt = new Uint8Array(bufferLengthAlt)\n\nthis.ctx.clearRect(0, 0, WIDTH, HEIGHT)\n\nfunction draw() {\n  const drawVisual = requestAnimationFrame(draw)\n  this.analyserNode.getByteFrequencyData(dataArrayAlt)\n\n  this.ctx.fillStyle = 'rgb(255, 255, 255)'\n  this.ctx.fillRect(0, 0, WIDTH, HEIGHT)\n\n  const barWidth = (WIDTH / bufferLengthAlt) * 2.5\n  let barHeight\n  let x = 0\n\n  for (let i = 0; i < bufferLengthAlt; i++) {\n    barHeight = dataArrayAlt[i]\n\n    this.ctx.fillStyle = `rgb(${barHeight + 100},15,156)`\n    this.ctx.fillRect(x, HEIGHT - barHeight / 2, barWidth, barHeight / 2)\n\n    x += barWidth + 1\n  }\n}\n\ndraw()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"media-session",children:"Media Session"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://w3c.github.io/mediasession",children:"W3C Media Session Specification"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/MediaSession",children:"MDN Media Session Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://web.dev/media-session",children:"Google Media Session Blog"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"web-storage",children:"Web Storage"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cookie for session state."}),"\n",(0,r.jsx)(n.li,{children:"DOM storage for Web Component state."}),"\n",(0,r.jsx)(n.li,{children:"Web Storage for simple UI options (dark mode, sidebar size, etc.)."}),"\n",(0,r.jsx)(n.li,{children:"IndexedDB for large binary objects and data dumps."}),"\n",(0,r.jsx)(n.li,{children:"Cache API for offline and quick file access."}),"\n",(0,r.jsx)(n.li,{children:"JavaScript variables for everything else."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cookie",children:"Cookie"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name=value"}),".."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"expires=expiration_time"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"path=domain_path"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"domain=domain_name"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"secure"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"HTTP/1.1 200 OK\nContent-type: text/html\nSet-Cookie: name=value; expires=Mon, 22-Jan-07 07:10:24 GMT; domain=.foo.com\nOther-header: other-header-value\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"HTTP/1.1 200 OK\nContent-type: text/html\nSet-Cookie: name=value; domain=.foo.com; path=/; secure\nOther-header: other-header-value\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"class CookieUtil {\n  static get(name) {\n    const cookieName = `${encodeURIComponent(name)}=`\n    const cookieStart = document.cookie.indexOf(cookieName)\n    let cookieValue = null\n\n    if (cookieStart > -1) {\n      let cookieEnd = document.cookie.indexOf(';', cookieStart)\n\n      if (cookieEnd === -1)\n        cookieEnd = document.cookie.length\n\n      cookieValue = decodeURIComponent(\n        document.cookie.substring(cookieStart + cookieName.length, cookieEnd)\n      )\n    }\n\n    return cookieValue\n  }\n\n  static set(name, value, { expires, path, domain, secure }) {\n    let cookieText = `${encodeURIComponent(name)}=${encodeURIComponent(value)}`\n\n    if (expires instanceof Date)\n      cookieText += `; expires=${expires.toGMTString()}`\n\n    if (path)\n      cookieText += `; path=${path}`\n\n    if (domain)\n      cookieText += `; domain=${domain}`\n\n    if (secure)\n      cookieText += '; secure'\n\n    document.cookie = cookieText\n  }\n\n  static unset(name, { path, domain, secure }) {\n    CookieUtil.set(name, '', new Date(0), path, domain, secure)\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"local-storage",children:"Local Storage"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u534f\u540c Cookie."}),"\n",(0,r.jsxs)(n.li,{children:["\u5bf9\u4e8e\u590d\u6742\u5bf9\u8c61\u7684\u8bfb\u53d6\u4e0e\u5b58\u50a8,\n\u9700\u8981\u501f\u52a9 ",(0,r.jsx)(n.code,{children:"JSON.parse"})," \u4e0e ",(0,r.jsx)(n.code,{children:"JSON.stringify"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Storage",children:[(0,r.jsx)(n.code,{children:"Storage"})," object"]}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Storage.length"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Storage.key()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Storage.getItem()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Storage.setItem()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Storage.removeItem()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Storage.clear()"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"storage"})," event: \u6bcf\u5f53 ",(0,r.jsx)(n.code,{children:"Storage"})," \u5bf9\u8c61\u53d1\u751f\u53d8\u5316\u65f6, \u90fd\u4f1a\u5728\u6587\u6863\u4e0a\u89e6\u53d1 ",(0,r.jsx)(n.code,{children:"storage"})," \u4e8b\u4ef6.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event.domain"}),": \u5b58\u50a8\u53d8\u5316\u5bf9\u5e94\u7684\u57df."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event.key"}),": \u88ab\u8bbe\u7f6e\u6216\u5220\u9664\u7684\u952e."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event.newValue"}),": \u952e\u88ab\u8bbe\u7f6e\u7684\u65b0\u503c, \u82e5\u952e\u88ab\u5220\u9664\u5219\u4e3a null."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event.oldValue"}),": \u952e\u53d8\u5316\u4e4b\u524d\u7684\u503c."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"if (!localStorage.getItem('bgColor'))\n  populateStorage()\nelse\n  setStyles()\n\nfunction populateStorage() {\n  localStorage.setItem('bgColor', document.getElementById('bgColor').value)\n  localStorage.setItem('font', document.getElementById('font').value)\n  localStorage.setItem('image', document.getElementById('image').value)\n\n  setStyles()\n}\n\nfunction setStyles() {\n  const currentColor = localStorage.getItem('bgColor')\n  const currentFont = localStorage.getItem('font')\n  const currentImage = localStorage.getItem('image')\n\n  document.getElementById('bgColor').value = currentColor\n  document.getElementById('font').value = currentFont\n  document.getElementById('image').value = currentImage\n\n  htmlElem.style.backgroundColor = `#${currentColor}`\n  pElem.style.fontFamily = currentFont\n  imgElem.setAttribute('src', currentImage)\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"indexdb",children:"IndexDB"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"class IndexedDB {\n  constructor(dbName, dbVersion, dbUpgrade) {\n    return new Promise((resolve, reject) => {\n      this.db = null\n\n      if (!('indexedDB' in window))\n        reject(new Error('Not supported'))\n\n      const dbOpen = indexedDB.open(dbName, dbVersion)\n\n      if (dbUpgrade) {\n        dbOpen.onupgradeneeded = (e) => {\n          dbUpgrade(dbOpen.result, e.oldVersion, e.newVersion)\n        }\n      }\n\n      dbOpen.onsuccess = () => {\n        this.db = dbOpen.result\n        resolve(this)\n      }\n\n      dbOpen.onerror = (e) => {\n        reject(new Error(`IndexedDB error: ${e.target.errorCode}`))\n      }\n    })\n  }\n\n  get(storeName, name) {\n    return new Promise((resolve, reject) => {\n      const transaction = this.db.transaction(storeName, 'readonly')\n      const store = transaction.objectStore(storeName)\n      const request = store.get(name)\n\n      request.onsuccess = () => {\n        resolve(request.result)\n      }\n\n      request.onerror = () => {\n        reject(request.error)\n      }\n    })\n  }\n\n  set(storeName, name, value) {\n    return new Promise((resolve, reject) => {\n      const transaction = this.db.transaction(storeName, 'readwrite')\n      const store = transaction.objectStore(storeName)\n\n      store.put(value, name)\n\n      transaction.oncomplete = () => {\n        resolve(true)\n      }\n\n      transaction.onerror = () => {\n        reject(transaction.error)\n      }\n    })\n  }\n}\n\nexport class State {\n  static dbName = 'stateDB'\n  static dbVersion = 1\n  static storeName = 'state'\n  static DB = null\n  static target = new EventTarget()\n\n  constructor(observed, updateCallback) {\n    this.updateCallback = updateCallback\n    this.observed = new Set(observed)\n\n    // subscribe `set` event with `updateCallback`\n    State.target.addEventListener('set', (e) => {\n      if (this.updateCallback && this.observed.has(e.detail.name))\n        this.updateCallback(e.detail.name, e.detail.value)\n    })\n  }\n\n  async dbConnect() {\n    State.DB\n      = State.DB\n      || (await new IndexedDB(\n        State.dbName,\n        State.dbVersion,\n        (db, oldVersion, newVersion) => {\n          // upgrade database\n          switch (oldVersion) {\n            case 0: {\n              db.createObjectStore(State.storeName)\n              break\n            }\n            default:\n              throw new Error('Unsupported version!')\n          }\n        }\n      ))\n\n    return State.DB\n  }\n\n  async get(name) {\n    this.observedSet.add(name)\n    const db = await this.dbConnect()\n    return await db.get(State.storeName, name)\n  }\n\n  async set(name, value) {\n    this.observed.add(name)\n    const db = await this.dbConnect()\n    await db.set(State.storeName, name, value)\n\n    // publish event to subscriber\n    const event = new CustomEvent('set', { detail: { name, value } })\n    State.target.dispatchEvent(event)\n  }\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const store = db.transaction('users').objectStore('users')\nconst index = store.createIndex('username', 'username', { unique: true })\nconst range = IDBKeyRange.bound('007', 'ace')\n\nconst request = store.openCursor(range, 'next')\nconst request = index.openCursor(range, 'next')\n\nrequest.onsuccess = function (event) {\n  const cursor = event.target.result\n\n  if (cursor) {\n    // \u6c38\u8fdc\u8981\u68c0\u67e5\n    console.log(`Key: ${cursor.key}, Value: ${JSON.stringify(cursor.value)}`)\n    cursor.continue() // \u79fb\u52a8\u5230\u4e0b\u4e00\u6761\u8bb0\u5f55\n  } else {\n    console.log('Done!')\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"file-api",children:"File API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function readFileText(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    reader.addEventListener('load', () => resolve(reader.result))\n    reader.addEventListener('error', () => reject(reader.error))\n    reader.readAsText(file)\n  })\n}\n\nfunction readFileBuffer(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    reader.addEventListener('load', () => resolve(reader.result))\n    reader.addEventListener('error', () => reject(reader.error))\n    reader.readAsArrayBuffer(file)\n  })\n}\n\nconst fileInput = document.querySelector('fileInput')\n\nfor (const file of fileInput.files) {\n  const text = await readFileText(file)\n  const buffer = await readFileBuffer(file)\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"web-payment",children:"Web Payment"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://web.dev/life-of-a-payment-transaction",children:"Payment API"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"async function doPaymentRequest() {\n  try {\n    // new PaymentRequest(paymentMethods, paymentDetails);\n    const request = new PaymentRequest(\n      [\n        {\n          supportedMethods: 'https://bobpay.xyz/pay',\n        },\n      ],\n      {\n        total: {\n          label: 'total',\n          amount: { value: '10', currency: 'USD' },\n        },\n      }\n    )\n    const response = await request.show()\n    await validateResponse(response)\n  } catch (err) {\n    // AbortError, SecurityError\n    console.error(err)\n  }\n}\n\nasync function validateResponse(response) {\n  try {\n    const errors = await checkAllValuesAreGood(response)\n\n    if (errors.length) {\n      await response.retry(errors)\n      return validateResponse(response)\n    }\n\n    await response.complete('success')\n  } catch (err) {\n    // Something went wrong\u2026\n    await response.complete('fail')\n  }\n}\n\ndoPaymentRequest()\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://web.dev/setting-up-a-payment-method",children:(0,r.jsx)(n.img,{alt:"Web Payment Workflow",src:t(6151).A+"",width:"845",height:"737"})})}),"\n",(0,r.jsx)(n.h2,{id:"web-devices",children:"Web Devices"}),"\n",(0,r.jsx)(n.h3,{id:"web-gamepad",children:"Web Gamepad"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://web.dev/gamepad",children:"Gamepad API"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const gamepads = {}\n\nfunction gamepadHandler(event, connecting) {\n  // gamepad === navigator.getGamepads()[gamepad.index]\n  const { gamepad } = event\n\n  if (connecting)\n    gamepads[gamepad.index] = gamepad\n  else\n    delete gamepads[gamepad.index]\n}\n\nwindow.addEventListener('gamepadconnected', (e) => {\n  gamepadHandler(e, true)\n})\n\nwindow.addEventListener('gamepaddisconnected', (e) => {\n  gamepadHandler(e, false)\n})\n"})}),"\n",(0,r.jsx)(n.h3,{id:"web-bluetooth",children:"Web Bluetooth"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://web.dev/bluetooth",children:"Bluetooth API"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"navigator.bluetooth\n  .requestDevice({ filters: [{ services: ['health_thermometer'] }] })\n  .then(device => device.gatt.connect())\n  .then(server => server.getPrimaryService('health_thermometer'))\n  .then(service => service.getCharacteristic('measurement_interval'))\n  .then(characteristic =>\n    characteristic.getDescriptor('gatt.characteristic_user_description')\n  )\n  .then((descriptor) => {\n    const encoder = new TextEncoder('utf-8')\n    const userDescription = encoder.encode(\n      'Defines the time between measurements.'\n    )\n    return descriptor.writeValue(userDescription)\n  })\n  .catch((error) => {\n    console.error(error)\n  })\n"})}),"\n",(0,r.jsx)(n.h3,{id:"web-usb",children:"Web USB"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://web.dev/usb",children:"USB API"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"let device\n\nnavigator.usb\n  .requestDevice({ filters: [{ vendorId: 0x2341 }] })\n  .then((selectedDevice) => {\n    device = selectedDevice\n    return device.open() // Begin a session.\n  })\n  .then(() => device.selectConfiguration(1)) // Select configuration for the device.\n  .then(() => device.claimInterface(2)) // Request exclusive control over interface.\n  .then(() =>\n    device.controlTransferOut({\n      requestType: 'class',\n      recipient: 'interface',\n      request: 0x22,\n      value: 0x01,\n      index: 0x02,\n    })\n  ) // Ready to receive data\n  .then(() => device.transferIn(5, 64)) // Waiting for 64 bytes of data from endpoint.\n  .then((result) => {\n    const decoder = new TextDecoder()\n    console.log(`Received: ${decoder.decode(result.data)}`)\n  })\n  .catch((error) => {\n    console.error(error)\n  })\n"})}),"\n",(0,r.jsx)(n.h3,{id:"web-nfc",children:"Web NFC"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://web.dev/nfc",children:"NFC API"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const encoder = new TextEncoder()\nconst data = {\n  firstName: 'First',\n  lastName: 'Last',\n}\nconst jsonRecord = {\n  recordType: 'mime',\n  mediaType: 'application/json',\n  data: encoder.encode(JSON.stringify(data)),\n}\n\nconst imageRecord = {\n  recordType: 'mime',\n  mediaType: 'image/png',\n  data: await (await fetch('icon1.png')).arrayBuffer(),\n}\n\nconst ndef = new NDEFReader()\nawait ndef.write({ records: [jsonRecord, imageRecord] })\n"})}),"\n",(0,r.jsx)(n.h3,{id:"web-serial",children:"Web Serial"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://web.dev/serial",children:"Serial API"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Prompt user to select any serial port.\nconst port = await navigator.serial.requestPort()\n\n// Wait for the serial port to open.\nawait port.open({ baudRate: 9600 })\n\n// Close a serial port.\nawait port.close()\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const textDecoder = new TextDecoderStream()\nconst readableStreamClosed = port.readable.pipeTo(textDecoder.writable)\nconst reader = textDecoder.readable.getReader()\n\n// Listen to data coming from the serial device.\nwhile (true) {\n  const { value, done } = await reader.read()\n  if (done) {\n    // Allow the serial port to be closed later.\n    reader.releaseLock()\n    break\n  }\n  // value is a string.\n  console.log(value)\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const textEncoder = new TextEncoderStream()\nconst writableStreamClosed = textEncoder.readable.pipeTo(port.writable)\nconst writer = textEncoder.writable.getWriter()\nawait writer.write('hello')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"web-hid",children:"Web HID"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://web.dev/hid",children:"Human interface devices API"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function waitFor(duration) {\n  return new Promise(resolve => setTimeout(resolve, duration))\n}\n\n// Prompt user to select an Apple Keyboard Backlight device.\nconst [device] = await navigator.hid.requestDevice({\n  filters: [{ vendorId: 0x05AC, usage: 0x0F, usagePage: 0xFF00 }],\n})\n\n// Wait for the HID connection to open.\nawait device.open()\n\n// Blink!\nconst reportId = 1\n\nfor (let i = 0; i < 10; i++) {\n  // Turn off\n  await device.sendFeatureReport(reportId, Uint32Array.from([0, 0]))\n  await waitFor(100)\n\n  // Turn on\n  await device.sendFeatureReport(reportId, Uint32Array.from([512, 0]))\n  await waitFor(100)\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},1919:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/ClientSize-188639869aa83d77661cdd7924b149a1.png"},3787:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/OffsetSize-aae54cfc6d6752f66a0d8587797f0820.png"},4225:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/ScrollSize-0fbec70f8a0fcc83776fd80e9ff17f01.png"},6151:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/WebPaymentWorkflow-de01ea7233917da929239968035a0e3c.webp"},1480:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/WebRTCEngine-3efa376d25cb54089770b343f38d02dc.png"},4231:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/WebRTCLayerProtocol-218599046ac438940de64e1bcafe902f.png"},842:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var s=t(8101);const r={},l=s.createContext(r);function i(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);