"use strict";(self.webpackChunkawesome_notes=self.webpackChunkawesome_notes||[]).push([[8933],{7641:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Web/Vue/VueBasicNotes","title":"Vue Basic Notes","description":"Directives","source":"@site/notes/Web/Vue/VueBasicNotes.md","sourceDirName":"Web/Vue","slug":"/Web/Vue/VueBasicNotes","permalink":"/awesome-notes/Web/Vue/VueBasicNotes","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/awesome-notes/edit/main/notes/Web/Vue/VueBasicNotes.md","tags":[{"inline":true,"label":"Web","permalink":"/awesome-notes/tags/web"},{"inline":true,"label":"Vue","permalink":"/awesome-notes/tags/vue"}],"version":"current","lastUpdatedBy":"renovate[bot]","lastUpdatedAt":1732127335000,"frontMatter":{"author":"Sabertazimi","authorTitle":"Web Developer","authorURL":"https://github.com/sabertazimi","authorImageURL":"https://github.com/sabertazimi.png","tags":["Web","Vue"]},"sidebar":"tutorialSidebar","previous":{"title":"Vue Advanced Notes","permalink":"/awesome-notes/Web/Vue/VueAdvancedNotes"}}');var o=t(5105),r=t(842);const i={author:"Sabertazimi",authorTitle:"Web Developer",authorURL:"https://github.com/sabertazimi",authorImageURL:"https://github.com/sabertazimi.png",tags:["Web","Vue"]},a="Vue Basic Notes",l={},c=[{value:"Directives",id:"directives",level:2},{value:"Control Flow Directives",id:"control-flow-directives",level:3},{value:"Attributes Binding Directives",id:"attributes-binding-directives",level:3},{value:"Class and Style Binding Directives",id:"class-and-style-binding-directives",level:3},{value:"Event Handlers Directives",id:"event-handlers-directives",level:3},{value:"Event Handlers and Modifiers",id:"event-handlers-and-modifiers",level:4},{value:"Custom Events",id:"custom-events",level:4},{value:"Model Directives",id:"model-directives",level:3},{value:"Custom Directives",id:"custom-directives",level:3},{value:"Components",id:"components",level:2},{value:"Computed Properties",id:"computed-properties",level:3},{value:"Slots",id:"slots",level:3},{value:"Fallback Slots",id:"fallback-slots",level:4},{value:"Named Slots",id:"named-slots",level:4},{value:"Scoped Slots",id:"scoped-slots",level:4},{value:"Provide and Inject",id:"provide-and-inject",level:3},{value:"Composition API",id:"composition-api",level:2},{value:"Setup Method",id:"setup-method",level:3},{value:"Composition LifeCycle Hooks",id:"composition-lifecycle-hooks",level:3},{value:"Reactivity",id:"reactivity",level:3},{value:"Reactive Value",id:"reactive-value",level:4},{value:"Ref Value",id:"ref-value",level:4},{value:"Computed Value",id:"computed-value",level:4},{value:"Watch Value",id:"watch-value",level:4},{value:"Composable Functions",id:"composable-functions",level:3},{value:"Animation and Transition",id:"animation-and-transition",level:2},{value:"Fade Transition",id:"fade-transition",level:3},{value:"Slide Transition",id:"slide-transition",level:3},{value:"Transition Group",id:"transition-group",level:3},{value:"Transition Hooks",id:"transition-hooks",level:3},{value:"Transition Internals",id:"transition-internals",level:3},{value:"Transition Component",id:"transition-component",level:4},{value:"Transition Module",id:"transition-module",level:4},{value:"Transition Group Component",id:"transition-group-component",level:4},{value:"Modern Vue",id:"modern-vue",level:2},{value:"Async Component",id:"async-component",level:3},{value:"Resolve Async Component",id:"resolve-async-component",level:4},{value:"Define Async Component",id:"define-async-component",level:4},{value:"Suspense",id:"suspense",level:3},{value:"Keep Alive",id:"keep-alive",level:3},{value:"Teleport",id:"teleport",level:3},{value:"Client Only",id:"client-only",level:3},{value:"Vue Router",id:"vue-router",level:2},{value:"Basic Routes",id:"basic-routes",level:3},{value:"Dynamic Routes",id:"dynamic-routes",level:3},{value:"Routes Composition API",id:"routes-composition-api",level:4},{value:"Passing Routes Props",id:"passing-routes-props",level:4},{value:"Named Routes",id:"named-routes",level:3},{value:"Nested Routes",id:"nested-routes",level:3},{value:"Programmatic Routes Navigation",id:"programmatic-routes-navigation",level:3},{value:"Navigate to Different Location",id:"navigate-to-different-location",level:4},{value:"Replace Current Location",id:"replace-current-location",level:4},{value:"Traverse Routes History",id:"traverse-routes-history",level:4},{value:"Navigation Guard Routes",id:"navigation-guard-routes",level:3},{value:"Guard Routes Configuration",id:"guard-routes-configuration",level:4},{value:"Global Navigation Guards",id:"global-navigation-guards",level:4},{value:"Full Navigation Resolution Flow",id:"full-navigation-resolution-flow",level:4},{value:"Vuex",id:"vuex",level:2},{value:"Vuex Types",id:"vuex-types",level:3},{value:"Vite",id:"vite",level:2},{value:"Basic Configuration",id:"basic-configuration",level:3},{value:"Environment Variables and Modes",id:"environment-variables-and-modes",level:3},{value:"Vue CLI",id:"vue-cli",level:2},{value:"SCSS Configuration",id:"scss-configuration",level:3},{value:"Vue Best Practice",id:"vue-best-practice",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"vue-basic-notes",children:"Vue Basic Notes"})}),"\n",(0,o.jsx)(n.h2,{id:"directives",children:"Directives"}),"\n",(0,o.jsx)(n.h3,{id:"control-flow-directives",children:"Control Flow Directives"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<template>\n  <p v-if="isShow">Show</p>\n  <p v-if="isEnabled">Enabled</p>\n  <p v-else>Disabled</p>\n  <p v-if="inventory > 10">In Stock</p>\n  <p v-else-if="inventory <= 10 && inventory > 0">Almost Sold Out</p>\n  <p v-else>Out of Stock</p>\n  <ul>\n    \x3c!-- list --\x3e\n    <li v-for="item in items" :key="item.id">{{ item.message }}</li>\n    <li v-for="(item, index) in items">{{ item.message }} {{ index }}</li>\n    \x3c!-- destructed list --\x3e\n    <li v-for="{ message } in items">{{ message }}</li>\n    <li v-for="({ message }, index) in items">{{ message }} {{ index }}</li>\n    \x3c!-- nested list --\x3e\n    <li v-for="item in items">\n      <span v-for="childItem in item.children"> {{ item.message }} {{ childItem }} </span>\n    </li>\n    \x3c!-- iterator list --\x3e\n    <li v-for="item of items">{{ item.message }}</li>\n    \x3c!-- object list --\x3e\n    <li v-for="(value, key, index) in myObject">{{ index }}. {{ key }}: {{ value }}</li>\n    \x3c!-- range list --\x3e\n    <li v-for="n in 10">{{ n }}</li>\n  </ul>\n</template>\n'})}),"\n",(0,o.jsx)(n.admonition,{title:"Show and If Directive",type:"tip",children:(0,o.jsxs)(n.p,{children:["Prefer ",(0,o.jsx)(n.code,{children:"v-show"})," if you need to toggle something very often (",(0,o.jsx)(n.code,{children:"display: none"}),"),\nand prefer ",(0,o.jsx)(n.code,{children:"v-if"})," if the condition is unlikely to change at runtime (lifecycle called)."]})}),"\n",(0,o.jsxs)(n.admonition,{title:"For and If Directive",type:"tip",children:[(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u4e0d\u8981\u628a ",(0,o.jsx)(n.code,{children:"v-if"})," \u548c ",(0,o.jsx)(n.code,{children:"v-for"})," \u540c\u65f6\u7528\u5728\u540c\u4e00\u4e2a\u5143\u7d20\u4e0a,\n\u4f1a\u5e26\u6765\u6027\u80fd\u65b9\u9762\u7684\u6d6a\u8d39,\n\u4e14\u6709\u8bed\u6cd5\u6b67\u4e49:\nVue 2.x \u4e2d ",(0,o.jsx)(n.code,{children:"v-for"})," \u4f18\u5148\u7ea7\u9ad8\u4e8e ",(0,o.jsx)(n.code,{children:"v-if"}),",\nVue 3.x \u4e2d ",(0,o.jsx)(n.code,{children:"v-if"})," \u4f18\u5148\u7ea7\u9ad8\u4e8e ",(0,o.jsx)(n.code,{children:"v-for"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["\u5916\u5c42\u5d4c\u5957 template (\u9875\u9762\u6e32\u67d3\u4e0d\u751f\u6210 DOM \u8282\u70b9),\n\u5728\u8fd9\u4e00\u5c42\u8fdb\u884c ",(0,o.jsx)(n.code,{children:"v-if"})," \u5224\u65ad,\n\u7136\u540e\u5728\u5185\u90e8\u8fdb\u884c ",(0,o.jsx)(n.code,{children:"v-for"})," \u5faa\u73af."]}),"\n"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// Vue 2.x: compiler/codegen/index.js\nexport function genElement(el: ASTElement, state: CodegenState): string {\n  if (el.parent)\n    el.pre = el.pre || el.parent.pre\n\n  if (el.staticRoot && !el.staticProcessed) {\n    return genStatic(el, state)\n  } else if (el.once && !el.onceProcessed) {\n    return genOnce(el, state)\n  } else if (el.for && !el.forProcessed) {\n    return genFor(el, state)\n  } else if (el.if && !el.ifProcessed) {\n    return genIf(el, state)\n  } else if (el.tag === 'template' && !el.slotTarget && !state.pre) {\n    return genChildren(el, state) || 'void 0'\n  } else if (el.tag === 'slot') {\n    return genSlot(el, state)\n  } else {\n    // component or element\n  }\n}\n"})}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<template v-if="isShow"><p v-for="item in items"></p></template>\n'})})]}),"\n",(0,o.jsx)(n.h3,{id:"attributes-binding-directives",children:"Attributes Binding Directives"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<template>\n  <a :href="url">Dynamic Link</a>\n  <img :src="link" :alt="description" />\n  <button :disabled="item.length === 0">Save Item</button>\n</template>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"class-and-style-binding-directives",children:"Class and Style Binding Directives"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Static class."}),"\n",(0,o.jsx)(n.li,{children:"Array binding."}),"\n",(0,o.jsx)(n.li,{children:"Object binding."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<script setup lang=\"ts\">\n  const isActive = ref(true)\n  const hasError = ref(false)\n  const activeClass = ref('active')\n  const errorClass = ref('text-danger')\n  const classObject = reactive({\n    active: true,\n    'text-danger': false,\n  })\n  const classObject = computed(() => ({\n    active: isActive.value && !error.value,\n    'text-danger': hashError.value,\n  }))\n\n  const activeColor = ref('red')\n  const fontSize = ref(30)\n  const styleObject = reactive({\n    color: 'red',\n    fontSize: '13px',\n  })\n<\/script>\n\n<template>\n  <div class=\"static\"></div>\n  <div :class=\"{ active: isActive, 'text-danger': hasError }\"></div>\n  <div :class=\"[isActive ? activeClass : '', errorClass]\"></div>\n  <div :class=\"[{ active: isActive }, errorClass]\"></div>\n  <div :class=\"classObject\"></div>\n  <div :style=\"{ color: activeColor, fontSize: fontSize + 'px' }\"></div>\n  <div :style=\"[baseStyles, overridingStyles]\"></div>\n  <div :style=\"styleObject\"></div>\n  <div :style=\"{ display: ['-webkit-box', '-ms-flexbox', 'flex'] }\"></div>\n</template>\n"})}),"\n",(0,o.jsx)(n.h3,{id:"event-handlers-directives",children:"Event Handlers Directives"}),"\n",(0,o.jsx)(n.h4,{id:"event-handlers-and-modifiers",children:"Event Handlers and Modifiers"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<div id="handler">\n  <button @click="warn(\'Warn message.\', $event)">Submit</button>\n  <button @click="one($event), two($event)">Submit</button>\n\n  \x3c!-- \u963b\u6b62\u5355\u51fb\u4e8b\u4ef6\u7ee7\u7eed\u4f20\u64ad --\x3e\n  <a @click.stop="doThis"></a>\n\n  \x3c!-- \u63d0\u4ea4\u4e8b\u4ef6\u4e0d\u518d\u91cd\u8f7d\u9875\u9762 --\x3e\n  <form @submit.prevent="onSubmit"></form>\n\n  \x3c!-- \u4fee\u9970\u7b26\u53ef\u4ee5\u4e32\u8054 --\x3e\n  <a @click.stop.prevent="doThat"></a>\n\n  \x3c!-- \u53ea\u6709\u4fee\u9970\u7b26 --\x3e\n  <form @submit.prevent></form>\n\n  \x3c!-- \u6dfb\u52a0\u4e8b\u4ef6\u76d1\u542c\u5668\u65f6\u4f7f\u7528\u4e8b\u4ef6\u6355\u83b7\u6a21\u5f0f --\x3e\n  \x3c!-- \u5373\u5185\u90e8\u5143\u7d20\u89e6\u53d1\u7684\u4e8b\u4ef6\u5148\u5728\u6b64\u5904\u7406, \u7136\u540e\u624d\u4ea4\u7531\u5185\u90e8\u5143\u7d20\u8fdb\u884c\u5904\u7406 --\x3e\n  <div @click.capture="doThis">...</div>\n\n  \x3c!-- \u53ea\u5f53\u5728 event.target \u662f\u5f53\u524d\u5143\u7d20\u81ea\u8eab\u65f6\u89e6\u53d1\u5904\u7406\u51fd\u6570 --\x3e\n  \x3c!-- \u5373\u4e8b\u4ef6\u4e0d\u662f\u4ece\u5185\u90e8\u5143\u7d20\u89e6\u53d1\u7684 --\x3e\n  <div @click.self="doThat">...</div>\n\n  \x3c!-- \u70b9\u51fb\u4e8b\u4ef6\u5c06\u53ea\u4f1a\u89e6\u53d1\u4e00\u6b21 --\x3e\n  <a @click.once="doThis"></a>\n\n  \x3c!-- \u6eda\u52a8\u4e8b\u4ef6\u7684\u9ed8\u8ba4\u884c\u4e3a (\u5373\u6eda\u52a8\u884c\u4e3a) \u5c06\u4f1a\u7acb\u5373\u89e6\u53d1   --\x3e\n  \x3c!-- \u800c\u4e0d\u4f1a\u7b49\u5f85 `onScroll` \u5b8c\u6210                   --\x3e\n  \x3c!-- \u8fd9\u5176\u4e2d\u5305\u542b `event.preventDefault()` \u7684\u60c5\u51b5   --\x3e\n  <div @scroll.passive="onScroll">...</div>\n\n  <input @keyup.enter="submit" />\n  <input @keyup.tab="submit" />\n  <input @keyup.delete="submit" />\n  <input @keyup.esc="submit" />\n  <input @keyup.space="submit" />\n  <input @keyup.up="submit" />\n  <input @keyup.down="submit" />\n  <input @keyup.left="submit" />\n  <input @keyup.right="submit" />\n  <input @keyup.page-down="onPageDown" />\n  <input @keyup.ctrl.enter="clear" />\n  <input @keyup.alt.space="clear" />\n  <input @keyup.shift.up="clear" />\n  <input @keyup.meta.right="clear" />\n\n  \x3c!-- Ctrl + Click --\x3e\n  <div @click.ctrl="doSomething">Do something</div>\n  \x3c!-- \u5373\u4f7f Alt \u6216 Shift \u88ab\u4e00\u540c\u6309\u4e0b\u65f6\u4e5f\u4f1a\u89e6\u53d1 --\x3e\n  <button @click.ctrl="onClick">A</button>\n  \x3c!-- \u6709\u4e14\u53ea\u6709 Ctrl \u88ab\u6309\u4e0b\u7684\u65f6\u5019\u624d\u89e6\u53d1 --\x3e\n  <button @click.ctrl.exact="onCtrlClick">A</button>\n  \x3c!-- \u6ca1\u6709\u4efb\u4f55\u7cfb\u7edf\u4fee\u9970\u7b26\u88ab\u6309\u4e0b\u7684\u65f6\u5019\u624d\u89e6\u53d1 --\x3e\n  <button @click.exact="onClick">A</button>\n  <button @click.left="onClick">Left click</button>\n  <button @click.right="onClick">Right click</button>\n  <button @click.middle="onClick">Middle click</button>\n</div>\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"Vue.createApp({\n  methods: {\n    warn(message, event) {\n      if (event)\n        event.preventDefault()\n      alert(message)\n    },\n    one(event) {\n      if (event)\n        event.preventDefault()\n      console.log('one')\n    },\n    two(event) {\n      if (event)\n        event.preventDefault()\n      console.log('two')\n    },\n  },\n}).mount('#inline-handler')\n"})}),"\n",(0,o.jsx)(n.h4,{id:"custom-events",children:"Custom Events"}),"\n",(0,o.jsx)(n.p,{children:"Form events:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"app.component('CustomForm', {\n  emits: {\n    // \u6ca1\u6709\u9a8c\u8bc1\n    click: null,\n\n    // \u9a8c\u8bc1 submit \u4e8b\u4ef6\n    submit: ({ email, password }) => {\n      if (email && password) {\n        return true\n      } else {\n        console.warn('Invalid submit event payload!')\n        return false\n      }\n    },\n  },\n  methods: {\n    customEvent() {\n      this.$emit('custom-event')\n    },\n    submitForm(email, password) {\n      this.$emit('submit', { email, password })\n    },\n  },\n})\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<custom-form @click="handleClick" @submit="handleSubmit" @custom-event="handleEvent"></custom-form>\n'})}),"\n",(0,o.jsx)(n.p,{children:"Drag and Drop events:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"\x3c!-- Drag.vue --\x3e\n<template>\n  <div draggable=\"true\" @dragenter.prevent @dragover.prevent @dragstart.self=\"onDrag\">\n    <slot />\n  </div>\n</template>\n\n<script>\n  export default {\n    props: {\n      transferData: {\n        type: Object,\n        required: true,\n      },\n    },\n    methods: {\n      onDrag(e) {\n        e.dataTransfer.effectAllowed = 'move'\n        e.dataTransfer.dropEffect = 'move'\n        e.dataTransfer.setData('payload', JSON.stringify(this.transferData))\n      },\n    },\n  }\n<\/script>\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"\x3c!-- Drop.vue --\x3e\n<template>\n  <div @dragenter.prevent @dragover.prevent @drop.stop=\"onDrop\">\n    <slot />\n  </div>\n</template>\n\n<script>\n  export default {\n    methods: {\n      onDrop(e) {\n        const transferData = JSON.parse(e.dataTransfer.getData('payload'))\n        this.$emit('drop', transferData)\n      },\n    },\n  }\n<\/script>\n"})}),"\n",(0,o.jsx)(n.h3,{id:"model-directives",children:"Model Directives"}),"\n",(0,o.jsxs)(n.p,{children:["\u672c\u8d28\u4e3a\u8bed\u6cd5\u7cd6 (",(0,o.jsx)(n.code,{children:"v-model = v-bind + v-on"}),"):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<input v-model="searchText" />\n<input :value="searchText" @input="searchText = $event.target.value" />\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"checkbox"}),"/",(0,o.jsx)(n.code,{children:"radio"}),":\n",(0,o.jsx)(n.code,{children:"checked"})," property and ",(0,o.jsx)(n.code,{children:"@change"})," event."]}),"\n",(0,o.jsxs)(n.li,{children:["Multiple ",(0,o.jsx)(n.code,{children:"checkbox"}),":\nvalue array."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"select"}),":\n",(0,o.jsx)(n.code,{children:"value"})," property and ",(0,o.jsx)(n.code,{children:"@change"})," event."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"text"}),"/",(0,o.jsx)(n.code,{children:"textarea"}),":\n",(0,o.jsx)(n.code,{children:"value"})," property and ",(0,o.jsx)(n.code,{children:"@input"})," event."]}),"\n",(0,o.jsxs)(n.li,{children:["Child component:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Default: ",(0,o.jsx)(n.code,{children:"value"})," property and ",(0,o.jsx)(n.code,{children:"@input"})," event."]}),"\n",(0,o.jsxs)(n.li,{children:["Use ",(0,o.jsx)(n.code,{children:"options.model"})," on Child component to change default ",(0,o.jsx)(n.code,{children:"v-bind"})," and ",(0,o.jsx)(n.code,{children:"v-on"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<input v-model="message" placeholder="edit me" />\n<textarea v-model="message" placeholder="add multiple lines"></textarea>\n\n<input type="radio" id="one" value="One" v-model="picked" />\n<input type="radio" id="two" value="Two" v-model="picked" />\n\n<input type="checkbox" id="checkbox" v-model="checked" />\n<label for="checkbox">{{ checked }}</label>\n\n<input type="checkbox" id="jack" value="Jack" v-model="checkedNames" />\n<input type="checkbox" id="john" value="John" v-model="checkedNames" />\n<input type="checkbox" id="mike" value="Mike" v-model="checkedNames" />\n\n<select v-model="selected">\n  <option disabled value="">Please select one</option>\n  <option>A</option>\n  <option>B</option>\n  <option>C</option>\n</select>\n\n<select v-model="selected" multiple>\n  <option>A</option>\n  <option>B</option>\n  <option>C</option>\n</select>\n\n\x3c!-- Debounce --\x3e\n<input v-model.lazy="msg" />\n\x3c!-- \u81ea\u52a8\u5c06\u7528\u6237\u7684\u8f93\u5165\u503c\u8f6c\u4e3a\u6570\u503c\u7c7b\u578b --\x3e\n<input v-model.number="age" type="number" />\n\x3c!-- \u81ea\u52a8\u8fc7\u6ee4\u7528\u6237\u8f93\u5165\u7684\u9996\u5c3e\u7a7a\u767d\u5b57\u7b26 --\x3e\n<input v-model.trim="msg" />\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Component ",(0,o.jsx)(n.code,{children:"v-model"})," directive:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<CustomInput v-model="searchText" />\n<CustomInput :modelValue="searchText" @update:modelValue="newValue => searchText = newValue" />\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"\x3c!-- CustomInput.vue --\x3e\n<script setup>\n  defineProps(['modelValue'])\n  defineEmits(['update:modelValue'])\n<\/script>\n\n<template>\n  <input :value=\"modelValue\" @input=\"$emit('update:modelValue', $event.target.value)\" />\n</template>\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"\x3c!-- CustomInput.vue --\x3e\n<script setup>\n  import { computed } from 'vue'\n\n  const props = defineProps(['modelValue'])\n  const emit = defineEmits(['update:modelValue'])\n\n  const value = computed({\n    get() {\n      return props.modelValue\n    },\n    set(value) {\n      emit('update:modelValue', value)\n    },\n  })\n<\/script>\n\n<template>\n  <input v-model=\"value\" />\n</template>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Custom component ",(0,o.jsx)(n.code,{children:"v-model"})," name:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"\x3c!-- MyComponent.vue --\x3e\n<script setup>\n  defineProps(['title'])\n  defineEmits(['update:title'])\n<\/script>\n\n<template>\n  <input type=\"text\" :value=\"title\" @input=\"$emit('update:title', $event.target.value)\" />\n</template>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Custom component ",(0,o.jsx)(n.code,{children:"v-model"})," modifier:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<script setup>\n  const props = defineProps({\n    modelValue: String,\n    modelModifiers: { default: () => ({}) },\n  })\n\n  const emit = defineEmits([\'update:modelValue\'])\n\n  function emitValue(e) {\n    let value = e.target.value\n    if (props.modelModifiers.capitalize) {\n      value = value.charAt(0).toUpperCase() + value.slice(1)\n    }\n    emit(\'update:modelValue\', value)\n  }\n<\/script>\n\n<template>\n  <input type="text" :value="modelValue" @input="emitValue" />\n</template>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"custom-directives",children:"Custom Directives"}),"\n",(0,o.jsxs)(n.p,{children:["Custom ",(0,o.jsx)(n.a,{href:"https://github.com/vuejs/core/tree/main/packages/runtime-dom/src/directives",children:"build-in directives"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<script setup lang="ts">\n  import { ref, vModelText } from \'vue\'\n\n  vModelText.updated = (el, { value, modifiers: { capitalize } }) => {\n    if (capitalize && Object.hasOwn(value, 0)) {\n      el.value = value[0].toUpperCase() + value.slice(1)\n    }\n  }\n\n  const value = ref(\'\')\n<\/script>\n\n<template>\n  <input v-model.capitalize="value" type="text" />\n</template>\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Custom ",(0,o.jsx)(n.a,{href:"https://github.com/vuejs/core/blob/main/packages/runtime-core/src/directives.ts",children:"new directives"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const vDirective = {\n  // \u5728\u7ed1\u5b9a\u5143\u7d20\u7684 attribute \u524d\n  // \u6216\u4e8b\u4ef6\u76d1\u542c\u5668\u5e94\u7528\u524d\u8c03\u7528\n  created(el, binding, vnode, prevVnode) {},\n  // \u5728\u5143\u7d20\u88ab\u63d2\u5165\u5230 DOM \u524d\u8c03\u7528\n  beforeMount(el, binding, vnode, prevVnode) {},\n  // \u5728\u7ed1\u5b9a\u5143\u7d20\u7684\u7236\u7ec4\u4ef6\n  // \u53ca\u4ed6\u81ea\u5df1\u7684\u6240\u6709\u5b50\u8282\u70b9\u90fd\u6302\u8f7d\u5b8c\u6210\u540e\u8c03\u7528\n  mounted(el, binding, vnode, prevVnode) {},\n  // \u7ed1\u5b9a\u5143\u7d20\u7684\u7236\u7ec4\u4ef6\u66f4\u65b0\u524d\u8c03\u7528\n  beforeUpdate(el, binding, vnode, prevVnode) {},\n  // \u5728\u7ed1\u5b9a\u5143\u7d20\u7684\u7236\u7ec4\u4ef6\n  // \u53ca\u4ed6\u81ea\u5df1\u7684\u6240\u6709\u5b50\u8282\u70b9\u90fd\u66f4\u65b0\u540e\u8c03\u7528\n  updated(el, binding, vnode, prevVnode) {},\n  // \u7ed1\u5b9a\u5143\u7d20\u7684\u7236\u7ec4\u4ef6\u5378\u8f7d\u524d\u8c03\u7528\n  beforeUnmount(el, binding, vnode, prevVnode) {},\n  // \u7ed1\u5b9a\u5143\u7d20\u7684\u7236\u7ec4\u4ef6\u5378\u8f7d\u540e\u8c03\u7528\n  unmounted(el, binding, vnode, prevVnode) {},\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"components",children:"Components"}),"\n",(0,o.jsx)(n.h3,{id:"computed-properties",children:"Computed Properties"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<div id="computed-basics">\n  <p>Has published books:</p>\n  <span>{{ publishedBooksMessage }}</span>\n</div>\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"Vue.createApp({\n  data() {\n    return {\n      author: {\n        name: 'John Doe',\n        books: [\n          'Vue 2 - Advanced Guide',\n          'Vue 3 - Basic Guide',\n          'Vue 4 - The Mystery',\n        ],\n      },\n    }\n  },\n  computed: {\n    // \u8ba1\u7b97\u5c5e\u6027\u7684 getter\n    publishedBooksMessage() {\n      // `this` \u6307\u5411 vm \u5b9e\u4f8b\n      return this.author.books.length > 0 ? 'Yes' : 'No'\n    },\n    fullName: {\n      // getter\n      get() {\n        return `${this.firstName} ${this.lastName}`\n      },\n      // setter\n      set(newValue) {\n        const names = newValue.split(' ')\n        this.firstName = names[0]\n        this.lastName = names[names.length - 1]\n      },\n    },\n  },\n}).mount('#computed-basics')\n"})}),"\n",(0,o.jsx)(n.h3,{id:"slots",children:"Slots"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://developers.google.com/web/fundamentals/web-components/shadowdom#slots",children:"Web Slot"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"name"})," attribute."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"fallback"})," content."]}),"\n",(0,o.jsx)(n.li,{children:"\u63d2\u69fd\u57fa\u672c\u76ee\u7684\u4e3a\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u6e32\u67d3\u7ec6\u8282: e.g \u9ad8\u7ea7\u5217\u8868\u7ec4\u4ef6."}),"\n",(0,o.jsx)(n.li,{children:"Normal Slots:\n\u5728\u7236\u7ec4\u4ef6\u7f16\u8bd1\u548c\u6e32\u67d3\u9636\u6bb5\u751f\u6210 Slots VNodes,\n\u6570\u636e\u4f5c\u7528\u57df\u4e3a\u7236\u7ec4\u4ef6\u5b9e\u4f8b (\u4f7f\u7528\u63d2\u69fd\u7684\u7ec4\u4ef6),\n\u5373\u7236\u7ec4\u4ef6\u540c\u65f6\u63d0\u4f9b View \u4e0e Data."}),"\n",(0,o.jsxs)(n.li,{children:["Scoped Slots:\n\u5728\u7236\u7ec4\u4ef6\u7f16\u8bd1\u548c\u6e32\u67d3\u9636\u6bb5\u4e3a ",(0,o.jsx)(n.code,{children:"vnode.data"})," \u6dfb\u52a0 ",(0,o.jsx)(n.code,{children:"scopedSlots"})," \u5bf9\u8c61,\n\u5728\u5b50\u7ec4\u4ef6\u7f16\u8bd1\u548c\u6e32\u67d3\u9636\u6bb5\u751f\u6210 Slots VNodes,\n\u6570\u636e\u4f5c\u7528\u57df\u4e3a\u5b50\u7ec4\u4ef6\u5b9e\u4f8b (\u5b9a\u4e49\u63d2\u69fd\u7684\u7ec4\u4ef6),\n\u5373\u7236\u7ec4\u4ef6\u63d0\u4f9b View, \u5b50\u7ec4\u4ef6\u63d0\u4f9b Data."]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"fallback-slots",children:"Fallback Slots"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'\x3c!-- SubmitButton --\x3e\n<button type="submit">\n  <slot>Submit</slot>\n</button>\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<SubmitButton></SubmitButton>\n"})}),"\n",(0,o.jsx)(n.p,{children:"render to"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<button type="submit">Submit</button>\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<SubmitButton>Save</SubmitButton>\n"})}),"\n",(0,o.jsx)(n.p,{children:"render to"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<button type="submit">Save</button>\n'})}),"\n",(0,o.jsx)(n.h4,{id:"named-slots",children:"Named Slots"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"#"}),": ",(0,o.jsx)(n.code,{children:"v-slot"})," directive shorthand."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'\x3c!-- Layout --\x3e\n<div class="container">\n  <header>\n    <slot name="header"></slot>\n  </header>\n  <main>\n    <slot></slot>\n  </main>\n  <footer>\n    <slot name="footer"></slot>\n  </footer>\n</div>\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<Layout>\n  <template v-slot:header>\n    <h1>Here might be a page title</h1>\n  </template>\n  <template v-slot:default>\n    <p>A paragraph for the main content.</p>\n    <p>And another one.</p>\n  </template>\n  <template v-slot:footer>\n    <p>Here's some contact info</p>\n  </template>\n</Layout>\n"})}),"\n",(0,o.jsx)(n.p,{children:"Named slot directive shorthand:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<Layout>\n  <template #header>\n    <h1>Here might be a page title</h1>\n  </template>\n  <template>\n    <p>A paragraph for the main content.</p>\n    <p>And another one.</p>\n  </template>\n  <template #footer>\n    <p>Here's some contact info</p>\n  </template>\n</Layout>\n"})}),"\n",(0,o.jsx)(n.h4,{id:"scoped-slots",children:"Scoped Slots"}),"\n",(0,o.jsxs)(n.p,{children:["Pass data from child to parent\n(like ",(0,o.jsx)(n.code,{children:"Render Props"})," in React):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"app.component('TodoList', {\n  data() {\n    return {\n      items: ['Feed a cat', 'Buy milk'],\n    }\n  },\n  template: `\n    <ul>\n      <li v-for=\"( item, index ) in items\">\n        <slot :item=\"item\"></slot>\n      </li>\n    </ul>\n  `,\n})\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<TodoList>\n  \x3c!-- `default` can be other named slots --\x3e\n  <template v-slot:default="slotProps">\n    <i class="fas fa-check"></i>\n    <span class="green">{{ slotProps.item }}</span>\n  </template>\n</TodoList>\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Slot props shorthand\n(",(0,o.jsx)(n.code,{children:"default"})," can be other named slots):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<TodoList v-slot="slotProps">\n  <i class="fas fa-check"></i>\n  <span class="green">{{ slotProps.item }}</span>\n</TodoList>\n\n<TodoList v-slot="{ item }">\n  <i class="fas fa-check"></i>\n  <span class="green">{{ item }}</span>\n</TodoList>\n\n<TodoList v-slot="{ item: todo }">\n  <i class="fas fa-check"></i>\n  <span class="green">{{ todo }}</span>\n</TodoList>\n\n<TodoList v-slot="{ item = \'Placeholder\' }">\n  <i class="fas fa-check"></i>\n  <span class="green">{{ item }}</span>\n</TodoList>\n\n<TodoList #default="{ item }">\n  <i class="fas fa-check"></i>\n  <span class="green">{{ item }}</span>\n</TodoList>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"provide-and-inject",children:"Provide and Inject"}),"\n",(0,o.jsxs)(n.p,{children:["Root ",(0,o.jsx)(n.code,{children:"provide"})," context value:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { provide, ref } from 'vue'\n\nconst count = ref(0)\nprovide('key', count)\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Child ",(0,o.jsx)(n.code,{children:"inject"})," context value:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { inject } from 'vue'\n\nconst message = inject('message', defaultValue)\n"})}),"\n",(0,o.jsx)(n.h2,{id:"composition-api",children:"Composition API"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://v3.vuejs.org/api/sfc-script-setup.html",children:"SFC with Script Setup"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["Can't access to ",(0,o.jsx)(n.code,{children:"this"})," inside of ",(0,o.jsx)(n.code,{children:"setup"}),",\nwe cannot directly access ",(0,o.jsx)(n.code,{children:"this.$emit"})," or ",(0,o.jsx)(n.code,{children:"this.$route"})," anymore."]})}),"\n",(0,o.jsx)(n.h3,{id:"setup-method",children:"Setup Method"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Executes before\n",(0,o.jsx)(n.code,{children:"Components"}),",\n",(0,o.jsx)(n.code,{children:"Props"}),",\n",(0,o.jsx)(n.code,{children:"Data"}),",\n",(0,o.jsx)(n.code,{children:"Methods"}),",\n",(0,o.jsx)(n.code,{children:"Computed"})," properties,\n",(0,o.jsx)(n.code,{children:"Lifecycle"})," methods."]}),"\n",(0,o.jsxs)(n.li,{children:["Can't access ",(0,o.jsx)(n.code,{children:"this"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Can access ",(0,o.jsx)(n.code,{children:"props"})," and ",(0,o.jsx)(n.code,{children:"context"}),":","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"props"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"context.attrs"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"context.slots"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"context.emit"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"context.expose"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"context.parent"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"context.root"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { ref, toRefs } from 'vue'\n\nexport default {\n  setup(props, { attrs, slots, emit, expose }) {\n    const { title } = toRefs(props)\n\n    const count = ref(0)\n    const increment = () => ++count.value\n\n    console.log(title.value)\n\n    return { title, increment }\n  },\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"composition-lifecycle-hooks",children:"Composition LifeCycle Hooks"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"onBeforeMount"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"onMounted"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"onBeforeUpdate"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"onUpdated"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"onBeforeUnmount"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"onUnmounted"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"onErrorCaptured"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"onRenderTracked"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"onRenderTriggered"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"onActivated"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"onDeactivated"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"beforeCreate"})," -> ",(0,o.jsx)(n.code,{children:"setup"})," -> ",(0,o.jsx)(n.code,{children:"created"}),":\nNo need for ",(0,o.jsx)(n.code,{children:"onBeforeCreate"})," and ",(0,o.jsx)(n.code,{children:"onCreated"})," hooks,\njust put code in ",(0,o.jsx)(n.code,{children:"setup"})," methods."]}),"\n",(0,o.jsx)(n.h3,{id:"reactivity",children:"Reactivity"}),"\n",(0,o.jsx)(n.h4,{id:"reactive-value",children:"Reactive Value"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { reactive, toRefs } from 'vue'\n\nconst book = reactive({\n  author: 'Vue Team',\n  year: '2020',\n  title: 'Vue 3 Guide',\n  description: 'You are reading this book right now ;)',\n  price: 'free',\n})\n\nconst { author, title } = toRefs(book)\n\ntitle.value = 'Vue 3 Detailed Guide'\nconsole.log(book.title) // 'Vue 3 Detailed Guide'\n"})}),"\n",(0,o.jsx)(n.h4,{id:"ref-value",children:"Ref Value"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"ref"})," API:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import type { Ref } from 'vue'\nimport { isRef, reactive, ref, toRef, unref } from 'vue'\n\nconst count = ref(10)\nconst state = reactive({\n  foo: 1,\n  bar: 2,\n})\nconst fooRef = toRef(state, 'foo')\n\nconsole.log(isRef(count))\nconsole.log(unref(count) === 10)\nfooRef.value++\nconsole.log(state.foo === 2)\nstate.foo++\nconsole.log(fooRef.value === 3)\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"toRef"}),"/",(0,o.jsx)(n.code,{children:"toRefs"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"function toRef(reactive, key) {\n  const wrapper = {\n    get value() {\n      return reactive[key]\n    },\n    set value(val) {\n      reactive[key] = val\n    },\n  }\n\n  Object.defineProperty(wrapper, '__v_isRef', {\n    value: true,\n  })\n\n  return wrapper\n}\n\nfunction toRefs(reactive) {\n  const refs = {}\n\n  for (const key in reactive) refs[key] = toRef(reactive, key)\n\n  return refs\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"proxyRefs"})," (auto unref):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"function proxyRefs(target) {\n  return new Proxy(target, {\n    get(target, key, receiver) {\n      const result = Reflect.get(target, key, receiver)\n      return result.__v_isRef ? result.value : result\n    },\n    set(target, key, value, receiver) {\n      const result = target[key]\n\n      if (result.__v_isRef) {\n        result.value = value\n        return true\n      }\n\n      return Reflect.set(target, key, value, receiver)\n    },\n  })\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u5f53\u4e00\u4e2a ",(0,o.jsx)(n.code,{children:"ref"})," \u88ab\u5d4c\u5957\u5728\u4e00\u4e2a\u54cd\u5e94\u5f0f\u5bf9\u8c61\u4e2d\u4f5c\u4e3a\u5c5e\u6027\u88ab\u8bbf\u95ee\u6216\u66f4\u6539\u65f6,\n\u4f1a\u81ea\u52a8\u89e3\u5305 (\u65e0\u9700\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:".value"}),"):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const count = ref(0)\nconst state = reactive({\n  count,\n})\nconsole.log(state.count) // 0\n\nstate.count = 1\nconsole.log(count.value) // 1\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u5f53 ",(0,o.jsx)(n.code,{children:"ref"})," \u4f5c\u4e3a\u54cd\u5e94\u5f0f\u6570\u7ec4\u6216 ",(0,o.jsx)(n.code,{children:"Map"})," \u539f\u751f\u96c6\u5408\u7c7b\u578b\u7684\u5143\u7d20\u88ab\u8bbf\u95ee\u65f6,\n\u4e0d\u4f1a\u8fdb\u884c\u89e3\u5305 (\u9700\u8981\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:".value"}),"):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const books = reactive([ref('Vue 3 Guide')])\nconsole.log(books[0].value)\n\nconst map = reactive(new Map([['count', ref(0)]]))\nconsole.log(map.get('count').value)\n"})}),"\n",(0,o.jsx)(n.h4,{id:"computed-value",children:"Computed Value"}),"\n",(0,o.jsx)(n.p,{children:"\u8ba1\u7b97\u5c5e\u6027\u7684\u8ba1\u7b97\u51fd\u6570\u5e94\u53ea\u505a\u8ba1\u7b97\u800c\u6ca1\u6709\u4efb\u4f55\u5176\u4ed6\u7684\u526f\u4f5c\u7528,\n\u4e0d\u8981\u5728\u8ba1\u7b97\u51fd\u6570\u4e2d\u505a\u5f02\u6b65\u8bf7\u6c42\u6216\u8005\u66f4\u6539 DOM:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const count = ref(1)\nconst plusOne = computed(() => count.value + 1)\n\nconsole.log(plusOne.value) // 2\n\nplusOne.value++ // error\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"\u7279\u6b8a\u60c5\u51b5"}),"\u4e0b\u53ef\u901a\u8fc7 getter \u548c setter \u521b\u5efa\u53ef\u5199\u8ba1\u7b97\u5c5e\u6027:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const count = ref(1)\nconst plusOne = computed({\n  get: () => count.value + 1,\n  set: (val) => {\n    count.value = val - 1\n  },\n})\n\nplusOne.value = 1 // \u53ef\u5199\u8ba1\u7b97\u5c5e\u6027\nconsole.log(count.value) // 0\n"})}),"\n",(0,o.jsx)(n.h4,{id:"watch-value",children:"Watch Value"}),"\n",(0,o.jsx)(n.p,{children:"Watch single value:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// watching a getter\nconst state = reactive({ count: 0 })\nwatch(\n  () => state.count,\n  (count, prevCount) => {\n    /* ... */\n  }\n)\n\n// directly watching a ref\nconst count = ref(0)\nwatch(count, (count, prevCount) => {\n  /* ... */\n})\n"})}),"\n",(0,o.jsx)(n.p,{children:"Watch multiple value:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'const firstName = ref(\'\')\nconst lastName = ref(\'\')\n\nwatch([firstName, lastName], (newValues, prevValues) => {\n  console.log(newValues, prevValues)\n})\n\nfirstName.value = \'John\' // logs: ["John", ""] ["", ""]\nlastName.value = \'Smith\' // logs: ["John", "Smith"] ["John", ""]\n'})}),"\n",(0,o.jsx)(n.p,{children:"Watch reactive value:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const numbers = reactive([1, 2, 3, 4])\n\nwatch(\n  () => [...numbers],\n  (numbers, prevNumbers) => {\n    console.log(numbers, prevNumbers)\n  }\n)\n\nnumbers.push(5) // logs: [1,2,3,4,5] [1,2,3,4]\n"})}),"\n",(0,o.jsx)(n.p,{children:"Watch deep object:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const state = reactive({\n  id: 1,\n  attributes: {\n    name: '',\n  },\n})\n\nwatch(\n  () => state,\n  (state, prevState) => {\n    console.log('not deep', state.attributes.name, prevState.attributes.name)\n  }\n)\n\nwatch(\n  () => state,\n  (state, prevState) => {\n    console.log('deep', state.attributes.name, prevState.attributes.name)\n  },\n  { deep: true }\n)\n\n// \u76f4\u63a5\u7ed9 `watch()` \u4f20\u5165\u4e00\u4e2a\u54cd\u5e94\u5f0f\u5bf9\u8c61, \u4f1a\u9690\u5f0f\u5730\u521b\u5efa\u4e00\u4e2a\u6df1\u5c42\u4fa6\u542c\u5668\nwatch(state, (state, prevState) => {\n  console.log('deep', state.attributes.name, prevState.attributes.name)\n})\n\nstate.attributes.name = 'Alex' // Logs: \"deep\" \"Alex\" \"Alex\"\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Watch effect:\n",(0,o.jsx)(n.code,{children:"watchEffect()"})," \u4f1a\u7acb\u5373\u6267\u884c\u4e00\u904d\u56de\u8c03\u51fd\u6570,\nVue \u4f1a\u81ea\u52a8\u8ffd\u8e2a\u526f\u4f5c\u7528\u7684\u4f9d\u8d56\u5173\u7cfb,\n\u81ea\u52a8\u5206\u6790\u51fa\u54cd\u5e94\u6e90 (\u81ea\u52a8\u8ffd\u8e2a\u6240\u6709\u80fd\u8bbf\u95ee\u5230\u7684\u54cd\u5e94\u5f0f\u5c5e\u6027):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const url = ref('https://...')\nconst data = ref(null)\n\nwatchEffect(async () => {\n  const response = await fetch(url.value)\n  data.value = await response.json()\n})\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Watch post effect:\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\n\u7528\u6237\u521b\u5efa\u7684 watcher \u4f1a\u5728 Vue \u7ec4\u4ef6\u66f4\u65b0\u524d\u88ab\u8c03\u7528,\nDOM \u4ecd\u4e3a\u65e7\u72b6\u6001,\n\u901a\u8fc7 ",(0,o.jsx)(n.code,{children:"flush: post"})," \u663e\u793a\u8bbf\u95ee Vue \u66f4\u65b0\u540e\u7684 DOM:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"watch(source, callback, {\n  flush: 'post',\n})\n\nwatchEffect(callback, {\n  flush: 'post',\n})\n\nwatchPostEffect(() => {\n  /* \u5728 Vue \u66f4\u65b0\u540e\u6267\u884c */\n})\n"})}),"\n",(0,o.jsx)(n.h3,{id:"composable-functions",children:"Composable Functions"}),"\n",(0,o.jsx)(n.p,{children:"\u7ec4\u5408\u5f0f\u51fd\u6570\u59cb\u7ec8\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u591a\u4e2a ref \u7684\u666e\u901a\u7684\u975e\u54cd\u5e94\u5f0f\u5bf9\u8c61,\n\u8be5\u5bf9\u8c61\u5728\u7ec4\u4ef6\u4e2d\u88ab\u89e3\u6784\u4e3a ref \u4e4b\u540e\u4ecd\u53ef\u4ee5\u4fdd\u6301\u54cd\u5e94\u6027:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { isRef, ref, unref, watchEffect } from 'vue'\n\nexport function useFetch(url) {\n  const data = ref(null)\n  const error = ref(null)\n\n  function doFetch() {\n    // \u5728\u8bf7\u6c42\u4e4b\u524d\u91cd\u8bbe\u72b6\u6001...\n    data.value = null\n    error.value = null\n    // unref() \u89e3\u5305\u53ef\u80fd\u4e3a ref \u7684\u503c\n    fetch(unref(url))\n      .then(res => res.json())\n      .then(json => (data.value = json))\n      .catch(err => (error.value = err))\n  }\n\n  if (isRef(url)) {\n    // \u82e5\u8f93\u5165\u7684 URL \u662f\u4e00\u4e2a ref\n    // \u90a3\u4e48\u542f\u52a8\u4e00\u4e2a\u54cd\u5e94\u5f0f\u7684\u8bf7\u6c42\n    watchEffect(doFetch)\n  } else {\n    // \u5426\u5219\u53ea\u8bf7\u6c42\u4e00\u6b21\n    // \u907f\u514d\u76d1\u542c\u5668\u7684\u989d\u5916\u5f00\u9500\n    doFetch()\n  }\n\n  return { data, error }\n}\n\nexport function App() {\n  const { data, error } = useFetch('https://...')\n}\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { produce } from 'immer'\nimport { shallowRef } from 'vue'\n\nexport function useImmer(baseState) {\n  const state = shallowRef(baseState)\n  const update = (updater) => {\n    state.value = produce(state.value, updater)\n  }\n\n  return [state, update]\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"animation-and-transition",children:"Animation and Transition"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"v-enter-from"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"v-enter-to"}),": CSS defaults."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"v-enter-active"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"v-leave-from"}),": CSS defaults."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"v-leave-to"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"v-leave-active"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"name"}),": transition name (different from ",(0,o.jsx)(n.code,{children:"v"}),")."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"mode"}),":","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"out-in"}),": rectify router components transition."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"in-out"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:".v-enter-from {\n  opacity: 0;\n}\n\n@media (prefers-reduced-motion: no-preference) {\n  .v-enter-active,\n  .v-leave-active {\n    transition: opacity 0.3s ease-out;\n  }\n}\n\n.v-leave-to {\n  opacity: 0;\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"fade-transition",children:"Fade Transition"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<template>\n  <div>\n    <h1>This is the modal page</h1>\n    <button @click="toggleModal">Open</button>\n    <transition name="fade" mode="out-in">\n      <div v-if="isOpen" class="modal">\n        <p><button @click="toggleModal">Close</button></p>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<style>\n  .fade-enter-from {\n    opacity: 0;\n  }\n\n  @media (prefers-reduced-motion: no-preference) {\n    .fade-enter-active,\n    .fade-leave-active {\n      transition: opacity 0.5s ease-out;\n    }\n  }\n\n  .fade-leave-to {\n    opacity: 0;\n  }\n</style>\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<style>\n  @media only screen and (prefers-reduced-motion: no-preference) {\n    .enter,\n    .leave {\n      transition: opacity 0.5s ease-out;\n    }\n  }\n\n  .before-enter,\n  .leave {\n    opacity: 0;\n  }\n\n  .enter,\n  .before-leave {\n    opacity: 1;\n  }\n</style>\n\n<script>\n  function enter(el, done) {\n    el.classList.add('before-enter')\n\n    setTimeout(() => {\n      el.classList.remove('before-enter')\n      el.classList.add('enter')\n    }, 20)\n\n    setTimeout(() => {\n      el.classList.remove('enter')\n      done()\n    }, 500)\n  }\n\n  function leave(el, done) {\n    el.classList.add('before-leave')\n\n    setTimeout(() => {\n      el.classList.remove('before-leave')\n      el.classList.add('leave')\n    }, 0)\n\n    setTimeout(() => {\n      el.classList.remove('leave')\n      done()\n    }, 500)\n  }\n<\/script>\n"})}),"\n",(0,o.jsx)(n.h3,{id:"slide-transition",children:"Slide Transition"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:".slide-fade-enter-from {\n  opacity: 0;\n  transform: translateX(10px);\n}\n\n@media (prefers-reduced-motion: no-preference) {\n  .slide-fade-enter-active,\n  .slide-fade-leave-active {\n    transition: all 0.2s ease;\n  }\n}\n\n.slide-fade-leave-to {\n  opacity: 0;\n  transform: translateX(-10px);\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"transition-group",children:"Transition Group"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<template>\n  <div>\n    <input type="text" v-model="newContact" placeholder="Name" />\n    <button @click="addContact">Add Contact</button>\n    <button @click="sortContacts">Sort</button>\n    <transition-group name="slide-up" tag="ul" appear>\n      <li v-for="contact in contacts" :key="contact">{{ contact }}</li>\n    </transition-group>\n  </div>\n</template>\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:".slide-up-enter-from {\n  opacity: 0;\n  transform: translateY(10px);\n}\n\n@media (prefers-reduced-motion: no-preference) {\n  .slide-up-enter-active {\n    transition: all 0.2s ease;\n  }\n\n  .slide-up-move {\n    transition: transform 0.8s ease-in;\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"transition-hooks",children:"Transition Hooks"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:':css="false"'})," tells Vue don't handle transition classes,\nwe're relying on JavaScript hooks instead."]}),"\n",(0,o.jsx)(n.p,{children:"When it comes to JavaScript animation library,\ntransition JavaScript hooks helps a lot."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<transition\n  @before-enter="beforeEnter"\n  @enter="enter"\n  @after-enter="afterEnter"\n  @enter-cancelled="enterCancelled"\n  @before-leave="beforeLeave"\n  @leave="leave"\n  @after-leave="afterLeave"\n  @leave-cancelled="leaveCancelled"\n  :css="false"\n>\n  <div>Modal</div>\n</transition>\n\n<transition-group\n  @before-enter="beforeEnter"\n  @enter="enter"\n  @after-enter="afterEnter"\n  @enter-cancelled="enterCancelled"\n  @before-leave="beforeLeave"\n  @leave="leave"\n  @after-leave="afterLeave"\n  @leave-cancelled="leaveCancelled"\n  :css="false"\n>\n  >\n  <div class="card" v-for="card in cards" :key="card.id">\n    <p>{{ card.title }}</p>\n  </div>\n</transition-group>\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"export default {\n  methods: {\n    beforeEnter(el) {},\n    enter(el, done) {\n      done()\n    },\n    afterEnter(el) {},\n    enterCancelled(el) {},\n    beforeLeave(el) {},\n    leave(el, done) {\n      done()\n    },\n    afterLeave(el) {},\n    leaveCancelled(el) {},\n  },\n}\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<template>\n  <transition appear @before-enter="beforeEnter" @enter="enter" :css="false">\n    <div class="card"></div>\n  </transition>\n</template>\n\n<script>\n  import gsap from \'gsap\'\n\n  export default {\n    methods: {\n      beforeEnter(el) {\n        el.style.opacity = 0\n        el.style.transform = \'scale(0, 0)\'\n      },\n      enter(el, done) {\n        gsap.to(el, {\n          duration: 1,\n          opacity: 1,\n          scale: 1,\n          ease: \'bounce.inOut\',\n          onComplete: done,\n        })\n      },\n    },\n  }\n<\/script>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"transition-internals",children:"Transition Internals"}),"\n",(0,o.jsx)(n.h4,{id:"transition-component",children:"Transition Component"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const Transition = {\n  name: 'Transition',\n  setup(props, { slots }) {\n    return () => {\n      const innerVNode = slots.default()\n\n      innerVNode.transition = {\n        beforeEnter(el) {\n          el.classList.add('enter-from')\n          el.classList.add('enter-active')\n        },\n        enter(el) {\n          nextFrame(() => {\n            el.classList.remove('enter-from')\n            el.classList.add('enter-to')\n\n            el.addEventListener('transitionend', () => {\n              el.classList.remove('enter-to')\n              el.classList.remove('enter-active')\n            })\n          })\n        },\n        leave(el, performRemove) {\n          el.classList.add('leave-from')\n          el.classList.add('leave-active')\n\n          nextFrame(() => {\n            el.classList.remove('leave-from')\n            el.classList.add('leave-to')\n\n            el.addEventListener('transitionend', () => {\n              el.classList.remove('leave-to')\n              el.classList.remove('leave-active')\n\n              performRemove()\n            })\n          })\n        },\n      }\n\n      return innerVNode\n    }\n  },\n}\n"})}),"\n",(0,o.jsx)(n.h4,{id:"transition-module",children:"Transition Module"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"platforms/web/runtime/modules/transition.js"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u81ea\u52a8\u55c5\u63a2\u76ee\u6807\u5143\u7d20\u662f\u5426\u5e94\u7528\u4e86 CSS \u8fc7\u6e21\u6216\u52a8\u753b, \u5728\u6070\u5f53\u7684\u65f6\u673a\u6dfb\u52a0/\u5220\u9664 CSS \u7c7b\u540d."}),"\n",(0,o.jsx)(n.li,{children:"\u8fc7\u6e21\u7ec4\u4ef6\u63d0\u4f9b JavaScript \u94a9\u5b50\u51fd\u6570\u63a5\u53e3, \u94a9\u5b50\u51fd\u6570\u5c06\u5728\u6070\u5f53\u7684\u65f6\u673a\u88ab\u8c03\u7528."}),"\n",(0,o.jsxs)(n.li,{children:["\u6838\u5fc3\u903b\u8f91\u4f4d\u4e8e ",(0,o.jsx)(n.code,{children:"enter()"})," \u4e0e ",(0,o.jsx)(n.code,{children:"leave()"})," \u51fd\u6570."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"export default {\n  create: _enter,\n  activate: _enter,\n  remove(vnode: VNode, rm: Function) {\n    if (vnode.data.show !== true)\n      leave(vnode, rm)\n    else rm()\n  },\n}\n\nfunction _enter(_: any, vnode: VNodeWithData) {\n  if (vnode.data.show !== true)\n    enter(vnode)\n}\n"})}),"\n",(0,o.jsx)(n.h4,{id:"transition-group-component",children:"Transition Group Component"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const TransitionGroup = defineComponent({\n  props: extend(\n    {\n      tag: String,\n      moveClass: String,\n    },\n    transitionProps\n  ),\n\n  beforeMount() {\n    const update = this._update\n    this._update = (vnode, hydrating) => {\n      // force removing pass\n      this.__patch__(\n        this._vnode,\n        this.kept,\n        false, // hydrating\n        true // removeOnly (!important, avoids unnecessary moves)\n      )\n      this._vnode = this.kept\n      update.call(this, vnode, hydrating)\n    }\n  },\n\n  updated() {\n    const children: Array<VNode> = this.prevChildren\n    const moveClass: string = this.moveClass || `${this.name || 'v'}-move'`\n\n    if (!children.length || !this.hasMove(children[0].elm, moveClass))\n      return\n\n    // we divide the work into three loops to avoid mixing DOM reads and writes\n    // in each iteration - which helps prevent layout thrashing.\n    children.forEach(callPendingCbs)\n    children.forEach(recordPosition)\n    children.forEach(applyTranslation)\n\n    // force reflow to put everything in position\n    // assign to this to avoid being removed in tree-shaking\n    // $flow-disable-line\n    this._reflow = document.body.offsetHeight\n\n    children.forEach((c: VNode) => {\n      if (c.data.moved) {\n        const el: any = c.elm\n        const s: any = el.style\n        addTransitionClass(el, moveClass)\n        s.transform = s.WebkitTransform = s.transitionDuration = ''\n        el.addEventListener(\n          transitionEndEvent,\n          (el._moveCb = function cb(e) {\n            if (e?.propertyName.endsWith('transform')) {\n              el.removeEventListener(transitionEndEvent, cb)\n              el._moveCb = null\n              removeTransitionClass(el, moveClass)\n            }\n          })\n        )\n      }\n    })\n  },\n\n  methods: {\n    hasMove(el: any, moveClass: string): boolean {\n      if (!hasTransition)\n        return false\n\n      if (this._hasMove)\n        return this._hasMove\n\n      // Detect whether an element with the move class applied has\n      // CSS transitions. Since the element may be inside an entering\n      // transition at this very moment, we make a clone of it and remove\n      // all other transition classes applied to ensure only the move class\n      // is applied.\n      const clone: HTMLElement = el.cloneNode()\n\n      if (el._transitionClasses) {\n        el._transitionClasses.forEach((cls: string) => {\n          removeClass(clone, cls)\n        })\n      }\n\n      addClass(clone, moveClass)\n      clone.style.display = 'none'\n      this.$el.appendChild(clone)\n      const info: object = getTransitionInfo(clone)\n      this.$el.removeChild(clone)\n      return (this._hasMove = info.hasTransform)\n    },\n  },\n\n  render(h: Function) {\n    const tag: string = this.tag || this.$vnode.data.tag || 'span'\n    const map: object = Object.create(null)\n    const prevChildren: Array<VNode> = (this.prevChildren = this.children)\n    const rawChildren: Array<VNode> = this.$slots.default || []\n    const children: Array<VNode> = (this.children = [])\n    const transitionData: object = extractTransitionData(this)\n\n    for (let i = 0; i < rawChildren.length; i++) {\n      const c: VNode = rawChildren[i]\n\n      if (c.tag && c.key != null && String(c.key).indexOf('__vList') !== 0) {\n        children.push(c)\n        map[c.key] = c\n        ;(c.data || (c.data = {})).transition = transitionData\n      }\n    }\n\n    if (prevChildren) {\n      const kept: Array<VNode> = []\n      const removed: Array<VNode> = []\n\n      for (let i = 0; i < prevChildren.length; i++) {\n        const c: VNode = prevChildren[i]\n        c.data.transition = transitionData\n        c.data.pos = c.elm.getBoundingClientRect()\n\n        if (map[c.key])\n          kept.push(c)\n        else removed.push(c)\n      }\n\n      this.kept = h(tag, null, kept)\n      this.removed = removed\n    }\n\n    return h(tag, null, children)\n  },\n})\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Children"})," \u4ece\u65e7\u4f4d\u7f6e\u6309\u7167\u7684\u7f13\u52a8\u65f6\u95f4\u8fc7\u6e21\u504f\u79fb\u5230\u5f53\u524d\u76ee\u6807\u4f4d\u7f6e,\n\u5b9e\u73b0 ",(0,o.jsx)(n.code,{children:"Move"})," \u7684\u8fc7\u6e21\u52a8\u753b:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"function callPendingCbs(c: VNode) {\n  if (c.elm._moveCb)\n    c.elm._moveCb()\n\n  if (c.elm._enterCb)\n    c.elm._enterCb()\n}\n\nfunction recordPosition(c: VNode) {\n  c.data.newPos = c.elm.getBoundingClientRect()\n}\n\nfunction applyTranslation(c: VNode) {\n  const oldPos = c.data.pos\n  const newPos = c.data.newPos\n  const dx = oldPos.left - newPos.left\n  const dy = oldPos.top - newPos.top\n\n  if (dx || dy) {\n    c.data.moved = true\n    const s = c.elm.style\n    s.transform = s.WebkitTransform = `translate(${dx}px,${dy}px)`\n    s.transitionDuration = '0s'\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"modern-vue",children:"Modern Vue"}),"\n",(0,o.jsx)(n.h3,{id:"async-component",children:"Async Component"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// 1. Basic async component:\nVue.component('AsyncExample', (resolve, reject) => {\n  // \u8fd9\u4e2a\u7279\u6b8a\u7684 require \u8bed\u6cd5\u544a\u8bc9 webpack\n  // \u81ea\u52a8\u5c06\u7f16\u8bd1\u540e\u7684\u4ee3\u7801\u5206\u5272\u6210\u4e0d\u540c\u7684\u5757,\n  // \u8fd9\u4e9b\u5757\u5c06\u901a\u8fc7 Ajax \u8bf7\u6c42\u81ea\u52a8\u4e0b\u8f7d.\n  require(['./my-async-component'], resolve)\n})\n\n// 2. Promise async component:\nVue.component(\n  'AsyncWebpackExample',\n  // \u8be5 `import` \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a `Promise` \u5bf9\u8c61.\n  () => import('./my-async-component')\n)\n\n// 3. Advanced async component:\nfunction AsyncComp() {\n  return {\n    // \u9700\u8981\u52a0\u8f7d\u7684\u7ec4\u4ef6, \u5e94\u5f53\u662f\u4e00\u4e2a Promise.\n    component: import('./MyComp.vue'),\n    // \u52a0\u8f7d\u4e2d\u5e94\u5f53\u6e32\u67d3\u7684\u7ec4\u4ef6.\n    loading: LoadingComp,\n    // \u51fa\u9519\u65f6\u6e32\u67d3\u7684\u7ec4\u4ef6.\n    error: ErrorComp,\n    // \u6e32\u67d3\u52a0\u8f7d\u4e2d\u7ec4\u4ef6\u524d\u7684\u7b49\u5f85\u65f6\u95f4, \u9ed8\u8ba4: 200ms.\n    delay: 200,\n    // \u6700\u957f\u7b49\u5f85\u65f6\u95f4, \u8d85\u51fa\u6b64\u65f6\u95f4\u5219\u6e32\u67d3\u9519\u8bef\u7ec4\u4ef6, \u9ed8\u8ba4: Infinity.\n    timeout: 3000,\n  }\n}\nVue.component('AsyncExample', AsyncComp)\n"})}),"\n",(0,o.jsx)(n.h4,{id:"resolve-async-component",children:"Resolve Async Component"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"core/vdom/helpers/resolve-async-component.js"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["3 \u79cd\u5f02\u6b65\u7ec4\u4ef6\u7684\u5b9e\u73b0\u65b9\u5f0f.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u9ad8\u7ea7\u5f02\u6b65\u7ec4\u4ef6\u5b9e\u73b0\u4e86 loading/resolve/reject/timeout 4 \u79cd\u72b6\u6001."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\u5f02\u6b65\u7ec4\u4ef6\u5b9e\u73b0\u7684\u672c\u8d28\u662f 2 \u6b21\u6e32\u67d3:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u7b2c\u4e00\u6b21\u6e32\u67d3\u751f\u6210\u4e00\u4e2a\u6ce8\u91ca\u8282\u70b9/",(0,o.jsx)(n.code,{children:"<LoadingComponent>"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["\u5f53\u5f02\u6b65\u83b7\u53d6\u7ec4\u4ef6\u6210\u529f\u540e, \u901a\u8fc7 ",(0,o.jsx)(n.code,{children:"forceRender"})," \u5f3a\u5236\u91cd\u65b0\u6e32\u67d3."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { currentRenderingInstance } from 'core/instance/render'\nimport {\n  hasSymbol,\n  isDef,\n  isObject,\n  isPromise,\n  isTrue,\n  isUndef,\n  once,\n  remove,\n} from 'core/util/index'\nimport { createEmptyVNode } from 'core/vdom/vnode'\n\nexport function resolveAsyncComponent(\n  factory: Function,\n  baseCtor: Class<Component>\n): Class<Component> | void {\n  // 3.\n  if (isTrue(factory.error) && isDef(factory.errorComp))\n    return factory.errorComp\n\n  if (isDef(factory.resolved))\n    return factory.resolved\n\n  const owner = currentRenderingInstance\n\n  if (owner && isDef(factory.owners) && !factory.owners.includes(owner)) {\n    // already pending\n    factory.owners.push(owner)\n  }\n\n  // 3.\n  if (isTrue(factory.loading) && isDef(factory.loadingComp))\n    return factory.loadingComp\n\n  if (owner && !isDef(factory.owners)) {\n    const owners = (factory.owners = [owner])\n    let sync = true\n    let timerLoading = null\n    let timerTimeout = null\n\n    owner.$on('hook:destroyed', () => remove(owners, owner))\n\n    const forceRender = (renderCompleted: boolean) => {\n      for (let i = 0, l = owners.length; i < l; i++) owners[i].$forceUpdate()\n\n      if (renderCompleted) {\n        owners.length = 0\n\n        if (timerLoading !== null) {\n          clearTimeout(timerLoading)\n          timerLoading = null\n        }\n\n        if (timerTimeout !== null) {\n          clearTimeout(timerTimeout)\n          timerTimeout = null\n        }\n      }\n    }\n\n    const resolve = once((res: object | Class<Component>) => {\n      // cache resolved\n      factory.resolved = ensureCtor(res, baseCtor)\n      // invoke callbacks only if this is not a synchronous resolve\n      // (async resolves are shimmed as synchronous during SSR)\n      if (!sync)\n        forceRender(true)\n      else owners.length = 0\n    })\n\n    const reject = once((reason) => {\n      if (isDef(factory.errorComp)) {\n        factory.error = true\n        forceRender(true)\n      }\n    })\n\n    const res = factory(resolve, reject)\n\n    if (isObject(res)) {\n      if (isPromise(res)) {\n        // 2. () => Promise.\n        if (isUndef(factory.resolved))\n          res.then(resolve, reject)\n      } else if (isPromise(res.component)) {\n        // 3.\n        res.component.then(resolve, reject)\n\n        if (isDef(res.error))\n          factory.errorComp = ensureCtor(res.error, baseCtor)\n\n        if (isDef(res.loading)) {\n          factory.loadingComp = ensureCtor(res.loading, baseCtor)\n\n          if (res.delay === 0) {\n            factory.loading = true\n          } else {\n            timerLoading = setTimeout(() => {\n              timerLoading = null\n\n              if (isUndef(factory.resolved) && isUndef(factory.error)) {\n                factory.loading = true\n                forceRender(false)\n              }\n            }, res.delay || 200)\n          }\n        }\n\n        if (isDef(res.timeout)) {\n          timerTimeout = setTimeout(() => {\n            timerTimeout = null\n\n            if (isUndef(factory.resolved))\n              reject(null)\n          }, res.timeout)\n        }\n      }\n    }\n\n    sync = false\n    // return in case resolved synchronously\n    return factory.loading ? factory.loadingComp : factory.resolved\n  }\n}\n\nfunction ensureCtor(comp: any, base) {\n  if (comp.__esModule || (hasSymbol && comp[Symbol.toStringTag] === 'Module'))\n    comp = comp.default\n\n  return isObject(comp) ? base.extend(comp) : comp\n}\n\nfunction createAsyncPlaceholder(\n  factory: Function,\n  data: ?VNodeData,\n  context: Component,\n  children: ?Array<VNode>,\n  tag: ?string\n): VNode {\n  const node = createEmptyVNode()\n  node.asyncFactory = factory\n  node.asyncMeta = { data, context, children, tag }\n  return node\n}\n"})}),"\n",(0,o.jsx)(n.h4,{id:"define-async-component",children:"Define Async Component"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"defineAsyncComponent"})," higher order component:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"function defineAsyncComponent({\n  loader,\n  timeout,\n  loadingComponent,\n  errorComponent,\n}) {\n  let InnerComponent = null\n\n  return {\n    name: 'AsyncComponentWrapper',\n    setup() {\n      const loaded = ref(false)\n      const error = shallowRef(null)\n      let timer = null\n\n      loader()\n        .then((Component) => {\n          InnerComponent = Component\n          loaded.value = true\n        })\n        .catch(err => (error.value = err))\n\n      if (timeout) {\n        timer = setTimeout(() => {\n          const err = new Error(`Async component timed out after ${timeout}ms.`)\n          error.value = err\n        }, timeout)\n      }\n\n      onUnmounted(() => clearTimeout(timer))\n\n      const placeholder = { type: Text, children: '' }\n\n      // Return render function.\n      return () => {\n        if (loaded.value)\n          return { type: InnerComponent }\n        else if (error.value && errorComponent)\n          return { type: errorComponent }\n        else return loadingComponent ? { type: loadingComponent } : placeholder\n      }\n    },\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"suspense",children:"Suspense"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"\x3c!-- Events.vue --\x3e\n<script setup lang=\"ts\">\n  import { getEvents } from '@/services'\n  import type { Event } from '@/services'\n  const events: Event[] = await getEvents()\n<\/script>\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<template>\n  <suspense>\n    <template #default>\n      <Events />\n    </template>\n    <template #fallback>\n      <div>Loading events list ...</div>\n    </template>\n  </suspense>\n</template>\n"})}),"\n",(0,o.jsx)(n.h3,{id:"keep-alive",children:"Keep Alive"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"include"}),": ",(0,o.jsx)(n.code,{children:"string | RegExp | Array<string>"}),", \u5339\u914d\u7684\u7ec4\u4ef6\u4f1a\u88ab\u7f13\u5b58."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"exclude"}),": ",(0,o.jsx)(n.code,{children:"string | RegExp | Array<string>"}),", \u5339\u914d\u7684\u7ec4\u4ef6\u4e0d\u4f1a\u88ab\u7f13\u5b58."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"max"}),": \u7f13\u5b58\u5927\u5c0f."]}),"\n",(0,o.jsxs)(n.li,{children:["\u7ec4\u4ef6\u4e00\u65e6\u88ab ",(0,o.jsx)(n.code,{children:"<keep-alive>"})," \u7f13\u5b58,\n\u518d\u6b21\u6e32\u67d3\u7684\u65f6\u5019\u4e0d\u4f1a\u6267\u884c ",(0,o.jsx)(n.code,{children:"created"}),"/",(0,o.jsx)(n.code,{children:"mounted"})," \u7b49\u94a9\u5b50\u51fd\u6570 (",(0,o.jsx)(n.code,{children:"core/vdom/create-component.js"}),").\n\u4f46\u4f1a\u6267\u884c ",(0,o.jsx)(n.code,{children:"activated"}),"/",(0,o.jsx)(n.code,{children:"deactivated"})," \u94a9\u5b50\u51fd\u6570 (",(0,o.jsx)(n.code,{children:"core/vdom/create-component.js"}),"/",(0,o.jsx)(n.code,{children:"core/instance/lifecycle.js"}),")."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// core/components/keep-alive.js\nconst KeepAlive = defineComponent({\n  name: 'KeepAlive',\n  abstract: true,\n\n  props: {\n    include: patternTypes,\n    exclude: patternTypes,\n    max: [String, Number],\n  },\n\n  created() {\n    this.cache = Object.create(null)\n    this.keys = []\n  },\n\n  mounted() {\n    this.$watch('include', (val) => {\n      pruneCache(this, name => matches(val, name))\n    })\n    this.$watch('exclude', (val) => {\n      pruneCache(this, name => !matches(val, name))\n    })\n  },\n\n  unmounted() {\n    for (const key in this.cache) pruneCacheEntry(this.cache, key, this.keys)\n  },\n\n  render() {\n    const slot = this.$slots.default\n    const vnode: VNode = getFirstComponentChild(slot)\n    const componentOptions: ?VNodeComponentOptions\n      = vnode && vnode.componentOptions\n\n    if (componentOptions) {\n      // check pattern\n      const name: ?string = getComponentName(componentOptions)\n      const { include, exclude } = this\n\n      if (\n        // not included\n        (include && (!name || !matches(include, name)))\n        // excluded\n        || (exclude && name && matches(exclude, name))\n      ) {\n        return vnode\n      }\n\n      const { cache, keys } = this\n      // same constructor may get registered as different local components\n      // so cid alone is not enough (#3269)\n      const key: ?string\n        = vnode.key == null\n          ? componentOptions.Ctor.cid\n          + (componentOptions.tag ? `::${componentOptions.tag}` : '')\n          : vnode.key\n\n      if (cache[key]) {\n        vnode.componentInstance = cache[key].componentInstance\n        // make current key freshest\n        remove(keys, key)\n        keys.push(key)\n      } else {\n        cache[key] = vnode\n        keys.push(key)\n\n        // prune oldest entry\n        if (this.max && keys.length > Number.parseInt(this.max))\n          pruneCacheEntry(cache, keys[0], keys, this._vnode)\n      }\n\n      vnode.data.keepAlive = true\n    }\n\n    return vnode || (slot && slot[0])\n  },\n})\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const KeepAlive = {\n  __isKeepAlive: true,\n  props: {\n    include: RegExp,\n    exclude: RegExp,\n  },\n  setup(props, { slots }) {\n    const instance = currentInstance\n    const { move, createElement } = instance.keepAliveCtx\n\n    const storageContainer = createElement('div')\n\n    instance._deActivate = (vnode) => {\n      move(vnode, storageContainer)\n    }\n\n    instance._activate = (vnode, container, anchor) => {\n      move(vnode, container, anchor)\n    }\n\n    return () => {\n      const rawVNode = slots.default()\n\n      if (typeof rawVNode.type !== 'object')\n        return rawVNode\n\n      const name = rawVNode.type.name\n\n      if (\n        name\n        && ((props.include && !props.include.test(name))\n          || (props.exclude && props.exclude.test(name)))\n      ) {\n        return rawVNode\n      }\n\n      const cachedVNode = cache.get(rawVNode.type)\n\n      if (cachedVNode) {\n        rawVNode.component = cachedVNode.component\n        rawVNode.keptAlive = true\n      } else {\n        cache.set(rawVNode.type, rawVNode)\n      }\n\n      rawVNode.shouldKeepAlive = true\n      rawVNode.keepAliveInstance = instance\n\n      return rawVNode\n    }\n  },\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"teleport",children:"Teleport"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const Teleport = {\n  __isTeleport: true,\n  process(n1, n2, container, anchor, internals) {\n    const { patch, patchChildren, move } = internals\n\n    if (!n1) {\n      // \u6302\u8f7d\n      const target\n        = typeof n2.props.to === 'string'\n          ? document.querySelector(n2.props.to)\n          : n2.props.to\n      n2.children.forEach(c => patch(null, c, target, anchor))\n    } else {\n      // \u66f4\u65b0\n      patchChildren(n1, n2, container)\n\n      if (n2.props.to !== n1.props.to) {\n        const newTarget\n          = typeof n2.props.to === 'string'\n            ? document.querySelector(n2.props.to)\n            : n2.props.to\n        n2.children.forEach(c => move(c, newTarget))\n      }\n    }\n  },\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"client-only",children:"Client Only"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const ClientOnly = defineComponent({\n  setup(_, { slots }) {\n    const show = ref(false)\n\n    // `onMounted()` hooks \u53ea\u5728\u5ba2\u6237\u7aef\u6267\u884c,\n    // \u670d\u52a1\u7aef\u6e32\u67d3\u65f6\u4e0d\u6267\u884c.\n    onMounted(() => {\n      show.value = true\n    })\n\n    return () => (show.value && slots.default ? slots.default() : null)\n  },\n})\n"})}),"\n",(0,o.jsx)(n.h2,{id:"vue-router",children:"Vue Router"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://next.router.vuejs.org/guide/advanced/composition-api.html",children:"Composition API Reference"})}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"basic-routes",children:"Basic Routes"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import type { RouteRecordRaw } from 'vue-router'\nimport { createRouter, createWebHistory } from 'vue-router'\nimport Home from '../views/Home.vue'\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home,\n  },\n  {\n    path: '/about',\n    name: 'About',\n    component: () =>\n      import(/* webpackChunkName: \"about\" */ '../views/About.vue'),\n  },\n]\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n})\n\nexport default router\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\n\ncreateApp(App).use(store).use(router).mount('#app')\n"})}),"\n",(0,o.jsx)(n.h3,{id:"dynamic-routes",children:"Dynamic Routes"}),"\n",(0,o.jsxs)(n.p,{children:["Two methods to access route ",(0,o.jsx)(n.code,{children:"params"})," in components:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Composition route API: ",(0,o.jsx)(n.code,{children:"const { params } = useRoute()"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Passing route props to component: ",(0,o.jsx)(n.code,{children:"const props = defineProps<{ id: string }>()"}),":","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"props"})," better testing friendly."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"props"})," better TypeScript types inference."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<template>\n  <router-link class="event-link" :to="{ name: \'EventDetails\', params: { id: event.id } }">\n    <div class="event-card">\n      <span>@{{ event.time }} on {{ event.date }}</span>\n      <h4>{{ event.title }}</h4>\n    </div>\n  </router-link>\n</template>\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["Can't access to ",(0,o.jsx)(n.code,{children:"this"})," inside of ",(0,o.jsx)(n.code,{children:"setup"}),",\nwe cannot directly access ",(0,o.jsx)(n.code,{children:"this.$router"})," or ",(0,o.jsx)(n.code,{children:"this.$route"})," anymore."]})}),"\n",(0,o.jsx)(n.h4,{id:"routes-composition-api",children:"Routes Composition API"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import type { RouteRecordRaw } from 'vue-router'\nimport { createRouter, createWebHistory } from 'vue-router'\nimport EventDetails from '../views/EventDetails.vue'\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/event/:id',\n    name: 'EventDetails',\n    component: EventDetails,\n  },\n]\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n})\n\nexport default router\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<script setup lang=\"ts\">\n  import { useRoute } from 'vue-router'\n  import { getEvent } from '@/services'\n  import type { Event } from '@/services'\n\n  const { params } = useRoute()\n  const event: Event = await getEvent(Number.parseInt(params.id))\n<\/script>\n"})}),"\n",(0,o.jsx)(n.h4,{id:"passing-routes-props",children:"Passing Routes Props"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import type { RouteRecordRaw } from 'vue-router'\nimport { createRouter, createWebHistory } from 'vue-router'\nimport EventDetails from '../views/EventDetails.vue'\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/event/:id',\n    name: 'EventDetails',\n    component: EventDetails,\n    props: true /* Passing route props to component */,\n  },\n]\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n})\n\nexport default router\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<script setup lang=\"ts\">\n  import { getEvent } from '@/services'\n  import type { Event } from '@/services'\n\n  const props = defineProps<{ id: string }>()\n  const event: Event = await getEvent(Number.parseInt(props.id))\n<\/script>\n"})}),"\n",(0,o.jsx)(n.h3,{id:"named-routes",children:"Named Routes"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const routes = [\n  {\n    path: '/user/:username',\n    name: 'User',\n    component: User,\n  },\n]\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<router-link :to=\"{ name: 'User', params: { username: 'sabertaz' }}\"> User </router-link>\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"router.push({ name: 'User', params: { username: 'sabertaz' } })\n"})}),"\n",(0,o.jsx)(n.h3,{id:"nested-routes",children:"Nested Routes"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const routes: Array<RouteRecordRaw> = [\n  {\n    path: '/',\n    name: 'board',\n    component: Board,\n    children: [\n      {\n        path: 'task/:id',\n        name: 'task',\n        component: Task,\n        props: true,\n      },\n    ],\n  },\n]\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"\x3c!-- App.vue --\x3e\n\x3c!-- Root router view --\x3e\n<template><router-view /></template>\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"\x3c!-- Board.vue --\x3e\n\x3c!-- Nested router view --\x3e\n<template>\n  <div>Board View</div>\n  <router-view />\n</template>\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'\x3c!-- Task.vue --\x3e\n<script setup lang="ts">\n  defineProps<{ id: string }>()\n<\/script>\n\n<template>\n  <div>Task View {{ id }}</div>\n</template>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"programmatic-routes-navigation",children:"Programmatic Routes Navigation"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { useRouter } from 'vue-router'\n\nfunction App() {\n  const router = useRouter()\n}\n"})}),"\n",(0,o.jsx)(n.h4,{id:"navigate-to-different-location",children:"Navigate to Different Location"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const username = 'eduardo'\n// we can manually build the url but we will have to handle the encoding ourselves\nrouter.push(`/user/${username}`) // -> /user/eduardo\n// same as\nrouter.push({ path: `/user/${username}` }) // -> /user/eduardo\n// if possible use `name` and `params` to benefit from automatic URL encoding\nrouter.push({ name: 'user', params: { username } }) // -> /user/eduardo\n// `params` cannot be used alongside `path`\nrouter.push({ path: '/user', params: { username } }) // -> /user\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// literal string path\nrouter.push('/users/eduardo')\n\n// object with path\nrouter.push({ path: '/users/eduardo' })\n\n// named route with params to let the router build the url\nrouter.push({ name: 'user', params: { username: 'eduardo' } })\n\n// with query, resulting in /register?plan=private\nrouter.push({ path: '/register', query: { plan: 'private' } })\n\n// with hash, resulting in /about#team\nrouter.push({ path: '/about', hash: '#team' })\n"})}),"\n",(0,o.jsx)(n.h4,{id:"replace-current-location",children:"Replace Current Location"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// replace current location\nrouter.push({ path: '/home', replace: true })\n// equivalent to\nrouter.replace({ path: '/home' })\n"})}),"\n",(0,o.jsx)(n.h4,{id:"traverse-routes-history",children:"Traverse Routes History"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// go forward by one record, the same as router.forward()\nrouter.go(1)\n\n// go back by one record, the same as router.back()\nrouter.go(-1)\n\n// go forward by 3 records\nrouter.go(3)\n\n// fails silently if there aren't that many records\nrouter.go(-100)\nrouter.go(100)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"navigation-guard-routes",children:"Navigation Guard Routes"}),"\n",(0,o.jsx)(n.h4,{id:"guard-routes-configuration",children:"Guard Routes Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const routes = [\n  {\n    path: '/users/:id',\n    component: UserDetails,\n    beforeEnter: (to, from) => {\n      // reject the navigation\n      return false\n    },\n  },\n]\n"})}),"\n",(0,o.jsxs)(n.admonition,{type:"caution",children:[(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"beforeEnter"})," guards only trigger when entering the route,\ndon't trigger when the params, query or hash change."]}),(0,o.jsxs)(n.p,{children:["Going from ",(0,o.jsx)(n.code,{children:"/users/2"})," to ",(0,o.jsx)(n.code,{children:"/users/3"})," or going from ",(0,o.jsx)(n.code,{children:"/users/2#info"})," to ",(0,o.jsx)(n.code,{children:"/users/2#projects"}),"\ndon't trigger ",(0,o.jsx)(n.code,{children:"beforeEnter"})," guards."]})]}),"\n",(0,o.jsx)(n.h4,{id:"global-navigation-guards",children:"Global Navigation Guards"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"router.beforeEach((to, from, next) => {\n  if (to.name !== 'Login' && !isAuthenticated)\n    next({ name: 'Login' })\n  else next()\n})\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"router.beforeResolve(async (to) => {\n  if (to.meta.requiresCamera) {\n    try {\n      await askForCameraPermission()\n    } catch (error) {\n      if (error instanceof NotAllowedError) {\n        // Handle the error and then cancel the navigation.\n        return false\n      } else {\n        // Unexpected error: cancel the navigation and pass error to global handler.\n        throw error\n      }\n    }\n  }\n})\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"router.afterEach((to, from, failure) => {\n  if (!failure)\n    sendToAnalytics(to.fullPath)\n})\n"})}),"\n",(0,o.jsx)(n.h4,{id:"full-navigation-resolution-flow",children:"Full Navigation Resolution Flow"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Navigation triggered."}),"\n",(0,o.jsxs)(n.li,{children:["Call ",(0,o.jsx)(n.code,{children:"beforeRouteLeave"})," guards in deactivated components."]}),"\n",(0,o.jsxs)(n.li,{children:["Call global ",(0,o.jsx)(n.code,{children:"beforeEach"})," guards."]}),"\n",(0,o.jsxs)(n.li,{children:["Call ",(0,o.jsx)(n.code,{children:"beforeRouteUpdate"})," guards in reused components."]}),"\n",(0,o.jsxs)(n.li,{children:["Call ",(0,o.jsx)(n.code,{children:"beforeEnter"})," in route configs."]}),"\n",(0,o.jsx)(n.li,{children:"Resolve async route components."}),"\n",(0,o.jsxs)(n.li,{children:["Call ",(0,o.jsx)(n.code,{children:"beforeRouteEnter"})," in activated components."]}),"\n",(0,o.jsxs)(n.li,{children:["Call global ",(0,o.jsx)(n.code,{children:"beforeResolve"})," guards."]}),"\n",(0,o.jsx)(n.li,{children:"Navigation is confirmed."}),"\n",(0,o.jsxs)(n.li,{children:["Call global ",(0,o.jsx)(n.code,{children:"afterEach"})," hooks."]}),"\n",(0,o.jsx)(n.li,{children:"DOM updates triggered."}),"\n",(0,o.jsxs)(n.li,{children:["Call ",(0,o.jsx)(n.code,{children:"next"})," callbacks in ",(0,o.jsx)(n.code,{children:"beforeRouteEnter"})," guards with instantiated instances."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"vuex",children:"Vuex"}),"\n",(0,o.jsx)(n.h3,{id:"vuex-types",children:"Vuex Types"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Vuex types ",(0,o.jsx)(n.a,{href:"https://dev.to/3vilarthas/vuex-typescript-m4j",children:"guide"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// store.ts\nimport type { InjectionKey } from 'vue'\nimport type { Store } from 'vuex'\nimport { createStore, useStore } from 'vuex'\n\n// define your typings for the store state\ninterface State {\n  count: number\n}\n\n// define injection key\nconst key: InjectionKey<Store<State>> = Symbol('key')\n\nconst store = createStore<State>({\n  state: {\n    count: 0,\n  },\n})\n\nconst useAppStore = () => useStore<State>(key)\n\nexport { key, useAppStore }\nexport type { State }\nexport default store\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// main.ts\nimport { createApp } from 'vue'\nimport store, { key } from './store'\n\nconst app = createApp({})\n\n// pass the injection key\napp.use(store, key)\n\napp.mount('#app')\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<script setup lang=\"ts\">\n  // in a vue component\n  import { useAppStore } from './store'\n\n  const store = useAppStore()\n  const count = store.state.count // typed as number\n<\/script>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"vite",children:"Vite"}),"\n",(0,o.jsx)(n.h3,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import path from 'node:path'\nimport vue from '@vitejs/plugin-vue'\nimport { defineConfig } from 'vite'\n\nexport default defineConfig({\n  base: '/awesome-web/vue-trello/',\n  plugins: [vue()],\n  resolve: {\n    alias: {\n      src: path.resolve(__dirname, './src'),\n    },\n  },\n})\n"})}),"\n",(0,o.jsx)(n.h3,{id:"environment-variables-and-modes",children:"Environment Variables and Modes"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"import.meta.env.MODE"}),": ",(0,o.jsx)(n.code,{children:"{string}"})," running mode."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"import.meta.env.BASE_URL"}),": ",(0,o.jsx)(n.code,{children:"{string}"})," vite ",(0,o.jsx)(n.code,{children:"base"})," url."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"import.meta.env.PROD"}),": ",(0,o.jsx)(n.code,{children:"{boolean}"})," whether in production."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"import.meta.env.DEV"}),": ",(0,o.jsx)(n.code,{children:"{boolean}"})," whether in development."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const router = createRouter({\n  history: createWebHistory(import.meta.env.BASE_URL),\n  routes,\n})\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"interface ImportMetaEnv extends Readonly<Record<string, string>> {\n  readonly VITE_APP_TITLE: string\n  // More environment variables...\n}\n\ninterface ImportMeta {\n  readonly env: ImportMetaEnv\n}\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:".env                # Loaded in all cases.\n.env.local          # Loaded in all cases, ignored by git.\n.env.[mode]         # Only loaded in specified mode.\n.env.[mode].local   # Only loaded in specified mode, ignored by git.\n"})}),"\n",(0,o.jsx)(n.h2,{id:"vue-cli",children:"Vue CLI"}),"\n",(0,o.jsx)(n.h3,{id:"scss-configuration",children:"SCSS Configuration"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://css-tricks.com/how-to-increase-your-page-size-by-1500-with-webpack-and-vue",children:"Build with Bulma"}),":"]}),"\n",(0,o.jsxs)(n.p,{children:["Every element and every style for this scoped styled component\nwill have a ",(0,o.jsx)(n.code,{children:"data-v-2929"}),' on them at runtime.\nIf import a Sass file into component that has actual styles in it,\nVue (via webpack) will pull in those styles and\n"namespace" them with that dynamic ',(0,o.jsx)(n.code,{children:"data-"})," attribute.\nThe result is that is include ",(0,o.jsx)(n.code,{children:"Bulma"})," in your ",(0,o.jsx)(n.strong,{children:"many"})," times\nwith a bunch of ",(0,o.jsx)(n.code,{children:"data-v"})," weirdness in front of it."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:"/* bulma-custom.scss */\n@import url('./variables.scss');\n\n/* UTILITIES */\n@import url('bulma/sass/utilities/animations.sass');\n@import url('bulma/sass/utilities/controls.sass');\n@import url('bulma/sass/utilities/mixins.sass');\n\n/* etc... */\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:"/* site.scss */\n@import url('https://use.fontawesome.com/releases/v5.6.3/css/all.css');\n@import url('./bulma-custom.scss');\n\nhtml,\nbody {\n  height: 100%;\n  background-color: #f9fafc;\n}\n\n/* etc... */\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// main.js\nimport Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\n// import styles\nimport '@/styles/site.scss'\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'// webpack.config.js\nmodule.exports = {\n  css: {\n    loaderOptions: {\n      sass: {\n        data: `@import "@/styles/variables.scss";`,\n      },\n    },\n  },\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"vue-best-practice",children:"Vue Best Practice"}),"\n",(0,o.jsxs)(n.p,{children:["When it comes to Vue 3,\nEvan You ",(0,o.jsx)(n.a,{href:"https://github.com/vuejs/rfcs/discussions/378",children:"recommended"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Use SFC + ",(0,o.jsx)(n.code,{children:"<script setup>"})," + Composition API (drop Options API)."]}),"\n",(0,o.jsxs)(n.li,{children:["Use VSCode + ",(0,o.jsx)(n.a,{href:"https://github.com/johnsoncodehk/volar",children:"Volar"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Not strictly required for TS, but if applicable, use Vite for build tooling."}),"\n"]}),"\n",(0,o.jsxs)(n.admonition,{title:"Composition API vs Options API",type:"tip",children:[(0,o.jsx)(n.p,{children:"Original intention for supporting both APIs:\nexisting Options-API-based codebases can benefit from Composition API-based libraries,\nIt's not for new codebases to mix Composition API and Options API."}),(0,o.jsx)(n.p,{children:"Intentionally mixing Composition API and Options API\nshould be avoided except in existing Options API codebases,\nto either replace mixins or leverage a Composition API-based library."})]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},842:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var s=t(8101);const o={},r=s.createContext(o);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);