"use strict";(self.webpackChunkawesome_notes=self.webpackChunkawesome_notes||[]).push([[1839],{7478:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>k,contentTitle:()=>P,default:()=>D,frontMatter:()=>A,metadata:()=>r,toc:()=>T});const r=JSON.parse('{"id":"Web/React/ReactBasicNotes","title":"React Basic Notes","description":"Props and States","source":"@site/notes/Web/React/ReactBasicNotes.md","sourceDirName":"Web/React","slug":"/Web/React/ReactBasicNotes","permalink":"/awesome-notes/Web/React/ReactBasicNotes","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/awesome-notes/edit/main/notes/Web/React/ReactBasicNotes.md","tags":[{"inline":true,"label":"Web","permalink":"/awesome-notes/tags/web"},{"inline":true,"label":"React","permalink":"/awesome-notes/tags/react"}],"version":"current","lastUpdatedBy":"sabertazimi","lastUpdatedAt":1734247394000,"frontMatter":{"author":"Sabertazimi","authorTitle":"Web Developer","authorURL":"https://github.com/sabertazimi","authorImageURL":"https://github.com/sabertazimi.png","tags":["Web","React"]},"sidebar":"tutorialSidebar","previous":{"title":"React Advanced Notes","permalink":"/awesome-notes/Web/React/ReactAdvancedNotes"},"next":{"title":"React Hooks Notes","permalink":"/awesome-notes/Web/React/ReactHooksNotes"}}');var s=t(5105),i=t(842),o=t(8101),l=t(3526),a=t(8299),c=t(5234),d=t(5039),h=t(3644),p=t(2261),u=t(3051);function x(e){return o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function m(e){const{values:n,children:t}=e;return(0,o.useMemo)((()=>{const e=n??function(e){return x(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:s}}=e;return{value:n,label:t,attributes:r,default:s}}))}(t);return function(e){const n=(0,p.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function j(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:t}=e;const r=(0,c.W6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,h.aZ)(s),(0,o.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})}),[s,r])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,s=m(e),[i,l]=(0,o.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!j({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:s}))),[a,c]=g({queryString:t,groupId:r}),[h,p]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,s]=(0,u.Dv)(t);return[r,(0,o.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:r}),x=(()=>{const e=a??h;return j({value:e,tabValues:s})?e:null})();(0,d.A)((()=>{x&&l(x)}),[x]);return{selectedValue:i,selectValue:(0,o.useCallback)((e=>{if(!j({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),p(e)}),[c,p,s]),tabValues:s}}var v=t(8317);const y={tabList:"tabList_Y2ak",tabItem:"tabItem_GR3y"};function b(e){let{className:n,block:t,selectedValue:r,selectValue:i,tabValues:o}=e;const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,a.a_)(),h=e=>{const n=e.currentTarget,t=c.indexOf(n),s=o[t].value;s!==r&&(d(n),i(s))},p=e=>{let n=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,s.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":t},n),children:o.map((e=>{let{value:n,label:t,attributes:i}=e;return(0,s.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>{c.push(e)},onKeyDown:p,onClick:h,...i,className:(0,l.A)("tabs__item",y.tabItem,i?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function C(e){let{lazy:n,children:t,selectedValue:r}=e;const i=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===r));return e?(0,o.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,s.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function R(e){const n=f(e);return(0,s.jsxs)("div",{className:(0,l.A)("tabs-container",y.tabList),children:[(0,s.jsx)(b,{...n,...e}),(0,s.jsx)(C,{...n,...e})]})}function S(e){const n=(0,v.A)();return(0,s.jsx)(R,{...e,children:x(e.children)},String(n))}const w={tabItem:"tabItem_wljV"};function E(e){let{children:n,hidden:t,className:r}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,l.A)(w.tabItem,r),hidden:t,children:n})}const A={author:"Sabertazimi",authorTitle:"Web Developer",authorURL:"https://github.com/sabertazimi",authorImageURL:"https://github.com/sabertazimi.png",tags:["Web","React"]},P="React Basic Notes",k={},T=[{value:"Props and States",id:"props-and-states",level:2},{value:"SetState",id:"setstate",level:3},{value:"componentDidMount",id:"componentdidmount",level:3},{value:"Props Validation",id:"props-validation",level:3},{value:"Element and Component",id:"element-and-component",level:2},{value:"JSX",id:"jsx",level:3},{value:"JSX Transform",id:"jsx-transform",level:4},{value:"Functional and Class component",id:"functional-and-class-component",level:3},{value:"Stateless and Stateful component",id:"stateless-and-stateful-component",level:3},{value:"Stateless component",id:"stateless-component",level:4},{value:"Stateful component",id:"stateful-component",level:4},{value:"Component Lifecycle",id:"component-lifecycle",level:3},{value:"Creation and Mounting Phase",id:"creation-and-mounting-phase",level:4},{value:"Updating Phase",id:"updating-phase",level:4},{value:"Unmounting Phase",id:"unmounting-phase",level:4},{value:"Error Handling Phase",id:"error-handling-phase",level:4},{value:"Render Function",id:"render-function",level:3},{value:"React Element API",id:"react-element-api",level:3},{value:"React Clone Element API",id:"react-clone-element-api",level:4},{value:"React Children API",id:"react-children-api",level:4},{value:"Refs",id:"refs",level:3},{value:"String Refs",id:"string-refs",level:4},{value:"Forward Refs",id:"forward-refs",level:4},{value:"Prop Refs",id:"prop-refs",level:4},{value:"Callback Refs",id:"callback-refs",level:4},{value:"Compound Components",id:"compound-components",level:3},{value:"React Synthetic Events",id:"react-synthetic-events",level:2},{value:"React Reusability Patterns",id:"react-reusability-patterns",level:2},{value:"HOC",id:"hoc",level:3},{value:"Render Props",id:"render-props",level:3},{value:"React Hooks",id:"react-hooks",level:3},{value:"React TypeScript",id:"react-typescript",level:2},{value:"Props Types",id:"props-types",level:3},{value:"React Refs Types",id:"react-refs-types",level:3},{value:"Function Component Types",id:"function-component-types",level:3},{value:"Class Component Types",id:"class-component-types",level:3},{value:"Generic Component Types",id:"generic-component-types",level:3},{value:"Component Props Type",id:"component-props-type",level:3},{value:"Component Return Type",id:"component-return-type",level:3},{value:"React Event Types",id:"react-event-types",level:3},{value:"React Event Handler Types",id:"react-event-handler-types",level:4},{value:"React Form Event Types",id:"react-form-event-types",level:4},{value:"React HTML and CSS Types",id:"react-html-and-css-types",level:3},{value:"React Input Types",id:"react-input-types",level:4},{value:"React Portal Types",id:"react-portal-types",level:3},{value:"React Redux Types",id:"react-redux-types",level:3},{value:"React Hook Types",id:"react-hook-types",level:3},{value:"UseState Hook Type",id:"usestate-hook-type",level:4},{value:"UseReducer Hook Type",id:"usereducer-hook-type",level:4},{value:"UseRef Hook Type",id:"useref-hook-type",level:4},{value:"DOM Element Ref Type",id:"dom-element-ref-type",level:5},{value:"Mutable Value Ref",id:"mutable-value-ref",level:5},{value:"Custom Hooks Types",id:"custom-hooks-types",level:4},{value:"React Internationalization",id:"react-internationalization",level:2},{value:"Simple i18n Implementation",id:"simple-i18n-implementation",level:3},{value:"React i18n Library",id:"react-i18n-library",level:3},{value:"i18n Solution",id:"i18n-solution",level:3},{value:"Modern React",id:"modern-react",level:2},{value:"Context API",id:"context-api",level:3},{value:"Context Refs",id:"context-refs",level:4},{value:"Context Internals",id:"context-internals",level:4},{value:"Error Boundary",id:"error-boundary",level:3},{value:"React Fragment",id:"react-fragment",level:3},{value:"React Portal",id:"react-portal",level:3},{value:"Concurrent Features",id:"concurrent-features",level:3},{value:"Batching Updates",id:"batching-updates",level:3},{value:"Suspense",id:"suspense",level:3},{value:"Error Boundary Suspense",id:"error-boundary-suspense",level:4},{value:"Lazy Suspense",id:"lazy-suspense",level:4},{value:"SSR Suspense",id:"ssr-suspense",level:4},{value:"React Server Components",id:"react-server-components",level:3},{value:"Use Client Directive",id:"use-client-directive",level:4},{value:"React Server Components Composition Pattern",id:"react-server-components-composition-pattern",level:4},{value:"React Server Components Reference",id:"react-server-components-reference",level:4},{value:"React Form",id:"react-form",level:3},{value:"Form Loading State",id:"form-loading-state",level:4},{value:"React Compiler",id:"react-compiler",level:3},{value:"React Performance",id:"react-performance",level:2},{value:"React Performance Mental Model",id:"react-performance-mental-model",level:3},{value:"React Performance Best Practice",id:"react-performance-best-practice",level:3},{value:"Re-rendering Problem",id:"re-rendering-problem",level:3},{value:"Code Splitting",id:"code-splitting",level:3},{value:"React Testing",id:"react-testing",level:2},{value:"Shallow Renderer",id:"shallow-renderer",level:3},{value:"Test Renderer",id:"test-renderer",level:3},{value:"Enzyme Mindset",id:"enzyme-mindset",level:3},{value:"React Testing Library Mindset",id:"react-testing-library-mindset",level:3},{value:"React Testing Library Installation",id:"react-testing-library-installation",level:3},{value:"React Testing Library Basis",id:"react-testing-library-basis",level:3},{value:"React Testing Library Events",id:"react-testing-library-events",level:3},{value:"FireEvent API",id:"fireevent-api",level:4},{value:"UserEvent API",id:"userevent-api",level:4},{value:"React Hooks Testing Library",id:"react-hooks-testing-library",level:3},{value:"Basic Hook Testing",id:"basic-hook-testing",level:4},{value:"Async Hook Testing",id:"async-hook-testing",level:4},{value:"Error Hook Testing",id:"error-hook-testing",level:4},{value:"React Testing Library API",id:"react-testing-library-api",level:3},{value:"React Testing Library Reference",id:"react-testing-library-reference",level:3},{value:"React Style Guide",id:"react-style-guide",level:2},{value:"Naming Style",id:"naming-style",level:3},{value:"Props Style",id:"props-style",level:3},{value:"Refs Style",id:"refs-style",level:3},{value:"Alignment Style",id:"alignment-style",level:3},{value:"Quotes Style",id:"quotes-style",level:3},{value:"Spacing Style",id:"spacing-style",level:3},{value:"Ordering of Class Component",id:"ordering-of-class-component",level:3},{value:"Project Structure Best Practice",id:"project-structure-best-practice",level:3},{value:"React Style Best Practice",id:"react-style-best-practice",level:3},{value:"Styled Component",id:"styled-component",level:2},{value:"Shared CSS Styles",id:"shared-css-styles",level:3},{value:"Styled Component Extension",id:"styled-component-extension",level:3},{value:"Styled Component Props",id:"styled-component-props",level:3},{value:"Variants Driven Components",id:"variants-driven-components",level:3},{value:"Demystifying Styled Components",id:"demystifying-styled-components",level:3},{value:"Components Styling Reference",id:"components-styling-reference",level:3},{value:"Create React App",id:"create-react-app",level:2},{value:"Create React APP CLI",id:"create-react-app-cli",level:3},{value:"React Scripts",id:"react-scripts",level:3},{value:"React Scripts Initialization",id:"react-scripts-initialization",level:4},{value:"React Scripts Commands",id:"react-scripts-commands",level:4},{value:"React Scripts Start",id:"react-scripts-start",level:5},{value:"React Scripts Configuration",id:"react-scripts-configuration",level:4},{value:"CRA Usage",id:"cra-usage",level:3},{value:"CRA CSS",id:"cra-css",level:4},{value:"CRA Public Folder",id:"cra-public-folder",level:4},{value:"CRA Environment Variables",id:"cra-environment-variables",level:4},{value:"CRA Code Splitting",id:"cra-code-splitting",level:4},{value:"CRA Service Worker",id:"cra-service-worker",level:4},{value:"CRA Deployment",id:"cra-deployment",level:4},{value:"SPA Deployment",id:"spa-deployment",level:4},{value:"Custom CRA",id:"custom-cra",level:3},{value:"CRA MonoRepo",id:"cra-monorepo",level:4},{value:"Custom React Scripts",id:"custom-react-scripts",level:4},{value:"Custom CRA Templates",id:"custom-cra-templates",level:4},{value:"Micro Frontends",id:"micro-frontends",level:2},{value:"Application EntryPoint",id:"application-entrypoint",level:3},{value:"Styles Isolation",id:"styles-isolation",level:3},{value:"Scripts Isolation",id:"scripts-isolation",level:3},{value:"Application Communication",id:"application-communication",level:3},{value:"Low-Code Development",id:"low-code-development",level:2},{value:"Low-Code Components",id:"low-code-components",level:3},{value:"Low-Code Editor",id:"low-code-editor",level:3},{value:"Low-Code Renderer",id:"low-code-renderer",level:3},{value:"Low-Code Generator",id:"low-code-generator",level:3},{value:"Low-Code Reference",id:"low-code-reference",level:3},{value:"Reference",id:"reference",level:2}];function N(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"react-basic-notes",children:"React Basic Notes"})}),"\n","\n",(0,s.jsx)(n.h2,{id:"props-and-states",children:"Props and States"}),"\n",(0,s.jsx)(n.h3,{id:"setstate",children:"SetState"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"setState"})," synchronous way:\nwhen it comes ",(0,s.jsx)(n.code,{children:"blocking mode"}),"\n(",(0,s.jsx)(n.code,{children:"ReactDOM.createBlockingRoot(rootNode).render(<App />)"}),"),\n",(0,s.jsx)(n.code,{children:"setState"})," works in synchronous mode:\n",(0,s.jsx)(n.code,{children:"scheduleUpdateOnFiber"})," -> ",(0,s.jsx)(n.code,{children:"ensureRootIsScheduled"})," -> ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"flushSyncCallbackQueue"})}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"setState"})," asynchronous way:\nat most of the other time, ",(0,s.jsx)(n.code,{children:"setState"})," works in asynchronous mode,\nincluding ",(0,s.jsx)(n.code,{children:"legacy mode"}),"(",(0,s.jsx)(n.code,{children:"ReactDOM.render(<App />, rootNode)"}),")\nand ",(0,s.jsx)(n.code,{children:"concurrent mode"}),"(",(0,s.jsx)(n.code,{children:"ReactDOM.createRoot(rootNode).render(<App />)"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["\u5728\u5f02\u6b65\u6a21\u5f0f\u4e0b, \u4e3a\u4e86\u9632\u6b62\u5b50\u7ec4\u4ef6\u5728\u5904\u7406\u4e8b\u4ef6\u65f6\u591a\u6b21\u6e32\u67d3,\n\u5c06\u591a\u4e2a ",(0,s.jsx)(n.code,{children:"setState"})," (\u5305\u62ec\u7236\u7ec4\u4ef6) \u79fb\u5230\u6d4f\u89c8\u5668\u4e8b\u4ef6\u4e4b\u540e\u6267\u884c\n(",(0,s.jsx)(n.code,{children:"Batched Updates"}),": \u6b64\u65f6 React \u5185\u90e8\u53d8\u91cf ",(0,s.jsx)(n.code,{children:"isBatchingUpdates"})," \u53d8\u6210 ",(0,s.jsx)(n.code,{children:"true"}),"),\n\u53ef\u4ee5\u63d0\u5347 React \u6027\u80fd.\n\u672a\u6765\u4f1a\u5728\u66f4\u591a\u7684\u53ef\u4ee5 ",(0,s.jsx)(n.code,{children:"Batched Updates"})," \u7684\u573a\u666f\u4e0b\u5c06 ",(0,s.jsx)(n.code,{children:"setState"})," \u8bbe\u4e3a\u5f02\u6b65\u6267\u884c,\n\u6240\u4ee5\u7f16\u5199\u4ee3\u7801\u65f6\u6700\u597d\u5c06 ",(0,s.jsx)(n.code,{children:"setState"})," \u603b\u662f\u5f53\u505a\u5f02\u6b65\u6267\u884c\u51fd\u6570."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"class Example extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      val: 0,\n    }\n  }\n\n  componentDidMount() {\n    this.setState({ val: this.state.val + 1 })\n    console.log(this.state.val) // \u7b2c 1 \u6b21 log\n\n    this.setState({ val: this.state.val + 1 })\n    console.log(this.state.val) // \u7b2c 2 \u6b21 log\n\n    setTimeout(() => {\n      this.setState({ val: this.state.val + 1 })\n      console.log(this.state.val) // \u7b2c 3 \u6b21 log\n\n      this.setState({ val: this.state.val + 1 })\n      console.log(this.state.val) // \u7b2c 4 \u6b21 log\n    }, 0)\n  }\n\n  render() {\n    return <div>Example</div>\n  }\n}\n\n// => 0 0 2 3\n"})}),"\n",(0,s.jsxs)(n.admonition,{title:"State Structure Principles",type:"tip",children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://react.dev/learn/choosing-the-state-structure",children:"Principles for structuring state"}),":"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Group related state."}),"\n",(0,s.jsx)(n.li,{children:"Avoid contradictions in state."}),"\n",(0,s.jsx)(n.li,{children:"Avoid duplication in state."}),"\n",(0,s.jsx)(n.li,{children:"Avoid redundant state."}),"\n",(0,s.jsx)(n.li,{children:"Avoid deeply nested state."}),"\n"]})]}),"\n",(0,s.jsx)(n.h3,{id:"componentdidmount",children:"componentDidMount"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Don't ",(0,s.jsx)(n.code,{children:"setState"})," directly in this method."]}),"\n",(0,s.jsxs)(n.li,{children:["Can use ",(0,s.jsx)(n.code,{children:"setInterval"}),"/",(0,s.jsx)(n.code,{children:"setTimeout"}),"/AJAX request/",(0,s.jsx)(n.code,{children:"fetch"})," in this method,\nand call ",(0,s.jsx)(n.code,{children:"setState"})," as ",(0,s.jsx)(n.code,{children:"callback"})," inside these functions."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"class MyComponent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      error: null,\n      isLoaded: false,\n      items: [],\n    }\n  }\n\n  componentDidMount() {\n    fetch('https://api.example.com/items')\n      .then(res => res.json())\n      .then(\n        (result) => {\n          this.setState({\n            isLoaded: true,\n            items: result.items,\n          })\n        },\n        // Note: it's important to handle errors here\n        // instead of a catch() block so that we don't swallow\n        // exceptions from actual bugs in components.\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          })\n        },\n      )\n  }\n\n  render() {\n    const { error, isLoaded, items } = this.state\n    if (error) {\n      return (\n        <div>\n          Error:\n          {error.message}\n        </div>\n      )\n    } else if (!isLoaded) {\n      return <div>Loading...</div>\n    } else {\n      return (\n        <ul>\n          {items.map(item => (\n            <li key={item.name}>\n              {item.name}\n              {' '}\n              {item.price}\n            </li>\n          ))}\n        </ul>\n      )\n    }\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"props-validation",children:"Props Validation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.PropTypes.array/bool/func/number/object/string/symbol/node/element"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.PropTypes.any.isRequired"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.PropTypes.objectOf(React.PropsTypes.number)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.PropTypes.arrayOf(React.PropsTypes.number)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.PropTypes.instanceOf/oneOf/oneOfType(type)"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"element-and-component",children:"Element and Component"}),"\n",(0,s.jsxs)(n.p,{children:["React Element \u5b9e\u9645\u4e0a\u662f\u7eaf\u5bf9\u8c61,\n\u53ef\u7531 ",(0,s.jsx)(n.code,{children:"React.createElement()"}),"/",(0,s.jsx)(n.code,{children:"JSX"}),"/",(0,s.jsx)(n.code,{children:"Element Factory Helper"})," \u521b\u5efa,\n\u5e76\u88ab React \u5728\u5fc5\u8981\u65f6\u6e32\u67d3\u6210\u771f\u5b9e\u7684 DOM Nodes."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type ReactInternalType =\n  | 'react.element'\n  | 'react.portal'\n  | 'react.fragment'\n  | 'react.strict_mode'\n  | 'react.profiler'\n  | 'react.provider'\n  | 'react.context'\n  | 'react.forward_ref'\n  | 'react.suspense'\n  | 'react.suspense_list'\n  | 'react.memo'\n  | 'react.lazy'\n  | 'react.block'\n  | 'react.server.block'\n  | 'react.fundamental'\n  | 'react.scope'\n  | 'react.opaque.id'\n  | 'react.debug_trace_mode'\n  | 'react.offscreen'\n  | 'react.legacy_hidden'\n\nexport interface ReactElement<Props> {\n  $$typeof: any\n  key: string | number | null\n  type:\n    | string\n    | ((props: Props) => ReactElement<any>)\n    | (new (props: Props) => ReactComponent<any>)\n    | ReactInternalType\n  props: Props\n  ref: Ref\n\n  // ReactFiber\n  _owner: any\n\n  // __DEV__\n  _store: { validated: boolean }\n  _self: React$Element<any>\n  _shadowChildren: any\n  _source: Source\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"ReactDOM.render(\n  {\n    type: Form,\n    props: {\n      isSubmitted: false,\n      buttonText: 'OK!',\n    },\n  },\n  document.getElementById('root'),\n)\n\n// React: You told me this...\nconst FormElement = {\n  type: Form,\n  props: {\n    isSubmitted: false,\n    buttonText: 'OK!',\n  },\n}\n\n// React: ...And Form told me this...\nconst ButtonElement = {\n  type: Button,\n  props: {\n    children: 'OK!',\n    color: 'blue',\n  },\n}\n\n// React: ...and Button told me this! I guess I'm done.\nconst HTMLButtonElement = {\n  type: 'button',\n  props: {\n    className: 'button button-blue',\n    children: {\n      type: 'b',\n      props: {\n        children: 'OK!',\n      },\n    },\n  },\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"jsx",children:"JSX"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 JSX \u4e2d, \u5c0f\u5199\u6807\u7b7e\u88ab\u8ba4\u4e3a\u662f HTML \u6807\u7b7e.\n\u4f46\u662f, \u542b\u6709 ",(0,s.jsx)(n.code,{children:"."})," \u7684\u5927\u5199\u548c\u5c0f\u5199\u6807\u7b7e\u540d\u5374\u4e0d\u662f."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<component />"}),": \u8f6c\u6362\u4e3a ",(0,s.jsx)(n.code,{children:"React.createElement('component')"})," (e.g HTML native tag)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<obj.component />"}),": \u8f6c\u6362\u4e3a ",(0,s.jsx)(n.code,{children:"React.createElement(obj.component)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<Component />"}),": \u8f6c\u6362\u4e3a ",(0,s.jsx)(n.code,{children:"React.createElement(Component)"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"jsx-transform",children:"JSX Transform"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html",children:"New JSX transform"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function App() {\n  return React.createElement('h1', null, 'Hello world')\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Inserted by a compiler\nimport { jsx as _jsx } from 'react/jsx-runtime'\n\nfunction App() {\n  return _jsx('h1', { children: 'Hello world' })\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"ESLint config for new JSX transform:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "rules": {\n    "react/jsx-uses-react": "off",\n    "react/react-in-jsx-scope": "off"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"TypeScript config for new JSX transform:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "include": ["./src/**/*"],\n  "compilerOptions": {\n    "module": "esnext",\n    "target": "es2015",\n    "jsx": "react-jsx",\n    "strict": true\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"functional-and-class-component",children:"Functional and Class component"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u51fd\u6570\u578b\u7ec4\u4ef6\u6ca1\u6709\u5b9e\u4f8b, \u7c7b\u578b\u7ec4\u4ef6\u5177\u6709\u5b9e\u4f8b, \u4f46\u5b9e\u4f8b\u5316\u7684\u5de5\u4f5c\u7531 react \u81ea\u52a8\u5b8c\u6210"}),"\n",(0,s.jsxs)(n.li,{children:["With React Hooks, functional component can get\n",(0,s.jsx)(n.code,{children:"state"}),", ",(0,s.jsx)(n.code,{children:"lifecycle hooks"})," and performance optimization\nconsistent to class component."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"stateless-and-stateful-component",children:"Stateless and Stateful component"}),"\n",(0,s.jsxs)(n.p,{children:["React Component\n",(0,s.jsx)(n.a,{href:"https://github.com/facebook/react/blob/main/packages/react/src/ReactBaseClasses.js",children:"definition"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.Component"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.PureComponent"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface NewLifecycle<P, S, SS> {\n  getSnapshotBeforeUpdate?: (\n    prevProps: Readonly<P>,\n    prevState: Readonly<S>,\n  ) => SS | null\n\n  componentDidUpdate?: (\n    prevProps: Readonly<P>,\n    prevState: Readonly<S>,\n    snapshot?: SS,\n  ) => void\n}\n\ninterface ComponentLifecycle<P, S, SS = any> extends NewLifecycle<P, S, SS> {\n  componentDidMount?: () => void\n\n  shouldComponentUpdate?: (\n    nextProps: Readonly<P>,\n    nextState: Readonly<S>,\n    nextContext: any,\n  ) => boolean\n\n  componentWillUnmount?: () => void\n\n  componentDidCatch?: (error: Error, errorInfo: ErrorInfo) => void\n}\n\nclass Component<P = object, S = object, SS = any> extends ComponentLifecycle<\n  P,\n  S,\n  SS\n> {\n  readonly props: Readonly<P> & Readonly<{ children?: ReactNode | undefined }>\n  state: Readonly<S>\n\n  static contextType?: Context<any> | undefined\n  context: any\n\n  constructor(props: Readonly<P> | P)\n\n  setState<K extends keyof S>(\n    state:\n      | ((prevState: Readonly<S>, props: Readonly<P>) => Pick<S, K> | S | null)\n      | (Pick<S, K> | S | null),\n    callback?: () => void,\n  ): void\n\n  forceUpdate(callback?: () => void): void\n\n  render(): ReactNode\n}\n\nclass PureComponent<P = object, S = object, SS = any> extends Component<\n  P,\n  S,\n  SS\n> {}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"stateless-component",children:"Stateless component"}),"\n",(0,s.jsxs)(n.p,{children:["\u91c7\u7528\u51fd\u6570\u578b\u58f0\u660e, \u4e0d\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"setState()"}),", \u4e00\u822c\u4f5c\u4e3a\u8868\u73b0\u578b\u7ec4\u4ef6."]}),"\n",(0,s.jsx)(n.h4,{id:"stateful-component",children:"Stateful component"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u91c7\u7528\u7c7b\u578b\u58f0\u660e, \u4f7f\u7528 setState(), \u4e00\u822c\u4f5c\u4e3a\u5bb9\u5668\u578b\u7ec4\u4ef6(containers)"}),"\n",(0,s.jsx)(n.li,{children:"\u7ed3\u5408 Redux \u4e2d\u7684 connect \u65b9\u6cd5, \u5c06 store \u4e2d\u7684 state \u4f5c\u4e3a\u6b64\u7c7b\u7ec4\u4ef6\u7684 props"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"class Component {\n  render() {\n    this.setState((prevState, props) => ({\n      counter: prevState.counter + props.increment,\n    }))\n\n    return <div>Component</div>\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"component-lifecycle",children:"Component Lifecycle"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Reconciliation phase:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"constructor."}),"\n",(0,s.jsx)(n.li,{children:"getDerivedStateFromProps."}),"\n",(0,s.jsx)(n.li,{children:"getDerivedStateFromError."}),"\n",(0,s.jsx)(n.li,{children:"shouldComponentUpdate."}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ClassComponent"})," ",(0,s.jsx)(n.code,{children:"render"})," function."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"setState"})," updater functions."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"FunctionComponent"})," body function."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"useState"}),"/",(0,s.jsx)(n.code,{children:"useReducer"}),"/",(0,s.jsx)(n.code,{children:"useMemo"})," updater functions."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"UNSAFE_componentWillMount"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"UNSAFE_componentWillReceiveProps"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"UNSAFE_componentWillUpdate"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Commit phase:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"componentDidMount."}),"\n",(0,s.jsx)(n.li,{children:"getSnapshotBeforeUpdate."}),"\n",(0,s.jsx)(n.li,{children:"componentDidUpdate."}),"\n",(0,s.jsx)(n.li,{children:"componentWillUnmount."}),"\n",(0,s.jsx)(n.li,{children:"componentDidCatch."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u56e0\u4e3a\u534f\u8c03\u9636\u6bb5\u53ef\u80fd\u88ab\u4e2d\u65ad\u4e0e\u6062\u590d, \u751a\u81f3\u91cd\u505a,\nReact \u534f\u8c03\u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u94a9\u5b50\u53ef\u80fd\u4f1a\u88ab\u8c03\u7528\u591a\u6b21,\n",(0,s.jsx)(n.strong,{children:"\u534f\u8c03\u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u94a9\u5b50\u4e0d\u8981\u5305\u542b\u526f\u4f5c\u7528"}),": e.g ",(0,s.jsx)(n.code,{children:"fetch"})," promises, ",(0,s.jsx)(n.code,{children:"async"})," functions.\n\u901a\u8fc7 ",(0,s.jsx)(n.a,{href:"https://reactjs.org/docs/strict-mode.html#detecting-unexpected-side-effects",children:(0,s.jsx)(n.code,{children:"React.StrictMode"})}),"\n\u53ef\u4ee5\u81ea\u52a8\u68c0\u6d4b\u5e94\u7528\u4e2d\u9690\u85cf\u7684\u95ee\u9898."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://reactjs.org/docs/react-component.html#the-component-lifecycle",children:(0,s.jsx)(n.img,{alt:"React Component Lifecycle",src:t(3159).A+"",width:"2000",height:"1097"})})}),"\n",(0,s.jsx)(n.h4,{id:"creation-and-mounting-phase",children:"Creation and Mounting Phase"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"constructor(props, context)"}),"\n-> ",(0,s.jsx)(n.code,{children:"static getDerivedStateFromProps()"}),"\n-> ",(0,s.jsx)(n.code,{children:"render()"}),"\n-> ",(0,s.jsx)(n.code,{children:"componentDidMount()"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"updating-phase",children:"Updating Phase"}),"\n",(0,s.jsx)(n.p,{children:"Update for three reasons:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Parent/top components (re-)rendering."}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"this.setState()"})," called."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"this.forceUpdate()"})," called."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"static getDerivedStateFromProps()"}),"\n-> ",(0,s.jsx)(n.code,{children:"shouldComponentUpdate(nextProps, nextState)"}),"\n-> ",(0,s.jsx)(n.code,{children:"render()"}),"\n-> ",(0,s.jsx)(n.code,{children:"getSnapshotBeforeUpdate()"}),"\n-> ",(0,s.jsx)(n.code,{children:"componentDidUpdate(prevProps, prevState)"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"getSnapshotBeforeUpdate()"}),":\n\u5728\u6700\u65b0\u7684\u6e32\u67d3\u8f93\u51fa\u63d0\u4ea4\u7ed9 DOM \u524d\u5c06\u4f1a\u7acb\u5373\u8c03\u7528,\n\u8fd9\u5bf9\u4e8e\u4ece DOM \u6355\u83b7\u4fe1\u606f\uff08\u6bd4\u5982\uff1a\u6eda\u52a8\u4f4d\u7f6e\uff09\u5f88\u6709\u7528."]}),"\n",(0,s.jsx)(n.h4,{id:"unmounting-phase",children:"Unmounting Phase"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"componentWillUnmount()"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"error-handling-phase",children:"Error Handling Phase"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"static getDerivedStateFromError()"}),"\n-> ",(0,s.jsx)(n.code,{children:"componentDidCatch()"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"render-function",children:"Render Function"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Default render behavior (without any ",(0,s.jsx)(n.code,{children:"memo"}),"/",(0,s.jsx)(n.code,{children:"useMemo"}),"/",(0,s.jsx)(n.code,{children:"PureComponent"}),"):\nwhen a parent component renders,\nReact will recursively render ",(0,s.jsx)(n.strong,{children:"all child components"})," inside of it\n(because ",(0,s.jsx)(n.code,{children:"props.children"})," is always a new reference when parent re-rendering)."]}),"\n",(0,s.jsxs)(n.li,{children:["Render logic:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Can't mutate existing variables and objects."}),"\n",(0,s.jsxs)(n.li,{children:["Can't create random values like ",(0,s.jsx)(n.code,{children:"Math.random()"})," or ",(0,s.jsx)(n.code,{children:"Date.now()"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Can't make network requests."}),"\n",(0,s.jsx)(n.li,{children:"Can't queue state updates."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"react-element-api",children:"React Element API"}),"\n",(0,s.jsx)(n.h4,{id:"react-clone-element-api",children:"React Clone Element API"}),"\n",(0,s.jsx)(n.p,{children:"Modify children properties:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'function CreateTextWithProps({\n  text,\n  ASCIIChar,\n  ...props\n}: {\n  text: string\n  ASCIIChar: string\n}) {\n  return (\n    <span {...props}>\n      {text}\n      {ASCIIChar}\n    </span>\n  )\n}\n\nfunction RepeatCharacters({ times, children }) {\n  return React.cloneElement(children, {\n    ASCIIChar: children.props.ASCIIChar.repeat(times),\n  })\n}\n\nexport default function App() {\n  return (\n    <div>\n      <RepeatCharacters times={3}>\n        <CreateTextWithProps text="Foo Text" ASCIIChar="." />\n      </RepeatCharacters>\n    </div>\n  )\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'function RadioGroup({\n  name,\n  children,\n}: {\n  name: string\n  children: ReactElement\n}) {\n  const RenderChildren = () =>\n    React.Children.map(children, (child) => {\n      return React.cloneElement(child, {\n        name,\n      })\n    })\n\n  return (\n    <div>\n      <RenderChildren />\n    </div>\n  )\n}\n\nfunction RadioButton({\n  value,\n  name,\n  children,\n}: {\n  value: string\n  name: string\n  children: ReactElement\n}) {\n  return (\n    <label>\n      <input type="radio" value={value} name={name} />\n      {children}\n    </label>\n  )\n}\n\nexport default function App() {\n  return (\n    <RadioGroup name="numbers">\n      <RadioButton value="first">First</RadioButton>\n      <RadioButton value="second">Second</RadioButton>\n      <RadioButton value="third">Third</RadioButton>\n    </RadioGroup>\n  )\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"react-children-api",children:"React Children API"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.Children.toArray(children)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.Children.forEach(children, fn)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.Children.map(children, fn)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.Children.count(children)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.Children.only(children)"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { Children, cloneElement } from 'react'\n\nfunction Breadcrumbs({ children }: { children: ReactElement }) {\n  const arrayChildren = Children.toArray(children)\n\n  return (\n    <ul\n      style={{\n        listStyle: 'none',\n        display: 'flex',\n      }}\n    >\n      {Children.map(arrayChildren, (child, index) => {\n        const isLast = index === arrayChildren.length - 1\n\n        if (!isLast && !child.props.link) {\n          throw new Error(\n            `BreadcrumbItem child no. ${index + 1}\n            should be passed a 'link' prop`,\n          )\n        }\n\n        return (\n          <>\n            {child.props.link\n              ? (\n                  <a\n                    href={child.props.link}\n                    style={{\n                      display: 'inline-block',\n                      textDecoration: 'none',\n                    }}\n                  >\n                    <div style={{ marginRight: '5px' }}>\n                      {cloneElement(child, {\n                        isLast,\n                      })}\n                    </div>\n                  </a>\n                )\n              : (\n                  <div style={{ marginRight: '5px' }}>\n                    {cloneElement(child, {\n                      isLast,\n                    })}\n                  </div>\n                )}\n            {!isLast && <div style={{ marginRight: '5px' }}></div>}\n          </>\n        )\n      })}\n    </ul>\n  )\n}\n\nfunction BreadcrumbItem({\n  isLast,\n  children,\n}: {\n  isLast: boolean\n  children: ReactElement\n}) {\n  return (\n    <li\n      style={{\n        color: isLast ? 'black' : 'blue',\n      }}\n    >\n      {children}\n    </li>\n  )\n}\n\nexport default function App() {\n  return (\n    <Breadcrumbs>\n      <BreadcrumbItem link=\"https://example.com/\">Example</BreadcrumbItem>\n      <BreadcrumbItem link=\"https://example.com/hotels/\">Hotels</BreadcrumbItem>\n      <BreadcrumbItem>A Fancy Hotel Name</BreadcrumbItem>\n    </Breadcrumbs>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"refs",children:"Refs"}),"\n",(0,s.jsx)(n.p,{children:"Refs \u7528\u4e8e\u8fd4\u56de\u5bf9\u5143\u7d20\u7684\u5f15\u7528.\n\u4f46\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b, \u5e94\u8be5\u907f\u514d\u4f7f\u7528\u5b83\u4eec.\n\u5f53\u9700\u8981\u76f4\u63a5\u8bbf\u95ee DOM \u5143\u7d20\u6216\u7ec4\u4ef6\u7684\u5b9e\u4f8b\u65f6, \u5b83\u4eec\u53ef\u80fd\u975e\u5e38\u6709\u7528:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Managing focus, text selection, or media playback."}),"\n",(0,s.jsx)(n.li,{children:"Triggering imperative animations."}),"\n",(0,s.jsx)(n.li,{children:"Integrating with third-party DOM libraries.k"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Ref"})," \u901a\u8fc7\u5c06 Fiber \u6811\u4e2d\u7684 ",(0,s.jsx)(n.code,{children:"instance"})," \u8d4b\u7ed9 ",(0,s.jsx)(n.code,{children:"ref.current"})," \u5b9e\u73b0"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function commitAttachRef(finishedWork: Fiber) {\n  // finishedWork \u4e3a\u542b\u6709 Ref effectTag \u7684 Fiber\n  const ref = finishedWork.ref\n\n  // \u542b\u6709 ref prop, \u8fd9\u91cc\u662f\u4f5c\u4e3a\u6570\u636e\u7ed3\u6784\n  if (ref !== null) {\n    // \u83b7\u53d6 ref \u5c5e\u6027\u5bf9\u5e94\u7684 Component \u5b9e\u4f8b\n    const instance = finishedWork.stateNode\n    let instanceToUse\n    switch (finishedWork.tag) {\n      case HostComponent:\n        // \u5bf9\u4e8e HostComponent, \u5b9e\u4f8b\u4e3a\u5bf9\u5e94 DOM \u8282\u70b9\n        instanceToUse = getPublicInstance(instance)\n        break\n      default:\n        // \u5176\u4ed6\u7c7b\u578b\u5b9e\u4f8b\u4e3a fiber.stateNode\n        instanceToUse = instance\n    }\n\n    // \u8d4b\u503c ref\n    if (typeof ref === 'function')\n      ref(instanceToUse)\n    else ref.current = instanceToUse\n  }\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"class CssThemeProvider extends React.PureComponent<Props> {\n  private rootRef = React.createRef<HTMLDivElement>()\n\n  render() {\n    return <div ref={this.rootRef}>{this.props.children}</div>\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"string-refs",children:"String Refs"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4e0d\u5efa\u8bae\u4f7f\u7528"})," ",(0,s.jsx)(n.a,{href:"https://github.com/facebook/react/pull/8333#issuecomment-271648615",children:(0,s.jsx)(n.code,{children:"String Refs"})}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["React \u65e0\u6cd5\u83b7\u53d6 ",(0,s.jsx)(n.code,{children:"this"})," \u5f15\u7528, \u9700\u8981\u6301\u7eed\u8ffd\u8e2a\u5f53\u524d",(0,s.jsx)(n.code,{children:"render"}),"\u51fa\u7684\u7ec4\u4ef6, \u6027\u80fd\u53d8\u6162."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"String Refs"})," \u4e0d\u53ef\u7ec4\u5408\u5316:\nif library puts ref on passed child, user can't put another ref on it.\n",(0,s.jsx)(n.code,{children:"Callback Refs"})," are perfectly composable."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"String Refs"})," don't work with static analysis:\n",(0,s.jsx)(n.code,{children:"Flow"})," can't guess the magic that framework does to make string ref appear on ",(0,s.jsx)(n.code,{children:"this.refs"}),",\nas well as its type (which could be different).\n",(0,s.jsx)(n.code,{children:"Callback Refs"})," are friendly to static analysis."]}),"\n",(0,s.jsxs)(n.li,{children:["Starting in React 19, ",(0,s.jsx)(n.code,{children:"String Refs"})," was ",(0,s.jsx)(n.a,{href:"https://react.dev/blog/2024/04/25/react-19-upgrade-guide#removed-string-refs",children:"removed"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'class Foo extends Component {\n  render() {\n    return <input onClick={() => this.action()} ref="input" />\n  }\n\n  action() {\n    console.log(this.refs.input.value)\n  }\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"class App extends React.Component<{ data: object }> {\n  renderRow = (index) => {\n    // ref \u4f1a\u7ed1\u5b9a\u5230 DataTable \u7ec4\u4ef6\u5b9e\u4f8b, \u800c\u4e0d\u662f App \u7ec4\u4ef6\u5b9e\u4f8b\u4e0a\n    return <input ref={`input-${index}`} />\n\n    // \u5982\u679c\u4f7f\u7528 function \u7c7b\u578b ref, \u5219\u4e0d\u4f1a\u6709\u8fd9\u4e2a\u95ee\u9898\n    // return <input ref={input => this['input-' + index] = input} />;\n  }\n\n  render() {\n    return <DataTable data={this.props.data} renderRow={this.renderRow} />\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"forward-refs",children:"Forward Refs"}),"\n",(0,s.jsxs)(n.p,{children:["Before React 19, \u4e0d\u80fd\u5728\u51fd\u6570\u5f0f\u7ec4\u4ef6\u4e0a\u4f7f\u7528",(0,s.jsx)(n.code,{children:"ref"}),"\u5c5e\u6027,\n\u56e0\u4e3a\u5b83\u4eec\u6ca1\u6709\u5b9e\u4f8b, \u4f46\u53ef\u4ee5\u5728\u51fd\u6570\u5f0f\u7ec4\u4ef6\u5185\u90e8\u4f7f\u7528",(0,s.jsx)(n.code,{children:"ref"}),".\nRef forwarding \u662f\u4e00\u4e2a\u7279\u6027,\n\u5b83\u5141\u8bb8\u4e00\u4e9b\u7ec4\u4ef6\u83b7\u53d6\u63a5\u6536\u5230 ref \u5bf9\u8c61\u5e76\u5c06\u5b83\u8fdb\u4e00\u6b65\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'// functional component\nfunction Button({ children }: { children: ReactElement }, ref) {\n  return (\n    <button type="button" ref={ref} className="CustomButton">\n      {children}\n    </button>\n  )\n}\n\n// eslint-disable-next-line react/no-forward-ref -- In React 19, \'forwardRef\' is no longer necessary.\nconst ButtonElement = React.forwardRef(Button)\n\n// Create ref to the DOM button:\n// get ref to `<button>`\nexport default function App() {\n  const ref = useRef()\n  return <ButtonElement ref={ref}>Forward Ref</ButtonElement>\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'type Ref = HTMLButtonElement\ninterface Props {\n  children: React.ReactNode\n}\n\nfunction Button({ children }: Props, ref: Ref) {\n  return (\n    <button type="button" ref={ref} className="MyClassName">\n      {children}\n    </button>\n  )\n}\n\n// eslint-disable-next-line react/no-forward-ref -- In React 19, \'forwardRef\' is no longer necessary.\nconst FancyButton = React.forwardRef<Ref, Props>(Button)\n\nexport default FancyButton\n'})}),"\n",(0,s.jsx)(n.h4,{id:"prop-refs",children:"Prop Refs"}),"\n",(0,s.jsx)(n.p,{children:"Starting in React 19, you can now access ref as a prop for function components:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function MyInput({ placeholder, ref }) {\n  return <input placeholder={placeholder} ref={ref} />\n}\n\n<MyInput ref={ref} />\n"})}),"\n",(0,s.jsx)(n.h4,{id:"callback-refs",children:"Callback Refs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'class UserInput extends Component {\n  setSearchInput = (input) => {\n    this.input = input\n  }\n\n  componentDidMount() {\n    this.input.focus()\n  }\n\n  render() {\n    return (\n      <>\n        <input type="text" ref={this.setSearchInput} />\n        <button type="submit">Submit</button>\n      </>\n    )\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"compound-components",children:"Compound Components"}),"\n",(0,s.jsxs)(n.p,{children:["Compound components ",(0,s.jsx)(n.a,{href:"https://dev.to/alexi_be3/react-component-patterns-49ho",children:"example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import * as React from \'react\'\n\ninterface Props {\n  onStateChange?: (e: string) => void\n  defaultValue?: string\n}\n\ninterface State {\n  currentValue: string\n  defaultValue?: string\n}\n\ninterface RadioInputProps {\n  label: string\n  value: string\n  name: string\n  imgSrc: string\n  key: string | number\n  currentValue?: string\n  onChange?: (e: React.ChangeEvent<HTMLInputElement>) => void\n}\n\nfunction RadioImageForm({\n  children,\n  onStateChange,\n  defaultValue,\n}: React.PropsWithChildren<Props>): React.ReactElement {\n  const [state, setState] = React.useState<State>({\n    currentValue: \'\',\n    defaultValue,\n  })\n\n  // Memoized so that providerState isn\'t recreated on each render\n  const providerState = React.useMemo(\n    () => ({\n      onChange: (event: React.ChangeEvent<HTMLInputElement>): void => {\n        const value = event.target.value\n        setState({\n          currentValue: value,\n        })\n        onStateChange?.(value)\n      },\n      ...state,\n    }),\n    [state, onStateChange],\n  )\n\n  return (\n    <div>\n      <form>\n        {React.Children.map(children, (child: React.ReactElement) =>\n          React.cloneElement(child, {\n            ...providerState,\n          }),)}\n      </form>\n    </div>\n  )\n}\n\nfunction RadioInput({\n  currentValue,\n  onChange,\n  label,\n  value,\n  name,\n  imgSrc,\n  key,\n}: RadioInputProps): React.ReactElement {\n  return (\n    <label className="radio-button-group" key={key}>\n      <input\n        type="radio"\n        name={name}\n        value={value}\n        aria-label={label}\n        onChange={onChange}\n        checked={currentValue === value}\n        aria-checked={currentValue === value}\n      />\n      <img alt="" src={imgSrc} />\n    </label>\n  )\n}\n\nRadioImageForm.RadioInput = RadioInput\n\nexport default RadioImageForm\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Compound components manage their own internal state,\nwhich they share among several child components."}),"\n",(0,s.jsx)(n.li,{children:"When importing a compound component,\nautomatically import child components available on compound component."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import type { CSSProperties, ReactNode } from 'react'\n\ninterface Props {\n  children: ReactNode\n  style?: CSSProperties\n  rest?: any\n}\n\nfunction Header({ children, style, ...rest }: Props): JSX.Element {\n  return (\n    <div style={{ ...style }} {...rest}>\n      {children}\n    </div>\n  )\n}\n\nfunction Body({ children, style, ...rest }: Props): JSX.Element {\n  return (\n    <div style={{ ...style }} {...rest}>\n      {children}\n    </div>\n  )\n}\n\nfunction Footer({ children, style, ...rest }: Props): JSX.Element {\n  return (\n    <div style={{ ...style }} {...rest}>\n      {children}\n    </div>\n  )\n}\n\nfunction getChildrenOnDisplayName(children: ReactNode[], displayName: string) {\n  return React.Children.map(children, child =>\n    child.displayName === displayName ? child : null,)\n}\n\nfunction Card({ children }: { children: ReactNode[] }): JSX.Element {\n  const header = getChildrenOnDisplayName(children, 'Header')\n  const body = getChildrenOnDisplayName(children, 'Body')\n  const footer = getChildrenOnDisplayName(children, 'Footer')\n\n  return (\n    <div className=\"card\">\n      {header && <div className=\"card-header\">{header}</div>}\n      <div className=\"card-body\">{body}</div>\n      {footer && <div className=\"card-footer\">{footer}</div>}\n    </div>\n  )\n}\n\nHeader.displayName = 'Header'\nBody.displayName = 'Body'\nFooter.displayName = 'Footer'\nCard.Header = Header\nCard.Body = Body\nCard.Footer = Footer\n\nfunction App() {\n  return (\n    <div>\n      <Card>\n        <Card.Header>Header</Card.Header>\n        <Card.Body>Body</Card.Body>\n        <Card.Footer>Footer</Card.Footer>\n      </Card>\n    </div>\n  )\n}\n\nexport default App\n"})}),"\n",(0,s.jsx)(n.h2,{id:"react-synthetic-events",children:"React Synthetic Events"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Events delegation:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["React 16: delegate events handlers on ",(0,s.jsx)(n.code,{children:"document"})," DOM node."]}),"\n",(0,s.jsxs)(n.li,{children:["React 17: delegate events handlers on ",(0,s.jsx)(n.code,{children:"app"})," root DOM node."]}),"\n",(0,s.jsx)(n.li,{children:"\u5148\u5904\u7406\u539f\u751f\u4e8b\u4ef6, \u540e\u5904\u7406 React \u4e8b\u4ef6."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Events dispatching: dispatch native events to ",(0,s.jsx)(n.code,{children:"React.onXXX"})," handlers by ",(0,s.jsx)(n.code,{children:"SyntheticEvent"}),".","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u6536\u96c6\u76d1\u542c\u5668: ",(0,s.jsx)(n.code,{children:"const listeners = accumulateSinglePhaseListeners(targetFiber, eventName)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["\u6d3e\u53d1\u5408\u6210\u4e8b\u4ef6: ",(0,s.jsx)(n.code,{children:"dispatchQueue.push({ new SyntheticEvent(eventName), listeners })"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["\u6267\u884c\u6d3e\u53d1:\n",(0,s.jsx)(n.code,{children:"processDispatchQueue(dispatchQueue, eventSystemFlags)"}),"\n-> ",(0,s.jsx)(n.code,{children:"executeDispatch(event, listener, currentTarget)"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Capture event: \u4ece\u4e0a\u81f3\u4e0b\u8c03\u7528 Fiber \u6811\u4e2d\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570."}),"\n",(0,s.jsx)(n.li,{children:"Bubble event: \u4ece\u4e0b\u81f3\u4e0a\u8c03\u7528 Fiber \u6811\u4e2d\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://7kms.github.io/react-illustration-series/main/synthetic-event",children:(0,s.jsx)(n.img,{alt:"React Synthetic Events",src:t(4496).A+"",width:"1090",height:"1248"})})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/facebook/react/blob/main/packages/react-dom/src/events/DOMPluginEventSystem.js",children:"react-dom/src/events/DOMPluginEventSystem"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function listenToAllSupportedEvents(rootContainerElement: EventTarget) {\n  if (enableEagerRootListeners) {\n    // 1. \u8282\u6d41\u4f18\u5316, \u4fdd\u8bc1\u5168\u5c40\u6ce8\u518c\u53ea\u88ab\u8c03\u7528\u4e00\u6b21.\n    if (rootContainerElement[listeningMarker])\n      return\n\n    rootContainerElement[listeningMarker] = true\n\n    // 2. \u904d\u5386 allNativeEvents \u76d1\u542c\u5192\u6ce1\u548c\u6355\u83b7\u9636\u6bb5\u7684\u4e8b\u4ef6.\n    allNativeEvents.forEach((domEventName) => {\n      if (!nonDelegatedEvents.has(domEventName)) {\n        listenToNativeEvent(\n          domEventName,\n          false, // \u5192\u6ce1\u9636\u6bb5\u76d1\u542c.\n          rootContainerElement,\n          null,\n        )\n      }\n\n      listenToNativeEvent(\n        domEventName,\n        true, // \u6355\u83b7\u9636\u6bb5\u76d1\u542c.\n        rootContainerElement,\n        null,\n      )\n    })\n  }\n}\n\nfunction listenToNativeEvent(\n  domEventName: DOMEventName,\n  isCapturePhaseListener: boolean,\n  rootContainerElement: EventTarget,\n  targetElement: Element | null,\n  eventSystemFlags?: EventSystemFlags = 0,\n): void {\n  const target = rootContainerElement\n  const listenerSet = getEventListenerSet(target)\n  const listenerSetKey = getListenerSetKey(domEventName, isCapturePhaseListener)\n\n  // \u5229\u7528 Set \u6570\u636e\u7ed3\u6784, \u4fdd\u8bc1\u76f8\u540c\u7684\u4e8b\u4ef6\u7c7b\u578b\u53ea\u4f1a\u88ab\u6ce8\u518c\u4e00\u6b21.\n  if (!listenerSet.has(listenerSetKey)) {\n    if (isCapturePhaseListener)\n      eventSystemFlags |= IS_CAPTURE_PHASE\n\n    // \u6ce8\u518c\u4e8b\u4ef6\u76d1\u542c.\n    addTrappedEventListener(\n      target,\n      domEventName,\n      eventSystemFlags,\n      isCapturePhaseListener,\n    )\n    listenerSet.add(listenerSetKey)\n  }\n}\n\nfunction addTrappedEventListener(\n  targetContainer: EventTarget,\n  domEventName: DOMEventName,\n  eventSystemFlags: EventSystemFlags,\n  isCapturePhaseListener: boolean,\n  isDeferredListenerForLegacyFBSupport?: boolean,\n) {\n  // 1. \u6784\u9020 listener.\n  const listener = createEventListenerWrapperWithPriority(\n    targetContainer,\n    domEventName,\n    eventSystemFlags,\n  )\n\n  // 2. \u6ce8\u518c\u4e8b\u4ef6\u76d1\u542c.\n  let unsubscribeListener\n\n  if (isCapturePhaseListener) {\n    unsubscribeListener = addEventCaptureListener(\n      targetContainer,\n      domEventName,\n      listener,\n    )\n  } else {\n    unsubscribeListener = addEventBubbleListener(\n      targetContainer,\n      domEventName,\n      listener,\n    )\n  }\n}\n\n// \u6ce8\u518c\u539f\u751f\u5192\u6ce1\u4e8b\u4ef6.\nfunction addEventBubbleListener(\n  target: EventTarget,\n  eventType: string,\n  listener: Function,\n): Function {\n  target.addEventListener(eventType, listener, false)\n  return listener\n}\n\n// \u6ce8\u518c\u539f\u751f\u6355\u83b7\u4e8b\u4ef6.\nfunction addEventCaptureListener(\n  target: EventTarget,\n  eventType: string,\n  listener: Function,\n): Function {\n  target.addEventListener(eventType, listener, true)\n  return listener\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/facebook/react/blob/main/packages/react-dom/src/events/ReactDOMEventListener.js",children:"react-dom/src/events/ReactDOMEventListener"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// \u6d3e\u53d1\u539f\u751f\u4e8b\u4ef6\u81f3 React.onXXX.\nfunction createEventListenerWrapperWithPriority(\n  targetContainer: EventTarget,\n  domEventName: DOMEventName,\n  eventSystemFlags: EventSystemFlags,\n): Function {\n  // 1. \u6839\u636e\u4f18\u5148\u7ea7\u8bbe\u7f6e listenerWrapper.\n  const eventPriority = getEventPriorityForPluginSystem(domEventName)\n  let listenerWrapper\n\n  switch (eventPriority) {\n    case DiscreteEvent:\n      listenerWrapper = dispatchDiscreteEvent\n      break\n    case UserBlockingEvent:\n      listenerWrapper = dispatchUserBlockingUpdate\n      break\n    case ContinuousEvent:\n    default:\n      listenerWrapper = dispatchEvent\n      break\n  }\n\n  // 2. \u8fd4\u56de listenerWrapper.\n  return listenerWrapper.bind(\n    null,\n    domEventName,\n    eventSystemFlags,\n    targetContainer,\n  )\n}\n\nfunction dispatchDiscreteEvent(\n  domEventName,\n  eventSystemFlags,\n  container,\n  nativeEvent,\n) {\n  const previousPriority = getCurrentUpdatePriority()\n  const prevTransition = ReactCurrentBatchConfig.transition\n  ReactCurrentBatchConfig.transition = null\n\n  try {\n    setCurrentUpdatePriority(DiscreteEventPriority)\n    dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent)\n  } finally {\n    setCurrentUpdatePriority(previousPriority)\n    ReactCurrentBatchConfig.transition = prevTransition\n  }\n}\n\nfunction dispatchContinuousEvent(\n  domEventName,\n  eventSystemFlags,\n  container,\n  nativeEvent,\n) {\n  const previousPriority = getCurrentUpdatePriority()\n  const prevTransition = ReactCurrentBatchConfig.transition\n  ReactCurrentBatchConfig.transition = null\n\n  try {\n    setCurrentUpdatePriority(ContinuousEventPriority)\n    dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent)\n  } finally {\n    setCurrentUpdatePriority(previousPriority)\n    ReactCurrentBatchConfig.transition = prevTransition\n  }\n}\n\nfunction dispatchEvent(\n  domEventName: DOMEventName,\n  eventSystemFlags: EventSystemFlags,\n  targetContainer: EventTarget,\n  nativeEvent: AnyNativeEvent,\n) {\n  let blockedOn = findInstanceBlockingEvent(\n    domEventName,\n    eventSystemFlags,\n    targetContainer,\n    nativeEvent,\n  )\n\n  if (blockedOn === null) {\n    dispatchEventForPluginEventSystem(\n      domEventName,\n      eventSystemFlags,\n      nativeEvent,\n      return_targetInst,\n      targetContainer,\n    )\n    clearIfContinuousEvent(domEventName, nativeEvent)\n    return\n  }\n\n  if (\n    queueIfContinuousEvent(\n      blockedOn,\n      domEventName,\n      eventSystemFlags,\n      targetContainer,\n      nativeEvent,\n    )\n  ) {\n    nativeEvent.stopPropagation()\n    return\n  }\n\n  // We need to clear only if we didn't queue because queueing is accumulative.\n  clearIfContinuousEvent(domEventName, nativeEvent)\n\n  if (\n    eventSystemFlags & IS_CAPTURE_PHASE\n    && isDiscreteEventThatRequiresHydration(domEventName)\n  ) {\n    while (blockedOn !== null) {\n      const fiber = getInstanceFromNode(blockedOn)\n\n      if (fiber !== null)\n        attemptSynchronousHydration(fiber)\n\n      const nextBlockedOn = findInstanceBlockingEvent(\n        domEventName,\n        eventSystemFlags,\n        targetContainer,\n        nativeEvent,\n      )\n\n      if (nextBlockedOn === null) {\n        dispatchEventForPluginEventSystem(\n          domEventName,\n          eventSystemFlags,\n          nativeEvent,\n          return_targetInst,\n          targetContainer,\n        )\n      }\n\n      if (nextBlockedOn === blockedOn)\n        break\n\n      blockedOn = nextBlockedOn\n    }\n\n    if (blockedOn !== null)\n      nativeEvent.stopPropagation()\n\n    return\n  }\n\n  dispatchEventForPluginEventSystem(\n    domEventName,\n    eventSystemFlags,\n    nativeEvent,\n    null,\n    targetContainer,\n  )\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"react-reusability-patterns",children:"React Reusability Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"hoc",children:"HOC"}),"\n",(0,s.jsx)(n.p,{children:"Higher Order Components."}),"\n",(0,s.jsx)(n.p,{children:"Solve:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reuse code with using ES6 classes."}),"\n",(0,s.jsx)(n.li,{children:"Compose multiple HOCs."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Upside:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reusable (abstract same logic)."}),"\n",(0,s.jsx)(n.li,{children:"HOC is flexible with input data\n(pass input data as parameters or derive it from props)."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Downside:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Wrapper hell: ",(0,s.jsx)(n.code,{children:"withA(withB(withC(withD(Comp))))"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Implicit dependencies: which HOC providing a certain prop."}),"\n",(0,s.jsx)(n.li,{children:"Name collision/overlap props: overwrite the same name prop silently."}),"\n",(0,s.jsx)(n.li,{children:"HOC is not flexible with output data (to WrappedComponent)."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// ToggleableMenu.jsx\nfunction withToggleable(Clickable) {\n  return class Toggleable extends React.Component<{ children: ReactElement }> {\n    constructor() {\n      super()\n      this.toggle = this.toggle.bind(this)\n      this.state = { show: false }\n    }\n\n    toggle() {\n      this.setState(prevState => ({ show: !prevState.show }))\n    }\n\n    render() {\n      return (\n        <div>\n          <Clickable {...this.props} onClick={this.toggle} />\n          {this.state.show && this.props.children}\n        </div>\n      )\n    }\n  }\n}\n\nclass NormalMenu extends React.Component<{ onClick: Function, title: string }> {\n  render() {\n    return (\n      <div onClick={this.props.onClick}>\n        <h1>{this.props.title}</h1>\n      </div>\n    )\n  }\n}\n\nconst ToggleableMenu = withToggleable(NormalMenu)\nexport default ToggleableMenu\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'class Menu extends React.Component {\n  render() {\n    return (\n      <div>\n        <ToggleableMenu title="First Menu">\n          <p>Some content</p>\n        </ToggleableMenu>\n        <ToggleableMenu title="Second Menu">\n          <p>Another content</p>\n        </ToggleableMenu>\n        <ToggleableMenu title="Third Menu">\n          <p>More content</p>\n        </ToggleableMenu>\n      </div>\n    )\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"render-props",children:"Render Props"}),"\n",(0,s.jsx)(n.p,{children:"Children/Props as render function:"}),"\n",(0,s.jsx)(n.p,{children:"Solve:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reuse code with using ES6 classes."}),"\n",(0,s.jsx)(n.li,{children:"Lowest level of indirection."}),"\n",(0,s.jsx)(n.li,{children:"No naming collision."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["e.g ",(0,s.jsx)(n.code,{children:"Context"})," or ",(0,s.jsx)(n.code,{children:"ThemesProvider"})," is designed base on Render Props."]}),"\n",(0,s.jsx)(n.p,{children:"Upside:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Separate presentation from logic."}),"\n",(0,s.jsx)(n.li,{children:"Extendable."}),"\n",(0,s.jsx)(n.li,{children:"Reusable (abstract same logic)."}),"\n",(0,s.jsx)(n.li,{children:"Render Props is flexible with output data\n(children parameters definition free)."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Downside:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Wrapper hell (when many cross-cutting concerns are applied to a component)."}),"\n",(0,s.jsx)(n.li,{children:"Minor memory issues when defining a closure for every render."}),"\n",(0,s.jsxs)(n.li,{children:["Unable to optimize code with ",(0,s.jsx)(n.code,{children:"React.memo"}),"/",(0,s.jsx)(n.code,{children:"React.PureComponent"}),"\ndue to ",(0,s.jsx)(n.code,{children:"render()"})," function always changes."]}),"\n",(0,s.jsx)(n.li,{children:"Render Props is not flexible with input data\n(restricts children components from using the data at outside field)."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface Props {\n  title: string\n  children: ReactElement\n}\n\nclass Toggleable extends React.Component<Props> {\n  constructor() {\n    super()\n    this.toggle = this.toggle.bind(this)\n    this.state = { show: false }\n  }\n\n  toggle() {\n    this.setState(prevState => ({ show: !prevState.show }))\n  }\n\n  render() {\n    return this.props.children(this.state.show, this.toggle)\n  }\n}\n\nexport default function ToggleableMenu({ title, children }: Props) {\n  return (\n    <Toggleable>\n      {(show, onClick) => (\n        <div>\n          <div onClick={onClick}>\n            <h1>{title}</h1>\n          </div>\n          {show && children}\n        </div>\n      )}\n    </Toggleable>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'class Menu extends React.Component {\n  render() {\n    return (\n      <div>\n        <ToggleableMenu title="First Menu">\n          <p>Some content</p>\n        </ToggleableMenu>\n        <ToggleableMenu title="Second Menu">\n          <p>Another content</p>\n        </ToggleableMenu>\n        <ToggleableMenu title="Third Menu">\n          <p>More content</p>\n        </ToggleableMenu>\n      </div>\n    )\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"react-hooks",children:"React Hooks"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"No wrapper hell: every hook is just one line of code."}),"\n",(0,s.jsx)(n.li,{children:"No implicit dependencies: explicit one certain call for one certain hook."}),"\n",(0,s.jsx)(n.li,{children:"No name collision and overlap props due to flexible data usage."}),"\n",(0,s.jsxs)(n.li,{children:["No need for ",(0,s.jsx)(n.code,{children:"JSX"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Flexible data usage."}),"\n",(0,s.jsxs)(n.li,{children:["Flexible optimization methods:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Avoid re-render with hook deps list."}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"useMemo"})," hook for memorized values."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"useCallback"})," hook for memorized functions."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"useRef"})," hook for lifecycle persistent values."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Recap related-logic into separate well-structured hooks."}),"\n",(0,s.jsx)(n.li,{children:"Reuse same stateful logic with custom hooks."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"react-typescript",children:"React TypeScript"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/typescript-cheatsheets/react",children:"React TypeScript CheatSheet"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/typescript-cheatsheets/react/blob/main/docs/advanced/types-react-ap.md",children:"@types/react API"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"props-types",children:"Props Types"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"export declare interface AppProps {\n  children: React.ReactNode // best\n  style?: React.CSSProperties // for style\n  onChange?: (e: React.FormEvent<HTMLInputElement>) => void // form events!\n  props: Props & React.HTMLProps<HTMLButtonElement>\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-refs-types",children:"React Refs Types"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"class CssThemeProvider extends React.PureComponent<Props> {\n  private rootRef: React.RefObject<HTMLDivElement> = React.createRef()\n\n  render() {\n    return <div ref={this.rootRef}>{this.props.children}</div>\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"function-component-types",children:"Function Component Types"}),"\n",(0,s.jsxs)(n.p,{children:["Don't use ",(0,s.jsx)(n.code,{children:"React.FC"}),"/",(0,s.jsx)(n.code,{children:"React.FunctionComponent"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["React 17:\nUnnecessary addition of ",(0,s.jsx)(n.code,{children:"children"})," (hide some run-time error)."]}),"\n",(0,s.jsxs)(n.li,{children:["React 18:\n",(0,s.jsx)(n.code,{children:"@types/react"})," v18 ",(0,s.jsxs)(n.a,{href:"https://github.com/ant-design/ant-design/pull/34937",children:["remove implicit ",(0,s.jsx)(n.code,{children:"children"})," in ",(0,s.jsx)(n.code,{children:"React.FunctionComponent"})]}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.FC"})," doesn't support generic components."]}),"\n",(0,s.jsxs)(n.li,{children:["Barrier for ",(0,s.jsx)(n.code,{children:"<Comp>"})," with ",(0,s.jsx)(n.code,{children:"<Comp.Sub>"})," types (",(0,s.jsx)(n.strong,{children:"component as namespace pattern"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.FC"})," doesn't work correctly with ",(0,s.jsx)(n.code,{children:"defaultProps"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'// Declaring type of props\ninterface Props {\n  message: string\n}\n\n// Inferred return type\nconst Message = ({ message }: Props) => <div>{message}</div>\n\n// Explicit return type annotation\nconst Message = ({ message }: Props): JSX.Element => <div>{message}</div>\n\n// Inline types annotation\nconst Message = ({ message }: { message: string }) => <div>{message}</div>\n\nexport default function App() {\n  return <Message message="message" />\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"class-component-types",children:"Class Component Types"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"React.Component<P, S>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"readonly state: State"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"static defaultProps"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"static getDerivedStateFromProps"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"class MyComponent extends React.Component<{\n  message?: string\n}> {\n  render() {\n    const { message = 'default' } = this.props\n    return <div>{message}</div>\n  }\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import Button from './Button'\n\ntype Props = typeof ButtonCounter.defaultProps & {\n  name: string\n}\n\nconst initialState = { clicksCount: 0 }\ntype State = Readonly<typeof initialState>\n\nclass ButtonCounter extends React.Component<Props, State> {\n  readonly state: State = initialState\n\n  // eslint-disable-next-line react/no-default-props\n  static defaultProps = {\n    name: 'count',\n  }\n\n  static getDerivedStateFromProps(\n    props: Props,\n    state: State,\n  ): Partial<State> | null {\n    // ...\n  }\n\n  render() {\n    return <span>{this.props.foo}</span>\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"generic-component-types",children:"Generic Component Types"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// \u4e00\u4e2a\u6cdb\u578b\u7ec4\u4ef6\ninterface SelectProps<T> {\n  items: T[]\n}\n\nclass Select<T> extends React.Component<SelectProps<T>, any> {}\n\n// \u4f7f\u7528\nconst Form = () => <Select<string> items={['a', 'b']} />\n\nexport default function App() {\n  return <Form />\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.code,{children:".tsx"})," file, ",(0,s.jsx)(n.code,{children:"<T>"})," maybe considered ",(0,s.jsx)(n.code,{children:"JSX.Element"}),",\nuse ",(0,s.jsx)(n.code,{children:"extends {}"})," to avoid it:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"const foo = <T extends object>(arg: T) => arg\n"})}),"\n",(0,s.jsx)(n.h3,{id:"component-props-type",children:"Component Props Type"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"React.ComponentProps"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"React.ComponentPropsWithRef"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"React.ComponentPropsWithoutRef"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { Button } from 'library'\n\ntype ButtonProps = React.ComponentProps<typeof Button>\ntype AlertButtonProps = Omit<ButtonProps, 'onClick'>\n\nconst AlertButton: React.FC<AlertButtonProps> = props => (\n  <Button onClick={() => alert('hello')} {...props} />\n)\n\nexport default function App() {\n  return <AlertButton />\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Typing existing untyped React components:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"declare module 'react-router-dom' {\n  import * as React from 'react'\n\n  interface NavigateProps<T> {\n    to: string | number\n    replace?: boolean\n    state?: T\n  }\n\n  export class Navigate<T = any> extends React.Component<NavigateProps<T>> {}\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"component-return-type",children:"Component Return Type"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"JSX.Element"}),": return value of ",(0,s.jsx)(n.code,{children:"React.createElement"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.ReactNode"}),": return value of a component."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function foo(bar: string) {\n  return { baz: 1 }\n}\n\ntype FooReturn = ReturnType<typeof foo> // { baz: number }\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-event-types",children:"React Event Types"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.SyntheticEvent"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.AnimationEvent"}),":\nCSS animations."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.ChangeEvent"}),":\n",(0,s.jsx)(n.code,{children:"<input>"}),"/",(0,s.jsx)(n.code,{children:"<select>"}),"/",(0,s.jsx)(n.code,{children:"<textarea>"})," change events."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.ClipboardEvent"}),":\ncopy/paste/cut events."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.CompositionEvent"}),":\nuser indirectly entering text events."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.DragEvent"}),":\ndrag/drop interaction events."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.FocusEvent"}),":\nelements gets/loses focus events."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.FormEvent<HTMLElement>"}),":\nform focus/change/submit events."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.InvalidEvent"}),":\nvalidity restrictions of inputs fails."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.KeyboardEvent"}),":\nkeyboard interaction events."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.MouseEvent"}),":\npointing device interaction events (e.g mouse)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.TouchEvent"}),":\ntouch device interaction events.\nExtends UIEvent."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.PointerEvent"}),":\nadvanced pointing device interaction events\n(includes mouse, pen/stylus, touchscreen),\nrecommended for modern browser.\nExtends ",(0,s.jsx)(n.code,{children:"UIEvent"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.TransitionEvent"}),":\nCSS transition.\nExtends UIEvent."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.UIEvent"}),":\nbase event for Mouse/Touch/Pointer events."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.WheelEvent"}),":\nmouse wheel scrolling events."]}),"\n",(0,s.jsxs)(n.li,{children:["Missing ",(0,s.jsx)(n.code,{children:"InputEvent"})," (extends ",(0,s.jsx)(n.code,{children:"UIEvent"}),"):\n",(0,s.jsx)(n.code,{children:"InputEvent"})," is still an experimental interface\nand not fully supported by all browsers.\nUse ",(0,s.jsx)(n.code,{children:"SyntheticEvent"})," instead."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"react-event-handler-types",children:"React Event Handler Types"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.ChangeEventHandler<HTMLElement>"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"react-form-event-types",children:"React Form Event Types"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface State {\n  text: string\n}\n\nclass App extends React.Component<Props, State> {\n  state = {\n    text: '',\n  }\n\n  // typing on RIGHT hand side of =\n  onChangeEvent = (e: React.FormEvent<HTMLInputElement>): void => {\n    this.setState({ text: e.currentTarget.value })\n  }\n\n  // typing on LEFT hand side of =\n  onChangeHandler: React.ChangeEventHandler<HTMLInputElement> = (e) => {\n    this.setState({ text: e.currentTarget.value })\n  }\n\n  render() {\n    return (\n      <div>\n        <input type=\"text\" value={this.state.text} onChange={this.onChange} />\n      </div>\n    )\n  }\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'export default function Form() {\n  return (\n    <form\n      ref={formRef}\n      onSubmit={(e: React.SyntheticEvent) => {\n        e.preventDefault()\n\n        const target = e.target as typeof e.target & {\n          email: { value: string }\n          password: { value: string }\n        }\n\n        const email = target.email.value // Type Checks\n        const password = target.password.value // Type Checks\n      }}\n    >\n      <div>\n        <label>\n          Email:\n          <input type="email" name="email" />\n        </label>\n      </div>\n      <div>\n        <label>\n          Password:\n          <input type="password" name="password" />\n        </label>\n      </div>\n      <div>\n        <input type="submit" value="Log in" />\n      </div>\n    </form>\n  )\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"react-html-and-css-types",children:"React HTML and CSS Types"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"React.DOMAttributes<HTMLElement>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"React.AriaAttributes<HTMLElement>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"React.SVGAttributes<HTMLElement>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"React.HTMLAttributes<HTMLElement>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"React.ButtonHTMLAttributes<HTMLButtonElement>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"React.HTMLProps<HTMLElement>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"React.CSSProperties"})}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"react-input-types",children:"React Input Types"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type StringChangeHandler = (newValue: string) => void\ntype NumberChangeHandler = (newValue: number) => void\ntype BooleanChangeHandler = (newValue: boolean) => void\n\ninterface BaseInputDefinition {\n  id: string\n  label: string\n}\n\ninterface TextInputDefinition extends BaseInputDefinition {\n  type: 'text'\n  value: string\n  onChange: StringChangeHandler\n}\n\ninterface NumberInputDefinition extends BaseInputDefinition {\n  type: 'number'\n  value: number\n  onChange: NumberChangeHandler\n}\n\ninterface CheckboxInputDefinition extends BaseInputDefinition {\n  type: 'checkbox'\n  value: boolean\n  onChange: BooleanChangeHandler\n}\n\ntype Input =\n  | TextInputDefinition\n  | NumberInputDefinition\n  | CheckboxInputDefinition\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-portal-types",children:"React Portal Types"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"const modalRoot = document.getElementById('modal-root') as HTMLElement\n\nexport class Modal extends React.Component<{ children: ReactElement }> {\n  el: HTMLElement = document.createElement('div')\n\n  componentDidMount() {\n    modalRoot.appendChild(this.el)\n  }\n\n  componentWillUnmount() {\n    modalRoot.removeChild(this.el)\n  }\n\n  render() {\n    return ReactDOM.createPortal(this.props.children, this.el)\n  }\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import type React from 'react'\nimport { useEffect, useRef } from 'react'\nimport { createPortal } from 'react-dom'\n\nconst modalRoot = document.querySelector('#modal-root') as HTMLElement\n\nconst Modal: React.FC<object> = ({ children }) => {\n  const el = useRef(document.createElement('div'))\n\n  useEffect(() => {\n    const current = el.current\n    modalRoot!.appendChild(current)\n    return () => modalRoot!.removeChild(current)\n  }, [])\n\n  return createPortal(children, el.current)\n}\n\nexport default Modal\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { Modal } from \'@components\'\n\nexport default function App() {\n  const [showModal, setShowModal] = React.useState(false)\n\n  return (\n    <div>\n      <div id="modal-root"></div>\n      {showModal && (\n        <Modal>\n          <div>\n            I&apos;m a modal!\n            {\' \'}\n            <button type="button" onClick={() => setShowModal(false)}>\n              close\n            </button>\n          </div>\n        </Modal>\n      )}\n      <button type="button" onClick={() => setShowModal(true)}>\n        show Modal\n      </button>\n    </div>\n  )\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"react-redux-types",children:"React Redux Types"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const initialState = {\n  name: '',\n  points: 0,\n  likesGames: true,\n}\n\ntype State = typeof initialState\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"export function updateName(name: string) {\n  return {\n    type: 'UPDATE_NAME',\n    name,\n  } as const\n}\n\nexport function addPoints(points: number) {\n  return {\n    type: 'ADD_POINTS',\n    points,\n  } as const\n}\n\nexport function setLikesGames(value: boolean) {\n  return {\n    type: 'SET_LIKES_GAMES',\n    value,\n  } as const\n}\n\ntype Action = ReturnType<\n  typeof updateName | typeof addPoints | typeof setLikesGames\n>\n\n// =>\n// type Action = {\n//   readonly type: 'UPDATE_NAME';\n//   readonly name: string;\n// } | {\n//   readonly type: 'ADD_POINTS';\n//   readonly points: number;\n// } | {\n//   readonly type: 'SET_LIKES_GAMES';\n//   readonly value: boolean;\n// }\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import type { Reducer } from 'redux'\n\nfunction reducer(state: State, action: Action): Reducer<State, Action> {\n  switch (action.type) {\n    case 'UPDATE_NAME':\n      return { ...state, name: action.name }\n    case 'ADD_POINTS':\n      return { ...state, points: action.points }\n    case 'SET_LIKES_GAMES':\n      return { ...state, likesGames: action.value }\n    default:\n      return state\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-hook-types",children:"React Hook Types"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"useState<T>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"Dispatch<T>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"SetStateAction<T>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"RefObject<T>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"MutableRefObject<T>"})}),"\n",(0,s.jsxs)(n.li,{children:["More ",(0,s.jsx)(n.a,{href:"https://github.com/juliencrn/useHooks.ts",children:"TypeScript Hooks"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"usestate-hook-type",children:"UseState Hook Type"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export default function App() {\n  const [user, setUser] = React.useState<IUser>({} as IUser)\n  const handleClick = () => setUser(newUser)\n\n  return <div>App</div>\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"usereducer-hook-type",children:"UseReducer Hook Type"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes-func.html#discriminated-unions",children:"Discriminated Unions"}),"\nfor reducer actions."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"const initialState = { count: 0 }\ntype State = typeof initialState\n\ntype Action =\n  | { type: 'increment', payload: number }\n  | { type: 'decrement', payload: string }\n\nfunction reducer(state: State, action: Action) {\n  switch (action.type) {\n    case 'increment':\n      return { count: state.count + action.payload }\n    case 'decrement':\n      return { count: state.count - Number(action.payload) }\n    default:\n      throw new Error('Error')\n  }\n}\n\nexport default function Counter() {\n  const [state, dispatch] = React.useReducer(reducer, initialState)\n\n  return (\n    <>\n      Count:\n      {' '}\n      {state.count}\n      <button\n        type=\"button\"\n        onClick={() => dispatch({ type: 'decrement', payload: '5' })}\n      >\n        -\n      </button>\n      <button\n        type=\"button\"\n        onClick={() => dispatch({ type: 'increment', payload: 5 })}\n      >\n        +\n      </button>\n    </>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"useref-hook-type",children:"UseRef Hook Type"}),"\n",(0,s.jsx)(n.h5,{id:"dom-element-ref-type",children:"DOM Element Ref Type"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If possible, prefer as specific as possible."}),"\n",(0,s.jsxs)(n.li,{children:["Return type is ",(0,s.jsx)(n.code,{children:"RefObject<T>"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export default function Foo() {\n  const divRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!divRef.current)\n      throw new Error('divRef is not assigned')\n\n    doSomethingWith(divRef.current)\n  })\n\n  return <div ref={divRef}>etc</div>\n}\n"})}),"\n",(0,s.jsx)(n.h5,{id:"mutable-value-ref",children:"Mutable Value Ref"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Return type is ",(0,s.jsx)(n.code,{children:"MutableRefObject<T>"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'export default function Foo() {\n  const intervalRef = useRef<number | null>(null)\n\n  // You manage the ref yourself (that\'s why it\'s called MutableRefObject!)\n  useEffect(() => {\n    intervalRef.current = setInterval()\n    return () => clearInterval(intervalRef.current)\n  }, [])\n\n  // The ref is not passed to any element\'s "ref" prop\n  return (\n    <button type="button" onClick={() => clearInterval(intervalRef.current)}>\n      Cancel timer\n    </button>\n  )\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"custom-hooks-types",children:"Custom Hooks Types"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"as const"})," type assertion to avoid type inference\n(especially for ",(0,s.jsx)(n.code,{children:"[first, second]"})," type)."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"export function useLoading() {\n  const [isLoading, setState] = React.useState(false)\n  const load = () => {\n    setState(true)\n  }\n\n  // return `[boolean, () => void]` as want\n  // instead of `(boolean | () => void)[]`\n  return [isLoading, load] as const\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import type { Dispatch, SetStateAction } from 'react'\nimport { useState } from 'react'\n\ninterface ReturnType {\n  value: boolean\n  setValue: Dispatch<SetStateAction<boolean>>\n  setTrue: () => void\n  setFalse: () => void\n  toggle: () => void\n}\n\nfunction useBoolean(defaultValue?: boolean): ReturnType {\n  const [value, setValue] = useState(!!defaultValue)\n\n  const setTrue = () => setValue(true)\n  const setFalse = () => setValue(false)\n  const toggle = () => setValue(x => !x)\n\n  return { value, setValue, setTrue, setFalse, toggle }\n}\n\nexport default useBoolean\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import type { RefObject } from 'react'\nimport { useEffect, useRef } from 'react'\n\nfunction useEventListener<T extends HTMLElement = HTMLDivElement>(\n  eventName: keyof WindowEventMap,\n  handler: (event: Event) => void,\n  element?: RefObject<T>,\n) {\n  // Create a ref that stores handler\n  const savedHandler = useRef<(event: Event) => void>()\n\n  useEffect(() => {\n    // Define the listening target\n    const targetElement: T | Window = element?.current || window\n    if (!(targetElement && targetElement.addEventListener))\n      return\n\n    // Update saved handler if necessary\n    if (savedHandler.current !== handler)\n      savedHandler.current = handler\n\n    // Create event listener that calls handler function stored in ref\n    const eventListener = (event: Event) => {\n      savedHandler?.current(event)\n    }\n\n    targetElement.addEventListener(eventName, eventListener)\n\n    // Remove event listener on cleanup\n    return () => {\n      targetElement.removeEventListener(eventName, eventListener)\n    }\n  }, [eventName, element, handler])\n}\n\nexport default useEventListener\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import type { AxiosRequestConfig } from 'axios'\n\nimport axios from 'axios'\nimport { useEffect, useReducer, useRef } from 'react'\n\n// State & hook output\ninterface State<T> {\n  status: 'init' | 'fetching' | 'error' | 'fetched'\n  data?: T\n  error?: string\n}\n\ntype Cache<T> = Record<string, T>\n\n// discriminated union type\ntype Action<T> =\n  | { type: 'request' }\n  | { type: 'success', payload: T }\n  | { type: 'failure', payload: string }\n\nfunction useFetch<T = unknown>(\n  url?: string,\n  options?: AxiosRequestConfig,\n): State<T> {\n  const cache = useRef<Cache<T>>({})\n  const cancelRequest = useRef<boolean>(false)\n\n  const initialState: State<T> = {\n    status: 'init',\n    error: undefined,\n    data: undefined,\n  }\n\n  // Keep state logic separated\n  const fetchReducer = (state: State<T>, action: Action<T>): State<T> => {\n    switch (action.type) {\n      case 'request':\n        return { ...initialState, status: 'fetching' }\n      case 'success':\n        return { ...initialState, status: 'fetched', data: action.payload }\n      case 'failure':\n        return { ...initialState, status: 'error', error: action.payload }\n      default:\n        return state\n    }\n  }\n\n  const [state, dispatch] = useReducer(fetchReducer, initialState)\n\n  useEffect(() => {\n    if (!url)\n      return\n\n    const fetchData = async () => {\n      dispatch({ type: 'request' })\n\n      if (cache.current[url]) {\n        dispatch({ type: 'success', payload: cache.current[url] })\n      } else {\n        try {\n          const response = await axios(url, options)\n          cache.current[url] = response.data\n\n          if (cancelRequest.current)\n            return\n\n          dispatch({ type: 'success', payload: response.data })\n        } catch (error) {\n          if (cancelRequest.current)\n            return\n\n          dispatch({ type: 'failure', payload: error.message })\n        }\n      }\n    }\n\n    fetchData()\n\n    return () => {\n      cancelRequest.current = true\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [url])\n\n  return state\n}\n\nexport default useFetch\n"})}),"\n",(0,s.jsx)(n.h2,{id:"react-internationalization",children:"React Internationalization"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/XLIFF",children:"XLIFF"}),":\nXML Localization Interchange File Format."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/unicode-org/icu",children:"ICU"}),":\nInternational Components for Unicode."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/wooorm/bcp-47",children:"BCP 47"}),":\nIETF BCP 47 language tag."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"simple-i18n-implementation",children:"Simple i18n Implementation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// locale/zh-CN.js\n\nexport default {\n  hello: '\u4f60\u597d\uff0c{name}',\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// locale/en-GB.js\n\nexport default {\n  hello: 'Hello\uff0c{name}',\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import IntlMessageFormat from 'intl-messageformat'\nimport en from '../locale/en'\nimport zh from '../locale/zh'\nconst MESSAGES = { en, zh }\nconst LOCALE = 'en' // \u8fd9\u91cc\u5199\u4e0a\u51b3\u5b9a\u8bed\u8a00\u7684\u65b9\u6cd5\uff0c\u4f8b\u5982\u53ef\u4ee5\u4ece cookie \u5224\u65ad\u8bed\u8a00\n\nclass Intl {\n  get(key, defaultMessage, options) {\n    let msg = MESSAGES[LOCALE][key]\n\n    if (msg == null) {\n      if (defaultMessage != null)\n        return defaultMessage\n\n      return key\n    }\n\n    if (options) {\n      msg = new IntlMessageFormat(msg, LOCALE)\n      return msg.format(options)\n    }\n\n    return msg\n  }\n}\n\nexport default Intl\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-i18n-library",children:"React i18n Library"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/alibaba/react-intl-universal",children:"react-intl"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"i18n-solution",children:"i18n Solution"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://mp.weixin.qq.com/s/QfTf02GrEXrbCnQswnWFuQ",children:"\u5947\u5b89\u4fe1\u524d\u7aef\u56fd\u9645\u5316\u5e73\u53f0"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"modern-react",children:"Modern React"}),"\n",(0,s.jsx)(n.h3,{id:"context-api",children:"Context API"}),"\n",(0,s.jsx)(n.p,{children:"Context API provide a Dependency Injection style method,\nto provide values to children components."}),"\n",(0,s.jsxs)(n.p,{children:["Context \u4e2d\u53ea\u5b9a\u4e49\u88ab\u5927\u591a\u6570\u7ec4\u4ef6\u6240\u5171\u7528\u7684\u5c5e\u6027\n(avoid ",(0,s.jsx)(n.strong,{children:"Prop Drilling"}),"):"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Global state."}),"\n",(0,s.jsx)(n.li,{children:"UI Theme."}),"\n",(0,s.jsx)(n.li,{children:"Preferred locale language."}),"\n",(0,s.jsx)(n.li,{children:"Application configuration."}),"\n",(0,s.jsx)(n.li,{children:"User setting."}),"\n",(0,s.jsx)(n.li,{children:"Authenticated user."}),"\n",(0,s.jsx)(n.li,{children:"Service collection."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u9891\u7e41\u7684 Context value \u66f4\u6539\u4f1a\u5bfc\u81f4\u4f9d\u8d56 value \u7684\u7ec4\u4ef6\n\u7a7f\u900f ",(0,s.jsx)(n.code,{children:"shouldComponentUpdate"}),"/",(0,s.jsx)(n.code,{children:"React.memo"})," \u8fdb\u884c ",(0,s.jsx)(n.code,{children:"forceUpdate"}),",\n\u589e\u52a0 ",(0,s.jsx)(n.code,{children:"render"})," \u6b21\u6570, \u4ece\u800c\u5bfc\u81f4\u6027\u80fd\u95ee\u9898."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { createContext, useContext, useMemo, useState } from 'react'\nimport { fakeAuth } from './app/services/auth'\n\nconst authContext = createContext()\n\nfunction useAuth() {\n  return useContext(authContext)\n}\n\nexport default function AuthProvider({ children }: { children: ReactElement }) {\n  const [user, setUser] = useState(null)\n\n  const signIn = useCallback((cb) => {\n    return fakeAuth.signIn(() => {\n      setUser('user')\n      cb()\n    })\n  }, [])\n\n  const signOut = useCallback((cb) => {\n    return fakeAuth.signOut(() => {\n      setUser(null)\n      cb()\n    })\n  }, [])\n\n  const auth = useMemo(() => {\n    return {\n      user,\n      signIn,\n      signOut,\n    }\n  }, [user, signIn, signOut])\n\n  return <authContext value={auth}>{children}</authContext>\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"context-refs",children:"Context Refs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// Context.js\nimport { Component, createContext } from 'react'\n\n// React team \u2014 thanks for Context API \ud83d\udc4d\nconst context = createContext()\nconst { Provider: ContextProvider, Consumer } = context\n\nclass Provider extends Component<{ children: ReactElement }> {\n  // refs\n  // usage: this.textareaRef.current\n  textareaRef = React.createRef()\n\n  // input handler\n  onInput = (e) => {\n    const { name, value } = e.target\n\n    this.setState({\n      [name]: value,\n    })\n  }\n\n  render() {\n    return (\n      <ContextProvider\n        value={{\n          textareaRef: this.textareaRef,\n          onInput: this.onInput,\n        }}\n      >\n        {this.props.children}\n      </ContextProvider>\n    )\n  }\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'// TextArea.jsx\nimport { Consumer } from \'./Context\'\n\nexport default function TextArea() {\n  return (\n    <Consumer>\n      {context => (\n        <textarea\n          ref={context.textareaRef}\n          className="app__textarea"\n          name="snippet"\n          placeholder="Your snippet\u2026"\n          onChange={context.onInput}\n          autoComplete="off"\n          autoCorrect="off"\n          autoCapitalize="off"\n          spellCheck="false"\n          wrap="off"\n        />\n      )}\n    </Consumer>\n  )\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"context-internals",children:"Context Internals"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"createContext"})," \u521b\u5efa\u4e86\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"{ _currentValue, Provider, Consumer }"})," \u5bf9\u8c61:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_currentValue"})," \u4fdd\u5b58\u503c."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Provider"})," \u4e3a\u4e00\u79cd JSX \u7c7b\u578b, \u4f1a\u8f6c\u4e3a\u5bf9\u5e94\u7684 fiber \u7c7b\u578b, \u8d1f\u8d23\u4fee\u6539 ",(0,s.jsx)(n.code,{children:"_currentValue"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Consumer"})," \u548c ",(0,s.jsx)(n.code,{children:"useContext"})," \u8d1f\u8d23\u8bfb\u53d6 ",(0,s.jsx)(n.code,{children:"_currentValue"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Provider"})," \u5904\u7406\u6bcf\u4e2a\u8282\u70b9\u4e4b\u524d\u4f1a\u5165\u6808\u5f53\u524d ",(0,s.jsx)(n.code,{children:"Context"}),", \u5904\u7406\u5b8c\u4f1a\u51fa\u6808,\n\u4fdd\u8bc1 ",(0,s.jsx)(n.code,{children:"Context"})," \u53ea\u5f71\u54cd\u5b50\u7ec4\u4ef6, \u5b9e\u73b0\u5d4c\u5957 ",(0,s.jsx)(n.code,{children:"Context"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"error-boundary",children:"Error Boundary"}),"\n",(0,s.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u9519\u8bef\u8fb9\u754c\u4e0d\u8d77\u4f5c\u7528\u7684\u60c5\u51b5:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4e8b\u4ef6\u5904\u7406\u5668\u5185\u4ee3\u7801."}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"setTimeout"})," \u6216 ",(0,s.jsx)(n.code,{children:"requestAnimationFrame"})," \u56de\u8c03\u4e2d\u7684\u5f02\u6b65\u4ee3\u7801."]}),"\n",(0,s.jsx)(n.li,{children:"\u670d\u52a1\u7aef\u6e32\u67d3\u4ee3\u7801."}),"\n",(0,s.jsx)(n.li,{children:"\u9519\u8bef\u8fb9\u754c\u4ee3\u7801\u672c\u8eab."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/bvaughn/react-error-boundary",children:"React Error Boundary"})," library:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"class ErrorBoundary extends React.Component<{ children: ReactElement }> {\n  state = {\n    hasError: false,\n    error: null,\n    info: null,\n  }\n\n  // key point\n  componentDidCatch(error, info) {\n    this.setState({\n      hasError: true,\n      error,\n      info,\n    })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div>\n          <h1>Oops, something went wrong :(</h1>\n          <p>\n            The error:\n            {this.state.error.toString()}\n          </p>\n          <p>\n            Where it occurred:\n            {this.state.info.componentStack}\n          </p>\n        </div>\n      )\n    }\n\n    return this.props.children\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-fragment",children:"React Fragment"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Less node, less memory, faster performance."}),"\n",(0,s.jsx)(n.li,{children:"Avoid extra parent-child relationship for CSS flex and grid layout."}),"\n",(0,s.jsx)(n.li,{children:"DOM debug inspector is less cluttered."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"class Items extends React.Component {\n  render() {\n    return (\n      <>\n        <Fruit />\n        <Beverages />\n        <Drinks />\n      </>\n    )\n  }\n}\n\nclass Fruit extends React.Component {\n  render() {\n    return (\n      <>\n        <li>Apple</li>\n        <li>Orange</li>\n        <li>Blueberry</li>\n        <li>Cherry</li>\n      </>\n    )\n  }\n}\n\nclass Frameworks extends React.Component {\n  render() {\n    return (\n      <>\n        <p>JavaScript:</p>\n        <li>React</li>\n        ,\n        <li>Vuejs</li>\n        ,\n        <li>Angular</li>\n      </>\n    )\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-portal",children:"React Portal"}),"\n",(0,s.jsxs)(n.p,{children:["Portal provide a first-class way to render children into a DOM node\nthat exists ",(0,s.jsx)(n.strong,{children:"outside"})," the DOM hierarchy of the parent component\n",(0,s.jsx)(n.code,{children:"ReactDOM.createPortal(child, container)"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<div id="root"></div>\n<div id="portal"></div>\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'const portalRoot = document.getElementById(\'portal\')\n\nclass Portal extends React.Component<{ children: ReactElement }> {\n  constructor() {\n    super()\n    this.el = document.createElement(\'div\')\n  }\n\n  componentDidMount = () => {\n    portalRoot.appendChild(this.el)\n  }\n\n  componentWillUnmount = () => {\n    portalRoot.removeChild(this.el)\n  }\n\n  render() {\n    const { children } = this.props\n    return ReactDOM.createPortal(children, this.el)\n  }\n}\n\ninterface Props {\n  on: boolean\n  toggle: Function\n  children: ReactElement\n}\n\nclass Modal extends React.Component<Props> {\n  render() {\n    const { children, toggle, on } = this.props\n\n    return (\n      <Portal>\n        {on\n          ? (\n              <div className="modal is-active">\n                <div className="modal-background" />\n                <div className="modal-content">\n                  <div className="box">\n                    <h2 className="subtitle">{children}</h2>\n                    <button\n                      type="button"\n                      onClick={toggle}\n                      className="closeButton button is-info"\n                    >\n                      Close\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )\n          : null}\n      </Portal>\n    )\n  }\n}\n\nclass App extends React.Component {\n  state = {\n    showModal: false,\n  }\n\n  toggleModal = () => {\n    this.setState({\n      showModal: !this.state.showModal,\n    })\n  }\n\n  render() {\n    const { showModal } = this.state\n    return (\n      <div className="box">\n        <h1 className="subtitle">Hello, I am the parent!</h1>\n        <button\n          type="button"\n          onClick={this.toggleModal}\n          className="button is-black"\n        >\n          Toggle Modal\n        </button>\n        <Modal on={showModal} toggle={this.toggleModal}>\n          {showModal ? <h1>Hello, I am the portal!</h1> : null}\n        </Modal>\n      </div>\n    )\n  }\n}\n\nReactDOM.createRoot(document.getElementById(\'root\')).render(<App />)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"concurrent-features",children:"Concurrent Features"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import App from 'App'\nimport * as ReactDOM from 'react-dom'\n\n// Create a root by using ReactDOM.createRoot():\nconst root = ReactDOM.createRoot(document.getElementById('app'))\n\n// Render the main <App/> element to the root:\nroot.render(<App />)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"batching-updates",children:"Batching Updates"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["All updates will be automatically batched,\nincluding updates inside of ",(0,s.jsx)(n.strong,{children:"promises, async code and native event handlers"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ReactDOM.flushSync"})," can opt-out of automatic batching."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function handleClick() {\n  // React 17: Re-rendering happens after both of the states are updated.\n  // This is called batching.\n  // This is also the default behavior of React 18.\n  setIsBirthday(b => !b)\n  setAge(a => a + 1)\n}\n\n// For the following code blocks,\n// React 18 does automatic batching, but React 17 doesn't.\n// 1. Promises:\nfunction handleClick() {\n  fetchSomething().then(() => {\n    setIsBirthday(b => !b)\n    setAge(a => a + 1)\n  })\n}\n\n// 2. Async code:\nsetInterval(() => {\n  setIsBirthday(b => !b)\n  setAge(a => a + 1)\n}, 5000)\n\n// 3. Native event handlers:\nelement.addEventListener('click', () => {\n  setIsBirthday(b => !b)\n  setAge(a => a + 1)\n})\n"})}),"\n",(0,s.jsx)(n.p,{children:"Reconciler \u6ce8\u518c\u8c03\u5ea6\u4efb\u52a1\u65f6, \u4f1a\u901a\u8fc7\u8282\u6d41\u4e0e\u9632\u6296\u63d0\u5347\u8c03\u5ea6\u6027\u80fd:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5728 Task \u6ce8\u518c\u5b8c\u6210\u540e, \u4f1a\u8bbe\u7f6e ",(0,s.jsx)(n.code,{children:"FiberRoot"})," \u7684\u5c5e\u6027, \u4ee3\u8868\u73b0\u5728\u5df2\u7ecf\u5904\u4e8e\u8c03\u5ea6\u8fdb\u884c\u4e2d."]}),"\n",(0,s.jsxs)(n.li,{children:["\u518d\u6b21\u8fdb\u5165 ",(0,s.jsx)(n.code,{children:"ensureRootIsScheduled"})," \u65f6\n(\u6bd4\u5982\u8fde\u7eed 2 \u6b21 ",(0,s.jsx)(n.code,{children:"setState"}),", \u7b2c\u4e8c\u6b21 ",(0,s.jsx)(n.code,{children:"setState"})," \u540c\u6837\u4f1a\u89e6\u53d1 Reconciler \u4e0e Scheduler \u6267\u884c),\n\u5982\u679c\u53d1\u73b0\u5904\u4e8e\u8c03\u5ea6\u4e2d, \u5219\u4f1a\u901a\u8fc7\u8282\u6d41\u4e0e\u9632\u6296, \u4fdd\u8bc1\u8c03\u5ea6\u6027\u80fd."]}),"\n",(0,s.jsxs)(n.li,{children:["\u8282\u6d41:\n",(0,s.jsx)(n.code,{children:"existingCallbackPriority === newCallbackPriority"}),",\n\u65b0\u65e7\u66f4\u65b0\u7684\u4f18\u5148\u7ea7\u76f8\u540c, \u5219\u65e0\u9700\u6ce8\u518c\u65b0 Task, \u7ee7\u7eed\u6cbf\u7528\u4e0a\u4e00\u4e2a\u4f18\u5148\u7ea7\u76f8\u540c\u7684 Task, \u76f4\u63a5\u9000\u51fa\u8c03\u7528."]}),"\n",(0,s.jsxs)(n.li,{children:["\u9632\u6296:\n",(0,s.jsx)(n.code,{children:"existingCallbackPriority !== newCallbackPriority"}),",\n\u65b0\u65e7\u66f4\u65b0\u7684\u4f18\u5148\u7ea7\u4e0d\u540c, \u5219\u53d6\u6d88\u65e7 Task, \u91cd\u65b0\u6ce8\u518c\u65b0 Task."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/facebook/react/blob/main/packages/react-reconciler/src/ReactFiberWorkLoop.new.js",children:"EnsureRootIsScheduled"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function ensureRootIsScheduled(root: FiberRoot, currentTime: number) {\n  const existingCallbackNode = root.callbackNode\n  const nextLanes = getNextLanes(\n    root,\n    root === workInProgressRoot ? workInProgressRootRenderLanes : NoLanes,\n  )\n\n  if (nextLanes === NoLanes) {\n    if (existingCallbackNode !== null)\n      cancelCallback(existingCallbackNode)\n\n    root.callbackNode = null\n    root.callbackPriority = NoLane\n    return\n  }\n\n  const newCallbackPriority = getHighestPriorityLane(nextLanes)\n  const existingCallbackPriority = root.callbackPriority\n\n  // Debounce.\n  if (existingCallbackPriority === newCallbackPriority) {\n    // The priority hasn't changed. We can reuse the existing task. Exit.\n    return\n  }\n\n  // Throttle.\n  if (existingCallbackNode != null) {\n    // Cancel the existing callback. We'll schedule a new one below.\n    cancelCallback(existingCallbackNode)\n  }\n\n  // Schedule a new callback.\n  let newCallbackNode\n\n  if (newCallbackPriority === SyncLane) {\n    if (root.tag === LegacyRoot)\n      scheduleLegacySyncCallback(performSyncWorkOnRoot.bind(null, root))\n    else scheduleSyncCallback(performSyncWorkOnRoot.bind(null, root))\n\n    if (supportsMicroTasks) {\n      scheduleMicroTask(() => {\n        if (executionContext === NoContext)\n          flushSyncCallbacks()\n      })\n    } else {\n      scheduleCallback(ImmediateSchedulerPriority, flushSyncCallbacks)\n    }\n\n    newCallbackNode = null\n  } else {\n    const eventPriority = lanesToEventPriority(nextLanes)\n    const schedulerPriorityLevel\n      = eventPriorityToSchedulePriority(eventPriority)\n    newCallbackNode = scheduleCallback(\n      schedulerPriorityLevel,\n      performConcurrentWorkOnRoot.bind(null, root),\n    )\n  }\n\n  root.callbackPriority = newCallbackPriority\n  root.callbackNode = newCallbackNode\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"suspense",children:"Suspense"}),"\n",(0,s.jsx)(n.p,{children:"Extract loading/skeleton/placeholder components into single place:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export default function App() {\n  return (\n    <Suspense fallback={<Skeleton />}>\n      <Header />\n      <Suspense fallback={<ListPlaceholder />}>\n        <ListLayout>\n          <List pageId={pageId} />\n        </ListLayout>\n      </Suspense>\n    </Suspense>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"React Bottlenecks",type:"tip",children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"CPU bottleneck: Concurrency Feature (Priority Interrupt Mechanism)."}),"\n",(0,s.jsx)(n.li,{children:"I/O bottleneck: Suspense."}),"\n"]})}),"\n",(0,s.jsx)(n.h4,{id:"error-boundary-suspense",children:"Error Boundary Suspense"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'function ErrorFallback() {\n  return (\n    <div\n      className="text-red-500 w-screen h-screen flex flex-col justify-center items-center"\n      role="alert"\n    >\n      <h2 className="text-lg font-bold">Oops, something went wrong :( </h2>\n      <Button\n        className="mt-4"\n        onClick={() => window.location.assign(window.location.origin)}\n      >\n        Refresh\n      </Button>\n    </div>\n  )\n}\n\ninterface AppProviderProps {\n  children: React.ReactNode\n}\n\nexport function AppProvider({ children }: AppProviderProps) {\n  return (\n    <React.Suspense\n      fallback={(\n        <div className="h-screen w-screen flex items-center justify-center">\n          <Spinner size="xl" />\n        </div>\n      )}\n    >\n      <ErrorBoundary FallbackComponent={ErrorFallback}>\n        {children}\n      </ErrorBoundary>\n    </React.Suspense>\n  )\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"lazy-suspense",children:"Lazy Suspense"}),"\n",(0,s.jsx)(n.p,{children:"Lazy loading and code splitting:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { lazy, Suspense } from \'react\'\n\nconst Product = lazy(() => import(\'./ProductHandler\'))\n\nexport default function App() {\n  return (\n    <div className="product-list">\n      <h1>My Awesome Product</h1>\n      <Suspense fallback={<h2>Product list is loading...</h2>}>\n        <p>Take a look at my product:</p>\n        <section>\n          <Product id="PDT-49-232" />\n          <Product id="PDT-50-233" />\n          <Product id="PDT-51-234" />\n        </section>\n      </Suspense>\n    </div>\n  )\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"const { lazy, Suspense } = React\n\nconst Lazy = lazy(\n  () =>\n    new Promise((resolve) => {\n      setTimeout(() => {\n        resolve({ default: () => <Resource /> })\n      }, 4000)\n    }),\n)\n\nfunction Resource() {\n  return (\n    <div className=\"box\">\n      <h1>React Lazy</h1>\n      <p>\n        This component loaded after 4 seconds, using React Lazy and Suspense\n      </p>\n    </div>\n  )\n}\n\nexport default function App() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <Lazy />\n    </Suspense>\n  )\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />)\n"})}),"\n",(0,s.jsx)(n.h4,{id:"ssr-suspense",children:"SSR Suspense"}),"\n",(0,s.jsxs)(n.p,{children:["React v18+: enable ",(0,s.jsx)(n.code,{children:"Suspense"})," on the server:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Selective Hydration: one slow part doesn't slow down whole page."}),"\n",(0,s.jsx)(n.li,{children:"Streaming HTML: show initial HTML early and stream the rest HTML."}),"\n",(0,s.jsx)(n.li,{children:"Enable code splitting for SSR."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export default function LandingPage() {\n  return (\n    <div>\n      <FastComponent />\n      <Suspense fallback={<Spinner />}>\n        <Comments />\n      </Suspense>\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-server-components",children:"React Server Components"}),"\n",(0,s.jsx)(n.p,{children:"Give React a chunk of code that it runs exclusively on the server,\nto do the database query to eliminate redundant network requests,\npolish FCP and LCP, and improve SEO:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.joshwcomeau.com/react/server-components",children:(0,s.jsx)(n.img,{alt:"React Server Components",src:t(4303).A+"",width:"1407",height:"947"})})}),"\n",(0,s.jsx)(n.p,{children:"Each meta-framework came up with its own approach to achieve such target.\nNext.js has one approach, Gatsby has another, Remix has yet another.\nIt hasn't been standardized."}),"\n",(0,s.jsxs)(S,{children:[(0,s.jsx)(E,{value:"next",label:"Next",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import type { PageProps } from '@/types'\n// pages/index.js\nimport ParentComponent from '../components/parent-component'\n\nexport default function Page({ data }: PageProps) {\n  return <ParentComponent data={data} />\n}\n\nexport async function getServerSideProps() {\n  const response = await fetch('https://api.github.com/repos/vercel/next.js')\n  const data = await response.json()\n\n  return { props: { data } }\n}\n"})})}),(0,s.jsx)(E,{value:"remix",label:"Remix",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { json } from '@remix-run/node'\n// app/routes/_index.jsx\nimport { useLoaderData } from '@remix-run/react'\nimport ParentComponent from '../components/parent-component'\n\nexport default function Page() {\n  const { data } = useLoaderData()\n\n  return <ParentComponent data={data} />\n}\n\nexport async function loader() {\n  const response = await fetch('https://api.github.com/repos/remix-run/remix')\n  const data = await response.json()\n\n  return json({\n    data,\n  })\n}\n"})})}),(0,s.jsx)(E,{value:"gatsby",label:"Gatsby",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import type { PageProps } from '@/types'\n// src/pages/index.js\nimport ParentComponent from '../components/parent-component'\n\nexport default function Page({ data }: PageProps) {\n  return <ParentComponent data={data} />\n}\n\nexport async function getServerData() {\n  const response = await fetch('https://api.github.com/repos/gatsbyjs/gatsby')\n  const data = await response.json()\n\n  return { props: { data } }\n}\n"})})})]}),"\n",(0,s.jsxs)(n.p,{children:["For years, the React team has been quietly tinkering on this problem,\ntrying to come up with an official way to solve this problem.\nTheir solution is called ",(0,s.jsx)(n.code,{children:"React Server Components"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Server Components never re-render.\nThey run once on the server to generate the UI.\nThe rendered value is sent to the client and locked in place.\nAs far as React is concerned, this output is immutable, and will never change:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import db from 'imaginary-db'\n\nexport default async function Homepage() {\n  const link = db.connect('localhost', 'root', 'pass0w0rd')\n  const data = await db.query(link, 'SELECT * FROM products')\n\n  return (\n    <div>\n      <h1>Trending Products</h1>\n      {data.map(item => (\n        <article key={item.id}>\n          <h2>{item.title}</h2>\n          <p>{item.description}</p>\n        </article>\n      ))}\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Code for Server Components isn't included in the JS bundle.\nWe send the virtual representation (along the rendered value)\nthat was generated by the server.\nWhen React loads on the client,\nit re-uses that description instead of re-generating it:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://demystifying-rsc.vercel.app/static-content/2",children:(0,s.jsx)(n.img,{alt:"Virtual DOM for React Server Components",src:t(1986).A+"",width:"527",height:"230"})})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<!doctype html>\n<html>\n  <body>\n    <div>\n      <h1>Trending Products</h1>\n      <article>\n        <h2>Product 1</h2>\n        <p>Description 1</p>\n      </article>\n      <article>\n        <h2>Product 2</h2>\n        <p>Description 2</p>\n      </article>\n    </div>\n\n    <script src=\"/static/js/bundle.js\"><\/script>\n    <script>\n      self.__next['$Homepage-1'] = {\n        type: 'div',\n        props: null,\n        children: [\n          {\n            type: 'h1',\n            props: null,\n            children: ['Trending Products'],\n          },\n          {\n            type: 'article',\n            props: { key: 1 },\n            children: [\n              { type: 'h2', props: null, children: ['Product 1'] },\n              { type: 'p', props: null, children: ['Description 1'] },\n            ],\n          },\n          {\n            type: 'article',\n            props: { key: 2 },\n            children: [\n              { type: 'h2', props: null, children: ['Product 2'] },\n              { type: 'p', props: null, children: ['Description 2'] },\n            ],\n          },\n        ],\n      }\n    <\/script>\n  </body>\n</html>\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://www.smashingmagazine.com/2024/05/forensics-react-server-components",children:"RSCs"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Addresses SEO and loading time issues in CSR."}),"\n",(0,s.jsx)(n.li,{children:"Improves SSR by reducing server load."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"use-client-directive",children:"Use Client Directive"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"'use client'"})," ",(0,s.jsx)(n.a,{href:"https://demystifying-rsc.vercel.app/client-components/no-ssr",children:"directive"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"It tells the bundler to output this code as a separate file with its own url\nso it can be loaded lazily in the browser."}),"\n",(0,s.jsx)(n.li,{children:"It tells the compiler when this code is needed,\nit should add code to load the js file for this component."}),"\n",(0,s.jsx)(n.li,{children:"It tells RSC that the Virtual DOM it generates\nshould contain a placeholder reference to this Client Component,\nrather than the component's html output."}),"\n",(0,s.jsxs)(n.li,{children:["It still runs on the server, ",(0,s.jsx)(n.code,{children:"'use client'"})," does not disable SSR."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Use Client Directive",src:t(7845).A+"",title:"Use Client Directive",width:"798",height:"281"})}),"\n",(0,s.jsx)(n.h4,{id:"react-server-components-composition-pattern",children:"React Server Components Composition Pattern"}),"\n",(0,s.jsxs)(n.p,{children:["Server Components and Client Components are ",(0,s.jsx)(n.a,{href:"https://nextjs.org/docs/app/building-your-application/rendering/composition-patterns#when-to-use-server-and-client-components",children:"different"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Features"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Server"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Client"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Backend Resources"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"o"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"x"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Server Sensitive Data"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"o"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"x"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Event Handlers"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"x"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"o"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"State and Lifecycle Effects"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"x"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"o"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Browser-only APIs"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"x"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"o"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Client Boundaries:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"All of components within client boundary are implicitly converted to Client Components.\n(Once the component became client-side, its nested components are client-side too)."}),"\n",(0,s.jsx)(n.li,{children:"Client Components can only import other Client Components."}),"\n",(0,s.jsx)(n.li,{children:"Moving Client Components down the tree, to reduce Client JavaScript bundle size."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.joshwcomeau.com/react/server-components/#boundaries-6",children:(0,s.jsx)(n.img,{alt:"Client Boundaries",src:t(1622).A+"",width:"1126",height:"1134"})})}),"\n",(0,s.jsxs)(n.p,{children:["You can't import Server Components inside Client Components directly,\nbut can passing Server Components to Client Components as ",(0,s.jsx)(n.code,{children:"Props"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// app/ColorProvider.tsx\n'use client'\n\nimport { DARK_COLORS, LIGHT_COLORS } from '@/constants'\n\nexport default function ColorProvider({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const [colorTheme, setColorTheme] = React.useState('light')\n  const colorVariables = colorTheme === 'light' ? LIGHT_COLORS : DARK_COLORS\n\n  return <body style={colorVariables}>{children}</body>\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// app/page.tsx\nimport ColorProvider from './ColorProvider'\nimport ServerComponent from './ServerComponent'\n\n// Pages in Next.js are Server Components by default\nexport default function Page() {\n  return (\n    <ColorProvider>\n      <ServerComponent />\n    </ColorProvider>\n  )\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://nextjs.org/docs/app/building-your-application/rendering/composition-patterns#advice-for-library-authors",children:"3rd party Client Components"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Wrap them into a wrapper component using ",(0,s.jsx)(n.code,{children:"'use client'"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Library authors ",(0,s.jsxs)(n.a,{href:"https://github.com/ant-design/antd-tools/blob/050a91cfeaba87c2892bf19d721665a3770ebde0/lib/gulpfile.js#L197-L213",children:["add ",(0,s.jsx)(n.code,{children:"'use client'"})," to components"]}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"react-server-components-reference",children:"React Server Components Reference"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["React Server Components in ",(0,s.jsx)(n.a,{href:"https://vercel.com/blog/understanding-react-server-components",children:"Next.js"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["React Server Components ",(0,s.jsx)(n.a,{href:"https://www.joshwcomeau.com/react/server-components",children:"introduction"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Demystifying React Server Components ",(0,s.jsx)(n.a,{href:"https://demystifying-rsc.vercel.app",children:"series"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["React Server Components ",(0,s.jsx)(n.a,{href:"https://www.alvar.dev/blog/creating-devtools-for-react-server-components",children:"devtools"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"react-form",children:"React Form"}),"\n",(0,s.jsx)(n.h4,{id:"form-loading-state",children:"Form Loading State"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"useActionState"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useActionState } from 'react'\n\nexport default function App() {\n  const sendMessage = async (_actionState: null, formData: FormData) => {\n    const message = formData.get('message')\n\n    console.log(message)\n\n    // Artificial delay to simulate async operation\n    await new Promise(resolve => setTimeout(resolve, 2000))\n\n    // TODO: do call (e.g. API call) to send the message\n\n    return null\n  }\n\n  const [_actionState, action, isPending] = useActionState(sendMessage, null)\n\n  return (\n    <form action={action}>\n      <label htmlFor=\"message\">Message:</label>\n      <input name=\"message\" id=\"message\" />\n\n      <button type=\"submit\" disabled={isPending}>\n        {isPending ? 'Sending ...' : 'Send'}\n      </button>\n    </form>\n  )\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"useFormStatus"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useFormStatus } from 'react-dom'\n\nfunction SubmitButton() {\n  const { pending } = useFormStatus()\n\n  return (\n    <button type=\"submit\" disabled={pending}>\n      {pending ? 'Sending ...' : 'Send'}\n    </button>\n  )\n}\n\nexport default function App() {\n  const sendMessage = async (formData: FormData) => {\n    const message = formData.get('message')\n\n    console.log(message)\n\n    // Artificial delay to simulate async operation\n    await new Promise(resolve => setTimeout(resolve, 2000))\n\n    // TODO: do call (e.g. API call) to send the message\n  }\n\n  return (\n    <form action={sendMessage}>\n      <label htmlFor=\"message\">Message:</label>\n      <input name=\"message\" id=\"message\" />\n\n      <SubmitButton />\n    </form>\n  )\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"useTransition"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useTransition } from 'react'\n\nexport default function App() {\n  const sendMessage = async (formData: FormData) => {\n    const message = formData.get('message')\n\n    console.log(message)\n\n    // Artificial delay to simulate async operation\n    await new Promise(resolve => setTimeout(resolve, 2000))\n\n    // TODO: do call (e.g. API call) to send the message\n  }\n\n  const [isPending, startTransition] = useTransition()\n\n  const action = (formData: FormData) => {\n    startTransition(async () => {\n      await sendMessage(formData)\n    })\n  }\n\n  return (\n    <form action={action}>\n      <label htmlFor=\"message\">Message:</label>\n      <input name=\"message\" id=\"message\" />\n\n      <button type=\"submit\" disabled={isPending}>\n        {isPending ? 'Sending ...' : 'Send'}\n      </button>\n    </form>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-compiler",children:"React Compiler"}),"\n",(0,s.jsxs)(n.p,{children:["React compiler use ",(0,s.jsx)(n.code,{children:"useMemoCache"})," hook to\nmemoize variables, handlers and elements automatically."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export default function Hello() {\n  const name = 'Jack'\n\n  return (\n    <div>\n      <p>\n        Hi:\n        {name}\n      </p>\n      <strong>Static Content</strong>\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Compiles to:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { unstable_useMemoCache as useMemoCache } from 'react'\n\nexport default function Hello() {\n  const $ = useMemoCache(1)\n  let t0\n\n  if ($[0] === Symbol.for('react.memo_cache_sentinel')) {\n    t0 = __jsx(\n      'div',\n      null,\n      __jsx('p', null, 'Hi:', 'Jack'),\n      __jsx('strong', null, 'Static Content')\n    )\n    $[0] = t0\n  } else {\n    t0 = $[0]\n  }\n\n  return t0\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"react-performance",children:"React Performance"}),"\n",(0,s.jsx)(n.h3,{id:"react-performance-mental-model",children:"React Performance Mental Model"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"3L"})," - Less render times, less render calculations, less render nodes:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u6570\u636e: \u5229\u7528\u7f13\u5b58 (\u590d\u7528\u6570\u636e\u4e0e VNode), \u51cf\u5c11 re-render \u6b21\u6570."}),"\n",(0,s.jsx)(n.li,{children:"\u8ba1\u7b97: \u7cbe\u786e\u5224\u65ad\u66f4\u65b0\u65f6\u673a\u548c\u8303\u56f4, \u51cf\u5c11\u8ba1\u7b97\u91cf, \u4f18\u5316 render \u8fc7\u7a0b."}),"\n",(0,s.jsx)(n.li,{children:"\u6e32\u67d3: \u7cbe\u7ec6\u7c92\u5ea6, \u964d\u4f4e\u7ec4\u4ef6\u590d\u6742\u5ea6, \u51cf\u5c11 DOM \u6570\u91cf."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"react-performance-best-practice",children:"React Performance Best Practice"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"key"})," correctly."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.useMemo"})," and ",(0,s.jsx)(n.code,{children:"React.useCallback"})," (no anonymous functions)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"shouldComponentUpdate"}),"/",(0,s.jsx)(n.code,{children:"React.memo"}),"/",(0,s.jsx)(n.code,{children:"React.PureComponent"}),":\n",(0,s.jsx)(n.strong,{children:"shallow compare"})," on components\nto prevent unnecessary re-rendering ",(0,s.jsx)(n.strong,{children:"caused by parent components"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Lazy loading components (",(0,s.jsx)(n.code,{children:"React.lazy"})," and ",(0,s.jsx)(n.code,{children:"React.Suspense"}),")."]}),"\n",(0,s.jsx)(n.li,{children:"Virtualized Lists."}),"\n",(0,s.jsx)(n.li,{children:"Stateless component: less props, less state, less nest (HOC or render props)."}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Immutable.js"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Isomorphic rendering."}),"\n",(0,s.jsx)(n.li,{children:"Webpack bundle analyzer."}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://houssein.me/progressive-react",children:"Progressive React"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"useDeferredValue"}),"/",(0,s.jsx)(n.code,{children:"useTransition"})," hook for debounce concurrent features."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"re-rendering-problem",children:"Re-rendering Problem"}),"\n",(0,s.jsxs)(n.p,{children:["React will ",(0,s.jsxs)(n.a,{href:"https://blog.isquaredsoftware.com/2020/05/blogged-answers-a-mostly-complete-guide-to-react-rendering-behavior",children:["recursively render ",(0,s.jsx)(n.strong,{children:"all child components"})]}),"\ninside of it (because ",(0,s.jsx)(n.code,{children:"props.children"})," is always a new reference when parent re-rendering)."]}),"\n",(0,s.jsxs)(n.p,{children:["The major difference is that\n",(0,s.jsx)(n.code,{children:"React.Component"})," doesn\u2019t implement ",(0,s.jsx)(n.code,{children:"shouldComponentUpdate()"})," lifecycle method\nwhile ",(0,s.jsx)(n.code,{children:"React.PureComponent"})," implements it."]}),"\n",(0,s.jsxs)(n.p,{children:["If component ",(0,s.jsx)(n.code,{children:"render()"})," function renders\nthe same result given the same props and state,\nuse ",(0,s.jsx)(n.code,{children:"React.PureComponent"}),"/",(0,s.jsx)(n.code,{children:"React.memo"})," for a performance boost in some cases."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { PureComponent } from 'react'\n\nfunction Unstable({ value }: { value: string }) {\n  console.log(' Rendered Unstable component ')\n\n  return (\n    <div>\n      <p>{value}</p>\n    </div>\n  )\n}\n\nclass App extends PureComponent {\n  state = {\n    value: 1,\n  }\n\n  componentDidMount() {\n    setInterval(() => {\n      this.setState(() => {\n        return { value: 1 }\n      })\n    }, 2000)\n  }\n\n  render() {\n    return (\n      <div>\n        <Unstable value={this.state.value} />\n      </div>\n    )\n  }\n}\n\nexport default App\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { Component } from 'react'\n\nfunction Unstable({ value }: { value: string }) {\n  console.log(' Rendered this component ')\n\n  return (\n    <div>\n      <p>{value}</p>\n    </div>\n  )\n}\n\nconst MemoedUnstable = React.memo(Unstable)\n\nclass App extends Component {\n  state = {\n    value: 1,\n  }\n\n  componentDidMount() {\n    setInterval(() => {\n      this.setState(() => {\n        return { value: 1 }\n      })\n    }, 2000)\n  }\n\n  render() {\n    return (\n      <div>\n        <MemoedUnstable value={this.state.value} />\n      </div>\n    )\n  }\n}\n\nexport default App\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://www.developerway.com/posts/react-re-renders-guide",children:"Prevent useless re-rendering"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"shouldComponentUpdate"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.PureComponent"}),": ",(0,s.jsx)(n.strong,{children:"shallow compare"})," diff."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"React.memo"}),": ",(0,s.jsx)(n.strong,{children:"shallow compare"})," diff,\nto memorize stateless components that ",(0,s.jsx)(n.strong,{children:"props not changed often"}),",\n",(0,s.jsx)(n.code,{children:"export default React.memo(MyComponent, areEqual)"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Memorized values."}),"\n",(0,s.jsx)(n.li,{children:"Memorized event handlers."}),"\n",(0,s.jsxs)(n.li,{children:["\u5728\u7528 ",(0,s.jsx)(n.code,{children:"memo"})," \u6216\u8005 ",(0,s.jsx)(n.code,{children:"useMemo"})," \u505a\u4f18\u5316\u524d\n(",(0,s.jsx)(n.a,{href:"https://overreacted.io/before-you-memo",children:"Before You Memo"}),"),\n\u53ef\u4ee5\u4ece\u4e0d\u53d8\u7684\u90e8\u5206\u91cc\u5206\u5272\u51fa\u53d8\u5316\u7684\u90e8\u5206.\n\u901a\u8fc7\u5c06\u53d8\u5316\u90e8\u5206\u7684 ",(0,s.jsx)(n.code,{children:"state"})," \u5411\u4e0b\u79fb\u52a8\u4ece\u800c\u62bd\u8c61\u51fa\u53d8\u5316\u7684\u5b50\u7ec4\u4ef6,\n\u6216\u8005\u5c06",(0,s.jsx)(n.strong,{children:"\u53d8\u5316\u5185\u5bb9\u63d0\u5347"})," (",(0,s.jsx)(n.strong,{children:"Lift Up"}),") \u5230\u7236\u7ec4\u4ef6\u4ece\u800c\u5c06\u4e0d\u53d8\u90e8\u5206\u72ec\u7acb\u51fa\u6765:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Composition pattern, composite immutable/expensive component:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sibling component."}),"\n",(0,s.jsxs)(n.li,{children:["Props component: ",(0,s.jsx)(n.code,{children:"props.children"}),"/",(0,s.jsx)(n.code,{children:"props.renderProps"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Make reference values become immutable:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Styles (",(0,s.jsx)(n.code,{children:"object"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["Event callbacks (",(0,s.jsx)(n.code,{children:"function"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@babel/plugin-transform-react-constant-elements",children:"Babel plugin"}),"\nto hoist reference values."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// BAD\n// When <App> re-rendering, <ExpensiveTree> will re-rendering:\n// <ExpensiveTree /> is actually <ExpensiveTree props={}>.\n// Every time <App> re-rendering will pass a new `{}` reference to <ExpensiveTree>.\nimport { useState } from 'react'\n\nexport default function App() {\n  const [color, setColor] = useState('red')\n\n  return (\n    <div>\n      <input value={color} onChange={e => setColor(e.target.value)} />\n      <p style={{ color }}>Hello, world!</p>\n      <ExpensiveTree />\n    </div>\n  )\n}\n\nfunction ExpensiveTree() {\n  const now = performance.now()\n\n  while (performance.now() - now < 100) {\n    // Artificial delay -- do nothing for 100ms\n  }\n\n  return <p>I am a very slow component tree.</p>\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Composite sibling component:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// GOOD\n// <ExpensiveTree> will not re-rendering.\nexport default function App() {\n  return (\n    <>\n      <Form />\n      <ExpensiveTree />\n    </>\n  )\n}\n\nfunction Form() {\n  const [color, setColor] = useState('red')\n  return (\n    <>\n      <input value={color} onChange={e => setColor(e.target.value)} />\n      <p style={{ color }}>Hello, world!</p>\n    </>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Composite props component:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// GOOD\n// <ExpensiveTree> will not re-rendering.\nexport default function App() {\n  return (\n    <ColorPicker>\n      <p>Hello, world!</p>\n      <ExpensiveTree />\n    </ColorPicker>\n  )\n}\n\nfunction ColorPicker({ children }: { children: ReactElement }) {\n  const [color, setColor] = useState('red')\n  return (\n    <div style={{ color }}>\n      <input value={color} onChange={e => setColor(e.target.value)} />\n      {children}\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export default function Parent({\n  children,\n  lastChild,\n}: {\n  children: ReactElement\n  lastChild: ReactElement\n}) {\n  return (\n    <div className=\"parent\">\n      <ChildA />\n      {' '}\n      {/* Only ChildA gets re-rendered */}\n      {children}\n      {' '}\n      {/* Bailed out */}\n      {lastChild}\n      {' '}\n      {/* Bailed out */}\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Immutable objects:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// BAD\nexport default function App1(items) {\n  return <BigListComponent style={{ width: '100%' }} items={items} />\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// GOOD\nconst bigListStyle = { width: '100%' }\n\nexport default function App2(items) {\n  return <BigListComponent style={bigListStyle} items={items} />\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Immutable functions:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// BAD: Inline function\nexport default function App1(items) {\n  return <BigListComponent onClick={() => dispatchEvent()} />\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// GOOD: Reference to a function\nconst clickHandler = () => dispatchEvent()\n\nexport default function App2(items) {\n  return <BigListComponent onClick={clickHandler} />\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"code-splitting",children:"Code Splitting"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { Formik } from 'formik'\nimport { Component } from 'react'\nimport * as Yup from 'yup'\n\nconst formValidator = Yup.object().shape({\n  /* ... */\n})\n\nexport default class Form extends Component {\n  render() {\n    return <Formik validationSchema={formValidator}>{/* ... */}</Formik>\n  }\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { Component } from 'react'\n\nexport default class App extends Component {\n  constructor() {\n    super()\n\n    this.state = {\n      Form: undefined,\n    }\n  }\n\n  render() {\n    const { Form } = this.state\n\n    return (\n      <div className=\"app\">\n        {Form\n          ? (\n              <Form />\n            )\n          : (\n              <button type=\"button\" onClick={this.showForm}>\n                Show form\n              </button>\n            )}\n      </div>\n    )\n  }\n\n  showForm = async () => {\n    const { default: Form } = await import('./Form')\n    this.setState({ Form })\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"react-testing",children:"React Testing"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://medium.com/codeclan/testing-react-with-jest-and-enzyme-20505fec4675",children:"Jest and Enzyme snapshots testing"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/cypress-io/cypress",children:"Cypress: E2E testing framework"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://storybook.js.org/blog/how-to-automate-ui-tests-with-github-actions",children:"GitHub CI for UI testing"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://www.robinwieruch.de/react-testing-tutorial",children:"React testing tutorial"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"shallow-renderer",children:"Shallow Renderer"}),"\n",(0,s.jsx)(n.p,{children:"\u6d45\u5c42\u6e32\u67d3 (Shallow Renderer) \u5bf9\u4e8e\u5728 React \u4e2d\u7f16\u5199\u5355\u5143\u6d4b\u8bd5\u7528\u4f8b\u5f88\u6709\u7528.\n\u5b83\u5141\u8bb8\u6e32\u67d3\u4e00\u4e2a\u4e00\u7ea7\u6df1\u7684\u7ec4\u4ef6\u5e76\u65ad\u8a00\u5176\u6e32\u67d3\u65b9\u6cd5\u8fd4\u56de\u7684\u5185\u5bb9, \u800c\u4e0d\u5fc5\u62c5\u5fc3\u5b50\u7ec4\u4ef6\u672a\u5b9e\u4f8b\u5316\u6216\u6e32\u67d3."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'export default function MyComponent() {\n  return (\n    <div>\n      <span className="heading">Title</span>\n      <span className="description">Description</span>\n    </div>\n  )\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import ShallowRenderer from \'react-test-renderer/shallow\'\n\nconst renderer = new ShallowRenderer()\nrenderer.render(<MyComponent />)\n\nconst result = renderer.getRenderOutput()\n\nexpect(result.type).toBe(\'div\')\nexpect(result.props.children).toEqual([\n  <span key="heading" className="heading">\n    Title\n  </span>,\n  <span key="description" className="description">\n    Description\n  </span>,\n])\n'})}),"\n",(0,s.jsx)(n.h3,{id:"test-renderer",children:"Test Renderer"}),"\n",(0,s.jsx)(n.p,{children:"\u6d4b\u8bd5\u6e32\u67d3\u5668 (Test Renderer) \u53ef\u7528\u4e8e\u5c06\u7ec4\u4ef6\u6e32\u67d3\u4e3a\u7eaf JavaScript \u5bf9\u8c61,\n\u800c\u4e0d\u4f9d\u8d56\u4e8e DOM \u6216\u539f\u751f\u79fb\u52a8\u73af\u5883.\n\u8be5\u5305\u53ef\u4ee5\u8f7b\u677e\u83b7\u53d6\u7531 ReactDOM \u6216 React Native \u5e73\u53f0\u6240\u6e32\u67d3\u7684\u89c6\u56fe\u5c42\u6b21\u7ed3\u6784 (\u7c7b\u4f3c\u4e8e DOM \u6811) \u7684\u5feb\u7167,\n\u800c\u65e0\u9700\u4f7f\u7528\u6d4f\u89c8\u5668\u6216 jsdom."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import TestRenderer from 'react-test-renderer'\n\nexport default function Link({\n  page,\n  children,\n}: {\n  page: string\n  children: ReactElement\n}) {\n  return <a href={page}>{children}</a>\n}\n\nconst testRenderer = TestRenderer.create(\n  <Link page=\"https://www.facebook.com/\">Facebook</Link>,\n)\n\nconsole.log(testRenderer.toJSON())\n// {\n//   type: 'a',\n//   props: { href: 'https://www.facebook.com/' },\n//   children: [ 'Facebook' ]\n// }\n"})}),"\n",(0,s.jsx)(n.h3,{id:"enzyme-mindset",children:"Enzyme Mindset"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"React Internals"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Enzyme tests ultimately prevent from modifying component without changing the test."}),"\n",(0,s.jsx)(n.li,{children:"Enzyme tests slowed down development speed and productivity,\nsince every small change requires rewriting some part of tests."}),"\n",(0,s.jsx)(n.li,{children:"Enzyme provide access the DOM of the component.\nSo using enzyme,\nwe are not bound to test the internals\nbut we can test the DOM too."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm i -D enzyme enzyme-adapter-react-16 @types/enzyme\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { configure, shallow } from 'enzyme'\nimport Adapter from 'enzyme-adapter-react-16'\nimport { DataTable } from './components'\n\nconfigure({ adapter: new Adapter() })\n\ndescribe(() => {\n  it('renders in table rows based on provided columns', () => {\n    const cols = [\n      { header: 'ID', name: 'id' },\n      { header: 'Name', name: 'name' },\n      { header: 'Email', name: 'email' },\n    ]\n    const data = [\n      { id: 5, name: 'John', email: 'john@example.com' },\n      { id: 6, name: 'Liam', email: 'liam@example.com' },\n      { id: 7, name: 'Maya', email: 'maya@example.com', someTest: 10 },\n      {\n        id: 8,\n        name: 'Oliver',\n        email: 'oliver@example.com',\n        hello: 'hello world',\n      },\n      { id: 25, name: 'Amelia', email: 'amelia@example.com' },\n    ]\n\n    // Shallow render Data Table\n    const container = shallow(<DataTable data={data} cols={cols} />)\n\n    // There should be ONLY 1 table element\n    const table = container.find('table')\n    expect(table).toHaveLength(1)\n\n    // The table should have ONLY 1 thead element\n    const thead = table.find('thead')\n    expect(thead).toHaveLength(1)\n\n    // The number of th tags should be equal to number of columns\n    const headers = thead.find('th')\n    expect(headers).toHaveLength(cols.length)\n    // Each th tag text should equal to column header\n    headers.forEach((th, idx) => {\n      expect(th.text()).toEqual(cols[idx].header)\n    })\n\n    // The table should have ONLY 1 tbody tag\n    const tbody = table.find('tbody')\n    expect(tbody).toHaveLength(1)\n\n    // tbody tag should have the same number of tr tags as data rows\n    const rows = tbody.find('tr')\n    expect(rows).toHaveLength(data.length)\n    // Loop through each row and check the content\n    rows.forEach((tr, rowIndex) => {\n      const cells = tr.find('td')\n      expect(cells).toHaveLength(cols.length)\n      expect(cells.at(0).text()).toEqual(data[rowIndex].id)\n      expect(cells.at(1).text()).toEqual(data[rowIndex].name)\n      expect(cells.at(2).text()).toEqual(data[rowIndex].email)\n    })\n  })\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-testing-library-mindset",children:"React Testing Library Mindset"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"User behavior"})," and ",(0,s.jsx)(n.code,{children:"A11Y"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Rather than tests focusing on the ",(0,s.jsx)(n.strong,{children:"implementation"})," (props and state) (Enzyme),\ntests are more focused on ",(0,s.jsx)(n.strong,{children:"user behavior"})," (react-testing-library)."]}),"\n",(0,s.jsxs)(n.li,{children:["React testing library enforce to\nuse ",(0,s.jsx)(n.code,{children:"placeholder"}),", ",(0,s.jsx)(n.code,{children:"aria"}),", ",(0,s.jsx)(n.code,{children:"test-ids"})," to access elements,\nbenefiting for a11y components\n(write tests > build accessible components > tests pass)."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"But sometimes may need to test the internals of the component\nwhen just testing the DOM from user\u2019s perspective may not make sense."}),"\n",(0,s.jsx)(n.p,{children:"So depending on the use cases,\nwe can choose between these two libraries\nor just install them all for individual use cases."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Enzyme for Internal API, React testing library for user behavior."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"react-testing-library-installation",children:"React Testing Library Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm i -D @testing-library/react @testing-library/dom @testing-library/jest-dom @testing-library/user-event\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-testing-library-basis",children:"React Testing Library Basis"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"/**\n * render: render the component\n * screen: finding elements along with user\n */\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport { Checkbox, Welcome } from './'\n\ndescribe('Welcome should', () => {\n  test('has correct welcome message', () => {\n    render(<Welcome firstName=\"John\" lastName=\"Doe\" />)\n    expect(screen.getByRole('heading')).toHaveTextContent('Welcome, John Doe')\n  })\n\n  test('has correct input value', () => {\n    render(<Welcome firstName=\"John\" lastName=\"Doe\" />)\n    expect(screen.getByRole('form')).toHaveFormValues({\n      firstName: 'John',\n      lastName: 'Doe',\n    })\n  })\n\n  test('handles click correctly', () => {\n    render(<Checkbox />)\n    userEvent.click(screen.getByText('Check'))\n    expect(screen.getByLabelText('Check')).toBeChecked()\n  })\n})\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { fireEvent, render, wait } from '@testing-library/react'\nimport { api } from './api'\nimport { App } from './App'\n\n// Normally you can mock entire module using jest.mock('./api);\nconst mockCreateItem = (api.createItem = jest.fn())\n\ntest('allows users to add items to their list', async () => {\n  const todoText = 'Learn spanish'\n  mockCreateItem.mockResolvedValueOnce({ id: 123, text: todoText })\n\n  const { getByText, getByLabelText } = render(<App />)\n\n  const input = getByLabelText('What needs to be done?')\n  const button = getByText('Add #1')\n\n  fireEvent.change(input, { target: { value: todoText } })\n  fireEvent.click(button)\n\n  await wait(() => getByText(todoText))\n\n  expect(mockCreateItem).toBeCalledTimes(1)\n  expect(mockCreateItem).toBeCalledWith(\n    '/items',\n    expect.objectContaining({ text: todoText }),\n  )\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-testing-library-events",children:"React Testing Library Events"}),"\n",(0,s.jsx)(n.h4,{id:"fireevent-api",children:"FireEvent API"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"fireEvent"})," trigger DOM event: ",(0,s.jsx)(n.code,{children:"fireEvent(node, event)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"fireEvent.*"})," helpers for default event types:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"click fireEvent.click(node)."}),"\n",(0,s.jsxs)(n.li,{children:["See ",(0,s.jsx)(n.a,{href:"https://github.com/testing-library/dom-testing-library/blob/main/src/event-map.js",children:"all supported events"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"userevent-api",children:"UserEvent API"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://testing-library.com/docs/ecosystem-user-event",children:"User Event"}),"\nprovides more advanced simulation of browser interactions\nthan the built-in ",(0,s.jsx)(n.code,{children:"fireEvent method"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm i -D @testing-library/user-event @testing-library/dom\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\n\ntest('click', () => {\n  render(\n    <div>\n      <label htmlFor=\"checkbox\">Check</label>\n      <input id=\"checkbox\" type=\"checkbox\" />\n    </div>,\n  )\n\n  userEvent.click(screen.getByText('Check'))\n  expect(screen.getByLabelText('Check')).toBeChecked()\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-hooks-testing-library",children:"React Hooks Testing Library"}),"\n",(0,s.jsx)(n.h4,{id:"basic-hook-testing",children:"Basic Hook Testing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { useCallback, useState } from 'react'\n\nexport default function useCounter(initialValue = 0) {\n  const [count, setCount] = useState(initialValue)\n  const increment = useCallback(() => setCount(x => x + 1), [])\n  const reset = useCallback(() => setCount(initialValue), [initialValue])\n  return { count, increment, reset }\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { act, renderHook } from '@testing-library/react-hooks'\nimport useCounter from './useCounter'\n\ntest('should reset counter to updated initial value', () => {\n  const { result, rerender } = renderHook(\n    ({ initialValue }) => useCounter(initialValue),\n    {\n      initialProps: { initialValue: 0 },\n    },\n  )\n\n  rerender({ initialValue: 10 })\n\n  act(() => {\n    result.current.reset()\n  })\n\n  expect(result.current.count).toBe(10)\n})\n"})}),"\n",(0,s.jsx)(n.h4,{id:"async-hook-testing",children:"Async Hook Testing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { useCallback, useContext, useState } from 'react'\n\nexport default function useCounter(initialValue = 0) {\n  const [count, setCount] = useState(initialValue)\n  const step = useContext(CounterStepContext)\n  const increment = useCallback(() => setCount(x => x + step), [step])\n  const incrementAsync = useCallback(\n    () => setTimeout(increment, 100),\n    [increment],\n  )\n  const reset = useCallback(() => setCount(initialValue), [initialValue])\n  return { count, increment, incrementAsync, reset }\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { renderHook } from '@testing-library/react-hooks'\nimport useCounter from './useCounter'\n\ntest('should increment counter after delay', async () => {\n  const { result, waitForNextUpdate } = renderHook(() => useCounter())\n  result.current.incrementAsync()\n  await waitForNextUpdate()\n  expect(result.current.count).toBe(1)\n})\n"})}),"\n",(0,s.jsx)(n.h4,{id:"error-hook-testing",children:"Error Hook Testing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { useCallback, useContext, useState } from 'react'\n\nexport default function useCounter(initialValue = 0) {\n  const [count, setCount] = useState(initialValue)\n  const step = useContext(CounterStepContext)\n  const increment = useCallback(() => setCount(x => x + step), [step])\n  const incrementAsync = useCallback(\n    () => setTimeout(increment, 100),\n    [increment],\n  )\n  const reset = useCallback(() => setCount(initialValue), [initialValue])\n\n  if (count > 9000)\n    throw new Error('It\\'s over 9000!')\n\n  return { count, increment, incrementAsync, reset }\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { act, renderHook } from '@testing-library/react-hooks'\nimport { useCounter } from './useCounter'\n\nit('should throw when over 9000', () => {\n  const { result } = renderHook(() => useCounter(9000))\n\n  act(() => {\n    result.current.increment()\n  })\n\n  expect(result.error).toEqual(new Error('It\\'s over 9000!'))\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-testing-library-api",children:"React Testing Library API"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"getByXXX"})," queries: common use case."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"queryByXXX"})," queries: not throw error when nothing match."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"findByXXX"})," queries: ",(0,s.jsx)(n.code,{children:"getBy"})," queries + ",(0,s.jsx)(n.code,{children:"waitFor"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"API"}),(0,s.jsx)(n.th,{children:"No Match"}),(0,s.jsx)(n.th,{children:"1 Match"}),(0,s.jsx)(n.th,{children:"1+ Match"}),(0,s.jsx)(n.th,{children:"Await"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"getBy"}),(0,s.jsx)(n.td,{children:"throw"}),(0,s.jsx)(n.td,{children:"return"}),(0,s.jsx)(n.td,{children:"throw"}),(0,s.jsx)(n.td,{children:"No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"queryBy"}),(0,s.jsx)(n.td,{children:"null"}),(0,s.jsx)(n.td,{children:"return"}),(0,s.jsx)(n.td,{children:"throw"}),(0,s.jsx)(n.td,{children:"No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"findBy"}),(0,s.jsx)(n.td,{children:"throw"}),(0,s.jsx)(n.td,{children:"return"}),(0,s.jsx)(n.td,{children:"throw"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"getAllBy"}),(0,s.jsx)(n.td,{children:"throw"}),(0,s.jsx)(n.td,{children:"array"}),(0,s.jsx)(n.td,{children:"array"}),(0,s.jsx)(n.td,{children:"No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"queryAllBy"}),(0,s.jsx)(n.td,{children:"[]"}),(0,s.jsx)(n.td,{children:"array"}),(0,s.jsx)(n.td,{children:"array"}),(0,s.jsx)(n.td,{children:"No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"findAllBy"}),(0,s.jsx)(n.td,{children:"throw"}),(0,s.jsx)(n.td,{children:"array"}),(0,s.jsx)(n.td,{children:"array"}),(0,s.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport TransactionCreateStepTwo from './TransactionCreateStepTwo'\n\ntest('if amount and note is entered, pay button becomes enabled', async () => {\n  render(\n    <TransactionCreateStepTwo sender={{ id: '5' }} receiver={{ id: '5' }} />,\n  )\n\n  expect(await screen.findByRole('button', { name: /pay/i })).toBeDisabled()\n\n  userEvent.type(screen.getByPlaceholderText(/amount/i), '50')\n  userEvent.type(screen.getByPlaceholderText(/add a note/i), 'dinner')\n  expect(await screen.findByRole('button', { name: /pay/i })).toBeEnabled()\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"react-testing-library-reference",children:"React Testing Library Reference"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/testing-library/jest-dom",children:"Custom Jest DOM Matchers"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://testing-library.com/docs/react-testing-library/cheatsheet",children:"React testing library cheat sheet"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"react-style-guide",children:"React Style Guide"}),"\n",(0,s.jsx)(n.h3,{id:"naming-style",children:"Naming Style"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["use PascalCase for ",(0,s.jsx)(n.code,{children:".jsx"})," and component constructor"]}),"\n",(0,s.jsx)(n.li,{children:"use camelCase for component instance reference"}),"\n",(0,s.jsx)(n.li,{children:"use camelCase for props name"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// bad\nimport reservationCard from './ReservationCard'\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// good\nimport ReservationCard from './ReservationCard'\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// bad\nconst ReservationItem = <ReservationCard />\n\n// good\nconst reservationItem = <ReservationCard />\n\nexport default function App() {\n  return <div>App</div>\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Setting displayName for HOC:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// bad\nfunction withFoo(WrappedComponent) {\n  return function WithFoo(props) {\n    return <WrappedComponent {...props} foo />\n  }\n}\n\n// good\nfunction withFoo(WrappedComponent) {\n  function WithFoo(props) {\n    return <WrappedComponent {...props} foo />\n  }\n\n  const wrappedComponentName\n    = WrappedComponent.displayName || WrappedComponent.name || 'Component'\n\n  WithFoo.displayName = `withFoo(${wrappedComponentName})`\n  return WithFoo\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"props-style",children:"Props Style"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["use ",(0,s.jsx)(n.code,{children:"prop"})," not ",(0,s.jsx)(n.code,{children:"prop={true}"})]}),"\n",(0,s.jsx)(n.li,{children:"filter out unnecessary props"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// bad\nclass Component {\n  render() {\n    const { irrelevantProp, ...relevantProps } = this.props\n    return <WrappedComponent {...this.props} />\n  }\n}\n\n// good\nclass Component {\n  render() {\n    const { irrelevantProp, ...relevantProps } = this.props\n    return <WrappedComponent {...relevantProps} />\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"refs-style",children:"Refs Style"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"use callback refs"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'// bad\n// deprecated\nexport default function Component() {\n  return <Foo ref="myRef" />\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// good\nexport default function Component() {\n  return (\n    <Foo\n      ref={(ref) => {\n        this.myRef = ref\n      }}\n    />\n  )\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"alignment-style",children:"Alignment Style"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'// good\nconst Component = <Foo superLongParam="bar" anotherSuperLongParam="baz" />\n\n// if props fit in one line then keep it on the same line\nconst Component = <Foo bar="bar" />\n\n// children get indented normally\nconst Component = (\n  <Foo superLongParam="bar" anotherSuperLongParam="baz">\n    <Bar />\n  </Foo>\n)\n\n// good\nconst Component = <div>{showButton && <Button />}</div>\n\nexport default function App() {\n  return <Component />\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"quotes-style",children:"Quotes Style"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:'"'})," for JSX attributes, use ",(0,s.jsx)(n.code,{children:"'"})," for all other JS:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// bad\n// <Foo bar='bar' />\n\n// good\nconst Foo = <Foo bar=\"bar\" />\n\n// bad\n// <Foo style={{ left: \"20px\" }} />\n\n// good\nconst Bar = <Foo style={{ left: '20px' }} />\n\nexport default function App() {\n  return <Foo />\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"spacing-style",children:"Spacing Style"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A single space in self-closing tag."}),"\n",(0,s.jsx)(n.li,{children:"No pad JSX curly spaces>."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// bad\n// <Foo/>\n\n// very bad\n// <Foo                 />\n\n// good\nconst Foo = <Foo />\n\n// bad\n// <Foo bar={ baz } />\n\n// good\nconst Foo = <Foo bar={baz} />\n\nexport default function App() {\n  return <Foo />\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ordering-of-class-component",children:"Ordering of Class Component"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"optional static methods"}),"\n",(0,s.jsx)(n.li,{children:"constructor"}),"\n",(0,s.jsx)(n.li,{children:"getChildContext"}),"\n",(0,s.jsx)(n.li,{children:"getDerivedStateFromProps"}),"\n",(0,s.jsx)(n.li,{children:"componentDidMount"}),"\n",(0,s.jsx)(n.li,{children:"getDerivedStateFromProps"}),"\n",(0,s.jsx)(n.li,{children:"shouldComponentUpdate"}),"\n",(0,s.jsx)(n.li,{children:"getSnapshotBeforeUpdate"}),"\n",(0,s.jsx)(n.li,{children:"componentDidUpdate"}),"\n",(0,s.jsx)(n.li,{children:"componentWillUnmount"}),"\n",(0,s.jsx)(n.li,{children:"clickHandlers or eventHandlers like onClickSubmit() or onChangeDescription()"}),"\n",(0,s.jsx)(n.li,{children:"getter methods for render like getSelectReason() or getFooterContent()"}),"\n",(0,s.jsx)(n.li,{children:"optional render methods like renderNavigation() or renderProfilePicture()"}),"\n",(0,s.jsx)(n.li,{children:"render"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"project-structure-best-practice",children:"Project Structure Best Practice"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"components"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u6a21\u5757\u5316\u9694\u79bb, \u6700\u5c0f\u4f9d\u8d56, \u6d4b\u8bd5\u53cb\u597d."}),"\n",(0,s.jsx)(n.li,{children:"\u6bcf\u4e2a\u7ec4\u4ef6\u6587\u4ef6\u5939\u5305\u542b\u5927\u5199\u5e76\u4e0e\u6587\u4ef6\u540c\u540d\u7684\u7ec4\u4ef6,\n\u4e14\u5176\u4e2d\u9664\u4e86\u6ce8\u5165\u670d\u52a1\u64cd\u4f5c\u5916, render return \u4e4b\u524d, \u65e0\u4efb\u4f55\u4ee3\u7801."}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"use"}),"\u5f00\u5934\u5e76\u4e0e\u6587\u4ef6\u5939\u540c\u540d\u7684\u670d\u52a1."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"use"}),"\u5f00\u5934, ",(0,s.jsx)(n.code,{children:"Service"}),"\u7ed3\u5c3e, \u5e76\u4e0e\u6587\u4ef6\u5939\u540c\u540d\u7684\u53ef\u6ce8\u5165\u670d\u52a1."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"services"}),": \u670d\u52a1\u4e2d\u53ea\u5b58\u5728\u57fa\u7840 Hooks, \u81ea\u5b9a\u4e49 Hooks, \u7b2c\u4e09\u65b9 Hooks,\n\u9759\u6001\u6570\u636e, \u5de5\u5177\u51fd\u6570, \u5de5\u5177\u7c7b."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"react-style-best-practice",children:"React Style Best Practice"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7ec4\u4ef6\u7ec6\u5206\u5316."}),"\n",(0,s.jsxs)(n.li,{children:["\u7ec4\u4ef6:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u53ea\u4f20\u5165\u5fc5\u8981\u7684 props."}),"\n",(0,s.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"Immutable.js"})," \u6216\u8005 ",(0,s.jsx)(n.code,{children:"React.addons.update"})," \u5b9e\u73b0\u4e0d\u53ef\u53d8\u6570\u636e\u7ed3\u6784."]}),"\n",(0,s.jsxs)(n.li,{children:["\u7ed3\u5408 ",(0,s.jsx)(n.code,{children:"React.addons.PureRenderMixin"})," \u6765\u51cf\u5c11 reRender."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5728 ",(0,s.jsx)(n.code,{children:"shouldComponentUpdate"})," \u4e2d\u4f18\u5316\u7ec4\u4ef6\u51cf\u5c11 reRender."]}),"\n",(0,s.jsx)(n.li,{children:"\u4f7f\u7528 Context API."}),"\n",(0,s.jsx)(n.li,{children:"\u5c11\u505a DOM \u64cd\u4f5c\uff0c\u59cb\u7ec8\u8ba9 UI \u80fd\u591f\u57fa\u4e8e state \u8fd8\u539f."}),"\n",(0,s.jsxs)(n.li,{children:["\u5728 store \u548c action \u4e2d\u4e0d DOM \u64cd\u4f5c\u6216\u8005\u8bbf\u95ee ",(0,s.jsx)(n.code,{children:"window.\u5c5e\u6027"}),"\uff0c\u53ea\u4e0e\u6570\u636e\u6253\u4ea4\u9053."]}),"\n",(0,s.jsx)(n.li,{children:"\u63a8\u8350\u4f7f\u7528 ES6."}),"\n",(0,s.jsx)(n.li,{children:"npm \u7684 debug \u5305, log \u7ec4\u4ef6\u6e32\u67d3\u7684\u6bcf\u4e2a\u6b65\u9aa4\u548c\u52a8\u4f5c."}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/diegohaz/singel",children:"Single Element Pattern"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"styled-component",children:"Styled Component"}),"\n",(0,s.jsx)(n.h3,{id:"shared-css-styles",children:"Shared CSS Styles"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// Import styled-components and css\nimport styled, { css } from 'styled-components'\nconst container = document.querySelector('.container')\n\n// Define new const with bold style\nconst headingStyle = css`\n  font-weight: bold;\n`\n\n// Define typography styles\nconst H1 = styled.h1`\n  font-size: 54px;\n  // Using headingStyle const\n  ${headingStyle}\n`\nconst H2 = styled.h2`\n  font-size: 36px;\n  // Using headingStyle const\n  ${headingStyle}\n`\nconst H3 = styled.h3`\n  font-size: 24px;\n  // Using headingStyle const\n  ${headingStyle}\n`\nconst H4 = styled.h4`\n  font-size: 16px;\n  // Using headingStyle const\n  ${headingStyle}\n`\nconst H5 = styled.h5`\n  font-size: 14px;\n  // Using headingStyle const\n  ${headingStyle}\n`\nconst H6 = styled.h6`\n  font-size: 12px;\n  // Using headingStyle const\n  ${headingStyle}\n`\nconst Text = styled.p`\n  font-size: 16px;\n`\nconst Small = styled.small`\n  font-size: 80%;\n`\n\n// Use our styles\nexport default function WrapperContainer() {\n  return (\n    <div>\n      <H1>Heading h1</H1>\n      <H2>Heading h2</H2>\n      <H3>Heading h3</H3>\n      <H4>Heading h4</H4>\n      <H5>Heading h5</H5>\n      <H6>Heading h6</H6>\n      <Text>Body text</Text>\n      <Small>Small text</Small>\n    </div>\n  )\n}\n\nReactDOM.createRoot(container).render(<WrapperContainer />)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"styled-component-extension",children:"Styled Component Extension"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// Import styled-components\nimport styled from 'styled-components'\n\nconst container = document.querySelector('.container')\n\nconst Button = styled.button`\n  padding: 12px 24px;\n  font-size: 16px;\n  color: #fff;\n  border: 0;\n  border-radius: 35px;\n  box-shadow:\n    0 10px 20px rgba(0, 0, 0, 0.19),\n    0 6px 6px rgba(0, 0, 0, 0.23);\n  cursor: pointer;\n`\n\n// Using extend to create a red variant of the button\nconst RedButton = Button.extend`\n  background-color: #e74c3c;\n`\n\n// Using extend to create a green variant of the button\nconst GreenButton = Button.extend`\n  background-color: #2ecc71;\n`\n\n// Use our styles\nexport default function WrapperContainer() {\n  return (\n    <div>\n      <Button>Default button</Button>\n      <RedButton>Red button</RedButton>\n      <GreenButton>Green button</GreenButton>\n    </div>\n  )\n}\n\nReactDOM.createRoot(container).render(<WrapperContainer />)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"styled-component-props",children:"Styled Component Props"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// Import styled-components and css\nimport styled, { css } from 'styled-components'\n\nconst container = document.querySelector('.container')\n\nconst Button = styled.button`\n  padding: 12px 24px;\n  font-size: 16px;\n  border: 0;\n  border-radius: 35px;\n  box-shadow:\n    0 10px 20px rgba(0, 0, 0, 0.19),\n    0 6px 6px rgba(0, 0, 0, 0.23);\n  cursor: pointer;\n\n  // Using props to create a gray variant of the button\n  ${props =>\n    props.gray\n    && css`\n      background-color: #95a5a6;\n    `}\n  // Using props to create a green variant of the button\n  ${props =>\n    props.green\n    && css`\n      background-color: #2ecc71;\n    `}\n  // Using props to create a red variant of the button\n  ${props =>\n    props.red\n    && css`\n      background-color: #e74c3c;\n    `}\n  // We can also use a ternary operator for \"binary\" changes\n  color: ${props => (props.gray ? '#2c3e50' : '#fff')};\n`\n\nexport default function WrapperContainer() {\n  return (\n    <div>\n      <Button>Default button</Button>\n      {/* Button with prop \"red\" */}\n      <Button red>Red button</Button>\n      {/* Button with prop \"green\" */}\n      <Button green>Green button</Button>\n    </div>\n  )\n}\n\nReactDOM.createRoot(container).render(<WrapperContainer />)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"variants-driven-components",children:"Variants Driven Components"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { styled } from '@stitches/react'\n\nconst Box = styled('div', {\n  variants: {\n    color: {\n      pink: {\n        backgroundColor: 'pink',\n      },\n      turquoise: {\n        backgroundColor: 'turquoise',\n      },\n    },\n    shape: {\n      square: {\n        borderRadius: 0,\n      },\n      round: {\n        borderRadius: '100%',\n      },\n    },\n    size: {\n      small: {\n        width: '70px',\n        height: '70px',\n      },\n      large: {\n        width: '140px',\n        height: '140px',\n      },\n    },\n    isGlowing: {\n      true: {\n        $$shadowColor: 'transparent',\n        boxShadow: '0 0 30px $$shadowColor',\n      },\n    },\n  },\n\n  defaultVariants: {\n    color: 'pink',\n    shape: 'square',\n    size: 'small',\n  },\n\n  compoundVariants: [\n    {\n      color: 'pink',\n      isGlowing: true,\n      css: {\n        $$shadowColor: 'pink',\n      },\n    },\n    {\n      color: 'turquoise',\n      isGlowing: true,\n      css: {\n        $$shadowColor: 'turquoise',\n      },\n    },\n  ],\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"demystifying-styled-components",children:"Demystifying Styled Components"}),"\n",(0,s.jsxs)(n.p,{children:["Styled components ",(0,s.jsx)(n.a,{href:"https://www.joshwcomeau.com/react/demystifying-styled-components",children:"under the hood"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"interface Props {\n  className?: string\n}\n\nfunction styled(Tag) {\n  return (rawStyles, ...interpolations) => {\n    return function NewComponent({ className }: Props) {\n      // Compute the styles from the template string,\n      // the interpolation functions, and the provided React props.\n      const styles = reconcileStyles(rawStyles, interpolations, props)\n\n      const uniqueClassName = comeUpWithUniqueName(styles)\n      const processedStyles = runStylesThroughUtils(styles)\n\n      createAndInjectCSSClass(uniqueClassName, processedStyles)\n\n      const combinedClasses = [uniqueClassName, className].join(' ')\n\n      return <Tag {...props} className={combinedClasses} />\n    }\n  }\n}\n\nstyled.h1 = styled('h1')\nstyled.button = styled('button')\n// ...And so on, for all DOM nodes!\n"})}),"\n",(0,s.jsx)(n.h3,{id:"components-styling-reference",children:"Components Styling Reference"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://alexkondov.com/full-stack-tao-styling",children:"Tao"})," of styling:\nHow to Style a React Application."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"create-react-app",children:"Create React App"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://auth0.com/blog/how-to-configure-create-react-app/",children:"Custom React Scripts"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx create-react-app app-name --scripts-version @sabertazimi/react-scripts --use-npm\nnpm init react-app app-name --scripts-version @sabertazimi/react-scripts --use-npm\n"})}),"\n",(0,s.jsx)(n.h3,{id:"create-react-app-cli",children:"Create React APP CLI"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"createReactApp.js"}),":"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"init"}),"\n-> commander setup\n-> ",(0,s.jsx)(n.code,{children:"createApp()"}),"\n-> process CLI args\n-> ",(0,s.jsx)(n.code,{children:"run()"}),"\n-> process ",(0,s.jsx)(n.code,{children:"react-scripts@version"})," and ",(0,s.jsx)(n.code,{children:"cra-template-xxx@version"}),"\n-> install ",(0,s.jsx)(n.code,{children:"react"}),", ",(0,s.jsx)(n.code,{children:"react-dom"}),", ",(0,s.jsx)(n.code,{children:"react-scripts"})," and ",(0,s.jsx)(n.code,{children:"cra-template-xxx"}),"\n-> invoke ",(0,s.jsx)(n.code,{children:"react-scripts init"})," for further process."]}),"\n",(0,s.jsx)(n.h3,{id:"react-scripts",children:"React Scripts"}),"\n",(0,s.jsx)(n.h4,{id:"react-scripts-initialization",children:"React Scripts Initialization"}),"\n",(0,s.jsxs)(n.p,{children:["Initialization in ",(0,s.jsx)(n.code,{children:"react-scripts/scripts/init.js"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u53ef\u4ee5\u7528\u4e8e\u6539\u53d8\u9ed8\u8ba4 registry:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"'use strict'\n\nconst registries = {\n  npm: 'https://registry.npmjs.org',\n  yarn: 'https://registry.yarnpkg.com',\n  aliyun: 'https://registry.npm.taobao.org',\n}\n\nmodule.exports = registries\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u81ea\u5b9a\u4e49\u5b89\u88c5\u9ed8\u8ba4\u4f9d\u8d56 (",(0,s.jsx)(n.code,{children:"react"}),", ",(0,s.jsx)(n.code,{children:"react-dom"}),", ",(0,s.jsx)(n.code,{children:"react-router"}),", ",(0,s.jsx)(n.code,{children:"redux"})," etc.)"]}),"\n",(0,s.jsxs)(n.li,{children:["\u989d\u5916\u5b89\u88c5\u6a21\u677f\u4f9d\u8d56 ",(0,s.jsx)(n.code,{children:"packages.dependencies"})," in ",(0,s.jsx)(n.code,{children:"cra-template/template.json"})]}),"\n",(0,s.jsxs)(n.li,{children:["Setup ",(0,s.jsx)(n.code,{children:"package.json"}),":\n",(0,s.jsx)(n.code,{children:"appPackage.eslintConfig"}),", ",(0,s.jsx)(n.code,{children:"appPackage.browserslist"}),".\n",(0,s.jsx)(n.code,{children:"appPackage.dependencies"}),", ",(0,s.jsx)(n.code,{children:"appPackage.scripts"}),"\nand merge rest config in ",(0,s.jsx)(n.code,{children:"packages"})," in ",(0,s.jsx)(n.code,{children:"cra-template/template.json"}),"\n(ignore `)."]}),"\n",(0,s.jsxs)(n.li,{children:["Copy template files from ",(0,s.jsx)(n.code,{children:"cra-template-xxx/template"})," directory."]}),"\n",(0,s.jsx)(n.li,{children:"Setup git repository."}),"\n",(0,s.jsxs)(n.li,{children:["Install deps and devDeps list from ",(0,s.jsx)(n.code,{children:"react-scripts"})," and ",(0,s.jsx)(n.code,{children:"cra-template-xxx"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Uninstall ",(0,s.jsx)(n.code,{children:"cra-template-xxx"})," package."]}),"\n",(0,s.jsx)(n.li,{children:"Setup first git commit."}),"\n",(0,s.jsx)(n.li,{children:"Print available scripts."}),"\n",(0,s.jsx)(n.li,{children:"Done."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"react-scripts-commands",children:"React Scripts Commands"}),"\n",(0,s.jsxs)(n.p,{children:["Locating in ",(0,s.jsx)(n.code,{children:"react-scripts/scripts/"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"start.js"})," for ",(0,s.jsx)(n.code,{children:"react-scripts start"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"build.js"})," for ",(0,s.jsx)(n.code,{children:"react-scripts build"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"test.js"})," for ",(0,s.jsx)(n.code,{children:"react-scripts test"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"eject.js"})," for ",(0,s.jsx)(n.code,{children:"react-scripts eject"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h5,{id:"react-scripts-start",children:"React Scripts Start"}),"\n",(0,s.jsxs)(n.p,{children:["When develop ",(0,s.jsx)(n.code,{children:"react-scripts"})," locally\nwith ",(0,s.jsx)(n.code,{children:"react-scripts start"}),",\nit will use ",(0,s.jsx)(n.code,{children:"templatePath"})," located in\n",(0,s.jsx)(n.code,{children:"react-scripts/config/paths.js"}),"\nto find local template."]}),"\n",(0,s.jsx)(n.h4,{id:"react-scripts-configuration",children:"React Scripts Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Config in ",(0,s.jsx)(n.code,{children:"react-scripts/config/"})," directory:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"env.js"}),": static environment variables."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"getHttpsConfig.js"}),": get HTTPS(SSL) config."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"modules.js"}),": locale modules webpack alias with ",(0,s.jsx)(n.code,{children:"baseUrl"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"paths.js"}),": configurable paths variables (most for Webpack config)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"webpackDevServer.config.js"}),": Webpack Dev Server configuration."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"webpack.config.js"}),": Webpack configuration\n(paths, deps/devDeps, plugins, loader rules etc.)."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Add support for Ant Design UI.\nconst webpackConfig = {\n  test: /\\.(js|mjs|jsx|ts|tsx)$/,\n  include: paths.appSrc,\n  loader: require.resolve('babel-loader'),\n  options: {\n    customize: require.resolve('babel-preset-react-app/webpack-overrides'),\n    plugins: [\n      [\n        require.resolve('babel-plugin-import'),\n        {\n          libraryName: 'antd',\n          libraryDirectory: 'es',\n          style: 'css',\n        },\n      ],\n    ],\n    cacheDirectory: true,\n    cacheCompression: isEnvProduction,\n    compact: isEnvProduction,\n  },\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Add Webpack bundle analyzer plugin.\nconst { BundleAnalyzerPlugin } = require('webpack-bundle-analyzer')\n\nconst webpackConfig = {\n  plugins: [\n    isEnvDevelopment\n    && new BundleAnalyzerPlugin({\n      analyzerPort: 5000,\n    }),\n  ].filter(Boolean),\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"cra-usage",children:"CRA Usage"}),"\n",(0,s.jsx)(n.h4,{id:"cra-css",children:"CRA CSS"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-css",children:"@import-normalize; /* bring in normalize.css styles */\n\n/* rest of app styles */\n"})}),"\n",(0,s.jsx)(n.h4,{id:"cra-public-folder",children:"CRA Public Folder"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"None of the files in public folder get post-processed or minified."}),"\n",(0,s.jsxs)(n.li,{children:["Missing files will not be called at compilation time,\nand will cause ",(0,s.jsx)(n.code,{children:"404"})," errors for your users."]}),"\n",(0,s.jsxs)(n.li,{children:["Result filenames won\u2019t include ",(0,s.jsx)(n.code,{children:"content hashes"}),"\nso you\u2019ll need to add query arguments or rename them every time they change."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<link rel="icon" href="%PUBLIC_URL%/favicon.ico" />\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'class Component {\n  render() {\n    // Note: this is an escape hatch and should be used sparingly!\n    // Normally recommend using `import` for getting asset URLs\n    // as described in \u201cAdding Images and Fonts\u201d section.\n    return <img src={`${process.env.PUBLIC_URL}/img/logo.png`} alt="Here" />\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"cra-environment-variables",children:"CRA Environment Variables"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Create custom environment variables beginning with ",(0,s.jsx)(n.code,{children:"REACT_APP_"}),".\nAny other variables except ",(0,s.jsx)(n.code,{children:"NODE_ENV"})," will be ignored."]}),"\n",(0,s.jsxs)(n.li,{children:["HTML access environment variables ",(0,s.jsx)(n.code,{children:"%REACT_APP_XXX%"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["JavaScript access environment variables via ",(0,s.jsx)(n.code,{children:"process.env.REACT_APP_XXX"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/motdotla/dotenv",children:(0,s.jsx)(n.code,{children:".env"})}),"\nfile define permanent environment variables:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"npm start"}),": ",(0,s.jsx)(n.code,{children:".env.development.local"}),">",(0,s.jsx)(n.code,{children:".env.local"}),">",(0,s.jsx)(n.code,{children:".env.development"}),">",(0,s.jsx)(n.code,{children:".env"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"npm run build"}),": ",(0,s.jsx)(n.code,{children:".env.production.local"}),">",(0,s.jsx)(n.code,{children:".env.local"}),">",(0,s.jsx)(n.code,{children:".env.production"}),">",(0,s.jsx)(n.code,{children:".env"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"npm test"}),": ",(0,s.jsx)(n.code,{children:".env.test.local"}),">",(0,s.jsx)(n.code,{children:".env.test"}),">",(0,s.jsx)(n.code,{children:".env"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Environment variables ",(0,s.jsx)(n.a,{href:"https://create-react-app.dev/docs/advanced-configuration",children:"list"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"GENERATE_SOURCEMAP=false\nREACT_APP_NOT_SECRET_CODE=abcdef\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<link rel="icon" href="%PUBLIC_URL%/favicon.ico" />\n<title>%REACT_APP_WEBSITE_NAME%</title>\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export default function App() {\n  return (\n    <div>\n      <small>\n        You are running this application in\n        {' '}\n        <b>{process.env.NODE_ENV}</b>\n        {' '}\n        mode.\n      </small>\n      <form>\n        <input\n          type=\"hidden\"\n          defaultValue={process.env.REACT_APP_NOT_SECRET_CODE}\n        />\n      </form>\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<div>\n  <small>You are running this application in <b>development</b> mode.</small>\n  <form>\n    <input type="hidden" value="abcdef" />\n  </form>\n</div>\n'})}),"\n",(0,s.jsx)(n.h4,{id:"cra-code-splitting",children:"CRA Code Splitting"}),"\n",(0,s.jsxs)(n.p,{children:["Code splitting for ",(0,s.jsx)(n.a,{href:"https://create-react-app.dev/docs/production-build",children:"production build"}),"\nwith ",(0,s.jsx)(n.code,{children:"import('dep').then();"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import type { ReportHandler } from 'web-vitals'\n\nfunction reportWebVitals(onPerfEntry?: ReportHandler) {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    // Code splitting into separate chunk\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n"})}),"\n",(0,s.jsx)(n.h4,{id:"cra-service-worker",children:"CRA Service Worker"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/cra-template/pwa",children:"PWA Template"})}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"cra-deployment",children:"CRA Deployment"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://facebook.github.io/create-react-app/docs/deployment",children:"Official Documentation"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://medium.com/@svinkle/how-to-deploy-a-react-app-to-a-subdirectory-f694d46427c1",children:"Deploy Subdirectory"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Cache-Control: max-age=31536000"})," for ",(0,s.jsx)(n.code,{children:"build/static"})," assets,\n",(0,s.jsx)(n.code,{children:"Cache-Control: no-cache"})," for everything else.\n",(0,s.jsx)(n.code,{children:"build/static"})," file contents hash is embedded into the filename."]}),"\n",(0,s.jsxs)(n.li,{children:["Change ",(0,s.jsx)(n.code,{children:"homepage"})," in ",(0,s.jsx)(n.code,{children:"package.json"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"homepage": "."'}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"homepage": "https://example.com/relative/path/"'}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"path={'${process.env.PUBLIC_URL}/about'}"}),"\nin ",(0,s.jsx)(n.code,{children:"Routes.js"})," when using ",(0,s.jsx)(n.code,{children:"react-router-dom"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Or use ",(0,s.jsx)(n.code,{children:"basename"})," for ",(0,s.jsx)(n.code,{children:"react-router@^4"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'// renders <a href="/calendar/today">\nexport default function App() {\n  return (\n    <BrowserRouter basename="/calendar">\n      <Link to="/today" />\n    </BrowserRouter>\n  )\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"spa-deployment",children:"SPA Deployment"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Deployment services ",(0,s.jsx)(n.a,{href:"https://hiddedevries.nl/en/blog/2020-06-27-how-deployment-services-make-client-side-routing-work",children:"guide"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://vercel.com/support/articles/how-do-i-use-the-ignored-build-step-field-on-vercel",children:(0,s.jsx)(n.code,{children:"vercel.json"})}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "routes": [{ "src": "/[^.]+", "dest": "/", "status": 200 }]\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "routes": [\n    { "handle": "filesystem" },\n    { "src": "/.*", "dest": "/index.html" }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# https://vercel.com/sabertaz/awesome-notes/settings/git\n# Ignored Build Step\n[ "$VERCEL_GIT_COMMIT_REF" == "gh-pages" ]\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://docs.netlify.com/routing/redirects/rewrites-proxies/#history-pushstate-and-single-page-apps",children:"Netlify"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"/*    /index.html   200\n"})}),"\n",(0,s.jsx)(n.p,{children:"GitHub Pages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# 404 fallback\nln -s index.html 404.html\n"})}),"\n",(0,s.jsx)(n.h3,{id:"custom-cra",children:"Custom CRA"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Custom ",(0,s.jsx)(n.code,{children:"packages/cra-template-*"}),": change HTML/CSS/JS boilerplate."]}),"\n",(0,s.jsxs)(n.li,{children:["Custom ",(0,s.jsx)(n.code,{children:"packages/react-scripts/config/"}),":\nchange paths, deps/devDeps, plugins, loader rules etc."]}),"\n",(0,s.jsxs)(n.li,{children:["Custom ",(0,s.jsx)(n.code,{children:"packages/react-scripts/scripts/"}),": change react-scripts CLI behaviors."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"cra-monorepo",children:"CRA MonoRepo"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"babel-preset-react-app"}),": babel preset configuration."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"cra-template"}),"/",(0,s.jsx)(n.code,{children:"cra-template-typescript"}),": CRA default templates."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"eslint-config-react-app"}),": eslint configuration."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"react-app-polyfill"}),": polyfills for various browsers."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"react-dev-utils"}),":\nmost utility functions for paths, helpers, middleware, and webpack plugins."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"custom-react-scripts",children:"Custom React Scripts"}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.code,{children:"Create React App"}),"\n",(0,s.jsx)(n.a,{href:"https://github.com/facebook/create-react-app/blob/main/packages/create-react-app/createReactApp.js",children:"code"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const templatesVersionMinimum = '3.3.0'\n\n// Assume compatibility if we can't test the version.\nif (!semver.valid(packageVersion))\n  packageVersion = templatesVersionMinimum\n\n// Only support templates when used alongside new react-scripts versions.\nconst supportsTemplates = semver.gte(packageVersion, templatesVersionMinimum)\nif (supportsTemplates)\n  allDependencies.push(templateToInstall)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Due to version checking for template feature,\ncustom react scripts should\npublish with version ",(0,s.jsx)(n.code,{children:"^3.3.0"})," or ",(0,s.jsx)(n.code,{children:"^4.x.x"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"custom-cra-templates",children:"Custom CRA Templates"}),"\n",(0,s.jsxs)(n.p,{children:["HTML/CSS/JSX boilerplate in ",(0,s.jsx)(n.code,{children:"react-scripts/template/"})," directory,\nnow Templates are always named in the format cra-template-[template-name]\nin ",(0,s.jsx)(n.code,{children:"packages/cra-template"})," and ",(0,s.jsx)(n.code,{children:"packages/cra-template-typescript"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx create-react-app my-app --template [template-name]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Dependencies in ",(0,s.jsx)(n.code,{children:"template.json"}),"\nwill bump to latest minor version automatically."]}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.code,{children:"react-scripts/scripts/utils/verifyTypeScriptSetup.js"}),",\nif template ",(0,s.jsx)(n.code,{children:"src"})," don't exist ",(0,s.jsx)(n.code,{children:"react-app-env.d.ts"})," file,\nit will create automatically with ",(0,s.jsx)(n.code,{children:"reference"})," to ",(0,s.jsx)(n.code,{children:"react-scripts"})," types:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'// Reference `react-scripts` types\nif (!fs.existsSync(paths.appTypeDeclarations)) {\n  fs.writeFileSync(\n    paths.appTypeDeclarations,\n    `/// <reference types="react-scripts" />${os.EOL}`,\n  )\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"micro-frontends",children:"Micro Frontends"}),"\n",(0,s.jsxs)(n.p,{children:["\u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"single-spa"})," \u5305\u88c5\u7684\u4e3b\u5e94\u7528\u662f\u4e00\u4e2a\u57fa\u5ea7,\n\u5b83\u63d0\u4f9b\u76f8\u5e94\u7684\u534f\u8bae,\n\u5b50\u5e94\u7528\u6309\u7167\u534f\u8bae\u8fdb\u884c\u5305\u88c5\u5c31\u53ef\u4ee5\u63a5\u5165\u4e3b\u5e94\u7528.\n\u4e3b\u5e94\u7528\u5c31\u50cf\u63d2\u5ea7,\n\u5b50\u5e94\u7528\u5c31\u50cf\u4e0d\u540c\u7684\u7535\u5668,\n\u53ea\u8981\u9075\u5faa\u67d0\u79cd\u534f\u8bae\u5c31\u53ef\u4ee5\u8f7b\u677e\u5b9e\u73b0\u53ef\u63d2\u62d4\u64cd\u4f5c."]}),"\n",(0,s.jsx)(n.admonition,{title:"Single SPA Lifecycle",type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Register."}),"\n",(0,s.jsx)(n.li,{children:"Load."}),"\n",(0,s.jsx)(n.li,{children:"Bootstrap."}),"\n",(0,s.jsx)(n.li,{children:"Mount."}),"\n",(0,s.jsx)(n.li,{children:"Unmount."}),"\n",(0,s.jsx)(n.li,{children:"Unload."}),"\n"]})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"single-spa"})," \u5b50\u9879\u76ee\u7684\u7684\u6302\u8f7d\u3001\u66f4\u65b0\u3001\u5378\u8f7d\u7b49\u64cd\u4f5c,\n\u5e76\u4e0d\u662f ",(0,s.jsx)(n.code,{children:"single-spa"})," \u539f\u751f\u63d0\u4f9b\u7684,\n\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u6765\u81ea\u884c\u5b9e\u73b0\u5b50\u5e94\u7528\u7684\u6302\u8f7d, \u5378\u8f7d\u53ca\u66f4\u65b0\u7b49\u903b\u8f91.\n",(0,s.jsx)(n.code,{children:"single-spa"})," \u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"reroute"})," \u548c\u8def\u7531\u63a7\u5236\u6765\u8c03\u7528\u5b50\u5e94\u7528.\n\u5728 ",(0,s.jsx)(n.code,{children:"single-spa"})," \u7684\u5f00\u53d1\u8fc7\u7a0b\u4e2d,\n\u9700\u8981\u81ea\u5df1\u624b\u52a8\u53bb\u5199\u8c03\u7528\u5b50\u5e94\u7528\u7684\u65b9\u6cd5."]}),"\n",(0,s.jsx)(n.h3,{id:"application-entrypoint",children:"Application EntryPoint"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["HTML Entry (",(0,s.jsx)(n.code,{children:"import-html-entry"})," from ",(0,s.jsx)(n.code,{children:"qiankun"}),")."]}),"\n",(0,s.jsx)(n.li,{children:"JavaScript Entry."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"styles-isolation",children:"Styles Isolation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Shadow DOM container."}),"\n",(0,s.jsx)(n.li,{children:"CSS module."}),"\n",(0,s.jsx)(n.li,{children:"CSS scoped namespace."}),"\n",(0,s.jsx)(n.li,{children:"CSS selector renaming."}),"\n",(0,s.jsx)(n.li,{children:"CSS in JS."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"scripts-isolation",children:"Scripts Isolation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Snapshot sandbox: \u7c7b\u4f3c\u4e2d\u65ad\u6062\u590d\u673a\u5236, \u5907\u4efd\u5feb\u7167 -> \u5b50\u5e94\u7528\u6302\u8f7d/\u8fd0\u884c/\u5378\u8f7d -> \u6062\u590d\u5feb\u7167."}),"\n",(0,s.jsxs)(n.li,{children:["Proxy sandbox: ",(0,s.jsx)(n.code,{children:"window"})," proxy (",(0,s.jsx)(n.code,{children:"fakeWindow"})," for every sub-app)."]}),"\n",(0,s.jsx)(n.li,{children:"Runtime sandbox."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"application-communication",children:"Application Communication"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Pub-Sub Pattern."}),"\n",(0,s.jsx)(n.li,{children:"Callback registration."}),"\n",(0,s.jsx)(n.li,{children:"Global store."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"low-code-development",children:"Low-Code Development"}),"\n",(0,s.jsx)(n.h3,{id:"low-code-components",children:"Low-Code Components"}),"\n",(0,s.jsxs)(n.p,{children:["\u5229\u7528\u9759\u6001\u89e3\u6790 (",(0,s.jsx)(n.code,{children:"react-docgen-typescript"}),") \u4e0e\u52a8\u6001\u89e3\u6790 (",(0,s.jsx)(n.code,{children:"parse-prop-types"}),")\n\u4ece\u539f\u59cb\u7ec4\u4ef6\u751f\u6210\u5c5e\u6027\u6587\u4ef6, \u5339\u914d\u4f4e\u4ee3\u7801\u7269\u6599\u534f\u8bae\n",(0,s.jsx)(n.a,{href:"https://github.com/alibaba/lowcode-engine/blob/main/packages/types/src/assets.ts",children:(0,s.jsx)(n.code,{children:"assets.json"})}),",\n\u4ece\u800c\u5c06\u539f\u59cb\u7ec4\u4ef6\u8f6c\u5316\u4e3a\u4f4e\u4ee3\u7801\u7ec4\u4ef6."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Low-Code Components",src:t(1240).A+"",title:"Low-Code Components",width:"1899",height:"776"})}),"\n",(0,s.jsx)(n.h3,{id:"low-code-editor",children:"Low-Code Editor"}),"\n",(0,s.jsx)(n.p,{children:"\u4f4e\u4ee3\u7801\u7f16\u8f91\u5668\u76ee\u6807:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Layout :\u4f4e\u4ee3\u7801\u7ec4\u4ef6\u5e03\u5c40\u8bbe\u7f6e."}),"\n",(0,s.jsx)(n.li,{children:"Configure: \u4f4e\u4ee3\u7801\u7ec4\u4ef6\u5c5e\u6027\u8bbe\u7f6e."}),"\n",(0,s.jsx)(n.li,{children:"Interactive: \u4f4e\u4ee3\u7801\u7ec4\u4ef6\u903b\u8f91\u8bbe\u7f6e."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u4f4e\u4ee3\u7801\u7f16\u8f91\u5668\u529f\u80fd:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5bb9\u5668\u8282\u70b9\u529f\u80fd."}),"\n",(0,s.jsx)(n.li,{children:"\u8282\u70b9\u8bbe\u7f6e\u529f\u80fd."}),"\n",(0,s.jsx)(n.li,{children:"\u8282\u70b9\u589e\u5220\u529f\u80fd."}),"\n",(0,s.jsxs)(n.li,{children:["\u8282\u70b9\u79fb\u52a8\u529f\u80fd:\n\u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"__reactInternalInstance$"})," \u627e\u5230\u7ec4\u4ef6\u5bf9\u5e94\u7684 ",(0,s.jsx)(n.code,{children:"fiberNode"}),",\n\u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"fiberNode"})," \u4e0a\u7684 ",(0,s.jsx)(n.code,{children:"stateNode"})," \u83b7\u53d6 DOM \u5b9e\u4f8b,\n\u8c03\u7528 ",(0,s.jsx)(n.code,{children:"getBoundingClientRect"})," \u5f97\u5230\u5177\u4f53\u4f4d\u7f6e\u4fe1\u606f,\n\u5b9e\u73b0\u62d6\u62fd\u5b9a\u4f4d\u529f\u80fd."]}),"\n",(0,s.jsxs)(n.li,{children:["\u8282\u70b9\u5728\u753b\u5e03\u4e0a\u7684\u8f85\u52a9\u529f\u80fd: e.g ",(0,s.jsx)(n.code,{children:"hover"}),"/",(0,s.jsx)(n.code,{children:"select"}),"/",(0,s.jsx)(n.code,{children:"resize"}),"/",(0,s.jsx)(n.code,{children:"drag"}),"/",(0,s.jsx)(n.code,{children:"drop"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"\u8bbe\u8ba1\u6001\u548c\u6e32\u67d3\u6001\u7684\u5750\u6807\u7cfb\u8f6c\u6362: e.g \u6eda\u52a8\u76d1\u542c."}),"\n",(0,s.jsx)(n.li,{children:"\u5feb\u6377\u952e\u529f\u80fd."}),"\n",(0,s.jsx)(n.li,{children:"\u5386\u53f2\u529f\u80fd: \u64a4\u9500\u548c\u91cd\u505a."}),"\n",(0,s.jsx)(n.li,{children:"\u7ed3\u6784\u5316\u7684\u63d2\u4ef6\u6269\u5c55\u529f\u80fd."}),"\n",(0,s.jsx)(n.li,{children:"\u539f\u5730\u7f16\u8f91\u529f\u80fd."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Low-Code Editor",src:t(8243).A+"",title:"Low-Code Editor",width:"1483",height:"868"})}),"\n",(0,s.jsxs)(n.p,{children:["\u7ecf\u8fc7 ",(0,s.jsx)(n.code,{children:"Editor"})," \u8bbe\u7f6e\u540e, \u751f\u6210\u7b26\u5408\u4e1a\u52a1\u9700\u6c42\u7684\n",(0,s.jsx)(n.a,{href:"https://github.com/alibaba/lowcode-engine/blob/main/packages/types/src/schema.ts",children:(0,s.jsx)(n.code,{children:"schema.json"})}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u9879\u76ee\u6a21\u578b (",(0,s.jsx)(n.code,{children:"Project"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["\u6587\u6863\u6a21\u578b (",(0,s.jsx)(n.code,{children:"DocumentModel"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["\u8282\u70b9\u6a21\u578b (",(0,s.jsx)(n.code,{children:"Node"}),"):","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ReactElement"})," \u53d8\u79cd."]}),"\n",(0,s.jsxs)(n.li,{children:["\u7ba1\u7406 ",(0,s.jsx)(n.code,{children:"Props"}),"/",(0,s.jsx)(n.code,{children:"Node"})," tree."]}),"\n",(0,s.jsxs)(n.li,{children:["\u64cd\u4f5c ",(0,s.jsx)(n.code,{children:"schema.json"})," \u7684\u6700\u4f4e\u7c92\u5ea6."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5c5e\u6027\u6a21\u578b (",(0,s.jsx)(n.code,{children:"Prop"}),"):","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ReactProp"})," \u53d8\u79cd."]}),"\n",(0,s.jsxs)(n.li,{children:["\u6bcf\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"Prop"})," \u5bf9\u5e94 ",(0,s.jsx)(n.code,{children:"schema.json"})," ",(0,s.jsx)(n.code,{children:"props"})," \u7684\u4e00\u4e2a\u5b57\u6bb5."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"Project"})," \u5305\u542b\u82e5\u5e72\u4e2a ",(0,s.jsx)(n.code,{children:"DocumentModel"})," \u5b9e\u4f8b,\n\u6bcf\u4e2a ",(0,s.jsx)(n.code,{children:"DocumentModel"})," \u5305\u542b\u4e00\u7ec4 ",(0,s.jsx)(n.code,{children:"Node"})," \u6784\u6210\u4e00\u9897\u6811,\n\u6bcf\u4e2a ",(0,s.jsx)(n.code,{children:"Node"})," \u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"Props"})," \u5b9e\u4f8b\u7ba1\u7406\u6240\u6709 ",(0,s.jsx)(n.code,{children:"Prop"}),":"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Low-Code Schema",src:t(7513).A+"",title:"Low-Code Schema",width:"1197",height:"951"})}),"\n",(0,s.jsx)(n.h3,{id:"low-code-renderer",children:"Low-Code Renderer"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"\u4f4e\u4ee3\u7801\u6e32\u67d3"}),": \u5c06 ",(0,s.jsx)(n.code,{children:"schema.json"})," \u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"Renderer"})," \u6e32\u67d3\u751f\u6210\u4e1a\u52a1\u9875\u9762."]}),"\n",(0,s.jsx)(n.h3,{id:"low-code-generator",children:"Low-Code Generator"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"\u4f4e\u4ee3\u7801\u51fa\u7801"}),": \u5c06 ",(0,s.jsx)(n.code,{children:"schema.json"})," \u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"Generator"})," \u8f6c\u5316\u751f\u6210\u4e1a\u52a1\u4ee3\u7801."]}),"\n",(0,s.jsx)(n.h3,{id:"low-code-reference",children:"Low-Code Reference"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://developer.aliyun.com/ebook/7507",children:"Low-Code Engine Technical White Paper"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["React component library ",(0,s.jsx)(n.a,{href:"https://www.gabe.pizza/notes-on-component-libraries",children:"patterns"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["React interview ",(0,s.jsx)(n.a,{href:"https://github.com/semlinker/reactjs-interview-questions",children:"questions"}),"."]}),"\n"]})]})}function D(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(N,{...e})}):N(e)}},1240:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/LowCodeComponents-2ea2e83ffbfe3b830dee3b95b898afbb.png"},8243:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/LowCodeEditor-e3ec18131f40132e6dec1a5015263322.png"},7513:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/LowCodeSchema-ae217dd664c075ede7a08ac2f07645be.png"},1622:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/RSCClientBoundaries-3e0e6dc4afb24db74728743f10610f43.png"},4303:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/RSCNetwork-2da40c672b2b21a174dceeee0027e8ad.png"},7845:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/RSCUseClient-72441fa4e654119a61a0d836a9add557.png"},1986:(e,n,t)=>{t.d(n,{A:()=>r});const r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAg8AAADmCAMAAABlL5bzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA51BMVEX////b29tpaWnFxcWkpKS0tLSWlpaHh4d4eHiioqL5+fn4+PiKioqIiIivr6+urq6tra1tbW1zc3Nubm57b22QdnJ7cG1ycnJ+fn6PdnG9hXyQd3L19fXs7Ozj4+PIyMi2tradnZ3Y2NjExMTDw8Pr2tf69vXx5OLZurX29varq6v17ezNopvjy8jGxsasrKzNzc3m5ubHx8doaGjMzMyVlZWmpqaYmJh8fHyFhYXQ0NDZ2dmPj498cG5vdnp2h49wd3uGq7x3iJDl5eW9vb3M2+O6z9n2+fra5eujv8zt8/Xk7fB/f3+4UCETAAAAAWJLR0QAiAUdSAAAAAlwSFlzAAASdAAAEnQB3mYfeAAAAAd0SU1FB+gEEAk5MlrYJaUAAA/ZSURBVHja7Z0Je9vGEYYXi2PXvRznqFiX4NVGjmTLlZPWjps0idLQuvr/f093ZnYB8JJI8QBAfN/zCAQBkAK4L2Zmd2cXSkEQBEEQBEEQBDVLkSbFLTrjRIsiFN4+ftyUl1mbTpnpzVoFcVvkQUha9OOGc9UGxbd7HnTljSEznNC9Z5XVz4SVmAzz7J60ETxYU56OpfNLyWjwRZEryYyctl1yaSkK/gFnHEyDsVz89LNak9JvqMLvOrenCTxEhKs/HT4/2h7TvpQL3qay2WrVsAtotGIHhPFraaAiY9OQ8ga3WNjTBB4MWYFwonEwGAwJ2YRYO2IS5qZpF9B8n8FeQ2yt+7kjtxqF4CLmt/N7GlC/SCSojMozpxfnDtxpu62JqTjDZl1AK5xGJC5WKnLVH9i74dk9DbAPSRkvmHC6ETkMR7CDxSZyXVkRPTTmAlogsqJGV94WHkQXgUR1TxPiSTqrBR6UThzBmY3EDMTao96kC2iBKDjLFn80a2I9+xs2iIekuNsr5syh4CxDrDMbDk9dNJGBh3XtQuAhkdhcPHDY7MyG4btsYc8W+l36+53wkBU8hHhSYku2EhRepGIjXBS52wvoQPsDG1RexKVbZnObqqV7ttAf9B93wUMqVQmxY9bbC7oiq0LjJVc1uV660ws4akmoVWm0SatG1Wq1Yk+dPIiqp1PphDFU8YitNyG6IHp3FwDtVNvyAIEHCDxA4AECDxB4gCDwAIEHCDxA4AECDxB4gMADBB4g8ACBBwg8QOABAg8QeIDAA1TqT89r0yF5aN9l1sWDrkufHZSH1l1mbTy8+LwOfXFoHr78qg79uX08nPTq0OeH5uEvL+vQX8EDeAAP4AE8gAfwAB7AA3gAD+ABPIAH8AAewAN4AA/gATzsmoc+H5+DB/AgPAzK5QoN++ChYzyM1Bg8gIcKD6Neb+I+6F74lVdG7nXCHiUHD53iYejsw8D9ERcTxSjQ37DXc3+wD53jwRmAMZV+bxIsgQNjkMsG8NC5+sWATIQYip4jQxxGf4L4oZv2gUp+4j86HinioD/sKfDQUR4oZBD74JSzy3DeA/ahqzxQ7DDmKqcr+3zAfmMoYCB+6GI8SUU/6AsYEwfGWDl/MWJKhg83ToCHo29/GFAUQdup/WEoG0bgAf1Z6L8AD+ABPIAH8AAewAN4AA/gATyAB/DQdh7+lv4dPNTOw1Cptdua9svDEy9zEx6+Vqv3nb4CDz1OgelNuA2yPTwMtubhGwUeHmisHqjD8MBPw13j5FPz4O4zfQ4e9sNDXpoG33kxUj2lpMe7P+RsGercHAyGarAtD0kWFtvxoJ7pQMT6PLxWb4gH95k3bl2p05cXp9/QCy+Eh9eq8/GD77DqFcmTI5WPpENzrDiNjrs9B3l/e/tgI79Cz8+OVGQTfkB4Ko/Qdu/iyK1m/CTuSFl+fHjK63N6S3bmfBMelLpg+/D65ctXp94+XNC7169p0ytvH94o9U3X6xc5504XyZM+OYrypQaSWUt2YrBuj/cDPETBVdBT1WPj3idsCai83S4HAhETube0lexIktA7/xD2inKZ4u18TR4uQil/Ta8XzkB4HorFaekvTtXXHa9vTih7skieHEnGfZ8xyCU3YsA2Yk0ezD+W63LoyjWhmz5LFBFAfERWnIOJVTADNuZN7oWgka3vLmf0bZj073wdHi7UTPwwx8PpHA/OZLxah4fscm+qvf2hr0aV5EkZeDEmd9H39+MmPCzVd+7vmfXGIeNNEfOg2SOQw6CSj2nV80CrVpEHSfwxS/RiQ/uwggdVtQ+v1rIP+9J3+p+18+CcRZE8KTw4h+HchbcPvd7W9uFf+vzyHd/rqXVuoPAf7i/2waMWX0GmgnhwL0E6WmEfTtL3G8YPj/CwQfywL/twXicPQyn8sRoVyZOeh0k/H4bBGPlkEx6WOtZLukquWhjLIMQ28MCewYHAPFAAKTxIDBFrIWWuAcLTkG9Qv3gl9YsHeWhC/eKyVvuQc+n3K8mTo4AIGww1kdzrnfDAPiAx4hYK++DKm3wEl7oLLzIyDNb5CLdueAtVPhbrF0TDk9ofiIc3Elgu8xfd5kHaqwcz7Q/Seu1dRWh/2AkPu9IHT8OTeXBr6gI81NeftdOrPPve03CM/VngYWPl+RH3b4KHw/VvgocW8YD8h8FZ+KXOcvCA/Kgz/SF9m+rP0o8n4AE8qLIZ9gP8BXggA+H1b/AAHkoD8fEg8ST7pCF4aDAP3kCkh+CBmxiHu8md7Q/Bg9qbgTg5OwAPod8yBw8N5oENxLNDtD9M+j75RRxHn2eQ6/OsYdxvMexT7tzYz/6guMt76Ls2huJoxmo0oBWfoz9QS6alBA/bG4gfDsFDns+QQYnVVPxDlY95rslhvz/mmWE4E4KO7lOXVs4dnCM/oRD1gRM8ZB84l25hmmPwsLWB+PEg7ZNFakuPY0oqdV6RxYjni+K8SZ5EjBJq+372KJlmztmPMa8QIcRDnsNf7MVAvD0sDxJIONtfoOB5YF+RS2Itzy43CBm245BBN6zwMFmagA8etjUQ+4gmH/IXS3kYruShL+ECRQyeh4GPJ4tZrsHDLpWrg/BQxJPjh3noLfBQzC43x4Oky4CHVmiBh3FR35yLHwoeJvPxg+eh5zOul/EwnB+XAR5awkPZHjUo6hezPORSv5gU9YvAA29xuJQ80B+HDwvDtsBDW3go26vD8yzm/UVf2h9C80TBQ9n+EHgY0xf0/XHgoZ08PJZYO0b/BXgAD+ABPIAH5D+AB/BQFw+Zz3OKnlR2MSVAZDxybXbylIxHRBsLHlrHg3+Jn3xDZ0smVsos7EObeVDWgAfwUOHBKj+phS78SFI4lIy7M6OkmGTNu5h5f+FT6FLvgsRfaJkqw7kPQ+Ok/YExeGgyD9r40pVCNKGMEyn2hAo546Wise6ZTHcwy0MihyWz8QNbnoznyzA0L5fJYB8az4Ph8rIhRkz59k1pZpwkHJX6OzsNB7rbfZYHf6yd4SGRUJX2G/+t4KHx9QvDd73MhuOKrqgYCBgy9YkkU7uDwoHL6xeJnuHBfxWvavmuCDw03D6wTY/DGJusjC6TwEOwGcRDXKTZz/GQFnXXkgfredABDfDQfB642OPitn8iD4a3p+Ch9TxwgFi6gRX+In7YX3ieklkeqv5iTR5efF6Hvjg0D19+VYf+s2Y8KQEis1HGk6HoM6sqPIR4Mpvngc2GneUhxJPJ+jzUpQPz0KjLnOOBy1JucKkkWm80sqKZocIDH5gs1De1VC/pE1Lo/FXahH+zJg/Pa9NBeWjWZa5ujwr+3rdH8Uz/iZrhgedeXdIexQ1PclxGdRYGICr6Ryo86C3axw+rffEAtVPgAQIPEHiAwAMEHiDwAIEHCDxA4AECDxB42LOSkPyyqDAoQ5ulydNzkuwqkpl7pnE0Nz9lNYl71f8GD7XxwF1KdkV3o89jWYsH/xWRXpuHWBIuLHhoGg+h4LfgIfP5MYk26/Iga/E+5rcFD9vxIIWSzdvvkgcT+sDDMb5YQ+K8TnwOlM1CxqwYChu+0/iZjd0HZYsHJWqBx+gcD1y85TCLBR7oKYKmyGmJ+HmCEa9FgQdJvY51bHTwQJwV44tdkmsSzpVRIS0fPDSVB1OmxeklPKRKcCmPkbUkGH/3TnKgLKfdpWWCXFR8WNLwbSUtpvzybvLQuPyoKg+VtNkFHvhRxW7pEyHpGEmpS0se+Cj3WokfbOEWKlEDf2cxttN2OZ5sXP5klYdKWv3SeJIgKCqhsR+qp0oeYn5yeeR5MGGIj/BQOgUho0jZ1EZ1mYeffq5DvzzKgyul9XiIKlUKlWUVHuhoijEMP8hYoHiMh+yJc04cDQ8/X9WhXx/joRyvudxfhB1Jpfzc1vJQSbZmlogHX87WLPEXVR5MG1qjOshDEf3PztqwwIOvLPDwzFhXpn7hz0oNU3gQysxcPGnBQxt4kMbFcpjFSh7kGE+OrVRNZYC/b2jwA/4dDsYHlWEugWSOh5aoQzwUI7tVZZjFah4kogxNkdEsD7HM+KF9c5Qtx17E0jCVzvsLrcFDk3jYrvHCqI4IPKyhqAUNSeDhUDxY3R0cwAMEHiDwAIEHCDyAB/BwKB7y4+fhXfpf8LCmzr6H/QAPpfb0hF7w0E4ezk70x+MoUaP1Wt0pqQEPD5kHrY8igkiysAAPW5kHrZ8dAw82dNZmPLYosglndqbSLevexRGPE0h4t+XxB2n5UCHwUJgHfXIEOETBVcSunGPDOR5kCThJWPL9bMTjC2gr2ZEkoXexBQ9z5kHr346AB55G1930GWd6MR9uGzsHE6tgBmzMm2zM0FQSQMBDYR6OwkBE1hsHSSGPmAftLzBVkjomieXGjzqznOqT7J2HqfrEr9c3U3X78KHqplYevHnQ+of2AyFjTKxzA4X/cH+xKfbyWDQjPJh49nP7tQ9SyrdVGO5umshDGoZjHEFEyVULYxmE2AYe2DO4Imce/Bz/RvkYgoefHICH+2ta3txdNZyHs5OP57891+/TH4+hykk+IDHiFgr7wEnjggSFF5mJJY844aTTRBdZQfvkQdyEQ4BWbu4+yYenV9f3tNlhwltuauchHyjf15N3oBOjxvZJKmZyF8KDCvYh8PCJAwxa1OwvlFqr7w88bMkD2YDptRiKGy78GR5KFwIeOsEDcUDFLTxcLfJw7R0GeOgED7cuWCCzsIoHRUzc34OHA6n2/Ie7O3IXq3jwm8DDoVR7ftRU0d0/zwMRcHXteLhmGwIeOsPDreIosuThnjwEcTDl+sXUcXENHlrJw+AJPFxxJbPCw5VS17RV3VMz1ZSaI6jVCjy0j4czfb45D+3JlwMPm/qLZzoQAR7Ag1JvqcfnHDyAB1EufYDn4KG9PJxfPqL/6d7lmvo29Aqf18dDdrkvnXeCh/3oRW087FMd4OFxPcE+nKTvj9A+OClok/hh4GnIMZ4XPPj6BdGwYTwpH5acOUqAuZZ2qvtqAyZ4aCEPHzwNm/Jwwy2UU2qoJizuOS9GKd/BAR5aysPZ92n+lPZJaYumJutbKXvqzrq7Z0Cu7u7AQ0t5qOQWPoGHq+sbn1/rs2Q4H+ZWTcFDW/2F2oqH+zvJe5AsmbubqeLc60/goZs83FyTiZAtxAMtr+6m4AE8CA/OYdyqW/AAf+EQkEEZNyHnHjx0jodqPBmS7O+m4KGjPEh9k+uYZCaIh3tqpQIPneRhoT3qhhorecgeeOgYD6xPoTmSx1z4vPspeOgeD+jPAg/gATyAB/AAHsADeAAP4AE8gAfwAB7AA3iAwAMEHiDwAIEHCDxA4AECDygx8AAewAN4AA/gATyAB/AAHsADeAAP4AE8gIdO8vDTz3XoF/DQUB7qEnhoJA/PaxNKrIE8QOABAg8QeIDAAwSBBwg8HEj/ByplgcFHOWh6AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI0LTA0LTE2VDA5OjU2OjU4KzAwOjAw7bHMWQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNC0wNC0xNlQwOTo1Njo1OCswMDowMJzsdOUAAAASdEVYdFNvZnR3YXJlAEdyZWVuc2hvdF5VCAUAAAAASUVORK5CYII="},3159:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/ReactComponentLifecycle-83c4104c05bd51bfd15e92348060d39a.png"},4496:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/ReactSyntheticEvents-4c0afc0525ad26f8ec7ec03816133710.png"},842:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var r=t(8101);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);