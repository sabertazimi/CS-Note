"use strict";(self.webpackChunkawesome_notes=self.webpackChunkawesome_notes||[]).push([[6492],{4180:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Programming/DevOps/CleanCodeBasicNotes","title":"Clean Code Basic Notes","description":"Basic Code Patterns","source":"@site/notes/Programming/DevOps/CleanCodeBasicNotes.md","sourceDirName":"Programming/DevOps","slug":"/Programming/DevOps/CleanCodeBasicNotes","permalink":"/awesome-notes/Programming/DevOps/CleanCodeBasicNotes","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/awesome-notes/edit/main/notes/Programming/DevOps/CleanCodeBasicNotes.md","tags":[{"inline":true,"label":"Programming","permalink":"/awesome-notes/tags/programming"},{"inline":true,"label":"DevOps","permalink":"/awesome-notes/tags/dev-ops"},{"inline":true,"label":"Design Pattern","permalink":"/awesome-notes/tags/design-pattern"},{"inline":true,"label":"Clean Code","permalink":"/awesome-notes/tags/clean-code"}],"version":"current","lastUpdatedBy":"renovate[bot]","lastUpdatedAt":1732127335000,"frontMatter":{"author":"Sabertazimi","authorTitle":"Web Developer","authorURL":"https://github.com/sabertazimi","authorImageURL":"https://github.com/sabertazimi.png","tags":["Programming","DevOps","Design Pattern","Clean Code"]},"sidebar":"tutorialSidebar","previous":{"title":"Clean Architecture Basic Notes","permalink":"/awesome-notes/Programming/DevOps/CleanArchitectureBasicNotes"},"next":{"title":"Docker Basic Notes","permalink":"/awesome-notes/Programming/DevOps/DockerBasicNotes"}}');var i=t(5105),r=t(842);const a={author:"Sabertazimi",authorTitle:"Web Developer",authorURL:"https://github.com/sabertazimi",authorImageURL:"https://github.com/sabertazimi.png",tags:["Programming","DevOps","Design Pattern","Clean Code"]},l="Clean Code Basic Notes",o={},c=[{value:"Basic Code Patterns",id:"basic-code-patterns",level:2},{value:"SOLID Principles",id:"solid-principles",level:3},{value:"Single Responsibility Principle",id:"single-responsibility-principle",level:4},{value:"Open-Closed Principle",id:"open-closed-principle",level:4},{value:"Liskov Substitution Principle",id:"liskov-substitution-principle",level:4},{value:"Interface Segregation Principle",id:"interface-segregation-principle",level:4},{value:"Dependency Inversion Principle",id:"dependency-inversion-principle",level:4},{value:"Least Knowledge Principle",id:"least-knowledge-principle",level:3},{value:"Common Design Patterns",id:"common-design-patterns",level:2},{value:"Patterns Classification",id:"patterns-classification",level:3},{value:"Creation Patterns",id:"creation-patterns",level:4},{value:"Structural Patterns",id:"structural-patterns",level:4},{value:"Behavioral Patterns",id:"behavioral-patterns",level:4},{value:"Factory Method Pattern",id:"factory-method-pattern",level:3},{value:"Static Factory Method Pattern",id:"static-factory-method-pattern",level:4},{value:"Dynamic Factory Method Pattern",id:"dynamic-factory-method-pattern",level:4},{value:"Asynchronous Factory Method Pattern",id:"asynchronous-factory-method-pattern",level:4},{value:"Abstract Factory Pattern",id:"abstract-factory-pattern",level:3},{value:"Builder Pattern",id:"builder-pattern",level:3},{value:"Prototype Pattern",id:"prototype-pattern",level:3},{value:"Singleton Pattern",id:"singleton-pattern",level:3},{value:"Class Singleton Pattern",id:"class-singleton-pattern",level:4},{value:"Closure Singleton Pattern",id:"closure-singleton-pattern",level:4},{value:"Adapter Pattern",id:"adapter-pattern",level:3},{value:"Bridge Pattern",id:"bridge-pattern",level:3},{value:"Composite Pattern",id:"composite-pattern",level:3},{value:"Composite Pattern Implementation",id:"composite-pattern-implementation",level:4},{value:"Decorator Pattern",id:"decorator-pattern",level:3},{value:"Facade Pattern",id:"facade-pattern",level:3},{value:"Flyweight Pattern",id:"flyweight-pattern",level:3},{value:"Flyweight Factory Pattern",id:"flyweight-factory-pattern",level:4},{value:"Flyweight Pool Pattern",id:"flyweight-pool-pattern",level:4},{value:"Proxy Pattern",id:"proxy-pattern",level:3},{value:"Chain of Responsibility Pattern",id:"chain-of-responsibility-pattern",level:3},{value:"Command Pattern",id:"command-pattern",level:3},{value:"Iterator Pattern",id:"iterator-pattern",level:3},{value:"Mediator Pattern",id:"mediator-pattern",level:3},{value:"Observer Pattern",id:"observer-pattern",level:3},{value:"Pub-Sub Pattern",id:"pub-sub-pattern",level:3},{value:"Pub-Sub Pattern Implementation",id:"pub-sub-pattern-implementation",level:4},{value:"Pub-Sub Pattern Usage",id:"pub-sub-pattern-usage",level:4},{value:"State Pattern",id:"state-pattern",level:3},{value:"Strategy Pattern",id:"strategy-pattern",level:3},{value:"Template Method Pattern",id:"template-method-pattern",level:3},{value:"Visitor Pattern",id:"visitor-pattern",level:3},{value:"IoC and DI Pattern",id:"ioc-and-di-pattern",level:3},{value:"Inversion of Control",id:"inversion-of-control",level:4},{value:"Depends on Abstraction",id:"depends-on-abstraction",level:4},{value:"Injection Container",id:"injection-container",level:4},{value:"Mixin Pattern",id:"mixin-pattern",level:3},{value:"Prototype Mixin Pattern",id:"prototype-mixin-pattern",level:4},{value:"Class Mixin Pattern",id:"class-mixin-pattern",level:4},{value:"Programming Paradigms",id:"programming-paradigms",level:2},{value:"Taxonomy of Paradigms",id:"taxonomy-of-paradigms",level:3},{value:"Observable Nondeterminism",id:"observable-nondeterminism",level:4},{value:"Named State",id:"named-state",level:4},{value:"Object-Oriented Programming",id:"object-oriented-programming",level:3},{value:"Functional Programming",id:"functional-programming",level:3},{value:"Framework Paradigms",id:"framework-paradigms",level:2},{value:"Third-party Libraries Usage",id:"third-party-libraries-usage",level:3},{value:"Framework Paradigms Comparison",id:"framework-paradigms-comparison",level:3},{value:"MVC Pattern",id:"mvc-pattern",level:3},{value:"Controller",id:"controller",level:4},{value:"MVVM Pattern",id:"mvvm-pattern",level:3},{value:"AOP Pattern",id:"aop-pattern",level:3},{value:"jQuery Pattern",id:"jquery-pattern",level:3},{value:"Framework Paradigms Reference",id:"framework-paradigms-reference",level:3},{value:"Code Review",id:"code-review",level:2},{value:"Code Review Basis",id:"code-review-basis",level:3},{value:"Code Smell Review",id:"code-smell-review",level:3},{value:"Security Review",id:"security-review",level:3},{value:"Documents Review",id:"documents-review",level:3},{value:"Comments Review",id:"comments-review",level:3},{value:"Test Review",id:"test-review",level:3},{value:"Refactoring",id:"refactoring",level:2},{value:"Refactoring Basis",id:"refactoring-basis",level:3},{value:"Encapsulation Refactoring",id:"encapsulation-refactoring",level:3},{value:"Condition Refactoring",id:"condition-refactoring",level:3},{value:"API Refactoring",id:"api-refactoring",level:3},{value:"Reference",id:"reference",level:2}];function d(n){const e={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"clean-code-basic-notes",children:"Clean Code Basic Notes"})}),"\n",(0,i.jsx)(e.h2,{id:"basic-code-patterns",children:"Basic Code Patterns"}),"\n",(0,i.jsx)(e.admonition,{title:"Design Patterns",type:"tip",children:(0,i.jsx)(e.p,{children:"Software design is the art of managing dependencies and abstractions."})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Minimizing dependencies."}),"\n",(0,i.jsx)(e.li,{children:"Introduce fitting abstractions."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"solid-principles",children:"SOLID Principles"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Single Responsibility Principle: \u5355\u4e00\u529f\u80fd\u539f\u5219."}),"\n",(0,i.jsx)(e.li,{children:"Open-closed Principle: \u5f00\u95ed\u539f\u5219."}),"\n",(0,i.jsx)(e.li,{children:"Liskov Substitution Principle: \u91cc\u6c0f\u66ff\u6362\u539f\u5219."}),"\n",(0,i.jsx)(e.li,{children:"Interface Segregation Principle: \u63a5\u53e3\u9694\u79bb\u539f\u5219."}),"\n",(0,i.jsx)(e.li,{children:"Dependency Inversion Principle: \u4f9d\u8d56\u53cd\u8f6c\u539f\u5219."}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"SOLID Principles",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5355\u4e00\u804c\u8d23\u662f\u6240\u6709\u8bbe\u8ba1\u539f\u5219\u7684\u57fa\u7840."}),"\n",(0,i.jsx)(e.li,{children:"\u5f00\u95ed\u539f\u5219\u662f\u8bbe\u8ba1\u7684\u7ec8\u6781\u76ee\u6807."}),"\n",(0,i.jsx)(e.li,{children:"\u91cc\u6c0f\u66ff\u6362\u539f\u5219\u5f3a\u8c03\u7684\u662f\u5b50\u7c7b\u66ff\u6362\u7236\u7c7b\u540e\u7a0b\u5e8f\u8fd0\u884c\u65f6\u7684\u6b63\u786e\u6027, \u5b83\u7528\u6765\u5e2e\u52a9\u5b9e\u73b0\u5f00\u95ed\u539f\u5219."}),"\n",(0,i.jsx)(e.li,{children:"\u63a5\u53e3\u9694\u79bb\u539f\u5219\u7528\u6765\u5e2e\u52a9\u5b9e\u73b0\u91cc\u6c0f\u66ff\u6362\u539f\u5219, \u540c\u65f6\u5b83\u4e5f\u4f53\u73b0\u4e86\u5355\u4e00\u804c\u8d23."}),"\n",(0,i.jsx)(e.li,{children:"\u4f9d\u8d56\u5012\u7f6e\u539f\u5219\u662f\u8fc7\u7a0b\u5f0f\u8bbe\u8ba1\u4e0e\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u7684\u5206\u6c34\u5cad, \u540c\u65f6\u5b83\u4e5f\u88ab\u7528\u6765\u6307\u5bfc\u63a5\u53e3\u9694\u79bb\u539f\u5219."}),"\n"]})}),"\n",(0,i.jsx)(e.h4,{id:"single-responsibility-principle",children:"Single Responsibility Principle"}),"\n",(0,i.jsx)(e.p,{children:"Too much functionality is in one class and you modify a piece of it,\nit can be difficult to understand how that will affect other dependent modules:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Singleton pattern."}),"\n",(0,i.jsx)(e.li,{children:"Decorator pattern."}),"\n",(0,i.jsx)(e.li,{children:"Proxy pattern."}),"\n",(0,i.jsx)(e.li,{children:"Iterator pattern."}),"\n",(0,i.jsx)(e.li,{children:"Visitor pattern."}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// BAD\nclass Animal {\n  constructor(name) {\n    super(name)\n  }\n\n  getAnimalName() {\n    return this.name\n  }\n\n  saveAnimal(animal) {}\n}\n\n// GOOD\nclass Animal {\n  constructor(name) {\n    super(name)\n  }\n\n  getAnimalName() {\n    return this.name\n  }\n}\n\nclass AnimalDB {\n  getAnimal(animal) {}\n  saveAnimal(animal) {}\n}\n"})}),"\n",(0,i.jsx)(e.admonition,{title:"Exception Handle",type:"tip",children:(0,i.jsxs)(e.p,{children:["\u5f02\u5e38\u5904\u7406\u89c6\u4f5c\u5355\u72ec\u804c\u8d23,\n\u62bd\u79bb ",(0,i.jsx)(e.code,{children:"try catch"})," \u4ee3\u7801\u5757,\n\u4f7f\u4e4b\u6210\u4e3a\u5355\u72ec\u51fd\u6570."]})}),"\n",(0,i.jsx)(e.h4,{id:"open-closed-principle",children:"Open-Closed Principle"}),"\n",(0,i.jsx)(e.p,{children:"Allow users to add new functionalities without changing existing code,\nopen for extension, close for modification:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Polymorphism (\u591a\u6001\u6027)."}),"\n",(0,i.jsx)(e.li,{children:"Adapter pattern."}),"\n",(0,i.jsx)(e.li,{children:"Decorator pattern."}),"\n",(0,i.jsx)(e.li,{children:"Proxy pattern."}),"\n",(0,i.jsx)(e.li,{children:"Chain of responsibility pattern."}),"\n",(0,i.jsx)(e.li,{children:"Iterator pattern."}),"\n",(0,i.jsx)(e.li,{children:"Pub-Sub pattern."}),"\n",(0,i.jsx)(e.li,{children:"State pattern."}),"\n",(0,i.jsx)(e.li,{children:"Strategy pattern."}),"\n",(0,i.jsx)(e.li,{children:"Template Method Pattern."}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Coder {\n  constructor(fullName, language, hobby, education, workplace, position) {\n    this.fullName = fullName\n    this.language = language\n    this.hobby = hobby\n    this.education = education\n    this.workplace = workplace\n    this.position = position\n  }\n}\n\n// BAD: filter by any other new property have to change CodeFilter's code.\nclass CoderFilter {\n  filterByName(coders, fullName) {\n    return coders.filter(coder => coder.fullName === fullName)\n  }\n\n  filterByLang(coders, language) {\n    return coders.filter(coder => coder.language === language)\n  }\n\n  filterByHobby(coders, hobby) {\n    return coders.filter(coder => coder.hobby === hobby)\n  }\n}\n\n// GOOD\nclass CoderFilter {\n  filterByProp = (array, propName, value) =>\n    array.filter(element => element[propName] === value)\n}\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"const animals: Array<Animal> = [new Animal('lion'), new Animal('mouse')]\n\nfunction AnimalSound(a: Array<Animal>) {\n  for (let i = 0; i <= a.length; i++) {\n    if (a[i].name === 'lion')\n      log('roar')\n\n    if (a[i].name === 'mouse')\n      log('squeak')\n  }\n}\n\nAnimalSound(animals)\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Animal {\n  makeSound()\n  // ...\n}\n\nclass Lion extends Animal {\n  makeSound() {\n    return 'roar'\n  }\n}\n\nclass Squirrel extends Animal {\n  makeSound() {\n    return 'squeak'\n  }\n}\n\nclass Snake extends Animal {\n  makeSound() {\n    return 'hiss'\n  }\n}\n\nfunction AnimalSound(a: Array<Animal>) {\n  for (let i = 0; i <= a.length; i++) log(a[i].makeSound())\n}\n\nAnimalSound(animals)\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Discount {\n  giveDiscount() {\n    if (this.customer === 'fav')\n      return this.price * 0.2\n\n    if (this.customer === 'vip')\n      return this.price * 0.4\n  }\n}\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class VIPDiscount extends Discount {\n  getDiscount() {\n    return super.getDiscount() * 2\n  }\n}\n\nclass SuperVIPDiscount extends VIPDiscount {\n  getDiscount() {\n    return super.getDiscount() * 2\n  }\n}\n"})}),"\n",(0,i.jsx)(e.h4,{id:"liskov-substitution-principle",children:"Liskov Substitution Principle"}),"\n",(0,i.jsx)(e.p,{children:"Objects of ParentType can be replaced with objects of SubType without altering.\nAltering shows that SubType should not be subtype of ParentType\n(break Open Closed Principle),\nyou should re-design ParentType and SubType."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"function AnimalLegCount(a: Array<Animal>) {\n  for (let i = 0; i <= a.length; i++) {\n    if (typeof a[i] === 'Lion') {\n      log(LionLegCount(a[i]));\n    }\n\n    if (typeof a[i] === 'Mouse') {\n      log(MouseLegCount(a[i]));\n    }\n\n    if (typeof a[i] === 'Snake') {\n      log(SnakeLegCount(a[i]));\n    }\n  }\n}\n\nAnimalLegCount(animals);\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Animal {\n  LegCount() {\n    return 2\n  }\n}\n\nclass Lion extends Animal {\n  LegCount() {\n    return 4\n  }\n}\n\nfunction AnimalLegCount(a: Array<Animal>) {\n  for (let i = 0; i <= a.length; i++) a[i].LegCount()\n}\n\nAnimalLegCount(animals)\n"})}),"\n",(0,i.jsx)(e.h4,{id:"interface-segregation-principle",children:"Interface Segregation Principle"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Make ",(0,i.jsx)(e.strong,{children:"fine grained"})," interfaces that are client specific."]}),"\n",(0,i.jsx)(e.li,{children:"Clients should not be forced to depend upon interfaces that they do not use:\n\u4efb\u4f55\u5c42\u6b21\u7684\u8f6f\u4ef6\u8bbe\u8ba1\u5982\u679c\u4f9d\u8d56\u4e86\u5b83\u5e76\u4e0d\u9700\u8981\u7684\u4e1c\u897f, \u5c31\u4f1a\u5e26\u6765\u610f\u6599\u4e4b\u5916\u7684\u9ebb\u70e6."}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// BAD.\ninterface IShape {\n  drawCircle: () => any\n  drawSquare: () => any\n  drawRectangle: () => any\n}\n\nclass Circle implements IShape {\n  drawCircle() {\n    // ...\n  }\n\n  drawSquare() {\n    // ...\n  }\n\n  drawRectangle() {\n    // ...\n  }\n}\n\nclass Square implements IShape {\n  drawCircle() {\n    // ...\n  }\n\n  drawSquare() {\n    // ...\n  }\n\n  drawRectangle() {\n    // ...\n  }\n}\n\nclass Rectangle implements IShape {\n  drawCircle() {\n    // ...\n  }\n\n  drawSquare() {\n    // ...\n  }\n\n  drawRectangle() {\n    // ...\n  }\n}\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// GOOD.\ninterface IShape {\n  draw: () => any\n}\n\ninterface ICircle {\n  drawCircle: () => any\n}\n\ninterface ISquare {\n  drawSquare: () => any\n}\n\ninterface IRectangle {\n  drawRectangle: () => any\n}\n\ninterface ITriangle {\n  drawTriangle: () => any\n}\n\nclass Circle implements ICircle {\n  drawCircle() {\n    // ...\n  }\n}\n\nclass Square implements ISquare {\n  drawSquare() {\n    // ...\n  }\n}\n\nclass Rectangle implements IRectangle {\n  drawRectangle() {\n    // ...\n  }\n}\n\nclass Triangle implements ITriangle {\n  drawTriangle() {\n    // ...\n  }\n}\n\nclass CustomShape implements IShape {\n  draw() {\n    // ...\n  }\n}\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// GOOD.\nclass Circle implements IShape {\n  draw() {\n    // ...\n  }\n}\n\nclass Triangle implements IShape {\n  draw() {\n    // ...\n  }\n}\n\nclass Square implements IShape {\n  draw() {\n    // ...\n  }\n}\n\nclass Rectangle implements IShape {\n  draw() {\n    // ...\n  }\n}\n"})}),"\n",(0,i.jsx)(e.h4,{id:"dependency-inversion-principle",children:"Dependency Inversion Principle"}),"\n",(0,i.jsxs)(e.p,{children:["Dependency should be on ",(0,i.jsx)(e.strong,{children:"abstractions"})," not concretions:"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["High-level modules should not depend upon low-level modules.\nBoth should depend upon ",(0,i.jsx)(e.strong,{children:"abstractions"})]}),"\n",(0,i.jsx)(e.li,{children:"Abstractions should not depend on details.\nDetails should depend upon abstractions"}),"\n",(0,i.jsxs)(e.li,{children:["Pros:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Loosely coupled modules."}),"\n",(0,i.jsx)(e.li,{children:"Better reusability."}),"\n",(0,i.jsx)(e.li,{children:"Better testability."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class XMLHttpService extends XMLHttpRequestService {}\n\nclass Http {\n  constructor(private xmlHttpService: XMLHttpService) {}\n\n  get(url: string, options: any) {\n    this.xmlHttpService.request(url, 'GET')\n  }\n\n  post() {\n    this.xmlHttpService.request(url, 'POST')\n  }\n}\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"interface Connection {\n  request: (url: string, opts: any) => any\n}\n\n// Abstraction not upon on details (but upon on abstractions)\nclass Http {\n  constructor(private httpConnection: Connection) {}\n\n  get(url: string, options: any) {\n    this.httpConnection.request(url, 'GET')\n  }\n\n  post() {\n    this.httpConnection.request(url, 'POST')\n  }\n}\n\nclass XMLHttpService implements Connection {\n  xhr = new XMLHttpRequest()\n\n  request(url: string, opts: any) {\n    xhr.open()\n    xhr.send()\n  }\n}\n\nclass NodeHttpService implements Connection {\n  request(url: string, opts: any) {\n    // ...\n  }\n}\n\nclass MockHttpService implements Connection {\n  request(url: string, opts: any) {\n    // ...\n  }\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"least-knowledge-principle",children:"Least Knowledge Principle"}),"\n",(0,i.jsx)(e.p,{children:"\u6700\u5c11\u77e5\u8bc6\u539f\u5219 (Law of Demeter):"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e00\u4e2a\u8f6f\u4ef6\u5b9e\u4f53 (\u53d8\u91cf/\u5bf9\u8c61/\u7c7b/\u51fd\u6570/\u6a21\u5757/\u7cfb\u7edf) \u5e94\u5f53\u5c3d\u53ef\u80fd\u5c11\u5730\u4e0e\u5176\u4ed6\u5b9e\u4f53\u53d1\u751f\u76f8\u4e92\u4f5c\u7528."}),"\n",(0,i.jsx)(e.li,{children:"\u82e5\u4e24\u4e2a\u5bf9\u8c61\u65e0\u9700\u76f4\u63a5\u901a\u4fe1, \u5219\u4e24\u4e2a\u5bf9\u8c61\u4e0d\u5e94\u76f4\u63a5\u76f8\u4e92\u8054\u7cfb, \u5f15\u5165\u4e00\u4e2a\u7b2c\u4e09\u8005\u5bf9\u8c61\u627f\u62c5\u901a\u4fe1\u4f5c\u7528."}),"\n",(0,i.jsx)(e.li,{children:"Facade pattern."}),"\n",(0,i.jsx)(e.li,{children:"Mediator pattern."}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"common-design-patterns",children:"Common Design Patterns"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Common Design Patterns",src:t(4841).A+"",title:"Common Design Patterns",width:"529",height:"531"})}),"\n",(0,i.jsx)(e.h3,{id:"patterns-classification",children:"Patterns Classification"}),"\n",(0,i.jsx)(e.h4,{id:"creation-patterns",children:"Creation Patterns"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Factory Method (\u5de5\u5382\u65b9\u6cd5): \u901a\u8fc7\u5c06\u6570\u636e\u548c\u4e8b\u4ef6\u63a5\u53e3\u5316\u6765\u6784\u5efa\u82e5\u5e72\u4e2a\u5b50\u7c7b."}),"\n",(0,i.jsx)(e.li,{children:"Abstract Factory (\u62bd\u8c61\u5de5\u5382): \u5efa\u7acb\u82e5\u5e72\u65cf\u7c7b\u7684\u4e00\u4e2a\u5b9e\u4f8b, \u8fd9\u4e2a\u5b9e\u4f8b\u4e0d\u9700\u8981\u5177\u4f53\u7c7b\u7684\u7ec6\u8282\u4fe1\u606f (\u62bd\u8c61\u7c7b)."}),"\n",(0,i.jsx)(e.li,{children:"Builder (\u5efa\u9020\u8005): \u5c06\u5bf9\u8c61\u7684\u6784\u5efa\u65b9\u6cd5\u548c\u5176\u8868\u73b0\u5f62\u5f0f\u5206\u79bb\u5f00\u6765, \u603b\u662f\u6784\u5efa\u76f8\u540c\u7c7b\u578b\u7684\u5bf9\u8c61."}),"\n",(0,i.jsx)(e.li,{children:"Prototype (\u539f\u578b): \u4e00\u4e2a\u5b8c\u5168\u521d\u59cb\u5316\u7684\u5b9e\u4f8b, \u7528\u4e8e\u62f7\u8d1d\u6216\u8005\u514b\u9686."}),"\n",(0,i.jsx)(e.li,{children:"Singleton (\u5355\u4f8b): \u4e00\u4e2a\u7c7b\u53ea\u6709\u552f\u4e00\u7684\u4e00\u4e2a\u5b9e\u4f8b, \u8fd9\u4e2a\u5b9e\u4f8b\u5728\u6574\u4e2a\u7a0b\u5e8f\u4e2d\u6709\u4e00\u4e2a\u5168\u5c40\u7684\u8bbf\u95ee\u70b9."}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"structural-patterns",children:"Structural Patterns"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Adapter (\u9002\u914d\u5668\u6a21\u5f0f): \u5c06\u4e0d\u540c\u7c7b\u7684\u63a5\u53e3\u8fdb\u884c\u5339\u914d\u4e0e\u8c03\u6574, \u4f7f\u5f97\u5185\u90e8\u63a5\u53e3\u4e0d\u517c\u5bb9\u7684\u7c7b\u53ef\u4ee5\u534f\u540c\u5de5\u4f5c."}),"\n",(0,i.jsx)(e.li,{children:"Bridge (\u6865\u63a5\u6a21\u5f0f): \u5c06\u5bf9\u8c61\u7684\u63a5\u53e3\u4ece\u5176\u5b9e\u73b0\u4e2d\u5206\u79bb\u51fa\u6765, \u8fd9\u6837\u5bf9\u8c61\u7684\u5b9e\u73b0\u548c\u63a5\u53e3\u53ef\u4ee5\u72ec\u7acb\u7684\u53d8\u5316."}),"\n",(0,i.jsx)(e.li,{children:"Composite (\u7ec4\u5408\u6a21\u5f0f):\n\u901a\u8fc7\u5c06\u7b80\u5355\u53ef\u7ec4\u5408\u7684\u5bf9\u8c61\u7ec4\u5408\u8d77\u6765, \u6784\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u5bf9\u8c61,\n\u8fd9\u4e2a\u5bf9\u8c61\u7684\u80fd\u529b\u5c06\u4f1a\u8d85\u8fc7\u8fd9\u4e9b\u7ec4\u6210\u90e8\u5206\u7684\u80fd\u529b\u7684\u603b\u548c, \u4ea7\u751f\u65b0\u7684\u80fd\u529b."}),"\n",(0,i.jsx)(e.li,{children:"Decorator (\u88c5\u9970\u5668): \u52a8\u6001\u7ed9\u5bf9\u8c61\u589e\u52a0\u4e00\u4e9b\u53ef\u66ff\u6362\u7684\u5904\u7406\u6d41\u7a0b."}),"\n",(0,i.jsx)(e.li,{children:"Facade (\u5916\u89c2\u6a21\u5f0f): \u4e00\u4e2a\u7c7b\u9690\u85cf\u4e86\u5185\u90e8\u5b50\u7cfb\u7edf\u7684\u590d\u6742\u5ea6, \u53ea\u66b4\u9732\u51fa\u4e00\u4e9b\u7b80\u5355\u7684\u63a5\u53e3."}),"\n",(0,i.jsx)(e.li,{children:"Flyweight (\u4eab\u5143\u6a21\u5f0f) \u4e00\u4e2a\u7ec6\u7c92\u5ea6\u5bf9\u8c61, \u7528\u4e8e\u5c06\u5305\u542b\u5728\u5176\u5b83\u5730\u65b9\u7684\u4fe1\u606f \u5728\u4e0d\u540c\u5bf9\u8c61\u4e4b\u95f4\u9ad8\u6548\u5730\u5171\u4eab."}),"\n",(0,i.jsx)(e.li,{children:"Proxy (\u4ee3\u7406\u6a21\u5f0f): \u4e00\u4e2a\u5145\u5f53\u5360\u4f4d\u7b26\u7684\u5bf9\u8c61\u7528\u6765\u4ee3\u8868\u4e00\u4e2a\u771f\u5b9e\u7684\u5bf9\u8c61."}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"behavioral-patterns",children:"Behavioral Patterns"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Chain of Responsibility (\u54cd\u5e94\u94fe): \u4e00\u79cd\u5c06\u8bf7\u6c42\u5728\u4e00\u4e32\u5bf9\u8c61\u4e2d\u4f20\u9012\u7684\u65b9\u5f0f, \u5bfb\u627e\u53ef\u4ee5\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u7684\u5bf9\u8c61."}),"\n",(0,i.jsx)(e.li,{children:"Command (\u547d\u4ee4): \u5c01\u88c5\u547d\u4ee4\u8bf7\u6c42\u4e3a\u4e00\u4e2a\u5bf9\u8c61, \u4ece\u800c\u4f7f\u8bb0\u5f55\u65e5\u5fd7, \u961f\u5217\u7f13\u5b58\u8bf7\u6c42, \u672a\u5904\u7406\u8bf7\u6c42\u8fdb\u884c\u9519\u8bef\u5904\u7406 \u8fd9\u4e9b\u529f\u80fd\u79f0\u4e3a\u53ef\u80fd."}),"\n",(0,i.jsx)(e.li,{children:"Interpreter (\u89e3\u91ca\u5668): \u5c06\u8bed\u8a00\u5143\u7d20\u5305\u542b\u5728\u4e00\u4e2a\u5e94\u7528\u4e2d\u7684\u4e00\u79cd\u65b9\u5f0f, \u7528\u4e8e\u5339\u914d\u76ee\u6807\u8bed\u8a00\u7684\u8bed\u6cd5."}),"\n",(0,i.jsx)(e.li,{children:"Iterator (\u8fed\u4ee3\u5668): \u5728\u4e0d\u9700\u8981\u76f4\u5230\u96c6\u5408\u5185\u90e8\u5de5\u4f5c\u539f\u7406\u7684\u60c5\u51b5\u4e0b, \u987a\u5e8f\u8bbf\u95ee\u4e00\u4e2a\u96c6\u5408\u91cc\u9762\u7684\u5143\u7d20."}),"\n",(0,i.jsx)(e.li,{children:"Mediator (\u4e2d\u4ecb\u8005\u6a21\u5f0f): \u5728\u7c7b\u4e4b\u95f4\u5b9a\u4e49\u7b80\u5316\u7684\u901a\u4fe1\u65b9\u5f0f, \u7528\u4e8e\u907f\u514d\u7c7b\u4e4b\u95f4\u663e\u5f0f\u7684\u6301\u6709\u5f7c\u6b64\u7684\u5f15\u7528."}),"\n",(0,i.jsx)(e.li,{children:"Observer (\u89c2\u5bdf\u8005\u6a21\u5f0f): \u7528\u4e8e\u5c06\u53d8\u5316\u901a\u77e5\u7ed9\u591a\u4e2a\u7c7b\u7684\u65b9\u5f0f, \u53ef\u4ee5\u4fdd\u8bc1\u7c7b\u4e4b\u95f4\u7684\u4e00\u81f4\u6027."}),"\n",(0,i.jsx)(e.li,{children:"State (\u72b6\u6001): \u5f53\u5bf9\u8c61\u72b6\u6001\u6539\u53d8\u65f6, \u6539\u53d8\u5bf9\u8c61\u7684\u884c\u4e3a."}),"\n",(0,i.jsx)(e.li,{children:"Strategy (\u7b56\u7565): \u5c06\u7b97\u6cd5\u5c01\u88c5\u5230\u7c7b\u4e2d, \u5c06\u9009\u62e9\u548c\u5b9e\u73b0\u5206\u79bb\u5f00\u6765."}),"\n",(0,i.jsx)(e.li,{children:"Template Method (\u6a21\u677f\u65b9\u6cd5): \u5728\u4e00\u4e2a\u65b9\u6cd5\u4e2d\u4e3a\u67d0\u4e2a\u7b97\u6cd5\u5efa\u7acb\u4e00\u5c42\u5916\u58f3, \u5c06\u7b97\u6cd5\u7684\u5177\u4f53\u6b65\u9aa4\u4ea4\u4ed8\u7ed9\u5b50\u7c7b\u53bb\u505a."}),"\n",(0,i.jsx)(e.li,{children:"Visitor (\u8bbf\u95ee\u8005): \u4e3a\u7c7b\u589e\u52a0\u65b0\u7684\u64cd\u4f5c\u800c\u4e0d\u6539\u53d8\u7c7b\u672c\u8eab."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"factory-method-pattern",children:"Factory Method Pattern"}),"\n",(0,i.jsx)(e.p,{children:"Creating objects without specify exact object class:\nnot calling a constructor directly."}),"\n",(0,i.jsx)(e.h4,{id:"static-factory-method-pattern",children:"Static Factory Method Pattern"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"CoordinateSystem = {\n  CARTESIAN: 0,\n  POLAR: 1,\n}\n\nclass Point {\n  constructor(x, y) {\n    this.x = x\n    this.y = y\n  }\n\n  static get factory() {\n    return new PointFactory()\n  }\n}\n\nclass PointFactory {\n  static newCartesianPoint(x, y) {\n    return new Point(x, y)\n  }\n\n  static newPolarPoint(rho, theta) {\n    return new Point(rho * Math.cos(theta), rho * Math.sin(theta))\n  }\n}\n\nconst point = PointFactory.newPolarPoint(5, Math.PI / 2)\nconst point2 = PointFactory.newCartesianPoint(5, 6)\n"})}),"\n",(0,i.jsx)(e.h4,{id:"dynamic-factory-method-pattern",children:"Dynamic Factory Method Pattern"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Vehicle {\n  constructor({\n    type = 'vehicle',\n    state = 'brand new',\n    color = 'white',\n    speed = 0,\n  } = {}) {\n    this.type = type\n    this.state = state\n    this.color = color\n    this.speed = speed\n  }\n\n  run(...args) {\n    if (args.length === 0)\n      console.log(`${this.type} - run with: ${this.speed}km/s`)\n    else if (toString.apply(args[0]) === '[object Number]')\n      this.speed = args[0]\n  }\n\n  withColor(...args) {\n    if (args.length === 0)\n      console.log(`The color of this ${this.type} product is : ${this.color}`)\n    else if (toString.apply(args[0]) === '[object String]')\n      this.color = args[0]\n  }\n\n  reform(funcName, newFunc) {\n    if (\n      typeof this[funcName] === 'function'\n      || typeof this.prototype[funcName] === 'function'\n    ) {\n      delete this[funcName]\n      this.prototype[funcName] = newFunc\n    }\n  }\n\n  addFeature(funcName, newFunc) {\n    if (typeof this[funcName] === 'undefined') {\n      this[funcName] = newFunc\n      this.prototype[funcName] = newFunc\n    }\n  }\n}\n\nclass Car extends Vehicle {\n  constructor({\n    type = 'car',\n    state = 'brand new',\n    color = 'silver',\n    speed = 10,\n    doors = 4,\n  } = {}) {\n    super({ type, state, color, speed })\n    this.doors = doors\n  }\n}\n\nclass Truck extends Vehicle {\n  constructor({\n    type = 'truck',\n    state = 'used',\n    color = 'blue',\n    speed = 8,\n    wheelSize = 'large',\n  } = {}) {\n    super({ type, state, color, speed })\n    this.wheelSize = 'large'\n  }\n}\n\nclass VehicleFactory {\n  constructor() {\n    this.VehicleClass = Car\n  }\n\n  createVehicle(options) {\n    switch (options.vehicleType) {\n      case 'car':\n        this.VehicleClass = Car\n        break\n      case 'truck':\n        this.VehicleClass = Truck\n        break\n      default:\n        break\n    }\n\n    return new this.VehicleClass(options)\n  }\n}\n\nclass CarFactory extends VehicleFactory {\n  constructor() {\n    super()\n    this.VehicleClass = Car\n  }\n}\n\nclass TruckFactory extends VehicleFactory {\n  constructor() {\n    super()\n    this.VehicleClass = Truck\n  }\n}\n\nconst vehicleFactory = new VehicleFactory()\nconst car = vehicleFactory.createVehicle({\n  vehicleType: 'car',\n  color: 'yellow',\n  doors: 6,\n})\nconst movingTruck = vehicleFactory.createVehicle({\n  vehicleType: 'truck',\n  state: 'like new',\n  color: 'red',\n  wheelSize: 'small',\n})\n\nconst truckFactory = new TruckFactory()\nconst bigTruck = truckFactory.createVehicle({\n  state: 'bad.',\n  color: 'pink',\n  wheelSize: 'so big',\n})\n"})}),"\n",(0,i.jsx)(e.h4,{id:"asynchronous-factory-method-pattern",children:"Asynchronous Factory Method Pattern"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class DataContainer {\n  #data\n  #active = false\n\n  #init(data) {\n    this.#active = true\n    this.#data = data\n    return this\n  }\n\n  #check() {\n    if (!this.#active)\n      throw new TypeError('Not created by factory')\n  }\n\n  getData() {\n    this.#check()\n    return `DATA: ${this.#data}`\n  }\n\n  static async create() {\n    const data = await Promise.resolve('downloaded')\n    return new this().#init(data)\n  }\n}\n\nDataContainer.create().then(dc =>\n  assert.equal(dc.getData(), 'DATA: downloaded')\n)\n"})}),"\n",(0,i.jsx)(e.h3,{id:"abstract-factory-pattern",children:"Abstract Factory Pattern"}),"\n",(0,i.jsxs)(e.p,{children:["Encapsulate ",(0,i.jsx)(e.strong,{children:"a group of individual factories"}),"\nthat have a common theme without\nspecifying their concrete classes."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Drink {\n  consume() {}\n}\n\nclass Tea extends Drink {\n  consume() {\n    console.log('This is Tea')\n  }\n}\n\nclass Coffee extends Drink {\n  consume() {\n    console.log(`This is Coffee`)\n  }\n}\n\nclass DrinkFactory {\n  prepare(amount) {}\n}\n\nclass TeaFactory extends DrinkFactory {\n  makeTea() {\n    console.log(`Tea Created`)\n    return new Tea()\n  }\n}\n\nclass CoffeeFactory extends DrinkFactory {\n  makeCoffee() {\n    console.log(`Coffee Created`)\n    return new Coffee()\n  }\n}\n\nconst teaDrinkFactory = new TeaFactory()\nconst tea = teaDrinkFactory.makeTea()\ntea.consume()\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class AbstractVehicleFactory {\n  constructor() {\n    // Vehicle types\n    this.types = {}\n  }\n\n  getVehicle(type, customizations) {\n    const Vehicle = this.types[type]\n\n    return Vehicle ? new Vehicle(customizations) : null\n  }\n\n  registerVehicle(type, Vehicle) {\n    const proto = Vehicle.prototype\n\n    // Only register classes that fulfill the vehicle contract\n    if (proto.drive && proto.breakDown)\n      this.types[type] = Vehicle\n\n    return this\n  }\n}\n\n// Usage:\nconst abstractVehicleFactory = new AbstractVehicleFactory()\n  .registerVehicle('car', Car)\n  .registerVehicle('truck', Truck)\n\n// Instantiate a new car based on the abstract vehicle type\nconst car = abstractVehicleFactory.getVehicle('car', {\n  color: 'lime green',\n  state: 'like new',\n})\n\n// Instantiate a new truck in a similar manner\nconst truck = abstractVehicleFactory.getVehicle('truck', {\n  wheelSize: 'medium',\n  color: 'neon yellow',\n})\n"})}),"\n",(0,i.jsx)(e.h3,{id:"builder-pattern",children:"Builder Pattern"}),"\n",(0,i.jsx)(e.p,{children:"Flexible object creation with chain style calls."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Person {\n  constructor() {\n    this.streetAddress = ''\n    this.postcode = ''\n    this.city = ''\n    this.companyName = ''\n    this.position = ''\n    this.annualIncome = 0\n  }\n\n  toString() {\n    return (\n      `Person lives at ${this.streetAddress}, ${this.city}, ${this.postcode}\\n`\n      + `and works at ${this.companyName} as a ${this.position} earning ${this.annualIncome}`\n    )\n  }\n}\n\nclass PersonBuilder {\n  constructor(person = new Person()) {\n    this.person = person\n  }\n\n  get lives() {\n    return new PersonAddressBuilder(this.person)\n  }\n\n  get works() {\n    return new PersonJobBuilder(this.person)\n  }\n\n  build() {\n    return this.person\n  }\n}\n\nclass PersonJobBuilder extends PersonBuilder {\n  constructor(person) {\n    super(person)\n    console.log('New')\n  }\n\n  at(companyName) {\n    this.person.companyName = companyName\n    return this\n  }\n\n  asA(position) {\n    this.person.position = position\n    return this\n  }\n\n  earning(annualIncome) {\n    this.person.annualIncome = annualIncome\n    return this\n  }\n}\n\nclass PersonAddressBuilder extends PersonBuilder {\n  constructor(person) {\n    super(person)\n    console.log('New')\n  }\n\n  at(streetAddress) {\n    this.person.streetAddress = streetAddress\n    return this\n  }\n\n  withPostcode(postcode) {\n    this.person.postcode = postcode\n    return this\n  }\n\n  in(city) {\n    this.person.city = city\n    return this\n  }\n}\n\nconst personBuilder = new PersonBuilder()\nconst person = personBuilder.lives\n  .at('ABC Road')\n  .in('Multan')\n  .withPostcode('66000')\n  .works\n  .at('Beijing')\n  .asA('Engineer')\n  .earning(10000)\n  .build()\n"})}),"\n",(0,i.jsx)(e.h3,{id:"prototype-pattern",children:"Prototype Pattern"}),"\n",(0,i.jsx)(e.p,{children:"\u53ef\u4ee5\u4f7f\u7528\u539f\u578b\u6a21\u5f0f\u6765\u51cf\u5c11\u521b\u5efa\u65b0\u5bf9\u8c61\u7684\u6210\u672c:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Object.create()"}),"."]}),"\n",(0,i.jsx)(e.li,{children:"Object shallow clone."}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Car {\n  constructor(name, model) {\n    this.name = name\n    this.model = model\n  }\n\n  SetName(name) {\n    console.log(`${name}`)\n  }\n\n  clone() {\n    return new Car(this.name, this.model)\n  }\n}\n\nconst car = new Car()\ncar.SetName('Audi')\n\nconst car2 = car.clone()\ncar2.SetName('BMW')\n"})}),"\n",(0,i.jsx)(e.h3,{id:"singleton-pattern",children:"Singleton Pattern"}),"\n",(0,i.jsx)(e.admonition,{title:"Singleton Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Redux/VueX global store."}),"\n",(0,i.jsx)(e.li,{children:"Window \u5bf9\u8c61."}),"\n",(0,i.jsx)(e.li,{children:"\u5168\u5c40\u914d\u7f6e."}),"\n",(0,i.jsx)(e.li,{children:"\u5168\u5c40\u7f13\u5b58."}),"\n",(0,i.jsx)(e.li,{children:"\u7ebf\u7a0b\u6c60."}),"\n",(0,i.jsx)(e.li,{children:"\u5185\u5b58\u6c60."}),"\n"]})}),"\n",(0,i.jsx)(e.h4,{id:"class-singleton-pattern",children:"Class Singleton Pattern"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Singleton {\n  constructor() {\n    const instance = this.constructor.instance\n    if (instance)\n      return instance\n    this.constructor.instance = this\n  }\n\n  say() {\n    console.log('Saying...')\n  }\n}\n\nclass Singleton {\n  private static instance: Singleton\n  private constructor() {}\n\n  public static getInstance() {\n    if (!Singleton.instance)\n      Singleton.instance = new Singleton()\n\n    return Singleton.instance\n  }\n\n  someMethod() {}\n}\n\nconst instance = Singleton.getInstance()\n"})}),"\n",(0,i.jsx)(e.h4,{id:"closure-singleton-pattern",children:"Closure Singleton Pattern"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"const createLoginLayer = (function (creator) {\n  let singleton\n\n  return function () {\n    if (!singleton)\n      singleton = creator()\n    return singleton\n  }\n})(loginCreator)\n"})}),"\n",(0,i.jsx)(e.h3,{id:"adapter-pattern",children:"Adapter Pattern"}),"\n",(0,i.jsx)(e.p,{children:"\u9002\u914d\u5668\u901a\u8fc7\u5185\u90e8\u4f7f\u7528\u65b0\u63a5\u53e3\u89c4\u5b9a\u7684\u5c5e\u6027/\u65b9\u6cd5, \u521b\u5efa\u4e00\u4e2a\u5916\u89c2\u4e0e\u65e7\u63a5\u53e3\u4e00\u81f4\u7684\u65b9\u6cd5\n(\u517c\u5bb9\u65e7\u4ee3\u7801):"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"old.method()"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"adapter.method()"}),":\n\u5b9e\u73b0\u6b64 method \u65f6, \u4f7f\u7528\u4e86\u65b0\u63a5\u53e3\u89c4\u5b9a\u7684\u5c5e\u6027/\u65b9\u6cd5."]}),"\n",(0,i.jsx)(e.li,{children:"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219."}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Adapter Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"API adapter."}),"\n",(0,i.jsx)(e.li,{children:"3rd-party code adapter."}),"\n",(0,i.jsx)(e.li,{children:"Legacy code adapter (version compatibility)."}),"\n",(0,i.jsx)(e.li,{children:"Testing and mocking."}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Calculator1 {\n  constructor() {\n    this.operations = function (value1, value2, operation) {\n      switch (operation) {\n        case 'add':\n          return value1 + value2\n        case 'sub':\n          return value1 - value2\n        default:\n          throw new Error('Unsupported operations!')\n      }\n    }\n  }\n}\n\nclass Calculator2 {\n  constructor() {\n    this.add = function (value1, value2) {\n      return value1 + value2\n    }\n\n    this.sub = function (value1, value2) {\n      return value1 - value2\n    }\n  }\n}\n\nclass CalcAdapter {\n  constructor() {\n    const cal2 = new Calculator2()\n\n    this.operations = function (value1, value2, operation) {\n      switch (operation) {\n        case 'add':\n          return cal2.add(value1, value2)\n        case 'sub':\n          return cal2.sub(value1, value2)\n        default:\n          throw new Error('Unsupported operations!')\n      }\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// old interface\nfunction Shipping() {\n  this.request = function (zipStart, zipEnd, weight) {\n    // ...\n    return '$49.75'\n  }\n}\n\n// new interface\nfunction AdvancedShipping() {\n  this.login = function (credentials) {\n    /* ... */\n  }\n  this.setStart = function (start) {\n    /* ... */\n  }\n  this.setDestination = function (destination) {\n    /* ... */\n  }\n  this.calculate = function (weight) {\n    return '$39.50'\n  }\n}\n\n// adapter interface\nfunction AdapterShipping(credentials) {\n  const shipping = new AdvancedShipping()\n\n  shipping.login(credentials)\n\n  return {\n    request(zipStart, zipEnd, weight) {\n      shipping.setStart(zipStart)\n      shipping.setDestination(zipEnd)\n      return shipping.calculate(weight)\n    },\n  }\n}\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"const shipping = new Shipping()\nconst adapterShipping = new AdapterShipping(credentials)\n\n// original shipping object and interface\nlet cost = shipping.request('78701', '10010', '2 lbs')\nlog.add(`Old cost: ${cost}`)\n// new shipping object with adapted interface\ncost = adapter.request('78701', '10010', '2 lbs')\n"})}),"\n",(0,i.jsx)(e.h3,{id:"bridge-pattern",children:"Bridge Pattern"}),"\n",(0,i.jsx)(e.p,{children:"Split large class or set of closely related classes into two separate hierarchies:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5206\u79bb\u62bd\u8c61\u548c\u5b9e\u73b0 (Separate abstracts and implements)."}),"\n",(0,i.jsxs)(e.li,{children:["\u5206\u79bb\u5bf9\u8c61\u7684\u4e24\u79cd\u4e0d\u540c\u5c5e\u6027. ",(0,i.jsx)(e.code,{children:"e.g"})," \u4ece 2 \u4e2a\u4e0d\u540c\u7ef4\u5ea6\u4e0a\u6269\u5c55\u5bf9\u8c61."]}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Bridge Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Platform independence: e.g separate GUI frameworks from operating systems."}),"\n",(0,i.jsx)(e.li,{children:"Database drivers."}),"\n",(0,i.jsx)(e.li,{children:"Device drivers."}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class VectorRenderer {\n  renderCircle(radius) {\n    console.log(`Drawing a circle of radius ${radius}`)\n  }\n}\n\nclass RasterRenderer {\n  renderCircle(radius) {\n    console.log(`Drawing pixels for circle of radius ${radius}`)\n  }\n}\n\nclass Shape {\n  constructor(renderer) {\n    this.renderer = renderer\n  }\n}\n\nclass Circle extends Shape {\n  constructor(renderer, radius) {\n    super(renderer)\n    this.radius = radius\n  }\n\n  draw() {\n    this.renderer.renderCircle(this.radius)\n  }\n\n  resize(factor) {\n    this.radius *= factor\n  }\n}\n\nconst raster = new RasterRenderer()\nconst vector = new VectorRenderer()\nconst circle = new Circle(vector, 5)\ncircle.draw()\ncircle.resize(2)\ncircle.draw()\n"})}),"\n",(0,i.jsx)(e.h3,{id:"composite-pattern",children:"Composite Pattern"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5c01\u88c5: \u7ec4\u5408\u6a21\u5f0f\u5c06\u5bf9\u8c61\u7ec4\u5408\u6210\u6811\u5f62\u7ed3\u6784, \u4ee5\u8868\u793a ",(0,i.jsx)(e.code,{children:"\u90e8\u5206+\u6574\u4f53"})," \u7684\u5c42\u6b21\u7ed3\u6784."]}),"\n",(0,i.jsx)(e.li,{children:"\u591a\u6001: \u7ec4\u5408\u6a21\u5f0f\u901a\u8fc7\u5bf9\u8c61\u7684\u591a\u6001\u6027\u8868\u73b0, \u4f7f\u5f97\u7528\u6237\u5bf9\u5355\u4e2a\u5bf9\u8c61\u548c\u7ec4\u5408\u5bf9\u8c61\u7684\u4f7f\u7528\u5177\u6709\u4e00\u81f4\u6027."}),"\n",(0,i.jsx)(e.li,{children:"\u6269\u5c55: \u901a\u8fc7\u5c06\u7b80\u5355\u53ef\u7ec4\u5408\u7684\u5bf9\u8c61\u7ec4\u5408\u8d77\u6765, \u6784\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u5bf9\u8c61,\n\u8fd9\u4e2a\u5bf9\u8c61\u7684\u80fd\u529b\u5c06\u4f1a\u8d85\u8fc7\u8fd9\u4e9b\u7ec4\u6210\u90e8\u5206\u7684\u80fd\u529b\u7684\u603b\u548c, \u4ea7\u751f\u65b0\u7684\u80fd\u529b."}),"\n",(0,i.jsxs)(e.li,{children:["\u7ec4\u5408\u6a21\u5f0f\u662f\u4e00\u79cd ",(0,i.jsx)(e.code,{children:"HAS-A"})," (\u805a\u5408) \u7684\u5173\u7cfb, \u800c\u4e0d\u662f ",(0,i.jsx)(e.code,{children:"IS-A"}),":\n\u7ec4\u5408\u5bf9\u8c61\u5305\u542b\u4e00\u7ec4\u53f6\u5bf9\u8c61, \u4f46 Leaf \u5e76\u4e0d\u662f Composite \u7684\u5b50\u7c7b (\u5c3d\u7ba1\u79f0\u4e3a\u7236\u5b50\u8282\u70b9).\n\u7ec4\u5408\u5bf9\u8c61\u628a\u8bf7\u6c42\u59d4\u6258\u7ed9\u5b83\u6240\u5305\u542b\u7684\u6240\u6709\u53f6\u5bf9\u8c61,\n\u5b83\u4eec\u80fd\u591f\u5408\u4f5c\u7684\u5173\u952e\u662f\u62e5\u6709",(0,i.jsx)(e.strong,{children:"\u76f8\u540c\u7684\u63a5\u53e3"}),"."]}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Composite Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Graphics and UI Frameworks: e.g DOM."}),"\n",(0,i.jsx)(e.li,{children:"File Systems: e.g directory tree."}),"\n",(0,i.jsx)(e.li,{children:"Organization Structures."}),"\n",(0,i.jsx)(e.li,{children:"AST."}),"\n"]})}),"\n",(0,i.jsx)(e.h4,{id:"composite-pattern-implementation",children:"Composite Pattern Implementation"}),"\n",(0,i.jsx)(e.p,{children:"\u6811\u5f62\u7ed3\u6784:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6839\u7ed3\u70b9:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Component \u62bd\u8c61\u5bf9\u8c61/\u63a5\u53e3 \u91c7\u7528\u6700\u5927\u5bbd\u63a5\u53e3,\u5b9a\u4e49\u5185\u70b9\u548c\u53f6\u70b9\u7684\u64cd\u4f5c."}),"\n",(0,i.jsx)(e.li,{children:"\u5c06\u5185\u70b9\u7279\u6709\u7684\u64cd\u4f5c\u96c6\u8bbe\u4e3a\u7f3a\u7701\u64cd\u4f5c\u96c6 (\u7a7a\u5b9e\u73b0)."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5185\u70b9:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6301\u6709\u7236\u7ed3\u70b9\u548c\u5b50\u8282\u70b9\u7684\u5f15\u7528 (\u53ef\u4f7f\u7528 Flyweight \u6a21\u5f0f\u5b9e\u73b0\u5171\u4eab)."}),"\n",(0,i.jsx)(e.li,{children:"\u64cd\u4f5c\u96c6: \u5185\u70b9\u64cd\u4f5c\u96c6 (\u53ef\u6dfb\u52a0/\u5220\u9664\u7ec4\u4ef6)."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u53f6\u70b9:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6301\u6709\u7236\u7ed3\u70b9\u5f15\u7528."}),"\n",(0,i.jsx)(e.li,{children:"\u64cd\u4f5c\u96c6: \u53f6\u70b9\u64cd\u4f5c\u96c6 (\u4e0d\u53ef\u6dfb\u52a0/\u5220\u9664\u7ec4\u4ef6)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"interface Component {\n  add: (Component) => void\n  remove: (Component) => void\n  do: (Context) => void\n}\n\nclass Composite implements Component {\n  add(child: Component) {\n    console.log('Add child')\n  }\n\n  remove(child: Component) {\n    console.log('Remove child')\n  }\n\n  do(context: Context) {\n    console.log('Do composite work')\n\n    for (const child of this.children) child.do(context)\n  }\n}\n\nclass Leaf implements Component {\n  add(child: Component) {\n    throw new UnsupportedOperationException()\n  }\n\n  remove(child: Component) {\n    if (this.parent === null)\n      return\n    console.log('Remove self')\n  }\n\n  do(context: Context) {\n    console.log('Do leaf work')\n  }\n}\n\nconst root = new Composite()\nconst c1 = new Composite()\nconst c2 = new Composite()\nconst leaf1 = new Leaf()\nconst leaf2 = new Leaf()\nroot.add(c1)\nroot.add(c2)\nc1.add(leaf1)\nc1.add(leaf2)\nroot.do()\n"})}),"\n",(0,i.jsx)(e.h3,{id:"decorator-pattern",children:"Decorator Pattern"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u91cd\u5199/\u91cd\u8f7d/\u6269\u5c55\u5bf9\u8c61\u539f\u6709\u7684\u884c\u4e3a (Methods), \u4f46\u4e0d\u6539\u53d8\u5bf9\u8c61\u539f\u6709\u5c5e\u6027."}),"\n",(0,i.jsx)(e.li,{children:"\u53ef\u4ee5\u6dfb\u52a0\u65b0\u5c5e\u6027, \u5e76\u56f4\u7ed5\u65b0\u5c5e\u6027\u6269\u5c55\u5bf9\u8c61\u7684\u539f\u884c\u4e3a e.g \u539f\u5bf9\u8c61\u53ea\u4f1a\u8bf4\u4e2d\u6587, \u88c5\u9970\u540e\u540c\u65f6\u8bf4\u4e2d\u6587\u4e0e\u82f1\u6587."}),"\n",(0,i.jsx)(e.li,{children:"\u907f\u514d\u4e86\u901a\u8fc7\u7ee7\u627f\u6765\u4e3a\u7c7b\u578b\u6dfb\u52a0\u65b0\u804c\u8d23, \u901a\u8fc7\u7ee7\u627f\u7684\u65b9\u5f0f\u5bb9\u6613\u9020\u6210\u5b50\u7c7b\u7684\u81a8\u80c0."}),"\n",(0,i.jsxs)(e.li,{children:["\u4fdd\u6301\u63a5\u53e3\u7684\u4e00\u81f4\u6027, ",(0,i.jsx)(e.strong,{children:"\u52a8\u6001"}),"\u6539\u53d8\u5bf9\u8c61\u7684\u5916\u89c2/\u804c\u8d23."]}),"\n",(0,i.jsxs)(e.li,{children:["ConcreteDecorator \u7c7b: ",(0,i.jsx)(e.code,{children:"private ClassName component"})," \u62e5\u6709\u4e00\u4e2a\u5bf9\u8c61\u5f15\u7528."]}),"\n",(0,i.jsxs)(e.li,{children:["\u5728 JS \u4e2d, \u53ef\u4ee5\u5229\u7528 ",(0,i.jsx)(e.code,{children:"Closure"})," (\u95ed\u5305) + ",(0,i.jsx)(e.code,{children:"Higher Order Function"})," (\u9ad8\u9636\u51fd\u6570) \u5feb\u901f\u5b9e\u73b0\u88c5\u9970\u5668\u6a21\u5f0f."]}),"\n",(0,i.jsx)(e.li,{children:"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219\u548c\u5355\u4e00\u804c\u8d23\u6a21\u5f0f."}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Decorator Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"React HOC Components."}),"\n",(0,i.jsxs)(e.li,{children:["ES2016 and TypeScript ",(0,i.jsx)(e.code,{children:"@decorator"}),"."]}),"\n",(0,i.jsx)(e.li,{children:"Guard: form validator."}),"\n",(0,i.jsxs)(e.li,{children:["Interceptor:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"HTTP request and response decorator."}),"\n",(0,i.jsx)(e.li,{children:"Web statistic tool."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"Transformer."}),"\n",(0,i.jsx)(e.li,{children:"AOP: Aspect Oriented Programming."}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"function __decorate(decorators, target) {\n  const decorateTarget = target\n\n  for (const decorator of decorators)\n    decorateTarget = decorator(decorateTarget) || decorateTarget\n\n  return decorateTarget\n}\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class MacBook {\n  constructor() {\n    this.cost = 997\n    this.screenSize = 11.6\n  }\n\n  getCost() {\n    return this.cost\n  }\n\n  getScreenSize() {\n    return this.screenSize\n  }\n}\n\n// Decorator 1\nclass Memory extends MacBook {\n  constructor(macBook) {\n    super()\n    this.macBook = macBook\n  }\n\n  getCost() {\n    return this.macBook.getCost() + 75\n  }\n}\n\n// Decorator 2\nclass Engraving extends MacBook {\n  constructor(macBook) {\n    super()\n    this.macBook = macBook\n  }\n\n  getCost() {\n    return this.macBook.getCost() + 200\n  }\n}\n\n// Decorator 3\nclass Insurance extends MacBook {\n  constructor(macBook) {\n    super()\n    this.macBook = macBook\n  }\n\n  getCost() {\n    return this.macBook.getCost() + 250\n  }\n}\n\nlet mb = new MacBook()\nmb = new Memory(mb)\nmb = new Engraving(mb)\nmb = new Insurance(mb)\n\nconsole.log(mb.getCost())\n// Outputs: 1522\nconsole.log(mb.getScreenSize())\n// Outputs: 11.6\n"})}),"\n",(0,i.jsx)(e.h3,{id:"facade-pattern",children:"Facade Pattern"}),"\n",(0,i.jsx)(e.p,{children:"\u5c01\u88c5\u590d\u6742\u903b\u8f91:"}),"\n",(0,i.jsxs)(e.p,{children:["\u5c06\u591a\u4e2a\u590d\u6742\u7684\u5b50\u7cfb\u7edf",(0,i.jsx)(e.code,{children:"\u5c01\u88c5 + \u5408\u5e76"}),",\n\u5b9e\u73b0\u4e00\u4e2a\u590d\u6742\u529f\u80fd,\n\u4f46\u53ea\u66b4\u9732\u4e00\u4e2a\u7b80\u5355\u7684\u63a5\u53e3."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class CPU {\n  freeze() {\n    console.log('Freezed....')\n  }\n\n  jump(position) {\n    console.log('Go....')\n  }\n\n  execute() {\n    console.log('Run....')\n  }\n}\n\nclass Memory {\n  load(position, data) {\n    console.log('Load....')\n  }\n}\n\nclass HardDrive {\n  read(lba, size) {\n    console.log('Read....')\n  }\n}\n\nclass ComputerFacade {\n  constructor() {\n    this.processor = new CPU()\n    this.ram = new Memory()\n    this.hd = new HardDrive()\n  }\n\n  start() {\n    this.processor.freeze()\n    this.ram.load(\n      this.BOOT_ADDRESS,\n      this.hd.read(this.BOOT_SECTOR, this.SECTOR_SIZE)\n    )\n    this.processor.jump(this.BOOT_ADDRESS)\n    this.processor.execute()\n  }\n}\n\nconst computer = new ComputerFacade()\ncomputer.start()\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"sabertazimi.addMyEvent = function (el, ev, fn) {\n  if (el.addEventListener)\n    el.addEventListener(ev, fn, false)\n  else if (el.attachEvent)\n    el.attachEvent(`on${ev}`, fn)\n  else el[`on${ev}`] = fn\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"flyweight-pattern",children:"Flyweight Pattern"}),"\n",(0,i.jsxs)(e.p,{children:["\u51cf\u5c0f\u5185\u5b58\u5f00\u9500 (",(0,i.jsx)(e.strong,{children:"Performance Optimization"}),"):"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5185\u90e8"}),"\u4fe1\u606f: \u5bf9\u8c61\u4e2d\u7684\u5185\u90e8\u65b9\u6cd5\u6240\u9700\u4fe1\u606f/\u5c5e\u6027, \u4e00\u4e2a\u5355\u72ec\u7684\u4eab\u5143\u53ef\u66ff\u4ee3\u5927\u91cf\u5177\u6709\u76f8\u540c\u5185\u5728\u4fe1\u606f\u7684\u5bf9\u8c61."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5916\u90e8"}),"\u72b6\u6001: \u4f5c\u4e3a\u65b9\u6cd5\u53c2\u6570, \u4f7f\u4e4b\u9002\u5e94\u4e0d\u540c\u7684\u5916\u90e8\u72b6\u6001 (Context), \u5b9e\u4f8b\u5bf9\u8c61\u5dee\u5f02."]}),"\n",(0,i.jsx)(e.li,{children:"\u67d0\u4e2a\u7c7b\u578b\u7684\u5bf9\u8c61\u6709\u5927\u91cf\u7684\u5b9e\u4f8b, \u5bf9\u8fd9\u4e9b\u5b9e\u4f8b\u8fdb\u884c\u5206\u7c7b, \u5408\u5e76\u76f8\u540c\u5206\u7c7b\u7684\u5bf9\u8c61, \u53ea\u521b\u5efa\u5c11\u91cf\u5b9e\u4f8b (\u4eab\u5143)."}),"\n",(0,i.jsxs)(e.li,{children:["\u901a\u8fc7\u4eab\u5143\u5de5\u5382\u6765\u7ba1\u7406\u4e00\u7ec4\u4eab\u5143:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5f53\u6240\u9700\u4eab\u5143\u5df2\u5b58\u5728\u65f6, \u8fd4\u56de\u5df2\u5b58\u5728\u4eab\u5143."}),"\n",(0,i.jsx)(e.li,{children:"\u5f53\u6240\u9700\u4eab\u5143\u4e0d\u5b58\u5728\u65f6, \u521b\u5efa\u65b0\u4eab\u5143."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Flyweight Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Objects pool: e.g text processing."}),"\n",(0,i.jsx)(e.li,{children:"DOM nodes pool: e.g user interface."}),"\n",(0,i.jsx)(e.li,{children:"Event delegation."}),"\n",(0,i.jsx)(e.li,{children:"Reduce similar object instances."}),"\n",(0,i.jsx)(e.li,{children:"Caching."}),"\n"]})}),"\n",(0,i.jsx)(e.h4,{id:"flyweight-factory-pattern",children:"Flyweight Factory Pattern"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Flyweight {\n  constructor(make, model, processor) {\n    this.make = make\n    this.model = model\n    this.processor = processor\n  }\n}\n\nclass FlyweightFactory {\n  static flyweights = new Map()\n\n  static get(make, model, processor) {\n    const id = make + model\n\n    if (FlyweightFactory.flyweights.has(id))\n      return FlyweightFactory.flyweights.get(id)\n\n    const flyweight = new Flyweight(make, model, processor)\n    FlyweightFactory.flyweights.set(id, flyweight)\n    return flyweight\n  }\n\n  static getCount() {\n    return FlyweightFactory.flyweights.size\n  }\n}\n\nclass Computer {\n  constructor(make, model, processor, memory, tag) {\n    this.flyweight = FlyweightFactory.get(make, model, processor)\n    this.memory = memory\n    this.tag = tag\n    this.getMake = function () {\n      return this.flyweight.make\n    }\n  }\n}\n\nclass ComputerCollection {\n  computers = new Map()\n\n  add(make, model, processor, memory, tag) {\n    this.computers.set(tag, new Computer(make, model, processor, memory, tag))\n  }\n\n  get(tag) {\n    return this.computers.get(tag)\n  }\n\n  getCount() {\n    return this.computers.size\n  }\n}\n\nconst computers = new ComputerCollection()\n\ncomputers.add('Dell', 'Studio XPS', 'Intel', '5G', 'Y755P')\ncomputers.add('Dell', 'Studio XPS', 'Intel', '6G', 'X997T')\ncomputers.add('Dell', 'Studio XPS', 'Intel', '2G', 'NT777')\ncomputers.add('Dell', 'Studio XPS', 'Intel', '2G', '0J88A')\ncomputers.add('HP', 'Envy', 'Intel', '4G', 'CNU883701')\ncomputers.add('HP', 'Envy', 'Intel', '2G', 'TXU003283')\n\nconsole.log(`Computers: ${computers.getCount()}`) // 6.\nconsole.log(`Flyweights: ${FlyweightFactory.getCount()}`) // 2.\n"})}),"\n",(0,i.jsx)(e.h4,{id:"flyweight-pool-pattern",children:"Flyweight Pool Pattern"}),"\n",(0,i.jsx)(e.p,{children:"DOM pool:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class ObjectPool<T, P> {\n  objectFactory: () => T\n  objectPool: [T]\n\n  constructor(objectFactory: () => T) {\n    this.objectFactory = objectFactory\n    this.objectPool = []\n  }\n\n  create(...args: P) {\n    return objectPool.length === 0 ? objectFactory(args) : objectPool.shift()\n  }\n\n  recover(obj: T) {\n    objectPool.push(obj)\n  }\n}\n\nconst iframeFactory = new ObjectPool(() => {\n  const iframe = document.createElement('iframe')\n  document.body.appendChild(iframe)\n  iframe.onload = function () {\n    iframe.onload = null\n    iframeFactory.recover(iframe)\n  }\n  return iframe\n})\n\nconst iframe1 = iframeFactory.create()\niframe1.src = 'http:// baidu.com'\nconst iframe2 = iframeFactory.create()\niframe2.src = 'http:// QQ.com'\nsetTimeout(() => {\n  const iframe3 = iframeFactory.create()\n  iframe3.src = 'http:// 163.com'\n}, 3000)\n"})}),"\n",(0,i.jsx)(e.h3,{id:"proxy-pattern",children:"Proxy Pattern"}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u4e00\u4e2a\u4ee3\u7406\u5bf9\u8c61:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e34\u65f6\u5b58\u50a8\u539f\u5bf9\u8c61\u65b9\u6cd5\u8c03\u7528\u4ea7\u751f\u7684\u4e00\u7cfb\u5217\u7ed3\u679c (\u65b0\u5efa\u5bf9\u8c61),\n\u51cf\u5c11\u91cd\u590d\u5bf9\u8c61\u7684\u4ea7\u751f."}),"\n",(0,i.jsx)(e.li,{children:"\u4ee3\u7406\u5bf9\u8c61\u53ef\u4ee5\u4e3a\u4e2d\u95f4\u8fc7\u7a0b\u900f\u660e\u5730\u589e\u52a0\u989d\u5916\u903b\u8f91: \u9884\u52a0\u8f7d/\u7f13\u5b58/\u5408\u5e76/\u9a8c\u8bc1/\u8f6c\u6362\u7b49."}),"\n",(0,i.jsx)(e.li,{children:"\u6602\u8d35\u7684\u5bf9\u8c61\u521b\u5efa\u6216\u4efb\u52a1\u6267\u884c\u53ef\u4ee5\u5ef6\u8fdf\u5230\u4ee3\u7406\u5bf9\u8c61\u4e2d\u6267\u884c."}),"\n",(0,i.jsx)(e.li,{children:"\u4ee3\u7406\u7c7b\u578b: \u8fdc\u7a0b/\u4fdd\u62a4/\u865a\u62df/\u7f13\u5b58\u4ee3\u7406."}),"\n",(0,i.jsx)(e.li,{children:"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219."}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Proxy Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8fdc\u7a0b\u4ee3\u7406:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ee3\u7406\u8f6f\u4ef6."}),"\n",(0,i.jsx)(e.li,{children:"\u9632\u706b\u5899\u4ee3\u7406."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u4fdd\u62a4\u4ee3\u7406:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8de8\u57df\u5904\u7406."}),"\n",(0,i.jsx)(e.li,{children:"\u8def\u7531\u4fdd\u62a4\u4ee3\u7406."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u865a\u62df\u4ee3\u7406:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u56fe\u7247\u9884\u52a0\u8f7d."}),"\n",(0,i.jsxs)(e.li,{children:["\u667a\u80fd\u5f15\u7528\u4ee3\u7406: C++ smart pointer, Rust ",(0,i.jsx)(e.code,{children:"RefCell"}),", Linux file descriptor."]}),"\n",(0,i.jsx)(e.li,{children:"\u5199\u65f6\u62f7\u8d1d\u4ee3\u7406: \u5185\u5b58\u9875, DLL."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7f13\u5b58\u4ee3\u7406:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7f13\u5b58\u51fd\u6570."}),"\n",(0,i.jsx)(e.li,{children:"\u7f13\u5b58\u670d\u52a1\u5668: React Query (cache data)."}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsxs)(e.p,{children:["\u4ee3\u7406\u6a21\u5f0f\u5f3a\u8c03\u4e00\u79cd\u5173\u7cfb (Proxy \u4e0e\u5b83\u7684\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb), \u8fd9\u79cd\u5173\u7cfb\u53ef\u4ee5\u9759\u6001\u5730\u8868\u8fbe.\n\u88c5\u9970\u8005\u6a21\u5f0f\u7528\u4e8e\u4e00\u5f00\u59cb\u4e0d\u80fd\u786e\u5b9a\u5bf9\u8c61\u7684\u5168\u90e8\u529f\u80fd.\n\u4ee3\u7406\u6a21\u5f0f\u901a\u5e38\u53ea\u6709\u4e00\u5c42",(0,i.jsx)(e.code,{children:"\u4ee3\u7406-\u672c\u4f53"}),"\u7684\u5f15\u7528,\n\u88c5\u9970\u8005\u6a21\u5f0f\u7ecf\u5e38\u4f1a\u5f62\u6210\u4e00\u6761\u957f\u957f\u7684\u88c5\u9970\u94fe."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Percentage {\n  constructor(percent) {\n    this.percent = percent\n  }\n\n  toString() {\n    return `${this.percent}&`\n  }\n\n  valueOf() {\n    return this.percent / 100\n  }\n}\n\nconst fivePercent = new Percentage(5)\nconsole.log(fivePercent.toString())\nconsole.log(`5% of 50 is ${50 * fivePercent}`)\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"function GeoCoder() {\n  this.getLatLng = function (address) {\n    if (address === 'Amsterdam')\n      return '52.3700\xb0 N, 4.8900\xb0 E'\n    else if (address === 'London')\n      return '51.5171\xb0 N, 0.1062\xb0 W'\n    else if (address === 'Paris')\n      return '48.8742\xb0 N, 2.3470\xb0 E'\n    else if (address === 'Berlin')\n      return '52.5233\xb0 N, 13.4127\xb0 E'\n    else return ''\n  }\n}\n\nfunction GeoProxy() {\n  const geocoder = new GeoCoder()\n  const geocache = {}\n\n  return {\n    getLatLng(address) {\n      if (!geocache[address])\n        geocache[address] = geocoder.getLatLng(address)\n\n      log.add(`${address}: ${geocache[address]}`)\n      return geocache[address]\n    },\n    getCount() {\n      let count = 0\n\n      for (const code in geocache) count++\n\n      return count\n    },\n  }\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["Proxy in ",(0,i.jsx)(e.code,{children:"Vue"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"const original = { name: 'jeff' }\n\nconst reactive = new Proxy(original, {\n  get(target, key) {\n    console.log('Tracking: ', key)\n    return target[key]\n  },\n  set(target, key, value) {\n    console.log('updating UI...')\n    return Reflect.set(target, key, value)\n  },\n})\n\nconsole.log(reactive.name) // 'Tracking: name'\nreactive.name = 'bob' // 'updating UI...'\n"})}),"\n",(0,i.jsx)(e.h3,{id:"chain-of-responsibility-pattern",children:"Chain of Responsibility Pattern"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u79cd\u5c06\u8bf7\u6c42\u5728\u4e00\u4e32\u5bf9\u8c61\u4e2d\u4f20\u9012\u7684\u65b9\u5f0f, \u5bfb\u627e\u53ef\u4ee5\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u7684\u5bf9\u8c61:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8bf7\u6c42\u53d1\u9001\u8005\u53ea\u9700\u77e5\u9053\u94fe\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8282\u70b9, \u4ece\u800c\u964d\u4f4e\u53d1\u9001\u8005\u548c\u4e00\u7ec4\u63a5\u6536\u8005\u4e4b\u95f4\u7684\u5f3a\u8026\u5408."}),"\n",(0,i.jsx)(e.li,{children:"\u8bf7\u6c42\u53d1\u9001\u8005\u53ef\u4ee5\u4efb\u610f\u9009\u62e9\u7b2c\u4e00\u4e2a\u8282\u70b9, \u4ece\u800c\u51cf\u5c11\u8bf7\u6c42\u5728\u94fe\u4e2d\u7684\u4f20\u9012\u6b21\u6570."}),"\n",(0,i.jsx)(e.li,{children:"\u804c\u8d23\u94fe\u4e2d\u7684\u8282\u70b9\u6570\u91cf\u548c\u987a\u5e8f\u53ef\u4ee5\u81ea\u7531\u53d8\u5316."}),"\n",(0,i.jsx)(e.li,{children:"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219."}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"CoR Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"AOP: Aspect Oriented Programming."}),"\n",(0,i.jsxs)(e.li,{children:["Middlewares:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Redux."}),"\n",(0,i.jsx)(e.li,{children:"Express/Koa."}),"\n",(0,i.jsx)(e.li,{children:"NestJS."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"Request handling."}),"\n",(0,i.jsx)(e.li,{children:"Logging and error handling."}),"\n",(0,i.jsx)(e.li,{children:"Event handling: DOM event capture and bubble chian."}),"\n",(0,i.jsx)(e.li,{children:"Authorization and authentication."}),"\n",(0,i.jsx)(e.li,{children:"JavaScript Prototype chain."}),"\n",(0,i.jsx)(e.li,{children:"JavaScript Scope chain."}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Creature {\n  constructor(name, attack, defense) {\n    this.name = name\n    this.attack = attack\n    this.defense = defense\n  }\n\n  toString() {\n    return `${this.name} (${this.attack}/${this.defense})`\n  }\n}\n\n// Link Node.\nclass CreatureModifier {\n  constructor(creature) {\n    this.creature = creature\n    this.next = null\n  }\n\n  // Build chains.\n  add(modifier) {\n    if (this.next)\n      this.next.add(modifier)\n    else this.next = modifier\n  }\n\n  // Pass objects along to chains.\n  handle() {\n    if (this.next)\n      this.next.handle()\n  }\n}\n\nclass NoBonusesModifier extends CreatureModifier {\n  constructor(creature) {\n    super(creature)\n    console.log('New')\n  }\n\n  handle() {\n    console.log('No bonuses for you!')\n  }\n}\n\nclass DoubleAttackModifier extends CreatureModifier {\n  constructor(creature) {\n    super(creature)\n    console.log('New')\n  }\n\n  handle() {\n    console.log(`Doubling ${this.creature.name}'s attack`)\n    this.creature.attack *= 2\n    super.handle() // Call next();\n  }\n}\n\nclass IncreaseDefenseModifier extends CreatureModifier {\n  constructor(creature) {\n    super(creature)\n    console.log('New')\n  }\n\n  handle() {\n    if (this.creature.attack <= 2) {\n      console.log(`Increasing ${this.creature.name}'s defense`)\n      this.creature.defense++\n    }\n    super.handle() // Call next();\n  }\n}\n\nconst peekachu = new Creature('Peekachu', 1, 1)\nconsole.log(peekachu.toString())\n\nconst root = new CreatureModifier(peekachu)\nroot.add(new DoubleAttackModifier(peekachu))\nroot.add(new IncreaseDefenseModifier(peekachu))\n// Chain: creatureModifier -> doubleAttackModifier -> increaseDefenseModifier.\nroot.handle()\n\nconsole.log(peekachu.toString())\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"import { Buffer } from 'node:buffer'\n\nclass Koa extends EventEmitter {\n  constructor() {\n    super()\n    this.middlewares = []\n  }\n\n  use(fn) {\n    this.middlewares.push(fn)\n  }\n\n  compose(middlewares, ctx) {\n    const dispatch = (index) => {\n      // End of chain.\n      if (index === middlewares.length)\n        return Promise.resolve()\n\n      // `next` function: call next middleware recursively.\n      const next = () => dispatch(index + 1)\n\n      // Call current middleware.\n      const middleware = middlewares[index]\n      return Promise.resolve(middleware(ctx, next))\n    }\n\n    return dispatch(0)\n  }\n\n  handleRequest(req, res) {\n    // When ctx.body doesn't change, statusCode contains '404'.\n    res.statusCode = 404\n\n    // Create context proxy for `req` and `res` operations.\n    const ctx = this.createContext(req, res)\n\n    // Middleware (open api for Koa users).\n    const fn = this.compose(this.middlewares, ctx)\n\n    fn.then(() => {\n      if (typeof ctx.body === 'object' && ctx.body !== null) {\n        res.setHeader('Content-Type', 'application/json;charset=utf8')\n        res.end(JSON.stringify(ctx.body))\n      } else if (ctx.body instanceof Stream) {\n        ctx.body.pipe(res)\n      } else if (typeof ctx.body === 'string' || Buffer.isBuffer(ctx.body)) {\n        res.setHeader('Content-Type', 'text/htmlCharset=utf8')\n        res.end(ctx.body)\n      } else {\n        res.end('Not Found')\n      }\n    }).catch((err) => {\n      this.emit('error', err)\n      res.statusCode = 500\n      res.end('Internal Server Error')\n    })\n  }\n\n  listen(...args) {\n    const server = http.createServer(this.handleRequest.bind(this))\n    server.listen(...args)\n  }\n}\n\nconst app = new Koa()\n\napp.use(async (ctx, next) => {\n  console.log(1)\n  await next()\n  console.log(2)\n})\n\napp.use(async (ctx, next) => {\n  console.log(3)\n\n  const p = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      console.log('3.5')\n      resolve()\n    }, 1000)\n  })\n\n  await p.then()\n  await next()\n  console.log(4)\n  ctx.body = 'Hello Koa'\n})\n\napp.listen(2323, () => {\n  console.log('Koa server are listening to http://localhost:2323 ...')\n})\n"})}),"\n",(0,i.jsx)(e.h3,{id:"command-pattern",children:"Command Pattern"}),"\n",(0,i.jsx)(e.p,{children:"\u9700\u8981\u5411\u67d0\u4e9b\u5bf9\u8c61\u53d1\u9001\u8bf7\u6c42:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u89e3\u8026\u547d\u4ee4: \u4e0d\u6e05\u695a\u8bf7\u6c42\u5177\u4f53\u64cd\u4f5c."}),"\n",(0,i.jsx)(e.li,{children:"\u89e3\u8026\u63a5\u6536\u8005: \u4e0d\u6e05\u695a\u8bf7\u6c42\u7684\u63a5\u6536\u8005 (\u591a\u4e2a\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u968f\u673a\u5bf9\u8c61)."}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6b64\u65f6\u5e0c\u671b\u7528\u4e00\u79cd\u677e\u8026\u5408\u7684\u65b9\u5f0f\u6765\u8bbe\u8ba1\u7a0b\u5e8f, \u4f7f\u5f97\u8bf7\u6c42\u53d1\u9001\u8005\u548c\u8bf7\u6c42\u63a5\u6536\u8005\u80fd\u591f\u6d88\u9664\u5f7c\u6b64\u7684\u8026\u5408\u5173\u7cfb:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5c06\u65b9\u6cd5/\u52a8\u4f5c\u5c01\u88c5\u6210\u5bf9\u8c61, \u4f7f\u5f97\u5916\u90e8\u901a\u8fc7\u552f\u4e00\u65b9\u6cd5 ",(0,i.jsx)(e.code,{children:"execute()"}),"/",(0,i.jsx)(e.code,{children:"run()"})," \u8c03\u7528\u5185\u90e8\u65b9\u6cd5/\u52a8\u4f5c."]}),"\n",(0,i.jsxs)(e.li,{children:["\u89e3\u8026\u4e09\u8005: \u5ba2\u6237\u521b\u5efa\u547d\u4ee4, \u8c03\u7528\u8005\u6267\u884c\u8be5\u547d\u4ee4, \u63a5\u6536\u8005\u5728\u547d\u4ee4\u6267\u884c\u65f6\u6267\u884c\u76f8\u5e94\u64cd\u4f5c.","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5ba2\u6237\u901a\u5e38\u88ab\u5305\u88c5\u4e3a\u4e00\u4e2a\u547d\u4ee4\u5bf9\u8c61."}),"\n",(0,i.jsxs)(e.li,{children:["\u8c03\u7528\u8005\u63a5\u8fc7\u547d\u4ee4\u5e76\u5c06\u5176\u4fdd\u5b58\u4e0b\u6765, \u5b83\u4f1a\u5728\u67d0\u4e2a\u65f6\u5019\u8c03\u7528\u8be5\u547d\u4ee4\u5bf9\u8c61\u7684 ",(0,i.jsx)(e.code,{children:"Command.execute()"})," \u65b9\u6cd5."]}),"\n",(0,i.jsxs)(e.li,{children:["\u8c03\u7528\u8005\u8c03\u7528 ",(0,i.jsx)(e.code,{children:"Command.execute()"})," \u540e, \u6700\u7ec8\u5c06\u8c03\u7528\u63a5\u6536\u8005\u65b9\u6cd5 ",(0,i.jsx)(e.code,{children:"Receiver.action()"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Command Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Decouple ",(0,i.jsx)(e.code,{children:"Executor"})," and ",(0,i.jsx)(e.code,{children:"Receiver"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:["GUI applications: bind ",(0,i.jsx)(e.code,{children:"Command"})," to UI components."]}),"\n",(0,i.jsxs)(e.li,{children:["Command sequences (store commands + ",(0,i.jsx)(e.code,{children:"Composite"})," pattern) for batch processing:\n",(0,i.jsx)(e.code,{children:"Macro"}),"/",(0,i.jsx)(e.code,{children:"Batch"}),"/",(0,i.jsx)(e.code,{children:"Undo"}),"/",(0,i.jsx)(e.code,{children:"Redo"})," feature."]}),"\n",(0,i.jsxs)(e.li,{children:["Command queue (cache commands + ",(0,i.jsx)(e.code,{children:"Observer"})," pattern) for transaction management:\n",(0,i.jsx)(e.code,{children:"Redis"}),"/",(0,i.jsx)(e.code,{children:"RabbitMQ"}),"/",(0,i.jsx)(e.code,{children:"Kafka"}),"."]}),"\n"]})}),"\n",(0,i.jsxs)(e.p,{children:["\u5728 JS \u4e2d, ",(0,i.jsx)(e.code,{children:"Closure"})," + ",(0,i.jsx)(e.code,{children:"Callback"})," (",(0,i.jsx)(e.code,{children:"Higher Order Function"}),") \u53ef\u4ee5\u5b9e\u73b0\u9690\u5f0f\u7684\u547d\u4ee4\u6a21\u5f0f:"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Closure"})," \u6355\u83b7 ",(0,i.jsx)(e.code,{children:"Receiver"})," (\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u4e2d, ",(0,i.jsx)(e.code,{children:"Command"})," \u5bf9\u8c61\u9700\u8981\u6301\u6709 ",(0,i.jsx)(e.code,{children:"Receiver"})," \u5bf9\u8c61)."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Callback"})," \u51fd\u6570\u5b9e\u73b0\u5177\u4f53\u903b\u8f91 (\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u4e2d, \u9700\u8981\u5c06\u5176\u5c01\u88c5\u8fdb ",(0,i.jsx)(e.code,{children:"Command.execute()"})," \u5bf9\u8c61\u65b9\u6cd5)."]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// Higher order function\nconst Command = receiver => () => receiver.action()\n"})}),"\n",(0,i.jsxs)(e.p,{children:["Bind ",(0,i.jsx)(e.code,{children:"Command"})," to UI components:"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Executor"}),": UI components."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Client"})," and ",(0,i.jsx)(e.code,{children:"Receiver"}),": background tasks or other UI components."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Executor"})," -> ",(0,i.jsx)(e.code,{children:"Client"})," ",(0,i.jsx)(e.code,{children:"Command.execute()"})," -> ",(0,i.jsx)(e.code,{children:"Receiver.action()"}),":\ne.g click ",(0,i.jsx)(e.code,{children:"button"})," -> refresh ",(0,i.jsx)(e.code,{children:"menu"}),"."]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// Executor\nclass Button {\n  commands = new Set()\n\n  add(command) {\n    this.commands.set(command)\n  }\n\n  click() {\n    for (const command of this.commands) command.execute()\n  }\n}\n\n// Client: command object, `action` implemented\nclass Command {\n  constructor(receiver) {\n    this.receiver = receiver\n  }\n\n  execute() {\n    this.receiver.action()\n  }\n}\n\n// Receiver\nclass MenuBar {\n  action() {\n    this.refresh()\n  }\n\n  refresh() {\n    console.log('refresh menu pages')\n  }\n}\n\nconst button = new Button()\nconst menuBar = new MenuBar()\nconst refreshMenuBarCommand = new Command(menuBar)\n\nbutton.add(refreshMenuBarCommand)\nbutton.click()\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class MenuCommand {\n  constructor(action) {\n    this.action = action\n  }\n\n  execute() {\n    this.action()\n  }\n}\n\n// --------------\nconst appMenuBar = new MenuBar()\n\n// --------------\nconst fileActions = new FileActions()\nconst EditActions = new EditActions()\nconst InsertActions = new InsertActions()\nconst HelpActions = new HelpActions()\n\n// --------------\nconst openCommand = new MenuCommand(fileActions.open)\nconst closeCommand = new MenuCommand(fileActions.close)\nconst saveCommand = new MenuCommand(fileActions.save)\nconst saveAsCommand = new MenuCommand(fileActions.saveAs)\nconst fileMenu = new Menu('File')\nfileMenu.add(new MenuItem('open', openCommand))\nfileMenu.add(new MenuItem('Close', closeCommand))\nfileMenu.add(new MenuItem('Save', saveCommand))\nfileMenu.add(new MenuItem('Close', saveAsCommand))\nappMenuBar.add(fileMenu)\n\n// --------------\nconst cutCommand = new MenuCommand(EditActions.cut)\nconst copyCommand = new MenuCommand(EditActions.copy)\nconst pasteCommand = new MenuCommand(EditActions.paste)\nconst deleteCommand = new MenuCommand(EditActions.delete)\nconst editMenu = new Menu('Edit')\neditMenu.add(new MenuItem('Cut', cutCommand))\neditMenu.add(new MenuItem('Copy', copyCommand))\neditMenu.add(new MenuItem('Paste', pasteCommand))\neditMenu.add(new MenuItem('Delete', deleteCommand))\nappMenuBar.add(editMenu)\n\n// --------------\nconst textBlockCommand = new MenuCommand(InsertActions.textBlock)\nconst insertMenu = new Menu('Insert')\ninsertMenu.add(new MenuItem('Text  Block', textBlockCommand))\nappMenuBar.add(insertMenu)\n\n// --------------\nconst showHelpCommand = new MenuCommand(HelpActions.showHelp())\nconst helpMenu = new Menu('Help')\nhelpMenu.add(new MenuItem('Show Help', showHelpCommand))\nappMenuBar.add(helpMenu)\n\n// --------------\ndocument.getElementsByTagName('body')[0].appendChild(appMenuBar.getElement())\nappMenuBar.show()\n"})}),"\n",(0,i.jsxs)(e.p,{children:["Command sequences to implement ",(0,i.jsx)(e.code,{children:"Macro"}),"/",(0,i.jsx)(e.code,{children:"Batch"}),"/",(0,i.jsx)(e.code,{children:"Undo"}),"/",(0,i.jsx)(e.code,{children:"Redo"})," feature:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Cursor {\n  constructor(width, height, parent) {\n    this.commandStack = []\n    this.width = width\n    this.height = height\n\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = this.width\n    this.canvas.height = this.height\n    parent.appendChild(this.canvas)\n\n    this.ctx = this.canvas.getContext('2d')\n    this.ctx.fillStyle = '#CCC000'\n    this.move(0, 0)\n  }\n\n  move(x, y) {\n    this.commandStack.push(() => {\n      // `this` point to `Cursor`.\n      this.lineTo(x, y)\n    })\n  }\n\n  lineTo(x, y) {\n    this.position.x += x\n    this.position.y += y\n    this.ctx.lineTo(this.position.x, this.position.y)\n  }\n\n  executeCommands() {\n    this.position = { x: this.width / 2, y: this.height / 2 }\n    this.ctx.clearRect(0, 0, this.width, this.height)\n    this.ctx.beginPath()\n    this.ctx.moveTo(this.position.x, this.position.y)\n\n    for (let i = 0; i < this.commandStack.length; i++) this.commandStack[i]()\n\n    this.ctx.stroke()\n  }\n\n  undo() {\n    this.commandStack.pop()\n    this.executeCommands()\n  }\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"iterator-pattern",children:"Iterator Pattern"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a Iterator \u5bf9\u8c61\u5c01\u88c5\u8bbf\u95ee\u548c\u904d\u5386\u4e00\u4e2a\u805a\u96c6\u5bf9\u8c61\u4e2d\u7684\u5404\u4e2a\u6784\u4ef6\u7684\u65b9\u6cd5:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4efb\u4f55\u5b9e\u73b0 Iterable \u63a5\u53e3\u7684\u6570\u636e\u7ed3\u6784\u90fd\u53ef\u4ee5\u88ab\u5b9e\u73b0 Iterator \u63a5\u53e3\u7684\u7ed3\u6784",(0,i.jsx)(e.strong,{children:"\u6d88\u8d39"})," (",(0,i.jsx)(e.code,{children:"Consume"}),")."]}),"\n",(0,i.jsx)(e.li,{children:"\u8fed\u4ee3\u5668 (Iterator) \u662f\u6309\u9700\u521b\u5efa\u7684\u4e00\u6b21\u6027\u5bf9\u8c61.\n\u6bcf\u4e2a\u8fed\u4ee3\u5668\u90fd\u4f1a\u5173\u8054\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61, \u800c\u8fed\u4ee3\u5668\u4f1a\u66b4\u9732\u8fed\u4ee3\u5176\u5173\u8054\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684 API."}),"\n",(0,i.jsx)(e.li,{children:"\u8fed\u4ee3\u5668\u65e0\u987b\u4e86\u89e3\u4e0e\u5176\u5173\u8054\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u5185\u90e8\u7ed3\u6784, \u53ea\u9700\u8981\u77e5\u9053\u5982\u4f55\u53d6\u5f97\u8fde\u7eed\u7684\u503c."}),"\n",(0,i.jsx)(e.li,{children:"\u65e0\u9700\u66b4\u9732\u805a\u96c6\u5bf9\u8c61\u7684\u5185\u90e8\u8868\u793a, \u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219."}),"\n",(0,i.jsx)(e.li,{children:"\u5b9e\u73b0\u7edf\u4e00\u904d\u5386\u63a5\u53e3, \u62bd\u79bb\u904d\u5386\u903b\u8f91\u4e0e\u4e1a\u52a1\u903b\u8f91, \u7b26\u5408\u5355\u4e00\u804c\u8d23\u539f\u5219."}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Iterator Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Collection data structure."}),"\n",(0,i.jsxs)(e.li,{children:["\u904d\u5386\u5bf9\u8c61:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u987a\u5e8f\u8fed\u4ee3\u5668."}),"\n",(0,i.jsx)(e.li,{children:"\u9006\u5e8f\u8fed\u4ee3\u5668."}),"\n",(0,i.jsx)(e.li,{children:"\u53ef\u4e2d\u6b62\u8fed\u4ee3\u5668."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"Generator."}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Stuff {\n  constructor() {\n    this.a = 11\n    this.b = 22\n  }\n\n  [Symbol.iterator]() {\n    // eslint-disable-next-line ts/no-this-alias\n    const self = this\n    let i = 0\n\n    return {\n      next() {\n        return {\n          done: i > 1,\n          value: self[i++ === 0 ? 'a' : 'b'],\n        }\n      },\n    }\n  }\n\n  get backwards() {\n    // eslint-disable-next-line ts/no-this-alias\n    const self = this\n    let i = 0\n\n    return {\n      next() {\n        return {\n          done: i > 1,\n          value: self[i++ === 0 ? 'b' : 'a'],\n        }\n      },\n      // Make iterator iterable\n      [Symbol.iterator]() {\n        return this\n      },\n    }\n  }\n}\n\nconst stuff = new Stuff()\nfor (const item of stuff) console.log(`${item}`)\nfor (const item of stuff.backwards) console.log(`${item}`)\n"})}),"\n",(0,i.jsx)(e.p,{children:"Implement polyfill with iterator:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"function activeXUploader() {\n  try {\n    return new ActiveXObject('ActiveX.Upload') // IE \u4e0a\u4f20\u63a7\u4ef6.\n  } catch (e) {\n    return false\n  }\n}\n\nfunction flashUploader() {\n  if (supportFlash()) {\n    const str = '<object type=\"application/x-shockwave-flash\"></object>'\n    return $(str).appendTo($('body'))\n  }\n\n  return false\n}\n\nfunction formUploader() {\n  const str = '<input name=\"file\" type=\"file\" class=\"ui-file\"/>' // \u8868\u5355\u4e0a\u4f20\u63a7\u4ef6.\n  return $(str).appendTo($('body'))\n}\n\nfunction upload(...uploaderList) {\n  for (const uploader of uploaderList) {\n    const uploadResult = uploader()\n    if (uploadResult !== false)\n      return uploadResult\n  }\n}\n\nconst result = upload([activeXUploader, flashUploader, formUploader])\nconst result = upload([activeXUploader, flashUploader])\nconst result = upload([activeXUploader, formUploader])\nconst result = upload([flashUploader, formUploader])\n"})}),"\n",(0,i.jsx)(e.h3,{id:"mediator-pattern",children:"Mediator Pattern"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a Mediator \u5bf9\u8c61\u5c01\u88c5\u5bf9\u8c61\u95f4\u7684\u534f\u8bae (\u4e2d\u592e\u96c6\u6743\u7684\u63a7\u5236\u4e2d\u5fc3):"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Defines an object that encapsulates how a set of objects interact."}),"\n",(0,i.jsx)(e.li,{children:"\u6240\u6709\u89c2\u5bdf\u8005\u5171\u4eab\u4e00\u4e2a\u5171\u6709\u7684\u88ab\u89c2\u5bdf\u8005 (\u6240\u6709\u8ba2\u9605\u8005\u8ba2\u9605\u540c\u4e00\u4e2a\u8282\u70b9)."}),"\n",(0,i.jsx)(e.li,{children:"\u89e3\u9664\u5bf9\u8c61\u95f4\u7684\u5f3a\u8026\u5408\u5173\u7cfb (\u6700\u5c11\u77e5\u8bc6\u539f\u5219), \u72ec\u7acb\u5730\u6539\u53d8\u5bf9\u8c61\u95f4\u7684\u4ea4\u4e92\u65b9\u5f0f."}),"\n",(0,i.jsx)(e.li,{children:"\u7f51\u72b6\u7684\u591a\u5bf9\u591a\u5173\u7cfb => \u76f8\u5bf9\u7b80\u5355\u7684\u4e00\u5bf9\u591a\u5173\u7cfb."}),"\n",(0,i.jsxs)(e.li,{children:["\u5b58\u5728\u5355\u70b9\u6545\u969c (",(0,i.jsx)(e.code,{children:"Single Point of Failure"}),") \u53ef\u80fd, \u9700\u8981\u5bb9\u707e\u5907\u4efd."]}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Mediator Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u804a\u5929\u5ba4."}),"\n",(0,i.jsx)(e.li,{children:"\u4ea4\u901a\u7cfb\u7edf."}),"\n",(0,i.jsx)(e.li,{children:"\u6307\u6325\u4e2d\u5fc3."}),"\n",(0,i.jsx)(e.li,{children:"\u6e38\u620f\u670d\u52a1\u5668."}),"\n",(0,i.jsxs)(e.li,{children:["DOM event bubbling and delegation: ",(0,i.jsx)(e.code,{children:"document"})," serves as a ",(0,i.jsx)(e.code,{children:"Mediator"}),"."]}),"\n",(0,i.jsx)(e.li,{children:"Global state store: A action => store => B change."}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Person {\n  constructor(name) {\n    this.name = name\n    this.chatLog = []\n  }\n\n  receive(sender, message) {\n    const s = `${sender}: '${message}'`\n    console.log(`[${this.name}'s chat session] ${s}`)\n    this.chatLog.push(s)\n  }\n\n  say(message) {\n    this.room.broadcast(this.name, message)\n  }\n\n  pm(who, message) {\n    this.room.message(this.name, who, message)\n  }\n}\n\nclass ChatRoom {\n  constructor() {\n    this.people = []\n  }\n\n  broadcast(source, message) {\n    for (const p of this.people) {\n      if (p.name !== source)\n        p.receive(source, message)\n    }\n  }\n\n  join(p) {\n    const joinMsg = `${p.name} joins the chat`\n    this.broadcast('room', joinMsg)\n    p.room = this\n    this.people.push(p)\n  }\n\n  message(source, destination, message) {\n    for (const p of this.people) {\n      if (p.name === destination)\n        p.receive(source, message)\n    }\n  }\n}\n\nconst room = new ChatRoom()\nconst zee = new Person('Zee')\nconst shan = new Person('Shan')\n\nroom.join(zee)\nroom.join(shan)\nzee.say('Hello!!')\n\nconst doe = new Person('Doe')\nroom.join(doe)\ndoe.say('Hello everyone!')\n"})}),"\n",(0,i.jsx)(e.h3,{id:"observer-pattern",children:"Observer Pattern"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u88ab\u89c2\u5bdf\u8005 (",(0,i.jsx)(e.code,{children:"Subject"}),") \u7ef4\u62a4\u4e00\u7ec4\u89c2\u5bdf\u8005\u5217\u8868,\n\u6bcf\u5f53\u88ab\u89c2\u5bdf\u8005\u72b6\u6001\u6539\u53d8\u65f6,\n\u8c03\u7528 ",(0,i.jsx)(e.code,{children:"notify"})," \u51fd\u6570,\n\u6b64\u51fd\u6570\u904d\u5386\u8c03\u7528\u89c2\u5bdf\u8005 (",(0,i.jsx)(e.code,{children:"Observer"}),") \u7684 ",(0,i.jsx)(e.code,{children:"update"})," \u51fd\u6570 (\u81ea\u5b9a\u4e49\u903b\u8f91)."]}),"\n",(0,i.jsxs)(e.li,{children:["Decouple ",(0,i.jsx)(e.code,{children:"Subject"})," and ",(0,i.jsx)(e.code,{children:"Observer"}),":\neach depends on ",(0,i.jsx)(e.code,{children:"Abstraction"})," not ",(0,i.jsx)(e.code,{children:"Implementation"}),"."]}),"\n",(0,i.jsx)(e.li,{children:"\u6446\u8131\u6301\u7eed\u8f6e\u8be2\u6a21\u5f0f, \u5728\u5408\u9002\u65f6\u673a\u53d1\u5e03\u6d88\u606f."}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Observer Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Decouple."}),"\n",(0,i.jsx)(e.li,{children:"\u8de8\u5c42\u7ea7\u901a\u4fe1."}),"\n",(0,i.jsx)(e.li,{children:"Message channel."}),"\n",(0,i.jsx)(e.li,{children:"\u5f02\u6b65\u7f16\u7a0b."}),"\n",(0,i.jsx)(e.li,{children:"Event handling."}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class ObserverList {\n  constructor() {\n    this.observerList = []\n  }\n\n  add(obj) {\n    return this.observerList.push(obj)\n  }\n\n  count() {\n    return this.observerList.length\n  }\n\n  get(index) {\n    if (index > -1 && index < this.observerList.length)\n      return this.observerList[index]\n  }\n\n  indexOf(obj, startIndex) {\n    let i = startIndex\n\n    while (i < this.observerList.length) {\n      if (this.observerList[i] === obj)\n        return i\n\n      i++\n    }\n\n    return -1\n  }\n\n  removeAt(index) {\n    this.observerList.splice(index, 1)\n  }\n}\n\nclass Subject {\n  constructor() {\n    this.observers = new ObserverList()\n  }\n\n  addObserver(observer) {\n    this.observers.add(observer)\n  }\n\n  removeObserver(observer) {\n    this.observers.removeAt(this.observers.indexOf(observer, 0))\n  }\n\n  notify(context) {\n    const observerCount = this.observers.count()\n\n    for (let i = 0; i < observerCount; i++)\n      this.observers.get(i).update(context)\n  }\n}\n\nclass Observer {\n  update(context) {}\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"pub-sub-pattern",children:"Pub-Sub Pattern"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53d1\u5e03-\u8ba2\u9605\u6a21\u5f0f\u662f\u501f\u52a9\u7b2c\u4e09\u65b9\u6765\u5b9e\u73b0\u8c03\u5ea6, \u53d1\u5e03\u8005\u548c\u8ba2\u9605\u8005\u4e4b\u95f4\u4e92\u4e0d\u611f\u77e5."}),"\n",(0,i.jsx)(e.li,{children:"\u89c2\u5bdf\u8005\u6a21\u5f0f\u4e2d\u4e3b\u4f53\u548c\u89c2\u5bdf\u8005\u662f\u4e92\u76f8\u611f\u77e5."}),"\n",(0,i.jsx)(e.li,{children:"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219."}),"\n",(0,i.jsx)(e.li,{children:"\u5b58\u5728\u4f9d\u8d56\u8ffd\u8e2a\u56f0\u96be\u53ef\u80fd, \u5bfc\u81f4\u8c03\u8bd5\u56f0\u96be."}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Pub-Sub Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Event listener and handler."}),"\n",(0,i.jsx)(e.li,{children:"Event Bus in Vue."}),"\n",(0,i.jsx)(e.li,{children:"Event Emitter in Node."}),"\n",(0,i.jsx)(e.li,{children:"\u5f02\u6b65\u7f16\u7a0b."}),"\n"]})}),"\n",(0,i.jsx)(e.h4,{id:"pub-sub-pattern-implementation",children:"Pub-Sub Pattern Implementation"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class PubSub {\n  constructor() {\n    // Broadcast channel\n    this.topics = {}\n    // Topic identifier\n    this.subUid = -1\n  }\n\n  publish(topic, args) {\n    if (!this.topics[topic])\n      return false\n\n    const subscribers = this.topics[topic]\n    let len = subscribers ? subscribers.length : 0\n\n    while (len--) subscribers[len].func(topic, args)\n\n    return this\n  }\n\n  subscribe(topic, func) {\n    if (!this.topics[topic])\n      this.topics[topic] = []\n\n    const token = (++this.subUid).toString()\n    this.topics[topic].push({\n      token,\n      func,\n    })\n    return token\n  }\n\n  unsubscribe(token) {\n    for (const m in this.topics) {\n      if (this.topics[m]) {\n        for (let i = 0, j = this.topics[m].length; i < j; i++) {\n          if (this.topics[m][i].token === token) {\n            this.topics[m].splice(i, 1)\n            return token\n          }\n        }\n      }\n    }\n\n    return this\n  }\n}\n\nconst pubsub = new PubSub()\nconst token = pubsub.subscribe('/addFavorite', (topic, args) => {\n  console.log('test', topic, args)\n})\npubsub.publish('/addFavorite', ['test'])\npubsub.unsubscribe(token)\n"})}),"\n",(0,i.jsx)(e.h4,{id:"pub-sub-pattern-usage",children:"Pub-Sub Pattern Usage"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"jQuery"})," event system:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// Equivalent to subscribe(topicName, callback)\n$(document).on('topicName', () => {\n  // ..perform some behavior\n})\n\n// Equivalent to publish(topicName)\n$(document).trigger('topicName')\n\n// Equivalent to unsubscribe(topicName)\n$(document).off('topicName')\n"})}),"\n",(0,i.jsx)(e.p,{children:"Event emitter:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class MicroEvent {\n  bind(event, callback) {\n    this._events = this._events || {}\n    this._events[event] = this._events[event] || []\n    this._events[event].push(callback)\n  }\n\n  unbind(event, callback) {\n    this._events = this._events || {}\n\n    if (event in this._events === false)\n      return\n\n    this._events[event].splice(this._events[event].indexOf(callback), 1)\n  }\n\n  trigger(event, ...args) {\n    this._events = this._events || {}\n\n    if (event in this._events === false)\n      return\n\n    for (let i = 0; i < this._events[event].length; i++)\n      this._events[event][i].apply(this, args)\n  }\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"AJAX"})," callback:"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5f53\u8bf7\u6c42\u8fd4\u56de, \u5e76\u4e14\u5b9e\u9645\u7684\u6570\u636e\u53ef\u7528\u7684\u65f6\u5019, \u4f1a\u751f\u6210\u4e00\u4e2a\u901a\u77e5."}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u4e8b\u4ef6\uff08\u6216\u8005\u8fd4\u56de\u7684\u6570\u636e\uff09, \u90fd\u662f\u7531\u8ba2\u9605\u8005\u81ea\u5df1\u51b3\u5b9a\u7684."}),"\n",(0,i.jsx)(e.li,{children:"\u53ef\u4ee5\u6709\u591a\u4e2a\u4e0d\u540c\u7684\u8ba2\u9605\u8005, \u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u4f7f\u7528\u8fd4\u56de\u7684\u6570\u636e."}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"AJAX"})," \u5c42: \u552f\u4e00\u7684\u8d23\u4efb - \u8bf7\u6c42\u548c\u8fd4\u56de\u6570\u636e, \u63a5\u7740\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u6240\u6709\u60f3\u8981\u4f7f\u7528\u6570\u636e\u7684\u5730\u65b9."]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:";(function ($) {\n  // Pre-compile template and \"cache\" it using closure\n  const resultTemplate = _.template($('#resultTemplate').html())\n\n  // Subscribe to the new search tags topic\n  $.subscribe('/search/tags', (tags) => {\n    $('#searchResults').html(`Searched for: ${tags}`)\n  })\n\n  // Subscribe to the new results topic\n  $.subscribe('/search/resultSet', (results) => {\n    $('#searchResults').append(resultTemplate(results))\n  })\n\n  // Submit a search query and publish tags on the /search/tags topic\n  $('#flickrSearch').submit(function (e) {\n    e.preventDefault()\n    const tags = $(this).find('#query').val()\n\n    if (!tags)\n      return\n\n    $.publish('/search/tags', [$.trim(tags)])\n  })\n\n  // Subscribe to new tags being published and perform\n  // a search query using them. Once data has returned\n  // publish this data for the rest of the application\n  // to consume\n\n  $.subscribe('/search/tags', (tags) => {\n    // Ajax Request\n    $.getJSON(\n      'http://api.flickr.com/services/feeds/',\n      {\n        tags,\n        tagMode: 'any',\n        format: 'json',\n      },\n\n      (data) => {\n        if (!data.items.length)\n          return\n\n        $.publish('/search/resultSet', data.items)\n      }\n    )\n  })\n})()\n"})}),"\n",(0,i.jsx)(e.h3,{id:"state-pattern",children:"State Pattern"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e00\u4e2a State \u5bf9\u8c61\u5c01\u88c5\u4e00\u4e2a\u4e0e\u72b6\u6001\u76f8\u5173\u7684\u884c\u4e3a,\n\u8fd0\u7528\u6709\u9650\u72b6\u6001\u673a (Finite State Machines)\n\u6839\u636e Object State \u6539\u53d8 Object Behavior,\n",(0,i.jsx)(e.code,{children:"object"})," set ",(0,i.jsx)(e.code,{children:"state"})," as its ",(0,i.jsx)(e.strong,{children:"member"}),",\n",(0,i.jsx)(e.code,{children:"state"})," set ",(0,i.jsx)(e.code,{children:"object"})," as its ",(0,i.jsx)(e.strong,{children:"method parameter"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6bcf\u4e00\u79cd\u72b6\u6001\u548c\u5b83\u5bf9\u5e94\u7684\u884c\u4e3a\u4e4b\u95f4\u7684\u5173\u7cfb\u5c40\u90e8\u5316:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u72b6\u6001\u5177\u4f53\u884c\u4e3a\u5c01\u88c5\u5728\u72b6\u6001\u7c7b\u4e2d, \u4fbf\u4e8e\u9605\u8bfb\u548c\u7ba1\u7406\u4ee3\u7801."}),"\n",(0,i.jsx)(e.li,{children:"\u72b6\u6001\u5207\u6362\u89c4\u5219\u5206\u5e03\u5728\u72b6\u6001\u7c7b\u4e2d, \u6709\u6548\u5730\u6d88\u9664\u4e86\u5927\u91cf\u6761\u4ef6\u5206\u652f\u8bed\u53e5."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219."}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"State Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Networking protocol stack."}),"\n",(0,i.jsx)(e.li,{children:"Game player logic."}),"\n",(0,i.jsx)(e.li,{children:"Workflow management."}),"\n",(0,i.jsx)(e.li,{children:"Finite state machines."}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Switch {\n  constructor() {\n    this.state = new OffState()\n  }\n\n  on() {\n    this.state.on(this)\n  }\n\n  off() {\n    this.state.off(this)\n  }\n}\n\nclass State {\n  constructor() {\n    if (this.constructor === State)\n      throw new Error('abstract!')\n  }\n\n  on(sw) {\n    console.log('Light is already on.')\n  }\n\n  off(sw) {\n    console.log('Light is already off.')\n  }\n}\n\nclass OnState extends State {\n  constructor() {\n    super()\n    console.log('Light turned on.')\n  }\n\n  off(sw) {\n    console.log('Turning light off...')\n    sw.state = new OffState()\n  }\n}\n\nclass OffState extends State {\n  constructor() {\n    super()\n    console.log('Light turned off.')\n  }\n\n  on(sw) {\n    console.log('Turning light on...')\n    sw.state = new OnState()\n  }\n}\n\nconst button = new Switch()\nbutton.on()\nbutton.off()\n"})}),"\n",(0,i.jsx)(e.h3,{id:"strategy-pattern",children:"Strategy Pattern"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6539\u53d8\u5bf9\u8c61\u7684\u5185\u6838/\u7b97\u6cd5, \u4e00\u4e2a Strategy \u5bf9\u8c61\u5c01\u88c5\u4e00\u4e2a\u7b97\u6cd5, \u76f8\u4e92\u53ef\u4ee5\u66ff\u6362."}),"\n",(0,i.jsx)(e.li,{children:"\u5229\u7528\u7ec4\u5408 + \u59d4\u6258 + \u591a\u6001, \u907f\u514d\u590d\u6742\u7684\u5206\u652f\u8bed\u53e5."}),"\n",(0,i.jsxs)(e.li,{children:["\u5c06\u5355\u4e2a\u7b56\u7565\u8fdb\u884c\u62bd\u8c61\u5c01\u88c5:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u89e3\u8026."}),"\n",(0,i.jsx)(e.li,{children:"\u590d\u7528."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"JS \u4e2d, \u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u4e0e\u8fd4\u56de\u503c\u65f6, \u53ef\u4ee5\u5b9e\u73b0\u9690\u5f0f\u7684\u7b56\u7565\u6a21\u5f0f:\n\u51fd\u6570\u4f5c\u4e3a\u7b2c\u4e00\u516c\u6c11, \u65e0\u9700\u5c06 Strategy \u5c01\u88c5\u6210\u7b56\u7565\u5bf9\u8c61, \u53ef\u4ee5\u76f4\u63a5\u4f20\u9012\u6216\u8fd4\u56de\u7b56\u7565\u51fd\u6570."}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Strategy Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8868\u5355\u9a8c\u8bc1 (Validator)."}),"\n",(0,i.jsx)(e.li,{children:"\u52a8\u753b\u7b56\u7565."}),"\n",(0,i.jsx)(e.li,{children:"\u5b58\u5728\u5927\u91cf if-else \u573a\u666f."}),"\n",(0,i.jsx)(e.li,{children:"\u91cd\u6784\u4ee3\u7801."}),"\n",(0,i.jsx)(e.li,{children:"Algorithm selection."}),"\n",(0,i.jsx)(e.li,{children:"Testing and mocking."}),"\n"]})}),"\n",(0,i.jsx)(e.p,{children:"Change strategy:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"const OutputFormat = Object.freeze({\n  markdown: 0,\n  html: 1,\n})\n\nclass ListStrategy {\n  start(buffer) {}\n  end(buffer) {}\n  addListItem(buffer, item) {}\n}\n\nclass MarkdownListStrategy extends ListStrategy {\n  addListItem(buffer, item) {\n    buffer.push(` * ${item}`)\n  }\n}\n\nclass HtmlListStrategy extends ListStrategy {\n  start(buffer) {\n    buffer.push('<ul>')\n  }\n\n  end(buffer) {\n    buffer.push('</ul>')\n  }\n\n  addListItem(buffer, item) {\n    buffer.push(`  <li>${item}</li>`)\n  }\n}\n\nclass TextProcessor {\n  constructor(outputFormat) {\n    this.buffer = []\n    this.setOutputFormat(outputFormat)\n  }\n\n  setOutputFormat(format) {\n    switch (format) {\n      case OutputFormat.markdown:\n        this.listStrategy = new MarkdownListStrategy()\n        break\n      case OutputFormat.html:\n        this.listStrategy = new HtmlListStrategy()\n        break\n      default:\n        throw new Error('Unsupported output format!')\n    }\n  }\n\n  appendList(items) {\n    this.listStrategy.start(this.buffer)\n    for (const item of items) this.listStrategy.addListItem(this.buffer, item)\n    this.listStrategy.end(this.buffer)\n  }\n\n  clear() {\n    this.buffer = []\n  }\n\n  toString() {\n    return this.buffer.join('\\n')\n  }\n}\n\nconst tp = new TextProcessor()\ntp.setOutputFormat(OutputFormat.markdown)\ntp.appendList(['one', 'two', 'three'])\nconsole.log(tp.toString())\n\ntp.clear()\ntp.setOutputFormat(OutputFormat.html)\ntp.appendList(['one', 'two', 'three'])\nconsole.log(tp.toString())\n"})}),"\n",(0,i.jsxs)(e.p,{children:["Remove ",(0,i.jsx)(e.code,{children:"if-else"})," statements:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// \u8fdd\u53cd\u5f00\u653e\u5c01\u95ed\u539f\u5219\nfunction activity(type, price) {\n  if (type === 'pre')\n    return price * 0.95\n  else if (type === 'onSale')\n    return price * 0.9\n  else if (type === 'back')\n    return price * 0.85\n  else if (type === 'limit')\n    return price * 0.8\n}\n\n// \u5229\u7528 Strategy Pattern \u8fdb\u884c\u91cd\u6784\nconst activity = new Map([\n  ['pre', price => price * 0.95],\n  ['onSale', price => price * 0.9],\n  ['back', price => price * 0.85],\n  ['limit', price => price * 0.8],\n])\n\nconst getActivityPrice = (type, price) => activity.get(type)(price)\n\n// \u65b0\u589e\u65b0\u624b\u6d3b\u52a8\nactivity.set('newcomer', price => price * 0.7)\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"module.exports = (function () {\n  const manager = {}\n\n  // command to be encapsulated\n  manager.isNull = function (nu) {\n    return toString.apply(nu) === '[object Null]'\n  }\n  manager.isArray = function (arr) {\n    return toString.apply(arr) === '[object Array]'\n  }\n  manager.isString = function (str) {\n    return toString.apply(str) === '[object String]'\n  }\n\n  // public api\n  function execute(command, ...args) {\n    return manager[command] && manager[command](...args)\n  }\n\n  function run(command) {\n    return manager[command] && manager[command]()\n  }\n\n  return {\n    execute,\n    run,\n  }\n})()\n"})}),"\n",(0,i.jsx)(e.p,{children:"Form validator:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"const errorMsg = rules[rule](element, limits)\n"})}),"\n",(0,i.jsx)(e.h3,{id:"template-method-pattern",children:"Template Method Pattern"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Abstract superclass defines the skeleton of an operation\nin terms of a number of high-level steps."}),"\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7\u5c01\u88c5\u53d8\u5316\u63d0\u9ad8\u7cfb\u7edf\u6269\u5c55\u6027."}),"\n",(0,i.jsx)(e.li,{children:"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219."}),"\n",(0,i.jsx)(e.li,{children:"\u5728 JS \u4e2d, \u9ad8\u9636\u51fd\u6570\u53ef\u4ee5\u9690\u5f0f\u5730\u5b9e\u73b0\u6a21\u677f\u65b9\u6cd5\u6a21\u5f0f."}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"Template Method Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"APIs and SDKs."}),"\n",(0,i.jsx)(e.li,{children:"Plugins and Extensions: VSCode extension, Vue plugin."}),"\n",(0,i.jsx)(e.li,{children:"Hooks and Callbacks: React/Vue lifecycles, Webpack hooks."}),"\n",(0,i.jsx)(e.li,{children:"Software Architecture."}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Game {\n  constructor(numberOfPlayers) {\n    this.numberOfPlayers = numberOfPlayers\n    this.currentPlayer = 0\n  }\n\n  run() {\n    this.start()\n    while (!this.haveWinner) this.takeTurn()\n\n    console.log(`Player ${this.winningPlayer} wins.`)\n  }\n\n  start() {\n    throw new Error('Unimplemented `start` method!')\n  }\n\n  takeTurn() {\n    throw new Error('Unimplemented `takeTurn` method!')\n  }\n\n  get haveWinner() {\n    return this.haveWinner\n  }\n\n  get winningPlayer() {\n    return this.winningPlayer\n  }\n}\n\nclass Chess extends Game {\n  constructor() {\n    super(2)\n    this.maxTurns = 10\n    this.turn = 1\n  }\n\n  start() {\n    console.log(\n      `Starting a game of chess with ${this.numberOfPlayers} players.`\n    )\n  }\n\n  get haveWinner() {\n    return this.turn === this.maxTurns\n  }\n\n  takeTurn() {\n    console.log(`Turn ${this.turn++} taken by player ${this.currentPlayer}.`)\n    this.currentPlayer = (this.currentPlayer + 1) % this.numberOfPlayers\n  }\n\n  get winningPlayer() {\n    return this.currentPlayer\n  }\n}\n\nconst chess = new Chess()\nchess.run()\n"})}),"\n",(0,i.jsx)(e.h3,{id:"visitor-pattern",children:"Visitor Pattern"}),"\n",(0,i.jsx)(e.p,{children:"Separating an algorithm from an object structure on which it operates."}),"\n",(0,i.jsx)(e.admonition,{title:"Visitor Use Case",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Data structures: e.g Tree, Graph."}),"\n",(0,i.jsx)(e.li,{children:"Document processing: e.g DOM tree, reporting and analysis."}),"\n",(0,i.jsx)(e.li,{children:"Compiler: e.g abstract syntax tree."}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class NumberExpression {\n  constructor(value) {\n    this.value = value\n  }\n\n  print(buffer) {\n    buffer.push(this.value.toString())\n  }\n}\n\nclass AdditionExpression {\n  constructor(left, right) {\n    this.left = left\n    this.right = right\n  }\n\n  print(buffer) {\n    buffer.push('(')\n    this.left.print(buffer)\n    buffer.push('+')\n    this.right.print(buffer)\n    buffer.push(')')\n  }\n}\n\nconst e = new AdditionExpression(\n  new NumberExpression(5),\n  new AdditionExpression(new NumberExpression(1), new NumberExpression(9))\n)\nconst buffer = []\ne.print(buffer)\n"})}),"\n",(0,i.jsx)(e.h3,{id:"ioc-and-di-pattern",children:"IoC and DI Pattern"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"IoC (Inversion of Control) \u63a7\u5236\u53cd\u8f6c\u6a21\u5f0f: \u5c06\u7ec4\u4ef6\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u4ece\u7a0b\u5e8f\u5185\u90e8\u63d0\u5230\u5916\u90e8\u6765\u7ba1\u7406."}),"\n",(0,i.jsx)(e.li,{children:"DI (Dependency Injection) \u4f9d\u8d56\u6ce8\u5165\u6a21\u5f0f: \u5c06\u7ec4\u4ef6\u7684\u4f9d\u8d56\u901a\u8fc7\u5916\u90e8\u4ee5\u53c2\u6570\u6216\u5176\u4ed6\u5f62\u5f0f\u6ce8\u5165."}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"A \u4f9d\u8d56 B, \u82e5\u5728 A \u4e2d\u5b9e\u4f8b\u5316 B,\n\u5219\u4f1a\u5f62\u6210 A \u4e0e B \u95f4\u7684\u9ad8\u5ea6\u8026\u5408,\n\u4f7f\u5f97 A \u53ef\u6d4b\u8bd5\u6027\u4e0e\u53ef\u7ef4\u62a4\u6027\u53d8\u5dee."}),"\n",(0,i.jsx)(e.p,{children:"\u5c06 A \u5bf9 B \u7684\u63a7\u5236\u6743\u62bd\u79bb\u51fa\u6765,\n\u628a\u63a7\u5236\u6743\u53cd\u8f6c\u7ed9\u7b2c\u4e09\u65b9 (IoC Container),\n\u5b9e\u73b0\u63a7\u5236\u53cd\u8f6c (IoC)."}),"\n",(0,i.jsx)(e.p,{children:"IoC Container \u5c06 B \u5b9e\u4f8b\u5316\u540e,\n\u901a\u8fc7\u6784\u9020\u51fd\u6570/\u63a5\u53e3\u65b9\u6cd5/\u8bbe\u7f6e\u5c5e\u6027/\u5de5\u5382\u6a21\u5f0f\u7b49\u65b9\u6cd5\u6ce8\u5165 A \u4e2d,\n\u5b9e\u73b0\u4f9d\u8d56\u6ce8\u5165 (DI)."}),"\n",(0,i.jsx)(e.h4,{id:"inversion-of-control",children:"Inversion of Control"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"class Component {\n  // \u6784\u9020\u51fd\u6570\u6ce8\u5165.\n  constructor(dep) {\n    this.dep = dep\n  }\n\n  // \u63a5\u53e3\u65b9\u6cd5\u6ce8\u5165.\n  run(context, options = {}) {\n    const dep1 = context.getDep1()\n    const dep2 = context.getDep2()\n    dep1.run()\n    dep2.run()\n  }\n\n  // \u8bbe\u7f6e\u5c5e\u6027\u6ce8\u5165.\n  getDep(dep) {\n    this.dep = dep\n  }\n\n  // \u5de5\u5382\u6a21\u5f0f\u6ce8\u5165.\n  static createComponent(dep) {\n    return new Component(dep)\n  }\n\n  action() {\n    this.dep.run()\n  }\n}\n\n// IoC.\nconst s1 = new Service('s1')\nconst s2 = Container.getService('s2')\nconst s3 = Context.getDep('s3')\nconst s4 = Context.getInstance()\n\n// DI.\nconst c1 = new Component(s1)\nc1.action() // s1 run.\nc1.getDep(s2)\nc1.action() // s2 run.\nconst c2 = Component.createComponent(s3)\nc2.action() // s3 run.\nc2.run(s4) // s4 run.\n"})}),"\n",(0,i.jsx)(e.h4,{id:"depends-on-abstraction",children:"Depends on Abstraction"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"interface Database {\n  query: () => void\n}\n\nclass DbMysql extends Database {\n  public query() {\n    console.log('Querying by MySQL')\n  }\n}\n\nclass Controller {\n  private db: Database\n\n  public constructor(db: Database) {\n    this.db = db\n  }\n\n  public action() {\n    this.db.query()\n  }\n}\n\nconst db = new DbMysql()\nconst c = new Controller(db)\nc.action()\n"})}),"\n",(0,i.jsx)(e.h4,{id:"injection-container",children:"Injection Container"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-tsx",children:"import type { IProvider } from './providers'\nimport * as React from 'react'\n\nclass Injector {\n  private static container = new Map<string, any>()\n\n  static resolve<T>(target: Type<T>): T {\n    if (Injector.container.has(target.name))\n      return Injector.container.get(target.name)\n\n    const tokens = Reflect.getMetadata('design:types', target) || []\n    const injections = tokens.map((token: Type<any>): any =>\n      Injector.resolve(token)\n    )\n    // eslint-disable-next-line new-cap\n    const instance = new target(...injections)\n    Injector.container.set(target.name, instance)\n    return instance\n  }\n}\n\nexport interface IProvider<T> {\n  provide: () => T\n}\n\n@injectable()\nexport class NameProvider implements IProvider<string> {\n  provide() {\n    return 'World'\n  }\n}\n\nexport class Hello extends React.Component {\n  private readonly nameProvider: IProvider<string>\n\n  render() {\n    return (\n      <h1>\n        Hello\n        {this.nameProvider.provide()}\n        !\n      </h1>\n    )\n  }\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"mixin-pattern",children:"Mixin Pattern"}),"\n",(0,i.jsxs)(e.p,{children:["\u5c06\u591a\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u6df7\u5165\u540c\u4e00\u4e2a\u5bf9\u8c61, \u8fbe\u5230\u7ee7\u627f/\u6269\u5c55/\u7ec4\u5408\u7684\u6548\u679c.\nReact and Vue drop ",(0,i.jsx)(e.code,{children:"Mixin"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Prototype pollution"}),"\n",(0,i.jsx)(e.li,{children:"Dependency uncertainty."}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"prototype-mixin-pattern",children:"Prototype Mixin Pattern"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// Extend an existing object with a method from another\nfunction mixin(...args) {\n  const receivingClass = args[0]\n  const givingClass = args[1]\n\n  // Mixin provide certain methods\n  if (args[2]) {\n    for (let i = 2, len = args.length; i < len; i++)\n      receivingClass.prototype[args[i]] = givingClass.prototype[args[i]]\n  } else {\n    // Mixin provide obj\n    for (const methodName in givingClass.prototype) {\n      if (!receivingClass.prototype[methodName])\n        receivingClass.prototype[methodName] = givingClass.prototype[methodName]\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(e.h4,{id:"class-mixin-pattern",children:"Class Mixin Pattern"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"function MoveMixin(superclass) {\n  return class extends superclass {\n    moveUp() {\n      console.log('move up')\n    }\n\n    moveDown() {\n      console.log('move down')\n    }\n\n    stop() {\n      console.log('stop! in the name of love!')\n    }\n  }\n}\n\nclass CarAnimator {\n  moveLeft() {\n    console.log('move left')\n  }\n}\n\nclass PersonAnimator {\n  moveRandomly() {\n    console.log('move randomly')\n  }\n}\n\nclass Animator extends MoveMixin(CarAnimator) {}\n\nconst animator = new Animator()\nanimator.moveLeft()\nanimator.moveDown()\nanimator.stop()\n// Outputs:\n// move left\n// move down\n// stop! in the name of love!\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// \u6240\u6709 mixins \u90fd\u9700\u8981:\ntype Constructor<T = NonNullable<unknown>> = new (...args: any[]) => T\n\n/////////////\n// mixins \u4f8b\u5b50\n////////////\n\n// \u6dfb\u52a0\u5c5e\u6027\u7684\u6df7\u5408\u4f8b\u5b50\nfunction TimesTamped<TBase extends Constructor>(Base: TBase) {\n  return class extends Base {\n    timestamp = Date.now()\n  }\n}\n\n// \u6dfb\u52a0\u5c5e\u6027\u548c\u65b9\u6cd5\u7684\u6df7\u5408\u4f8b\u5b50\nfunction ActiveTable<TBase extends Constructor>(Base: TBase) {\n  return class extends Base {\n    isActivated = false\n\n    activate() {\n      this.isActivated = true\n    }\n\n    deactivate() {\n      this.isActivated = false\n    }\n  }\n}\n\n///////////\n// \u7ec4\u5408\u7c7b\n///////////\n\n// \u7b80\u7b54\u7684\u7c7b\nclass User {\n  name = ''\n}\n\n// \u6dfb\u52a0 TimesTamped \u7684 User\nconst TimestampedUser = TimesTamped(User)\n\n// Tina TimesTamped \u548c ActiveTable \u7684\u7c7b\nconst TimestampedActiveTableUser = TimesTamped(ActiveTable(User))\n\n//////////\n// \u4f7f\u7528\u7ec4\u5408\u7c7b\n//////////\n\nconst timestampedUserExample = new TimestampedUser()\nconsole.log(timestampedUserExample.timestamp)\n\nconst timestampedActiveTableUserExample = new TimestampedActiveTableUser()\nconsole.log(timestampedActiveTableUserExample.timestamp)\nconsole.log(timestampedActiveTableUserExample.isActivated)\n"})}),"\n",(0,i.jsx)(e.h2,{id:"programming-paradigms",children:"Programming Paradigms"}),"\n",(0,i.jsx)(e.p,{children:"Each programming language realizes one or more paradigms.\nEach paradigm is defined by a set of programming concepts.\n\u6bcf\u4e2a\u8303\u5f0f\u90fd\u7ea6\u675f\u4e86\u67d0\u79cd\u7f16\u5199\u4ee3\u7801\u7684\u65b9\u5f0f:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7ed3\u6784\u5316\u7f16\u7a0b\u662f\u5bf9\u7a0b\u5e8f\u63a7\u5236\u6743\u7684\u76f4\u63a5\u8f6c\u79fb\u7684\u9650\u5236."}),"\n",(0,i.jsx)(e.li,{children:"\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u662f\u5bf9\u7a0b\u5e8f\u63a7\u5236\u6743\u7684\u95f4\u63a5\u8f6c\u79fb\u7684\u9650\u5236."}),"\n",(0,i.jsx)(e.li,{children:"\u51fd\u6570\u5f0f\u7f16\u7a0b\u662f\u5bf9\u7a0b\u5e8f\u4e2d\u8d4b\u503c\u64cd\u4f5c\u7684\u9650\u5236."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"taxonomy-of-paradigms",children:"Taxonomy of Paradigms"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Taxonomy of Programming Paradigms",src:t(2445).A+"",title:"Taxonomy of Programming Paradigms",width:"2786",height:"1480"})}),"\n",(0,i.jsx)(e.p,{children:"Nondeterminism is important for real-world interaction.\nNamed state is important for modularity."}),"\n",(0,i.jsx)(e.h4,{id:"observable-nondeterminism",children:"Observable Nondeterminism"}),"\n",(0,i.jsxs)(e.p,{children:["During the execution, this choice is made by\na part of the run-time system called the scheduler.\nThe nondeterminism is observable\nif a user can see ",(0,i.jsx)(e.strong,{children:"different results"})," from executions\nthat start at the ",(0,i.jsx)(e.strong,{children:"same internal configuration"}),"."]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"concurrency or race condition (timing effects)"}),"\n",(0,i.jsx)(e.li,{children:"shared-state concurrency or message-passing concurrency"}),"\n",(0,i.jsx)(e.li,{children:"concurrent programming language e.g Java"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"named-state",children:"Named State"}),"\n",(0,i.jsx)(e.p,{children:"State is the ability to remember information (a sequence of values in time).\nDistinguish three axes of expressiveness, depending on whether the state is:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Unnamed or named."}),"\n",(0,i.jsx)(e.li,{children:"Deterministic or nondeterministic."}),"\n",(0,i.jsx)(e.li,{children:"Sequential or concurrent."}),"\n",(0,i.jsx)(e.li,{children:"Named, nondeterministic and concurrent paradigm\nas the most expressiveness of state."}),"\n",(0,i.jsx)(e.li,{children:"Named state for updatable memory (mutable state) and modularity."}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"The least expressive combination is functional programming\n(threaded state: unnamed, deterministic, sequential).\nAdding concurrency gives declarative concurrent programming\n(synchronous cells: unnamed, deterministic, concurrent).\nAdding nondeterministic choice gives concurrent logic programming\n(stream mergers: unnamed, nondeterministic, concurrent).\nAdding ports or cells, gives message passing or shared state\n(named, nondeterministic, concurrent)."}),"\n",(0,i.jsx)(e.h3,{id:"object-oriented-programming",children:"Object-Oriented Programming"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c01\u88c5: \u6a21\u5757\u5316\u4ee3\u7801, \u4fe1\u606f\u9690\u853d."}),"\n",(0,i.jsx)(e.li,{children:"\u7ee7\u627f: \u7236\u7c7b\u548c\u5b50\u7c7b\u5171\u4eab\u6570\u636e\u548c\u65b9\u6cd5, \u9ad8\u4ee3\u7801\u91cd\u7528\u7387\u548c\u53ef\u7ef4\u62a4\u6027."}),"\n",(0,i.jsx)(e.li,{children:"\u591a\u6001."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"functional-programming",children:"Functional Programming"}),"\n",(0,i.jsxs)(e.p,{children:["Based on the concept of first-class function or closure,\nwhich makes it equivalent to the \u03bb-calculus which is ",(0,i.jsx)(e.code,{children:"Turing complete"}),"."]}),"\n",(0,i.jsx)(e.h2,{id:"framework-paradigms",children:"Framework Paradigms"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"full-featured frameworks vs composing micro-libs"}),"\n",(0,i.jsx)(e.li,{children:"JSX vs templates"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["Evan You on Vue.js: ",(0,i.jsx)(e.strong,{children:"Seeking the Balance in Framework Design"}),"\non ",(0,i.jsx)(e.a,{href:"https://www.youtube.com/watch?v=ANtSWq-zI0s",children:"JSConf.Asia 2019"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Functional Logic"})," vs ",(0,i.jsx)(e.code,{children:"Imperative Logic"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Declarative UI"})," vs ",(0,i.jsx)(e.code,{children:"Imperative UI"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Immutable Data"})," vs ",(0,i.jsx)(e.code,{children:"Mutable Data"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Referential Equality Testing"})," vs ",(0,i.jsx)(e.code,{children:"Change Tracking"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Runtime"})," vs ",(0,i.jsx)(e.code,{children:"Compilation"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u6253\u7834\u6846\u67b6\u7684\u8303\u5f0f\u4e4b\u4e89, \u5176\u5b9e\u662f\u6539\u53d8\u601d\u8def. \u4ece\u601d\u8003\u4e0d\u540c\u8303\u5f0f\u4e4b\u95f4\u7684\u7ade\u4e89\u5173\u7cfb, \u8f6c\u53d8\u6210\u601d\u8003\u591a\u4e2a\u8303\u5f0f\u4e4b\u95f4\u7684\u534f\u540c\u5173\u7cfb.\nUseRef in React, Composition in Vue"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"third-party-libraries-usage",children:"Third-party Libraries Usage"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Look for Libraries that Have Accessibility Built in."}),"\n",(0,i.jsx)(e.li,{children:"Limit the Number of Third-party Libraries Use."}),"\n",(0,i.jsx)(e.li,{children:"Wrap Third-party Dependencies:"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-tsx",children:"import { DatePicker as LibraryXDatePicker } from 'LibraryX'\n\nfunction DatePicker(props) {\n  return <LibraryXDatePicker {...props} />\n}\n\nexport default DatePicker\n"})}),"\n",(0,i.jsx)(e.h3,{id:"framework-paradigms-comparison",children:"Framework Paradigms Comparison"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u521d\u59cb\u6e32\u67d3: Virtual DOM > \u810f\u68c0\u67e5 >= \u4f9d\u8d56\u6536\u96c6."}),"\n",(0,i.jsx)(e.li,{children:"\u5c0f\u91cf\u6570\u636e\u66f4\u65b0: \u4f9d\u8d56\u6536\u96c6 >> Virtual DOM + \u4f18\u5316 > \u810f\u68c0\u67e5\uff08\u65e0\u6cd5\u4f18\u5316\uff09 > Virtual DOM \u65e0\u4f18\u5316."}),"\n",(0,i.jsx)(e.li,{children:"\u5927\u91cf\u6570\u636e\u66f4\u65b0: \u810f\u68c0\u67e5 + \u4f18\u5316 >= \u4f9d\u8d56\u6536\u96c6 + \u4f18\u5316 > Virtual DOM\uff08\u65e0\u6cd5/\u65e0\u9700\u4f18\u5316\uff09>> MVVM \u65e0\u4f18\u5316."}),"\n",(0,i.jsx)(e.li,{children:"Angular: \u810f\u68c0\u67e5, React: Virtual DOM, Vue: Watch."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"mvc-pattern",children:"MVC Pattern"}),"\n",(0,i.jsx)(e.p,{children:"\u5728 MVC \u4e2d, \u89c6\u56fe\u4f4d\u4e8e\u6211\u4eec\u67b6\u6784\u7684\u9876\u90e8, \u5176\u80cc\u540e\u662f\u63a7\u5236\u5668.\n\u6a21\u578b\u5728\u63a7\u5236\u5668\u540e\u9762, \u800c\u56e0\u6b64\u6211\u4eec\u7684\u89c6\u56fe\u4e86\u89e3\u5f97\u5230\u6211\u4eec\u7684\u63a7\u5236\u5668, \u800c\u63a7\u5236\u5668\u4e86\u89e3\u5f97\u5230\u6a21\u578b.\n\u8fd9\u91cc, \u6211\u4eec\u7684\u89c6\u56fe\u6709\u5bf9\u6a21\u578b\u7684\u76f4\u63a5\u8bbf\u95ee.\n\u7136\u800c\u5c06\u6574\u4e2a\u6a21\u578b\u5b8c\u5168\u66b4\u9732\u7ed9\u89c6\u56fe\u53ef\u80fd\u4f1a\u6709\u5b89\u5168\u548c\u6027\u80fd\u635f\u5931,\n\u8fd9\u53d6\u51b3\u4e8e\u6211\u4eec\u5e94\u7528\u7a0b\u5e8f\u7684\u590d\u6742\u6027.\nMVVM \u5219\u5c1d\u8bd5\u53bb\u907f\u514d\u8fd9\u4e9b\u95ee\u9898."}),"\n",(0,i.jsx)(e.p,{children:"\u5728 MVP \u4e2d, \u63a7\u5236\u5668\u7684\u89d2\u8272\u88ab\u4ee3\u7406\u5668\u6240\u53d6\u4ee3, \u4ee3\u7406\u5668\u548c\u89c6\u56fe\u5904\u4e8e\u540c\u6837\u7684\u5730\u4f4d,\n\u89c6\u56fe\u548c\u6a21\u578b\u7684\u4e8b\u4ef6\u90fd\u88ab\u5b83\u4fa6\u542c\u7740\u5e76\u4e14\u63a5\u53d7\u5b83\u7684\u8c03\u89e3.\n\u4e0d\u540c\u4e8e MVVM, \u6ca1\u6709\u4e00\u4e2a\u5c06\u89c6\u56fe\u7ed1\u5b9a\u5230\u89c6\u56fe\u6a21\u578b\u7684\u673a\u5236, \u56e0\u6b64\u6211\u4eec\u8f6c\u800c\u4f9d\u8d56\u4e8e\u6bcf\u4e00\u4e2a\u89c6\u56fe\u90fd\u5b9e\u73b0\u4e00\u4e2a\u5141\u8bb8\u4ee3\u7406\u5668\u540c\u89c6\u56fe\u53bb\u4ea4\u4e92\u7684\u63a5\u53e3."}),"\n",(0,i.jsx)(e.p,{children:"MVVM \u8fdb\u4e00\u6b65\u5141\u8bb8\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u6a21\u578b\u7684\u7279\u5b9a\u89c6\u56fe\u5b50\u96c6, \u5305\u542b\u4e86\u72b6\u6001\u548c\u903b\u8f91\u4fe1\u606f,\n\u907f\u514d\u4e86\u5c06\u6a21\u578b\u5b8c\u5168\u66b4\u9732\u7ed9\u89c6\u56fe\u7684\u5fc5\u8981.\n\u4e0d\u540c\u4e8e MVP \u7684\u4ee3\u7406\u5668, \u89c6\u56fe\u6a21\u578b\u5e76\u4e0d\u9700\u8981\u53bb\u5f15\u7528\u4e00\u4e2a\u89c6\u56fe.\n\u89c6\u56fe\u53ef\u4ee5\u7ed1\u5b9a\u5230\u89c6\u56fe\u6a21\u578b\u7684\u5c5e\u6027\u4e0a\u9762, \u89c6\u56fe\u6a21\u578b\u5219\u53bb\u5c06\u5305\u542b\u5728\u6a21\u578b\u4e2d\u7684\u6570\u636e\u66b4\u9732\u7ed9\u89c6\u56fe.\n\u50cf\u6211\u4eec\u6240\u63d0\u5230\u8fc7\u7684, \u5bf9\u89c6\u56fe\u7684\u62bd\u8c61\u610f\u5473\u7740\u5176\u80cc\u540e\u7684\u4ee3\u7801\u9700\u8981\u8f83\u5c11\u7684\u903b\u8f91."}),"\n",(0,i.jsx)(e.h4,{id:"controller",children:"Controller"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5904\u7406\u8bf7\u6c42\u7684\u53c2\u6570."}),"\n",(0,i.jsx)(e.li,{children:"\u6e32\u67d3\u548c\u91cd\u5b9a\u5411."}),"\n",(0,i.jsx)(e.li,{children:"\u9009\u62e9 Model \u548c Service."}),"\n",(0,i.jsx)(e.li,{children:"\u5904\u7406 Session \u548c Cookies."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"mvvm-pattern",children:"MVVM Pattern"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"View"})," and ",(0,i.jsx)(e.code,{children:"ViewModel"})," communicate using data-bindings and events."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"ViewModel"})," can expose ",(0,i.jsx)(e.code,{children:"Model"})," attributes for data-binding."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"ViewModel"})," can contain interfaces\nfor fetching and manipulating properties exposed in ",(0,i.jsx)(e.code,{children:"View"}),"."]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"aop-pattern",children:"AOP Pattern"}),"\n",(0,i.jsx)(e.p,{children:"AOP (Aspect Oriented Programming)\n\u628a\u901a\u7528\u903b\u8f91\u62bd\u79bb\u51fa\u6765,\n\u901a\u8fc7\u5207\u9762\u7684\u65b9\u5f0f\u6dfb\u52a0\u5230\u67d0\u4e2a\u5730\u65b9,\n\u53ef\u4ee5\u590d\u7528\u548c\u52a8\u6001\u589e\u5220\u5207\u9762\u903b\u8f91:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Chain of responsibility pattern."}),"\n",(0,i.jsx)(e.li,{children:"Decorator pattern."}),"\n",(0,i.jsx)(e.li,{children:"Proxy pattern."}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Nest.js:\nMiddleware, Guard, Interceptor, Pipe, ExceptionFilter \u901a\u8fc7 AOP \u601d\u60f3,\n\u7075\u6d3b\u5730\u4f5c\u7528\u5728\u67d0\u4e2a\u8def\u7531\u6216\u8005\u5168\u90e8\u8def\u7531."}),"\n",(0,i.jsx)(e.p,{children:"Middleware \u5728\u6700\u5916\u5c42, \u5230\u8fbe\u67d0\u4e2a\u8def\u7531\u4e4b\u540e,\n\u5148\u8c03\u7528 Guard, Guard \u7528\u4e8e\u5224\u65ad\u8def\u7531\u6709\u6ca1\u6709\u6743\u9650\u8bbf\u95ee,\n\u518d\u8c03\u7528 Interceptor, \u5bf9 Controller \u524d\u540e\u6269\u5c55\u4e00\u4e9b\u903b\u8f91,\n\u5728\u5230\u8fbe\u76ee\u6807 Controller \u4e4b\u524d, \u4f1a\u8c03\u7528 Pipe \u6765\u5bf9\u53c2\u6570\u505a\u9a8c\u8bc1\u548c\u8f6c\u6362.\n\u6240\u6709\u7684 HttpException \u7684\u5f02\u5e38\u90fd\u4f1a\u88ab ExceptionFilter \u5904\u7406, \u8fd4\u56de\u4e0d\u540c\u7684\u54cd\u5e94."}),"\n",(0,i.jsx)(e.p,{children:"Nest.js \u901a\u8fc7 AOP \u7684\u67b6\u6784\u65b9\u5f0f, \u5b9e\u73b0\u4e86\u677e\u8026\u5408, \u6613\u4e8e\u7ef4\u62a4\u4e0e\u6269\u5c55\u7684\u67b6\u6784."}),"\n",(0,i.jsx)(e.h3,{id:"jquery-pattern",children:"jQuery Pattern"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Adapter pattern:\nadapted ",(0,i.jsx)(e.code,{children:"$.css()"})," API."]}),"\n",(0,i.jsxs)(e.li,{children:["Facade pattern:\nsimple ",(0,i.jsx)(e.code,{children:"$.get()"}),"/",(0,i.jsx)(e.code,{children:"$.post()"})," API over complicated ",(0,i.jsx)(e.code,{children:"$.ajax()"})," API."]}),"\n",(0,i.jsxs)(e.li,{children:["Pub-Sub pattern:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"$.on()"}),"/",(0,i.jsx)(e.code,{children:"$.off()"}),"/",(0,i.jsx)(e.code,{children:"$.trigger()"})," event system."]}),"\n",(0,i.jsx)(e.li,{children:"AJAX callback."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["Iterator pattern:\niterable ",(0,i.jsx)(e.code,{children:"$.each()"})," API."]}),"\n",(0,i.jsxs)(e.li,{children:["Proxy pattern:\n",(0,i.jsx)(e.code,{children:"$.proxy()"})," context binding."]}),"\n",(0,i.jsxs)(e.li,{children:["Builder pattern:\n",(0,i.jsx)(e.code,{children:"$.text()"}),"/",(0,i.jsx)(e.code,{children:"$.appendTo()"})," DOM builder."]}),"\n",(0,i.jsx)(e.li,{children:"Dependency injection pattern:\ncustom plugin system."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"framework-paradigms-reference",children:"Framework Paradigms Reference"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Even You presentation on ",(0,i.jsx)(e.a,{href:"https://www.youtube.com/watch?v=ANtSWq-zI0s",children:"JSConf Asia 2019"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:["Framework paradigms ",(0,i.jsx)(e.a,{href:"https://mp.weixin.qq.com/s/mZ7KuFjyCWNCAq7HnXg96A",children:"guide"}),"."]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"code-review",children:"Code Review"}),"\n",(0,i.jsx)(e.h3,{id:"code-review-basis",children:"Code Review Basis"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u903b\u8f91\u6b63\u786e."}),"\n",(0,i.jsx)(e.li,{children:"\u7b80\u5355\u6613\u61c2."}),"\n",(0,i.jsx)(e.li,{children:"\u7f16\u7a0b\u89c4\u8303 (Linter)."}),"\n",(0,i.jsx)(e.li,{children:"\u6a21\u5757\u5316."}),"\n",(0,i.jsx)(e.li,{children:"\u591a\u4f59\u6216\u91cd\u590d: \u4ee3\u7801/\u65e5\u5fd7/\u6d4b\u8bd5."}),"\n",(0,i.jsx)(e.li,{children:"\u91cd\u590d\u8f6e\u5b50: \u53ef\u88ab\u57fa\u672c\u5e93\u66ff\u6362."}),"\n",(0,i.jsx)(e.li,{children:"\u65e0\u5fc5\u8981\u7684\u5168\u5c40\u53d8\u91cf."}),"\n",(0,i.jsx)(e.li,{children:"\u4ee3\u7801\u8bef\u6ce8\u91ca."}),"\n",(0,i.jsx)(e.li,{children:"\u6b7b\u5faa\u73af: \u8fb9\u754c\u68c0\u67e5."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"code-smell-review",children:"Code Smell Review"}),"\n",(0,i.jsx)(e.p,{children:"Bad code smell:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Mysterious name."}),"\n",(0,i.jsx)(e.li,{children:"Duplicated code."}),"\n",(0,i.jsx)(e.li,{children:"Long function."}),"\n",(0,i.jsx)(e.li,{children:"Long parameter list."}),"\n",(0,i.jsx)(e.li,{children:"Large class."}),"\n",(0,i.jsx)(e.li,{children:"Global data."}),"\n",(0,i.jsx)(e.li,{children:"Mutable data."}),"\n",(0,i.jsx)(e.li,{children:"Divergent change (\u53d1\u6563\u5f0f\u53d8\u5316):\n\u67d0\u4e2a\u6a21\u5757\u7ecf\u5e38\u56e0\u4e3a\u4e0d\u540c\u7684\u539f\u56e0\u5728\u4e0d\u540c\u7684\u65b9\u5411\u4e0a\u53d1\u751f\u53d8\u5316."}),"\n",(0,i.jsx)(e.li,{children:"Shotgun surgery (\u9730\u5f39\u5f0f\u4fee\u6539):\n\u6bcf\u9047\u5230\u67d0\u79cd\u53d8\u5316, \u5fc5\u987b\u5728\u8bb8\u591a\u4e0d\u540c\u7684\u7c7b\u5185\u505a\u51fa\u8bb8\u591a\u5c0f\u4fee\u6539."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"security-review",children:"Security Review"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6240\u6709\u7684\u6570\u636e\u8f93\u5165\u662f\u5426\u90fd\u8fdb\u884c\u4e86\u68c0\u67e5 (\u68c0\u6d4b\u6b63\u786e\u7684\u7c7b\u578b, \u957f\u5ea6, \u683c\u5f0f\u548c\u8303\u56f4) \u5e76\u4e14\u8fdb\u884c\u4e86\u7f16\u7801?"}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u54ea\u91cc\u4f7f\u7528\u4e86\u7b2c\u4e09\u65b9\u5de5\u5177, \u8fd4\u56de\u7684\u9519\u8bef\u662f\u5426\u88ab\u6355\u83b7?"}),"\n",(0,i.jsx)(e.li,{children:"\u8f93\u51fa\u7684\u503c\u662f\u5426\u8fdb\u884c\u4e86\u68c0\u67e5\u5e76\u4e14\u7f16\u7801?"}),"\n",(0,i.jsx)(e.li,{children:"\u65e0\u6548\u7684\u53c2\u6570\u503c\u662f\u5426\u80fd\u591f\u5904\u7406?"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"documents-review",children:"Documents Review"}),"\n",(0,i.jsx)(e.h3,{id:"comments-review",children:"Comments Review"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u7ed3\u6784."}),"\n",(0,i.jsx)(e.li,{children:"\u8ba1\u91cf\u5355\u4f4d."}),"\n",(0,i.jsx)(e.li,{children:"\u63cf\u8ff0\u4ee3\u7801\u610f\u56fe."}),"\n",(0,i.jsx)(e.li,{children:"\u51fd\u6570\u5757."}),"\n",(0,i.jsx)(e.li,{children:"\u975e\u5e38\u89c4\u884c\u4e3a/\u8fb9\u754c\u68c0\u67e5."}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"TODO"})," \u6807\u8bb0."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"FIXME"})," \u6807\u8bb0."]}),"\n",(0,i.jsx)(e.li,{children:"\u7b2c\u4e09\u65b9\u5e93\u6587\u6863."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"test-review",children:"Test Review"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ee3\u7801\u662f\u5426\u53ef\u4ee5\u6d4b\u8bd5? \u6bd4\u5982, \u4e0d\u8981\u6dfb\u52a0\u592a\u591a\u7684\u6216\u662f\u9690\u85cf\u7684\u4f9d\u8d56\u5173\u7cfb, \u4e0d\u80fd\u591f\u521d\u59cb\u5316\u5bf9\u8c61, \u6d4b\u8bd5\u6846\u67b6\u53ef\u4ee5\u4f7f\u7528\u65b9\u6cd5\u7b49."}),"\n",(0,i.jsx)(e.li,{children:"\u662f\u5426\u5b58\u5728\u6d4b\u8bd5, \u5b83\u4eec\u662f\u5426\u53ef\u4ee5\u88ab\u7406\u89e3? \u6bd4\u5982, \u81f3\u5c11\u8fbe\u5230\u4f60\u6ee1\u610f\u7684\u4ee3\u7801\u8986\u76d6 (code coverage)."}),"\n",(0,i.jsx)(e.li,{children:"\u5355\u5143\u6d4b\u8bd5\u662f\u5426\u771f\u6b63\u7684\u6d4b\u8bd5\u4e86\u4ee3\u7801\u662f\u5426\u53ef\u4ee5\u5b8c\u6210\u9884\u671f\u7684\u529f\u80fd?"}),"\n",(0,i.jsxs)(e.li,{children:["\u662f\u5426\u68c0\u67e5\u4e86\u6570\u7ec4\u7684",(0,i.jsx)(e.code,{children:"\u8d8a\u754c"}),"\u9519\u8bef?"]}),"\n",(0,i.jsx)(e.li,{children:"\u662f\u5426\u6709\u53ef\u4ee5\u88ab\u5df2\u7ecf\u5b58\u5728\u7684 API \u6240\u66ff\u4ee3\u7684\u6d4b."}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"refactoring",children:"Refactoring"}),"\n",(0,i.jsx)(e.h3,{id:"refactoring-basis",children:"Refactoring Basis"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Extract function: \u590d\u7528\u4ee3\u7801."}),"\n",(0,i.jsx)(e.li,{children:"Inline function: \u7b80\u5316\u4ee3\u7801."}),"\n",(0,i.jsx)(e.li,{children:"Extract variable: \u5f15\u5165\u89e3\u91ca\u6027\u53d8\u91cf."}),"\n",(0,i.jsx)(e.li,{children:"Inline variable: \u7b80\u5316\u4ee3\u7801."}),"\n",(0,i.jsx)(e.li,{children:"Change function declaration: \u4f18\u5316\u53ef\u8bfb\u6027."}),"\n",(0,i.jsx)(e.li,{children:"Rename variable: \u4f18\u5316\u53ef\u8bfb\u6027."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"encapsulation-refactoring",children:"Encapsulation Refactoring"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Introduce parameter object: \u51cf\u5c11\u51fd\u6570\u53c2\u6570, \u5c01\u88c5\u6570\u636e."}),"\n",(0,i.jsx)(e.li,{children:"Encapsulate record: \u5c06\u952e\u503c\u5bf9\u5c01\u88c5\u6210\u5bf9\u8c61."}),"\n",(0,i.jsx)(e.li,{children:"Encapsulate Collection: \u5c06\u96c6\u5408\u5c01\u88c5\u6210\u5bf9\u8c61."}),"\n",(0,i.jsx)(e.li,{children:"Encapsulate primitive: \u5c06\u57fa\u672c\u7c7b\u578b\u5c01\u88c5\u6210\u5bf9\u8c61."}),"\n",(0,i.jsx)(e.li,{children:"Combine function into class."}),"\n",(0,i.jsx)(e.li,{children:"Combine function into transform."}),"\n",(0,i.jsx)(e.li,{children:"Extract class: \u6a21\u5757\u5316\u4ee3\u7801."}),"\n",(0,i.jsx)(e.li,{children:"\u5b57\u6bb5\u4e0e\u65b9\u6cd5\u7684\u4e0a\u79fb: \u590d\u7528\u4ee3\u7801."}),"\n",(0,i.jsx)(e.li,{children:"\u5b57\u6bb5\u4e0e\u65b9\u6cd5\u7684\u4e0b\u79fb: \u63a5\u53e3\u9694\u79bb."}),"\n",(0,i.jsx)(e.li,{children:"\u7528\u7ec4\u5408 (Composite) \u4e0e\u59d4\u6258 (Delegate) \u4ee3\u66ff\u7ee7\u627f (Extend):\n\u5c06\u7d27\u8026\u5408\u8f6c\u5316\u4e3a\u677e\u8026\u5408."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"condition-refactoring",children:"Condition Refactoring"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Decompose conditional statement: \u5f15\u5165\u89e3\u91ca\u6027\u6761\u4ef6\u8bed\u53e5\u6216\u51fd\u6570."}),"\n",(0,i.jsx)(e.li,{children:"Use guard clause and assertion: \u6d88\u9664\u590d\u6742\u5d4c\u5957\u6761\u4ef6\u8bed\u53e5."}),"\n",(0,i.jsxs)(e.li,{children:["\u6d88\u9664\u4e0d\u5fc5\u8981\u6761\u4ef6\u8bed\u53e5:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Introduce special case."}),"\n",(0,i.jsx)(e.li,{children:"Polymorphism: e.g strategy pattern."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"api-refactoring",children:"API Refactoring"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Split query from modifier: \u63d0\u53d6\u526f\u4f5c\u7528\u8bed\u53e5."}),"\n",(0,i.jsx)(e.li,{children:"Parameterize function:\n\u4e24\u4e2a\u51fd\u6570\u903b\u8f91\u975e\u5e38\u76f8\u4f3c, \u53ea\u6709\u4e00\u4e9b\u5b57\u9762\u91cf\u503c\u4e0d\u540c,\n\u53ef\u4ee5\u5c06\u5176\u5408\u5e76\u6210\u4e00\u4e2a\u51fd\u6570, \u4ee5\u53c2\u6570\u7684\u5f62\u5f0f\u4f20\u5165\u4e0d\u540c\u7684\u503c, \u4ece\u800c\u6d88\u9664\u91cd\u590d\u4ee3\u7801."}),"\n",(0,i.jsx)(e.li,{children:"Remove flag argument:\n\u9488\u5bf9\u53c2\u6570\u7684\u6bcf\u4e00\u79cd\u53ef\u80fd\u503c, \u65b0\u5efa\u4e00\u4e2a\u660e\u786e\u51fd\u6570, \u4f18\u5316\u53ef\u8bfb\u6027."}),"\n",(0,i.jsx)(e.li,{children:"Factory pattern: \u5c01\u88c5\u6784\u9020\u51fd\u6570."}),"\n",(0,i.jsx)(e.li,{children:"command pattern: \u5c01\u88c5\u666e\u901a\u51fd\u6570."}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"reference",children:"Reference"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["JavaScript ",(0,i.jsx)(e.a,{href:"https://www.patterns.dev",children:"patterns"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:["JavaScript design ",(0,i.jsx)(e.a,{href:"http://www.dofactory.com/javascript/design-patterns",children:"patterns"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:["Refactoring design ",(0,i.jsx)(e.a,{href:"https://refactoring.guru/design-patterns",children:"patterns"}),"."]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},4841:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/DesignPatterns-0cc48f386054737330533f9820b776c2.png"},2445:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/ProgrammingParadigms-0372721b030f912cde3494c3c347c205.jpg"},842:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>l});var s=t(8101);const i={},r=s.createContext(i);function a(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);